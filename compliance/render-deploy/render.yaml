services:
  - type: web
    name: defectdojo
    env: docker
    plan: standard
    region: oregon
    dockerfilePath: ./Dockerfile
    dockerContext: .
    healthCheckPath: /login
    envVars:
      - key: DD_SECRET_KEY
        generateValue: true
      - key: DD_CREDENTIAL_AES_256_KEY
        generateValue: true
      - key: DD_ALLOWED_HOSTS
        value: "*"
      - key: DD_CSRF_TRUSTED_ORIGINS
        sync: false
      - key: DD_DEBUG
        value: "False"
      - key: DD_ADMIN_USER
        value: "admin"
      - key: DD_ADMIN_PASSWORD
        value: "admin"
      - key: DD_INITIALIZE
        value: "true"
      - key: DD_SESSION_COOKIE_SECURE
        value: "True"
      - key: DD_CSRF_COOKIE_SECURE
        value: "True"
      - key: DD_SESSION_COOKIE_HTTPONLY
        value: "True"
      - key: DD_CSRF_COOKIE_HTTPONLY
        value: "False"
      - key: DD_SESSION_COOKIE_SAMESITE
        value: "Lax"
      - key: DD_CSRF_COOKIE_SAMESITE
        value: "Lax"
      - key: PORT
        value: "10000"
    disk:
      name: defectdojo-data
      mountPath: /var/lib/postgresql/data
      sizeGB: 10