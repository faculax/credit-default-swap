[uwsgi]
# Django application
module = dojo.wsgi:application
chdir = /opt/django-DefectDojo

# Process management
master = true
processes = 4
threads = 2
enable-threads = true
thunder-lock = true
vacuum = true
die-on-term = true

# Binding
http-socket = 127.0.0.1:3031
socket-timeout = 300

# Performance tuning
max-requests = 5000
max-requests-delta = 100
harakiri = 300
worker-reload-mercy = 60

# Buffer sizes
buffer-size = 32768
post-buffering = 8192

# Logging
disable-logging = false
log-date = true
log-maxsize = 104857600
log-backupname = /app/logs/uwsgi.log.old

# Static files (nginx handles these, but fallback)
static-map = /static=/opt/django-DefectDojo/static
static-map = /media=/opt/django-DefectDojo/media

# Security
uid = root
gid = root
chmod-socket = 666
no-orphans = true
vacuum-on-exit = true

# Application loading
lazy-apps = false
py-autoreload = 1
