[{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\App.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isSubmitting' is assigned a value but never used.","line":20,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'submitError' is assigned a value but never used.","line":21,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport './App.css';\nimport TopBar from './components/top-bar/TopBar';\nimport CDSTradeForm from './components/cds-trade-form/CDSTradeForm';\nimport ConfirmationModal from './components/confirmation-modal/ConfirmationModal';\nimport CDSBlotter from './components/cds-blotter/CDSBlotter';\nimport TradeDetailModal from './components/trade-detail-modal/TradeDetailModal';\nimport PortfolioPage from './components/portfolio/PortfolioPage';\nimport BondPage from './components/bond/BondPage';\nimport BasketPage from './components/basket/BasketPage';\nimport { CDSTrade } from './data/referenceData';\nimport { cdsTradeService, CDSTradeRequest, CDSTradeResponse } from './services/cdsTradeService';\n\ntype ViewMode = 'form' | 'blotter' | 'portfolios' | 'bonds' | 'baskets';\n\nfunction App() {\n  const [currentView, setCurrentView] = useState<ViewMode>('form');\n  const [isConfirmationOpen, setIsConfirmationOpen] = useState(false);\n  const [bookedTrade, setBookedTrade] = useState<CDSTradeResponse | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  const [selectedTrade, setSelectedTrade] = useState<CDSTradeResponse | null>(null);\n  const [isTradeDetailOpen, setIsTradeDetailOpen] = useState(false);\n\n  const handleTradeSubmit = async (trade: CDSTrade) => {\n    setIsSubmitting(true);\n    setSubmitError(null);\n\n    try {\n      const tradeRequest: CDSTradeRequest = {\n        referenceEntity: trade.referenceEntity,\n        notionalAmount: trade.notionalAmount,\n        spread: trade.spread,\n        maturityDate: trade.maturityDate,\n        effectiveDate: trade.effectiveDate,\n        counterparty: trade.counterparty,\n        tradeDate: trade.tradeDate,\n        currency: trade.currency,\n        premiumFrequency: trade.premiumFrequency,\n        dayCountConvention: trade.dayCountConvention,\n        buySellProtection: trade.buySellProtection,\n        restructuringClause: trade.restructuringClause,\n        paymentCalendar: trade.paymentCalendar,\n        accrualStartDate: trade.accrualStartDate,\n        tradeStatus: trade.tradeStatus,\n        recoveryRate: trade.recoveryRate,\n      };\n\n      const savedTrade = await cdsTradeService.createTrade(tradeRequest);\n\n      setBookedTrade(savedTrade);\n      setIsConfirmationOpen(true);\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      setSubmitError(`Failed to book trade: ${errorMessage}`);\n      alert(`Error booking trade: ${errorMessage}`);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleCloseConfirmation = () => {\n    setIsConfirmationOpen(false);\n    setBookedTrade(null);\n  };\n\n  const handleTradeSelect = (trade: CDSTradeResponse) => {\n    setSelectedTrade(trade);\n    setIsTradeDetailOpen(true);\n  };\n\n  const handleCloseTradeDetail = () => {\n    setIsTradeDetailOpen(false);\n    setSelectedTrade(null);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-fd-dark\">\n      <TopBar />\n\n      {/* Sub-navigation bar */}\n      <div className=\"bg-fd-darker border-b border-fd-border\">\n        <div className=\"px-8 py-4\">\n          <div className=\"flex items-center space-x-6\">\n            <button\n              onClick={() => setCurrentView('form')}\n              className={`px-4 py-2 text-sm font-medium rounded-md transition-colors ${\n                currentView === 'form'\n                  ? 'bg-fd-green text-fd-dark'\n                  : 'text-fd-text hover:text-fd-green hover:bg-fd-dark'\n              }`}\n            >\n              New Single-Name CDS\n            </button>\n            <button\n              onClick={() => setCurrentView('blotter')}\n              className={`px-4 py-2 text-sm font-medium rounded-md transition-colors ${\n                currentView === 'blotter'\n                  ? 'bg-fd-green text-fd-dark'\n                  : 'text-fd-text hover:text-fd-green hover:bg-fd-dark'\n              }`}\n            >\n              Single-Name CDS Blotter\n            </button>\n            <button\n              onClick={() => setCurrentView('bonds')}\n              className={`px-4 py-2 text-sm font-medium rounded-md transition-colors ${\n                currentView === 'bonds'\n                  ? 'bg-fd-green text-fd-dark'\n                  : 'text-fd-text hover:text-fd-green hover:bg-fd-dark'\n              }`}\n            >\n              Corporate Bonds\n            </button>\n            <button\n              onClick={() => setCurrentView('baskets')}\n              className={`px-4 py-2 text-sm font-medium rounded-md transition-colors ${\n                currentView === 'baskets'\n                  ? 'bg-fd-green text-fd-dark'\n                  : 'text-fd-text hover:text-fd-green hover:bg-fd-dark'\n              }`}\n            >\n              Basket Derivatives\n            </button>\n            <button\n              onClick={() => setCurrentView('portfolios')}\n              className={`px-4 py-2 text-sm font-medium rounded-md transition-colors ${\n                currentView === 'portfolios'\n                  ? 'bg-fd-green text-fd-dark'\n                  : 'text-fd-text hover:text-fd-green hover:bg-fd-dark'\n              }`}\n            >\n              CDS Portfolios\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-8\">\n        {/* Content based on current view */}\n        {currentView === 'form' ? (\n          <CDSTradeForm onSubmit={handleTradeSubmit} />\n        ) : currentView === 'blotter' ? (\n          <CDSBlotter onTradeSelect={handleTradeSelect} />\n        ) : currentView === 'portfolios' ? (\n          <PortfolioPage />\n        ) : currentView === 'baskets' ? (\n          <BasketPage />\n        ) : (\n          <BondPage />\n        )}\n\n        <ConfirmationModal\n          isOpen={isConfirmationOpen}\n          trade={bookedTrade}\n          onClose={handleCloseConfirmation}\n        />\n\n        <TradeDetailModal\n          isOpen={isTradeDetailOpen}\n          trade={selectedTrade}\n          onClose={handleCloseTradeDetail}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\basket\\BasketCreationModal.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":150,"column":9,"nodeType":"MemberExpression","endLine":150,"endColumn":22},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":160,"column":5,"nodeType":"MemberExpression","endLine":160,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":160,"column":27,"nodeType":"MemberExpression","endLine":160,"endColumn":41},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":164,"column":9,"nodeType":"MemberExpression","endLine":164,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":196,"column":19,"nodeType":"MemberExpression","endLine":196,"endColumn":41},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":473,"column":42,"nodeType":"MemberExpression","endLine":473,"endColumn":66}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Basket, BasketType, BasketConstituent } from '../../types/basket';\nimport { basketService } from '../../services/basketService';\nimport { REFERENCE_ENTITIES } from '../../data/referenceData';\n\ninterface BasketCreationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: (basket: Basket) => void;\n}\n\ninterface FormErrors {\n  [key: string]: string;\n}\n\nconst BASKET_TYPE_OPTIONS = [\n  { value: 'FIRST_TO_DEFAULT', label: 'First-to-Default (FTD)' },\n  { value: 'NTH_TO_DEFAULT', label: 'N-th-to-Default' },\n  { value: 'TRANCHETTE', label: 'Tranchette (Loss Slice)' },\n];\n\nconst PREMIUM_FREQUENCY_OPTIONS = [\n  { value: 'QUARTERLY', label: 'Quarterly' },\n  { value: 'SEMI_ANNUAL', label: 'Semi-Annual' },\n  { value: 'ANNUAL', label: 'Annual' },\n];\n\nconst DAY_COUNT_OPTIONS = [\n  { value: 'ACT_360', label: 'ACT/360' },\n  { value: 'ACT_365', label: 'ACT/365' },\n  { value: 'THIRTY_360', label: '30/360' },\n];\n\nconst CURRENCY_OPTIONS = ['USD', 'EUR', 'GBP', 'JPY'];\n\nconst SENIORITY_OPTIONS = [\n  { value: 'SR_UNSEC', label: 'Senior Unsecured' },\n  { value: 'SR_SEC', label: 'Senior Secured' },\n  { value: 'SUBORD', label: 'Subordinated' },\n];\n\nconst BasketCreationModal: React.FC<BasketCreationModalProps> = ({\n  isOpen,\n  onClose,\n  onSuccess,\n}) => {\n  const [formData, setFormData] = useState<Partial<Basket>>({\n    type: 'FIRST_TO_DEFAULT',\n    currency: 'USD',\n    premiumFrequency: 'QUARTERLY',\n    dayCount: 'ACT_360',\n    constituents: [],\n  });\n\n  const [constituents, setConstituents] = useState<Partial<BasketConstituent>[]>([]);\n  const [errors, setErrors] = useState<FormErrors>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Calculate normalized weights dynamically\n  const calculateNormalizedWeights = () => {\n    const totalWeight = constituents.reduce((sum, c) => sum + (c.weight || 0), 0);\n\n    if (totalWeight === 0) {\n      // Equal weights if none provided\n      return constituents.map(() => 1 / constituents.length);\n    }\n\n    // Normalize to sum to 1\n    return constituents.map((c) => (c.weight || 0) / totalWeight);\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: FormErrors = {};\n\n    if (!formData.name?.trim()) {\n      newErrors.name = 'Basket name is required';\n    }\n\n    if (!formData.type) {\n      newErrors.type = 'Basket type is required';\n    }\n\n    if (formData.type === 'NTH_TO_DEFAULT' && (!formData.nth || formData.nth < 1)) {\n      newErrors.nth = 'N-th value must be >= 1';\n    }\n\n    if (formData.type === 'NTH_TO_DEFAULT' && formData.nth && formData.nth > constituents.length) {\n      newErrors.nth = `N-th value cannot exceed number of constituents (${constituents.length})`;\n    }\n\n    if (formData.type === 'TRANCHETTE') {\n      if (\n        formData.attachmentPoint === undefined ||\n        formData.attachmentPoint < 0 ||\n        formData.attachmentPoint > 1\n      ) {\n        newErrors.attachmentPoint = 'Attachment point must be between 0 and 1';\n      }\n      if (\n        formData.detachmentPoint === undefined ||\n        formData.detachmentPoint < 0 ||\n        formData.detachmentPoint > 1\n      ) {\n        newErrors.detachmentPoint = 'Detachment point must be between 0 and 1';\n      }\n      if (\n        formData.attachmentPoint !== undefined &&\n        formData.detachmentPoint !== undefined &&\n        formData.attachmentPoint >= formData.detachmentPoint\n      ) {\n        newErrors.detachmentPoint = 'Detachment point must be greater than attachment point';\n      }\n    }\n\n    if (!formData.notional || formData.notional <= 0) {\n      newErrors.notional = 'Notional must be positive';\n    }\n\n    if (!formData.maturityDate) {\n      newErrors.maturityDate = 'Maturity date is required';\n    }\n\n    if (constituents.length === 0) {\n      newErrors.constituents = 'At least one constituent is required';\n    }\n\n    // Check for duplicate issuers\n    const issuerSet = new Set<string>();\n    constituents.forEach((c, idx) => {\n      if (c.issuer) {\n        if (issuerSet.has(c.issuer)) {\n          newErrors[`constituent_${idx}_issuer`] = 'Duplicate issuer';\n        }\n        issuerSet.add(c.issuer);\n      } else {\n        newErrors[`constituent_${idx}_issuer`] = 'Issuer is required';\n      }\n    });\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleInputChange = (field: keyof Basket, value: any) => {\n    setFormData((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n\n    if (errors[field]) {\n      setErrors((prev) => ({\n        ...prev,\n        [field]: '',\n      }));\n    }\n  };\n\n  const handleConstituentChange = (index: number, field: keyof BasketConstituent, value: any) => {\n    const updated = [...constituents];\n    updated[index] = { ...updated[index], [field]: value };\n    setConstituents(updated);\n\n    const errorKey = `constituent_${index}_${field}`;\n    if (errors[errorKey]) {\n      setErrors((prev) => ({\n        ...prev,\n        [errorKey]: '',\n      }));\n    }\n  };\n\n  const addConstituent = () => {\n    setConstituents([...constituents, { seniority: 'SR_UNSEC' }]);\n  };\n\n  const removeConstituent = (index: number) => {\n    setConstituents(constituents.filter((_, i) => i !== index));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      const normalizedWeights = calculateNormalizedWeights();\n\n      const basketRequest = {\n        ...formData,\n        constituents: constituents.map((c, idx) => ({\n          issuer: c.issuer!,\n          weight: normalizedWeights[idx],\n          recoveryOverride: c.recoveryOverride,\n          seniority: c.seniority || 'SR_UNSEC',\n          sector: c.sector,\n        })),\n      };\n\n      const basket = await basketService.createBasket(basketRequest as any);\n      onSuccess(basket);\n      resetForm();\n      onClose();\n    } catch (error: any) {\n      setErrors({ submit: error.message || 'Failed to create basket' });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      type: 'FIRST_TO_DEFAULT',\n      currency: 'USD',\n      premiumFrequency: 'QUARTERLY',\n      dayCount: 'ACT_360',\n      constituents: [],\n    });\n    setConstituents([]);\n    setErrors({});\n  };\n\n  if (!isOpen) return null;\n\n  const normalizedWeights = calculateNormalizedWeights();\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-fd-darker rounded-lg shadow-xl border border-fd-border max-w-6xl w-full max-h-[90vh] overflow-y-auto m-4\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"sticky top-0 bg-fd-darker border-b border-fd-border px-6 py-4 flex justify-between items-center z-10\">\n          <h2 className=\"text-xl font-semibold text-fd-text\">Create New Basket Derivative</h2>\n          <button\n            onClick={onClose}\n            className=\"text-fd-text-muted hover:text-fd-text transition-colors\"\n            aria-label=\"Close modal\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Basic Information Section */}\n            <div className=\"md:col-span-2\">\n              <h3 className=\"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4\">\n                Basic Information\n              </h3>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Basket Name <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={formData.name || ''}\n                onChange={(e) => handleInputChange('name', e.target.value)}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.name ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n                placeholder=\"e.g., US_IG_TECH_FTD_5Y\"\n              />\n              {errors.name && <p className=\"mt-1 text-sm text-red-400\">{errors.name}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Basket Type <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.type}\n                onChange={(e) => handleInputChange('type', e.target.value as BasketType)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {BASKET_TYPE_OPTIONS.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n              {errors.type && <p className=\"mt-1 text-sm text-red-400\">{errors.type}</p>}\n            </div>\n\n            {/* Conditional Fields for N-th-to-Default */}\n            {formData.type === 'NTH_TO_DEFAULT' && (\n              <div>\n                <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                  N-th Value <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  value={formData.nth || ''}\n                  onChange={(e) => handleInputChange('nth', parseInt(e.target.value))}\n                  className={`w-full px-3 py-2 bg-fd-dark border ${errors.nth ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n                  placeholder=\"e.g., 2 for 2nd-to-default\"\n                />\n                {errors.nth && <p className=\"mt-1 text-sm text-red-400\">{errors.nth}</p>}\n              </div>\n            )}\n\n            {/* Conditional Fields for Tranchette */}\n            {formData.type === 'TRANCHETTE' && (\n              <>\n                <div>\n                  <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                    Attachment Point (0-1) <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    max=\"1\"\n                    value={formData.attachmentPoint || ''}\n                    onChange={(e) =>\n                      handleInputChange('attachmentPoint', parseFloat(e.target.value))\n                    }\n                    className={`w-full px-3 py-2 bg-fd-dark border ${errors.attachmentPoint ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n                    placeholder=\"e.g., 0.03 for 3%\"\n                  />\n                  {errors.attachmentPoint && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.attachmentPoint}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                    Detachment Point (0-1) <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    max=\"1\"\n                    value={formData.detachmentPoint || ''}\n                    onChange={(e) =>\n                      handleInputChange('detachmentPoint', parseFloat(e.target.value))\n                    }\n                    className={`w-full px-3 py-2 bg-fd-dark border ${errors.detachmentPoint ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n                    placeholder=\"e.g., 0.07 for 7%\"\n                  />\n                  {errors.detachmentPoint && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.detachmentPoint}</p>\n                  )}\n                </div>\n              </>\n            )}\n\n            {/* Economics Section */}\n            <div className=\"md:col-span-2 mt-4\">\n              <h3 className=\"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4\">\n                Economics\n              </h3>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Currency <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.currency}\n                onChange={(e) => handleInputChange('currency', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {CURRENCY_OPTIONS.map((curr) => (\n                  <option key={curr} value={curr}>\n                    {curr}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Notional <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={formData.notional || ''}\n                onChange={(e) => handleInputChange('notional', parseFloat(e.target.value))}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.notional ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n                placeholder=\"e.g., 10000000\"\n              />\n              {errors.notional && <p className=\"mt-1 text-sm text-red-400\">{errors.notional}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Premium Frequency\n              </label>\n              <select\n                value={formData.premiumFrequency}\n                onChange={(e) => handleInputChange('premiumFrequency', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {PREMIUM_FREQUENCY_OPTIONS.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Day Count Convention\n              </label>\n              <select\n                value={formData.dayCount}\n                onChange={(e) => handleInputChange('dayCount', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {DAY_COUNT_OPTIONS.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Maturity Date <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"date\"\n                value={formData.maturityDate || ''}\n                onChange={(e) => handleInputChange('maturityDate', e.target.value)}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.maturityDate ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n              />\n              {errors.maturityDate && (\n                <p className=\"mt-1 text-sm text-red-400\">{errors.maturityDate}</p>\n              )}\n            </div>\n\n            {/* Constituents Section */}\n            <div className=\"md:col-span-2 mt-4\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-sm font-semibold text-fd-text-muted uppercase tracking-wide\">\n                  Basket Constituents <span className=\"text-red-500\">*</span>\n                </h3>\n                <button\n                  type=\"button\"\n                  onClick={addConstituent}\n                  className=\"px-3 py-1 text-sm bg-fd-green text-fd-dark rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green\"\n                >\n                  + Add Constituent\n                </button>\n              </div>\n\n              {errors.constituents && (\n                <p className=\"mb-2 text-sm text-red-400\">{errors.constituents}</p>\n              )}\n\n              {constituents.map((constituent, index) => {\n                const normalizedWeight = normalizedWeights[index];\n                return (\n                  <div\n                    key={index}\n                    className=\"mb-4 p-4 bg-fd-dark border border-fd-border rounded-md\"\n                  >\n                    <div className=\"flex justify-between items-center mb-3\">\n                      <h4 className=\"text-sm font-medium text-fd-text\">Constituent #{index + 1}</h4>\n                      <button\n                        type=\"button\"\n                        onClick={() => removeConstituent(index)}\n                        className=\"text-red-400 hover:text-red-300 text-sm\"\n                      >\n                        Remove\n                      </button>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                      <div>\n                        <label className=\"block text-xs font-medium text-fd-text-muted mb-1\">\n                          Issuer <span className=\"text-red-500\">*</span>\n                        </label>\n                        <select\n                          value={constituent.issuer || ''}\n                          onChange={(e) => handleConstituentChange(index, 'issuer', e.target.value)}\n                          className={`w-full px-2 py-1 text-sm bg-fd-darker border ${errors[`constituent_${index}_issuer`] ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green`}\n                        >\n                          <option value=\"\">Select Issuer</option>\n                          {REFERENCE_ENTITIES.map((entity) => (\n                            <option key={entity.code} value={entity.code}>\n                              {entity.code} - {entity.name}\n                            </option>\n                          ))}\n                        </select>\n                        {errors[`constituent_${index}_issuer`] && (\n                          <p className=\"mt-1 text-xs text-red-400\">\n                            {errors[`constituent_${index}_issuer`]}\n                          </p>\n                        )}\n                      </div>\n\n                      <div>\n                        <label className=\"block text-xs font-medium text-fd-text-muted mb-1\">\n                          Weight (optional, normalized)\n                        </label>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          value={constituent.weight || ''}\n                          onChange={(e) =>\n                            handleConstituentChange(\n                              index,\n                              'weight',\n                              parseFloat(e.target.value) || 0\n                            )\n                          }\n                          className=\"w-full px-2 py-1 text-sm bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green\"\n                          placeholder={`Auto: ${normalizedWeight.toFixed(4)}`}\n                        />\n                        {normalizedWeight !== undefined && (\n                          <p className=\"mt-1 text-xs text-fd-text-muted\">\n                            Normalized: {(normalizedWeight * 100).toFixed(2)}%\n                          </p>\n                        )}\n                      </div>\n\n                      <div>\n                        <label className=\"block text-xs font-medium text-fd-text-muted mb-1\">\n                          Seniority\n                        </label>\n                        <select\n                          value={constituent.seniority || 'SR_UNSEC'}\n                          onChange={(e) =>\n                            handleConstituentChange(index, 'seniority', e.target.value)\n                          }\n                          className=\"w-full px-2 py-1 text-sm bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green\"\n                        >\n                          {SENIORITY_OPTIONS.map((opt) => (\n                            <option key={opt.value} value={opt.value}>\n                              {opt.label}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-xs font-medium text-fd-text-muted mb-1\">\n                          Recovery Override (0-1)\n                        </label>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          min=\"0\"\n                          max=\"1\"\n                          value={constituent.recoveryOverride || ''}\n                          onChange={(e) =>\n                            handleConstituentChange(\n                              index,\n                              'recoveryOverride',\n                              parseFloat(e.target.value)\n                            )\n                          }\n                          className=\"w-full px-2 py-1 text-sm bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green\"\n                          placeholder=\"Optional\"\n                        />\n                      </div>\n\n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-xs font-medium text-fd-text-muted mb-1\">\n                          Sector (optional)\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={constituent.sector || ''}\n                          onChange={(e) => handleConstituentChange(index, 'sector', e.target.value)}\n                          className=\"w-full px-2 py-1 text-sm bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green\"\n                          placeholder=\"e.g., TECH, ENERGY\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Error Message */}\n          {errors.submit && (\n            <div className=\"mt-4 p-3 bg-red-900/20 border border-red-500/30 rounded-md\">\n              <p className=\"text-sm text-red-400\">{errors.submit}</p>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"mt-6 flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-darker focus:outline-none focus:ring-2 focus:ring-fd-green\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className=\"px-4 py-2 text-sm font-medium text-fd-dark bg-fd-green border border-transparent rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green disabled:bg-fd-green/50 disabled:cursor-not-allowed\"\n            >\n              {isSubmitting ? 'Creating...' : 'Create Basket'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default BasketCreationModal;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\basket\\BasketDetailView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\basket\\BasketList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\basket\\BasketPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\bond\\BondCreationModal.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":112,"column":9,"nodeType":"MemberExpression","endLine":112,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Bond, bondService } from '../../services/bondService';\nimport { REFERENCE_ENTITIES, SECTORS } from '../../data/referenceData';\n\ninterface BondCreationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: (bond: Bond) => void;\n}\n\ninterface FormErrors {\n  [key: string]: string;\n}\n\nconst SENIORITY_OPTIONS = [\n  { value: 'SR_UNSEC', label: 'Senior Unsecured' },\n  { value: 'SR_SEC', label: 'Senior Secured' },\n  { value: 'SUBORD', label: 'Subordinated' },\n];\n\nconst COUPON_FREQUENCY_OPTIONS = [\n  { value: 'ANNUAL', label: 'Annual' },\n  { value: 'SEMI_ANNUAL', label: 'Semi-Annual' },\n  { value: 'QUARTERLY', label: 'Quarterly' },\n];\n\nconst DAY_COUNT_OPTIONS = [\n  { value: 'ACT_ACT', label: 'ACT/ACT' },\n  { value: 'THIRTY_360', label: '30/360' },\n];\n\nconst CURRENCY_OPTIONS = ['USD', 'EUR', 'GBP', 'JPY'];\n\nconst BondCreationModal: React.FC<BondCreationModalProps> = ({ isOpen, onClose, onSuccess }) => {\n  const [formData, setFormData] = useState<Partial<Bond>>({\n    currency: 'USD',\n    couponFrequency: 'SEMI_ANNUAL',\n    dayCount: 'ACT_ACT',\n    seniority: 'SR_UNSEC',\n    settlementDays: 2,\n    faceValue: 100,\n    priceConvention: 'CLEAN',\n  });\n\n  const [errors, setErrors] = useState<FormErrors>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [userModifiedSector, setUserModifiedSector] = useState(false);\n\n  // Auto-populate sector when issuer changes\n  useEffect(() => {\n    if (!userModifiedSector && formData.issuer) {\n      const entity = REFERENCE_ENTITIES.find((e) => e.code === formData.issuer);\n      if (entity?.sector) {\n        setFormData((prev) => ({\n          ...prev,\n          sector: entity.sector,\n        }));\n      }\n    }\n  }, [formData.issuer, userModifiedSector]);\n\n  const validateForm = (): boolean => {\n    const newErrors: FormErrors = {};\n\n    if (!formData.issuer?.trim()) {\n      newErrors.issuer = 'Issuer is required';\n    }\n\n    if (!formData.notional || formData.notional <= 0) {\n      newErrors.notional = 'Notional must be positive';\n    }\n\n    if (!formData.couponRate || formData.couponRate < 0) {\n      newErrors.couponRate = 'Coupon rate must be >= 0';\n    }\n\n    if (formData.couponRate && formData.couponRate > 1) {\n      newErrors.couponRate = 'Coupon rate exceeds 100% - please verify';\n    }\n\n    if (!formData.issueDate) {\n      newErrors.issueDate = 'Issue date is required';\n    }\n\n    if (!formData.maturityDate) {\n      newErrors.maturityDate = 'Maturity date is required';\n    }\n\n    if (\n      formData.issueDate &&\n      formData.maturityDate &&\n      new Date(formData.issueDate) >= new Date(formData.maturityDate)\n    ) {\n      newErrors.maturityDate = 'Maturity date must be after issue date';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleInputChange = (field: keyof Bond, value: any) => {\n    // Track if user manually edits the sector\n    if (field === 'sector') {\n      setUserModifiedSector(true);\n    }\n\n    setFormData((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n\n    if (errors[field]) {\n      setErrors((prev) => ({\n        ...prev,\n        [field]: '',\n      }));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      const bond = await bondService.createBond(formData as Bond);\n      onSuccess(bond);\n      resetForm();\n      onClose();\n    } catch (error: any) {\n      setErrors({ submit: error.message || 'Failed to create bond' });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      currency: 'USD',\n      couponFrequency: 'SEMI_ANNUAL',\n      dayCount: 'ACT_ACT',\n      seniority: 'SR_UNSEC',\n      settlementDays: 2,\n      faceValue: 100,\n      priceConvention: 'CLEAN',\n    });\n    setErrors({});\n    setUserModifiedSector(false);\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-fd-darker rounded-lg shadow-xl border border-fd-border max-w-4xl w-full max-h-[90vh] overflow-y-auto m-4\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"sticky top-0 bg-fd-darker border-b border-fd-border px-6 py-4 flex justify-between items-center z-10\">\n          <h2 className=\"text-xl font-semibold text-fd-text\">Create New Bond</h2>\n          <button\n            onClick={onClose}\n            className=\"text-fd-text-muted hover:text-fd-text transition-colors\"\n            aria-label=\"Close modal\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Issuer & Credit Info Section */}\n            <div className=\"md:col-span-2\">\n              <h3 className=\"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4\">\n                Issuer & Credit Information\n              </h3>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Issuer <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.issuer || ''}\n                onChange={(e) => handleInputChange('issuer', e.target.value)}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.issuer ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n              >\n                <option value=\"\">Select Issuer</option>\n                {REFERENCE_ENTITIES.map((entity) => (\n                  <option key={entity.code} value={entity.code}>\n                    {entity.code} - {entity.name}\n                  </option>\n                ))}\n              </select>\n              {errors.issuer && <p className=\"mt-1 text-sm text-red-400\">{errors.issuer}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Seniority <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.seniority}\n                onChange={(e) => handleInputChange('seniority', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {SENIORITY_OPTIONS.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">Sector</label>\n              <select\n                value={formData.sector || ''}\n                onChange={(e) => handleInputChange('sector', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                <option value=\"\">Auto-suggested from issuer</option>\n                {SECTORS.map((sector) => (\n                  <option key={sector.code} value={sector.code}>\n                    {sector.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">ISIN</label>\n              <input\n                type=\"text\"\n                value={formData.isin || ''}\n                onChange={(e) => handleInputChange('isin', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted\"\n                placeholder=\"Optional\"\n                maxLength={12}\n              />\n            </div>\n\n            {/* Economics Section */}\n            <div className=\"md:col-span-2 mt-4\">\n              <h3 className=\"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4\">\n                Bond Economics\n              </h3>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Currency <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.currency}\n                onChange={(e) => handleInputChange('currency', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {CURRENCY_OPTIONS.map((curr) => (\n                  <option key={curr} value={curr}>\n                    {curr}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Notional <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={formData.notional || ''}\n                onChange={(e) => handleInputChange('notional', parseFloat(e.target.value))}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.notional ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted`}\n              />\n              {errors.notional && <p className=\"mt-1 text-sm text-red-400\">{errors.notional}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Coupon Rate (decimal) <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.000001\"\n                value={formData.couponRate || ''}\n                onChange={(e) => handleInputChange('couponRate', parseFloat(e.target.value))}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.couponRate ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted`}\n                placeholder=\"e.g., 0.045 for 4.5%\"\n              />\n              {errors.couponRate && (\n                <p className=\"mt-1 text-sm text-red-400\">{errors.couponRate}</p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Coupon Frequency\n              </label>\n              <select\n                value={formData.couponFrequency}\n                onChange={(e) => handleInputChange('couponFrequency', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {COUPON_FREQUENCY_OPTIONS.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Day Count Convention\n              </label>\n              <select\n                value={formData.dayCount}\n                onChange={(e) => handleInputChange('dayCount', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {DAY_COUNT_OPTIONS.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Dates Section */}\n            <div className=\"md:col-span-2 mt-4\">\n              <h3 className=\"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4\">\n                Dates\n              </h3>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Issue Date <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"date\"\n                value={formData.issueDate || ''}\n                onChange={(e) => handleInputChange('issueDate', e.target.value)}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.issueDate ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n              />\n              {errors.issueDate && <p className=\"mt-1 text-sm text-red-400\">{errors.issueDate}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Maturity Date <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"date\"\n                value={formData.maturityDate || ''}\n                onChange={(e) => handleInputChange('maturityDate', e.target.value)}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.maturityDate ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n              />\n              {errors.maturityDate && (\n                <p className=\"mt-1 text-sm text-red-400\">{errors.maturityDate}</p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">Settlement Days</label>\n              <input\n                type=\"number\"\n                value={formData.settlementDays || ''}\n                onChange={(e) => handleInputChange('settlementDays', parseInt(e.target.value))}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">Face Value</label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={formData.faceValue || ''}\n                onChange={(e) => handleInputChange('faceValue', parseFloat(e.target.value))}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted\"\n              />\n            </div>\n          </div>\n\n          {/* Error Message */}\n          {errors.submit && (\n            <div className=\"mt-4 p-3 bg-red-900/20 border border-red-500/30 rounded-md\">\n              <p className=\"text-sm text-red-400\">{errors.submit}</p>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"mt-6 flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-darker focus:outline-none focus:ring-2 focus:ring-fd-green\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className=\"px-4 py-2 text-sm font-medium text-fd-dark bg-fd-green border border-transparent rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green disabled:bg-fd-green/50 disabled:cursor-not-allowed\"\n            >\n              {isSubmitting ? 'Creating...' : 'Create Bond'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default BondCreationModal;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\bond\\BondDetailView.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadBondDetails'. Either include it or remove the dependency array.","line":24,"column":6,"nodeType":"ArrayExpression","endLine":24,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [bondId, loadBondDetails]","fix":{"range":[959,967],"text":"[bondId, loadBondDetails]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\bond\\BondList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\bond\\BondPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\cds-blotter\\CDSBlotter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\cds-trade-form\\CDSTradeForm.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":136,"column":9,"nodeType":"MemberExpression","endLine":136,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":151,"column":9,"nodeType":"MemberExpression","endLine":151,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'parseFormattedNumber' is assigned a value but never used.","line":166,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":166,"endColumn":29},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":219,"column":28,"nodeType":"MemberExpression","endLine":219,"endColumn":45},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":228,"column":28,"nodeType":"MemberExpression","endLine":228,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  REFERENCE_ENTITIES,\n  COUNTERPARTIES,\n  CURRENCIES,\n  PREMIUM_FREQUENCIES,\n  DAY_COUNT_CONVENTIONS,\n  RESTRUCTURING_CLAUSES,\n  PAYMENT_CALENDARS,\n  TRADE_STATUSES,\n  CDSTrade,\n} from '../../data/referenceData';\nimport { bondService, Bond } from '../../services/bondService';\n\ninterface FormErrors {\n  [key: string]: string;\n}\n\ninterface CDSTradeFormProps {\n  onSubmit: (trade: CDSTrade) => void;\n}\n\nconst CDSTradeForm: React.FC<CDSTradeFormProps> = ({ onSubmit }) => {\n  const [formData, setFormData] = useState<Partial<CDSTrade>>({\n    tradeDate: new Date().toISOString().split('T')[0],\n    currency: 'USD',\n    premiumFrequency: 'QUARTERLY',\n    dayCountConvention: 'ACT_360',\n    buySellProtection: 'BUY',\n    paymentCalendar: 'NYC',\n    tradeStatus: 'PENDING',\n    recoveryRate: 40,\n  });\n\n  const [errors, setErrors] = useState<FormErrors>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [availableBonds, setAvailableBonds] = useState<Bond[]>([]);\n  const [loadingBonds, setLoadingBonds] = useState(false);\n\n  // Fetch bonds when reference entity changes\n  useEffect(() => {\n    const fetchBonds = async () => {\n      if (!formData.referenceEntity) {\n        setAvailableBonds([]);\n        return;\n      }\n\n      setLoadingBonds(true);\n      try {\n        const bonds = await bondService.getBondsByIssuer(formData.referenceEntity);\n        setAvailableBonds(bonds);\n      } catch (error) {\n        console.error('Error fetching bonds:', error);\n        setAvailableBonds([]);\n      } finally {\n        setLoadingBonds(false);\n      }\n    };\n\n    fetchBonds();\n  }, [formData.referenceEntity]);\n\n  const validateForm = (): boolean => {\n    const newErrors: FormErrors = {};\n\n    // Required field validations\n    if (!formData.referenceEntity) {\n      newErrors.referenceEntity = 'Reference Entity is required';\n    }\n\n    if (formData.referenceEntity && !formData.obligation?.id) {\n      newErrors.obligation = 'Obligation is required';\n    }\n\n    if (!formData.notionalAmount || formData.notionalAmount <= 0) {\n      newErrors.notionalAmount = 'Notional Amount must be greater than 0';\n    }\n\n    if (!formData.spread || formData.spread < 0) {\n      newErrors.spread = 'Spread must be 0 or greater';\n    }\n\n    if (!formData.recoveryRate || formData.recoveryRate < 0 || formData.recoveryRate > 100) {\n      newErrors.recoveryRate = 'Recovery Rate must be between 0 and 100';\n    }\n\n    if (!formData.maturityDate) {\n      newErrors.maturityDate = 'Maturity Date is required';\n    }\n\n    if (!formData.effectiveDate) {\n      newErrors.effectiveDate = 'Effective Date is required';\n    }\n\n    if (!formData.counterparty) {\n      newErrors.counterparty = 'Counterparty is required';\n    }\n\n    if (!formData.tradeDate) {\n      newErrors.tradeDate = 'Trade Date is required';\n    }\n\n    if (!formData.accrualStartDate) {\n      newErrors.accrualStartDate = 'Accrual Start Date is required';\n    }\n\n    // Date validations\n    if (\n      formData.effectiveDate &&\n      formData.maturityDate &&\n      new Date(formData.effectiveDate) >= new Date(formData.maturityDate)\n    ) {\n      newErrors.maturityDate = 'Maturity Date must be after Effective Date';\n    }\n\n    if (\n      formData.tradeDate &&\n      formData.effectiveDate &&\n      new Date(formData.tradeDate) > new Date(formData.effectiveDate)\n    ) {\n      newErrors.effectiveDate = 'Effective Date must be on or after Trade Date';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleInputChange = (field: keyof CDSTrade, value: any) => {\n    setFormData((prev) => {\n      const updates: Partial<CDSTrade> = {};\n\n      // Handle obligation specially - convert to nested object\n      if (field === 'obligation') {\n        updates.obligation = value ? { id: value } : undefined;\n      } else {\n        updates[field] = value as any;\n      }\n\n      // Clear obligation when reference entity changes\n      if (field === 'referenceEntity' && prev.referenceEntity !== value) {\n        updates.obligation = undefined;\n      }\n\n      return {\n        ...prev,\n        ...updates,\n      };\n    });\n\n    // Clear error for this field when user starts typing\n    if (errors[field]) {\n      setErrors((prev) => ({\n        ...prev,\n        [field]: '',\n      }));\n    }\n  };\n\n  // Format number with commas for display\n  const formatNumberWithCommas = (num: number | undefined): string => {\n    if (!num && num !== 0) return '';\n    return num.toLocaleString('en-US');\n  };\n\n  // Parse formatted string back to number\n  const parseFormattedNumber = (str: string): number => {\n    return parseFloat(str.replace(/,/g, '')) || 0;\n  };\n\n  // Handle notional amount input with formatting\n  const handleNotionalChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const rawValue = e.target.value.replace(/,/g, ''); // Remove commas\n    const numValue = parseFloat(rawValue);\n\n    if (!isNaN(numValue) || rawValue === '') {\n      handleInputChange('notionalAmount', rawValue === '' ? undefined : numValue);\n    }\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    // Defensive normalization\n    if (formData.tradeStatus === 'SETTLED' || formData.tradeStatus === 'CONFIRMED') {\n      formData.tradeStatus = 'ACTIVE';\n    }\n\n    // Simulate API call delay\n    setTimeout(() => {\n      onSubmit(formData as CDSTrade);\n      setIsSubmitting(false);\n\n      // Reset form\n      setFormData({\n        tradeDate: new Date().toISOString().split('T')[0],\n        currency: 'USD',\n        premiumFrequency: 'QUARTERLY',\n        dayCountConvention: 'ACT_360',\n        buySellProtection: 'BUY',\n        paymentCalendar: 'NYC',\n        tradeStatus: 'PENDING',\n        recoveryRate: 40,\n      });\n    }, 1000);\n  };\n\n  const inputClassName = (fieldName: string) => {\n    const baseClass =\n      'w-full px-3 py-2 bg-fd-input border rounded-md text-fd-text placeholder-fd-text-muted focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-fd-green';\n    const errorClass = 'border-red-500';\n    const normalClass = 'border-fd-border';\n\n    return `${baseClass} ${errors[fieldName] ? errorClass : normalClass}`;\n  };\n\n  const selectClassName = (fieldName: string) => {\n    const baseClass =\n      'w-full px-3 py-2 bg-fd-input border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-fd-green';\n    const errorClass = 'border-red-500';\n    const normalClass = 'border-fd-border';\n\n    return `${baseClass} ${errors[fieldName] ? errorClass : normalClass}`;\n  };\n\n  const generateRandomData = () => {\n    // Helper function to get random item from array\n    const getRandomItem = (array: any[]) => array[Math.floor(Math.random() * array.length)];\n\n    // Helper function to get random date within a range (days offset from today)\n    const getRandomDate = (startDays: number, endDays: number) => {\n      const start = new Date();\n      start.setDate(start.getDate() + startDays);\n      const end = new Date();\n      end.setDate(end.getDate() + endDays);\n\n      const randomTime = start.getTime() + Math.random() * (end.getTime() - start.getTime());\n      return new Date(randomTime).toISOString().split('T')[0];\n    };\n\n    // Generate trades that started in the PAST for demo purposes\n    // This allows demonstrating coupon payments immediately\n\n    // Trade date: 24-48 months ago (2-4 years in the past) for more coupons\n    const tradeDate = getRandomDate(-365 * 4, -365 * 2);\n\n    // Effective date: 1-7 days after trade date (still in the past)\n    const tradeDateObj = new Date(tradeDate);\n    const effectiveDaysOffset = Math.floor(Math.random() * 7) + 1;\n    const effectiveDateObj = new Date(tradeDateObj);\n    effectiveDateObj.setDate(effectiveDateObj.getDate() + effectiveDaysOffset);\n    const effectiveDate = effectiveDateObj.toISOString().split('T')[0];\n\n    // Maturity date: 2-5 years from TODAY (in the future)\n    const maturityDate = getRandomDate(365 * 2, 365 * 5);\n\n    // Accrual start date: same as effective date\n    const accrualStartDate = effectiveDate;\n\n    // Generate round notional amounts (5M, 10M, 20M, 50M, 100M, 200M, 500M)\n    const roundNotionals = [5000000, 10000000, 20000000, 50000000, 100000000, 200000000, 500000000];\n    const notionalAmount = getRandomItem(roundNotionals);\n\n    const randomData: Partial<CDSTrade> = {\n      referenceEntity: getRandomItem(REFERENCE_ENTITIES).code,\n      counterparty: getRandomItem(COUNTERPARTIES).code,\n      currency: getRandomItem(CURRENCIES).code,\n      notionalAmount,\n      spread: Math.floor(Math.random() * 500) + 50, // 50 to 550 bps\n      buySellProtection: Math.random() > 0.5 ? 'BUY' : 'SELL',\n      tradeDate,\n      effectiveDate,\n      maturityDate,\n      accrualStartDate,\n      premiumFrequency: getRandomItem(PREMIUM_FREQUENCIES).value,\n      dayCountConvention: getRandomItem(DAY_COUNT_CONVENTIONS).value,\n      restructuringClause: Math.random() > 0.3 ? getRandomItem(RESTRUCTURING_CLAUSES).value : '', // 70% chance of having a clause\n      paymentCalendar: getRandomItem(PAYMENT_CALENDARS).value,\n      tradeStatus: 'ACTIVE', // Always generate ACTIVE trades for demo purposes\n      recoveryRate: 40, // Default recovery rate\n    };\n    setFormData(randomData);\n    setErrors({}); // Clear any existing errors\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-2xl font-bold text-fd-text\">New CDS Trade Entry</h2>\n        <button\n          type=\"button\"\n          onClick={generateRandomData}\n          className=\"px-4 py-2 bg-fd-teal text-fd-dark font-medium rounded hover:bg-fd-cyan transition-colors flex items-center space-x-2\"\n        >\n          <span></span>\n          <span>Fill Random Data</span>\n        </button>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {/* Row 1: Reference Entity, Counterparty, Currency */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Reference Entity <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.referenceEntity || ''}\n              onChange={(e) => handleInputChange('referenceEntity', e.target.value)}\n              className={selectClassName('referenceEntity')}\n            >\n              <option value=\"\">Select Reference Entity</option>\n              {REFERENCE_ENTITIES.map((entity) => (\n                <option key={entity.code} value={entity.code}>\n                  {entity.code} - {entity.name}\n                </option>\n              ))}\n            </select>\n            {errors.referenceEntity && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.referenceEntity}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Counterparty <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.counterparty || ''}\n              onChange={(e) => handleInputChange('counterparty', e.target.value)}\n              className={selectClassName('counterparty')}\n            >\n              <option value=\"\">Select Counterparty</option>\n              {COUNTERPARTIES.map((cp) => (\n                <option key={cp.code} value={cp.code}>\n                  {cp.name}\n                </option>\n              ))}\n            </select>\n            {errors.counterparty && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.counterparty}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Currency <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.currency || 'USD'}\n              onChange={(e) => handleInputChange('currency', e.target.value)}\n              className={selectClassName('currency')}\n            >\n              {CURRENCIES.map((curr) => (\n                <option key={curr.code} value={curr.code}>\n                  {curr.code} - {curr.name}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        {/* Row 1.5: Obligation (conditional on reference entity) */}\n        {formData.referenceEntity && (\n          <div className=\"grid grid-cols-1 gap-4\">\n            <div>\n              <label className=\"block text-fd-text font-medium mb-2\">\n                Obligation (Bond) <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.obligation?.id || ''}\n                onChange={(e) =>\n                  handleInputChange(\n                    'obligation',\n                    e.target.value ? Number(e.target.value) : undefined\n                  )\n                }\n                className={selectClassName('obligation')}\n                disabled={loadingBonds}\n              >\n                <option value=\"\">Select Obligation</option>\n                {loadingBonds && <option value=\"\">Loading bonds...</option>}\n                {!loadingBonds && availableBonds.length === 0 && (\n                  <option value=\"\">No bonds available for {formData.referenceEntity}</option>\n                )}\n                {!loadingBonds &&\n                  availableBonds.map((bond) => (\n                    <option key={bond.id} value={bond.id}>\n                      {bond.isin ? `${bond.isin} - ` : ''}\n                      {bond.issuer} {bond.seniority} - Coupon: {bond.couponRate}% - Maturity:{' '}\n                      {new Date(bond.maturityDate).toLocaleDateString()}\n                    </option>\n                  ))}\n              </select>\n              <p className=\"text-xs text-fd-text-muted mt-1\">\n                Select a specific bond from {formData.referenceEntity}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* Row 2: Notional Amount, Spread, Buy/Sell Protection */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Notional Amount <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              value={formatNumberWithCommas(formData.notionalAmount)}\n              onChange={handleNotionalChange}\n              className={inputClassName('notionalAmount')}\n              placeholder=\"e.g., 10,000,000\"\n            />\n            {errors.notionalAmount && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.notionalAmount}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Spread (bps) <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              min=\"0\"\n              value={formData.spread || ''}\n              onChange={(e) => handleInputChange('spread', parseFloat(e.target.value))}\n              className={inputClassName('spread')}\n              placeholder=\"e.g., 100\"\n            />\n            {errors.spread && <p className=\"text-red-500 text-sm mt-1\">{errors.spread}</p>}\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Recovery Rate (%) <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"number\"\n              step=\"1\"\n              min=\"0\"\n              max=\"100\"\n              value={formData.recoveryRate || 40}\n              onChange={(e) => handleInputChange('recoveryRate', parseFloat(e.target.value))}\n              className={inputClassName('recoveryRate')}\n              placeholder=\"e.g., 40\"\n            />\n            {errors.recoveryRate && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.recoveryRate}</p>\n            )}\n          </div>\n        </div>\n\n        {/* Row 3: Buy/Sell Protection */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Buy/Sell Protection <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.buySellProtection || 'BUY'}\n              onChange={(e) => handleInputChange('buySellProtection', e.target.value)}\n              className={selectClassName('buySellProtection')}\n            >\n              <option value=\"BUY\">Buy Protection</option>\n              <option value=\"SELL\">Sell Protection</option>\n            </select>\n          </div>\n        </div>\n\n        {/* Row 4: Trade Date, Effective Date, Maturity Date */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Trade Date <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"date\"\n              value={formData.tradeDate || ''}\n              onChange={(e) => handleInputChange('tradeDate', e.target.value)}\n              className={inputClassName('tradeDate')}\n            />\n            {errors.tradeDate && <p className=\"text-red-500 text-sm mt-1\">{errors.tradeDate}</p>}\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Effective Date <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"date\"\n              value={formData.effectiveDate || ''}\n              onChange={(e) => handleInputChange('effectiveDate', e.target.value)}\n              className={inputClassName('effectiveDate')}\n            />\n            {errors.effectiveDate && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.effectiveDate}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Maturity Date <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"date\"\n              value={formData.maturityDate || ''}\n              onChange={(e) => handleInputChange('maturityDate', e.target.value)}\n              className={inputClassName('maturityDate')}\n            />\n            {errors.maturityDate && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.maturityDate}</p>\n            )}\n          </div>\n        </div>\n\n        {/* Row 4: Premium Frequency, Day Count Convention, Accrual Start Date */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Premium Frequency <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.premiumFrequency || 'QUARTERLY'}\n              onChange={(e) => handleInputChange('premiumFrequency', e.target.value)}\n              className={selectClassName('premiumFrequency')}\n            >\n              {PREMIUM_FREQUENCIES.map((freq) => (\n                <option key={freq.value} value={freq.value}>\n                  {freq.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Day Count Convention <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.dayCountConvention || 'ACT_360'}\n              onChange={(e) => handleInputChange('dayCountConvention', e.target.value)}\n              className={selectClassName('dayCountConvention')}\n            >\n              {DAY_COUNT_CONVENTIONS.map((dcc) => (\n                <option key={dcc.value} value={dcc.value}>\n                  {dcc.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Accrual Start Date <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"date\"\n              value={formData.accrualStartDate || ''}\n              onChange={(e) => handleInputChange('accrualStartDate', e.target.value)}\n              className={inputClassName('accrualStartDate')}\n            />\n            {errors.accrualStartDate && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.accrualStartDate}</p>\n            )}\n          </div>\n        </div>\n\n        {/* Row 5: Payment Calendar, Restructuring Clause, Trade Status */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Payment Calendar <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.paymentCalendar || 'NYC'}\n              onChange={(e) => handleInputChange('paymentCalendar', e.target.value)}\n              className={selectClassName('paymentCalendar')}\n            >\n              {PAYMENT_CALENDARS.map((cal) => (\n                <option key={cal.value} value={cal.value}>\n                  {cal.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">Restructuring Clause</label>\n            <select\n              value={formData.restructuringClause || ''}\n              onChange={(e) => handleInputChange('restructuringClause', e.target.value)}\n              className={selectClassName('restructuringClause')}\n            >\n              <option value=\"\">None</option>\n              {RESTRUCTURING_CLAUSES.map((clause) => (\n                <option key={clause.value} value={clause.value}>\n                  {clause.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Trade Status <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.tradeStatus || 'PENDING'}\n              onChange={(e) => handleInputChange('tradeStatus', e.target.value)}\n              className={selectClassName('tradeStatus')}\n            >\n              {TRADE_STATUSES.map((status) => (\n                <option key={status.value} value={status.value}>\n                  {status.label}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        {/* Submit Button */}\n        <div className=\"flex justify-end space-x-4 pt-6 border-t border-fd-border\">\n          <button\n            type=\"button\"\n            onClick={() => {\n              setFormData({\n                tradeDate: new Date().toISOString().split('T')[0],\n                currency: 'USD',\n                premiumFrequency: 'QUARTERLY',\n                dayCountConvention: 'ACT_360',\n                buySellProtection: 'BUY',\n                paymentCalendar: 'NYC',\n                tradeStatus: 'PENDING',\n                recoveryRate: 40,\n              });\n              setErrors({});\n            }}\n            className=\"px-6 py-2 bg-transparent border border-fd-border text-fd-text rounded hover:bg-fd-dark transition-colors\"\n          >\n            Clear Form\n          </button>\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className=\"px-6 py-2 bg-fd-green text-fd-dark font-medium rounded hover:bg-fd-green-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n          >\n            {isSubmitting ? 'Booking Trade...' : 'Book Trade'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default CDSTradeForm;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\confirmation-modal\\ConfirmationModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\credit-event-modal\\CreditEventModal.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":119,"column":9,"nodeType":"MemberExpression","endLine":119,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nexport type CreditEventType =\n  | 'BANKRUPTCY'\n  | 'FAILURE_TO_PAY'\n  | 'RESTRUCTURING'\n  | 'OBLIGATION_DEFAULT'\n  | 'REPUDIATION_MORATORIUM'\n  | 'PAYOUT';\nexport type SettlementMethod = 'CASH' | 'PHYSICAL';\n\nexport interface CreateCreditEventRequest {\n  eventType: CreditEventType;\n  eventDate: string;\n  noticeDate: string;\n  settlementMethod: SettlementMethod;\n  comments?: string;\n}\n\ninterface CreditEventModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (request: CreateCreditEventRequest) => Promise<void>;\n  tradeId: number;\n  isLoading?: boolean;\n}\n\nconst CreditEventModal: React.FC<CreditEventModalProps> = ({\n  isOpen,\n  onClose,\n  onSubmit,\n  tradeId,\n  isLoading = false,\n}) => {\n  // Get today's date in YYYY-MM-DD format\n  const getTodayDate = () => {\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  };\n\n  const [formData, setFormData] = useState<CreateCreditEventRequest>({\n    eventType: 'RESTRUCTURING',\n    eventDate: getTodayDate(),\n    noticeDate: getTodayDate(),\n    settlementMethod: 'PHYSICAL',\n    comments: '',\n  });\n\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const eventTypeOptions: { value: CreditEventType; label: string }[] = [\n    { value: 'RESTRUCTURING', label: 'Restructuring' },\n    { value: 'BANKRUPTCY', label: 'Bankruptcy' },\n  ];\n\n  const settlementMethodOptions: { value: SettlementMethod; label: string }[] = [\n    { value: 'PHYSICAL', label: 'Physical Settlement' },\n    { value: 'CASH', label: 'Cash Settlement' },\n  ];\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n\n    if (!formData.eventType) {\n      newErrors.eventType = 'Event type is required';\n    }\n\n    if (!formData.eventDate) {\n      newErrors.eventDate = 'Event date is required';\n    } else if (new Date(formData.eventDate) > new Date()) {\n      newErrors.eventDate = 'Event date cannot be in the future';\n    }\n\n    if (!formData.noticeDate) {\n      newErrors.noticeDate = 'Notice date is required';\n    } else if (formData.eventDate && new Date(formData.noticeDate) < new Date(formData.eventDate)) {\n      newErrors.noticeDate = 'Notice date must be on or after event date';\n    }\n\n    if (!formData.settlementMethod) {\n      newErrors.settlementMethod = 'Settlement method is required';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      await onSubmit(formData);\n      // Reset form on successful submission\n      setFormData({\n        eventType: 'RESTRUCTURING',\n        eventDate: getTodayDate(),\n        noticeDate: getTodayDate(),\n        settlementMethod: 'PHYSICAL',\n        comments: '',\n      });\n      setErrors({});\n      onClose();\n    } catch (error) {\n      console.error('Error submitting credit event:', error);\n    }\n  };\n\n  const handleInputChange = (field: keyof CreateCreditEventRequest, value: string) => {\n    setFormData((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n\n    // Clear error when user starts typing\n    if (errors[field]) {\n      setErrors((prev) => ({\n        ...prev,\n        [field]: '',\n      }));\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6 w-full max-w-md max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-semibold text-fd-text\">Record Credit Event</h2>\n          <button\n            onClick={onClose}\n            className=\"text-fd-text-muted hover:text-fd-text transition-colors\"\n            disabled={isLoading}\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label htmlFor=\"eventType\" className=\"block text-sm font-medium text-fd-text mb-1\">\n              Event Type *\n            </label>\n            <select\n              id=\"eventType\"\n              value={formData.eventType}\n              onChange={(e) => handleInputChange('eventType', e.target.value)}\n              className={`w-full px-3 py-2 bg-fd-dark border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text ${\n                errors.eventType ? 'border-red-500' : 'border-fd-border'\n              }`}\n              disabled={isLoading}\n            >\n              {eventTypeOptions.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </select>\n            {errors.eventType && <p className=\"mt-1 text-sm text-red-400\">{errors.eventType}</p>}\n          </div>\n\n          <div>\n            <label htmlFor=\"eventDate\" className=\"block text-sm font-medium text-fd-text mb-1\">\n              Event Date *\n            </label>\n            <input\n              type=\"date\"\n              id=\"eventDate\"\n              value={formData.eventDate}\n              onChange={(e) => handleInputChange('eventDate', e.target.value)}\n              className={`w-full px-3 py-2 bg-fd-dark border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text ${\n                errors.eventDate ? 'border-red-500' : 'border-fd-border'\n              }`}\n              disabled={isLoading}\n            />\n            {errors.eventDate && <p className=\"mt-1 text-sm text-red-400\">{errors.eventDate}</p>}\n          </div>\n\n          <div>\n            <label htmlFor=\"noticeDate\" className=\"block text-sm font-medium text-fd-text mb-1\">\n              Notice Date *\n            </label>\n            <input\n              type=\"date\"\n              id=\"noticeDate\"\n              value={formData.noticeDate}\n              onChange={(e) => handleInputChange('noticeDate', e.target.value)}\n              className={`w-full px-3 py-2 bg-fd-dark border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text ${\n                errors.noticeDate ? 'border-red-500' : 'border-fd-border'\n              }`}\n              disabled={isLoading}\n            />\n            {errors.noticeDate && <p className=\"mt-1 text-sm text-red-400\">{errors.noticeDate}</p>}\n          </div>\n\n          <div>\n            <label\n              htmlFor=\"settlementMethod\"\n              className=\"block text-sm font-medium text-fd-text mb-1\"\n            >\n              Settlement Method *\n            </label>\n            <select\n              id=\"settlementMethod\"\n              value={formData.settlementMethod}\n              onChange={(e) => handleInputChange('settlementMethod', e.target.value)}\n              className={`w-full px-3 py-2 bg-fd-dark border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text ${\n                errors.settlementMethod ? 'border-red-500' : 'border-fd-border'\n              }`}\n              disabled={isLoading}\n            >\n              {settlementMethodOptions.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </select>\n            {errors.settlementMethod && (\n              <p className=\"mt-1 text-sm text-red-400\">{errors.settlementMethod}</p>\n            )}\n          </div>\n\n          <div>\n            <label htmlFor=\"comments\" className=\"block text-sm font-medium text-fd-text mb-1\">\n              Comments\n            </label>\n            <textarea\n              id=\"comments\"\n              value={formData.comments}\n              onChange={(e) => handleInputChange('comments', e.target.value)}\n              rows={3}\n              className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text placeholder-fd-text-muted\"\n              placeholder=\"Optional comments about the credit event...\"\n              disabled={isLoading}\n            />\n          </div>\n\n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-border focus:outline-none focus:ring-2 focus:ring-fd-green transition-colors\"\n              disabled={isLoading}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"px-4 py-2 text-sm font-medium text-fd-dark bg-fd-green border border-transparent rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green disabled:opacity-50 transition-colors\"\n              disabled={isLoading}\n            >\n              {isLoading ? 'Recording...' : 'Record Credit Event'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default CreditEventModal;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\lifecycle\\AccrualHistoryPanel.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadCumulative'. Either include it or remove the dependency array.","line":39,"column":6,"nodeType":"ArrayExpression","endLine":39,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [loadCumulative, tradeId]","fix":{"range":[1194,1203],"text":"[loadCumulative, tradeId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport { lifecycleService } from '../../services/lifecycleService';\nimport { AccrualEvent } from '../../types/lifecycle';\n\ninterface Props {\n  tradeId: number;\n}\n\nexport const AccrualHistoryPanel: React.FC<Props> = ({ tradeId }) => {\n  const [accruals, setAccruals] = useState<AccrualEvent[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [range, setRange] = useState({ start: '', end: '' });\n  const [cumulative, setCumulative] = useState<number | null>(null);\n\n  const loadAccruals = async () => {\n    if (!range.start || !range.end) return;\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await lifecycleService.getAccrualEvents(tradeId, range.start, range.end);\n      setAccruals(data);\n    } catch (e: any) {\n      setError(e.message || 'Failed to load accrual events');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadCumulative = async () => {\n    try {\n      const cum = await lifecycleService.getCumulativeAccrual(tradeId);\n      setCumulative(cum);\n    } catch {}\n  };\n\n  useEffect(() => {\n    loadCumulative();\n  }, [tradeId]);\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h4 className=\"text-fd-text font-semibold\">Accrual History</h4>\n        <div className=\"flex items-center space-x-2\">\n          <input\n            type=\"date\"\n            value={range.start}\n            onChange={(e) => setRange((r) => ({ ...r, start: e.target.value }))}\n            className=\"bg-fd-dark border border-fd-border rounded px-2 py-1 text-xs text-fd-text\"\n          />\n          <span className=\"text-fd-text-muted text-xs\">to</span>\n          <input\n            type=\"date\"\n            value={range.end}\n            onChange={(e) => setRange((r) => ({ ...r, end: e.target.value }))}\n            className=\"bg-fd-dark border border-fd-border rounded px-2 py-1 text-xs text-fd-text\"\n          />\n          <button\n            onClick={loadAccruals}\n            disabled={!range.start || !range.end}\n            className=\"px-3 py-1 text-xs bg-fd-green text-fd-dark rounded font-medium disabled:opacity-40\"\n          >\n            Load\n          </button>\n        </div>\n      </div>\n      {cumulative !== null && (\n        <div className=\"bg-fd-dark border border-fd-border rounded p-3 flex items-center justify-between\">\n          <span className=\"text-fd-text-muted text-xs uppercase tracking-wide\">\n            Cumulative Accrual\n          </span>\n          <span className=\"text-fd-green font-semibold\">\n            {cumulative.toLocaleString(undefined, {\n              minimumFractionDigits: 2,\n              maximumFractionDigits: 2,\n            })}\n          </span>\n        </div>\n      )}\n      {loading && <div className=\"text-fd-text-muted text-sm\">Loading accruals...</div>}\n      {error && <div className=\"text-red-400 text-sm\">{error}</div>}\n      {!loading && accruals.length === 0 && !error && range.start && range.end && (\n        <div className=\"text-fd-text-muted text-sm\">No accruals in range.</div>\n      )}\n      {accruals.length > 0 && (\n        <div className=\"overflow-x-auto border border-fd-border rounded max-h-72 overflow-y-auto\">\n          <table className=\"min-w-full text-xs\">\n            <thead className=\"bg-fd-dark sticky top-0\">\n              <tr className=\"text-fd-text-muted\">\n                <th className=\"px-3 py-2 text-left font-medium\">Date</th>\n                <th className=\"px-3 py-2 text-left font-medium\">Accrual</th>\n                <th className=\"px-3 py-2 text-left font-medium\">Cumulative</th>\n                <th className=\"px-3 py-2 text-left font-medium\">Notional</th>\n                <th className=\"px-3 py-2 text-left font-medium\">Version</th>\n              </tr>\n            </thead>\n            <tbody>\n              {accruals.map((a) => (\n                <tr key={a.id} className=\"border-t border-fd-border hover:bg-fd-darker/40\">\n                  <td className=\"px-3 py-1 text-fd-text font-mono\">{a.accrualDate}</td>\n                  <td className=\"px-3 py-1 text-fd-green font-medium\">\n                    {a.accrualAmount.toLocaleString(undefined, { minimumFractionDigits: 2 })}\n                  </td>\n                  <td className=\"px-3 py-1 text-fd-text-muted\">\n                    {a.cumulativeAccrual.toLocaleString(undefined, { minimumFractionDigits: 2 })}\n                  </td>\n                  <td className=\"px-3 py-1 text-fd-text-muted\">\n                    {a.notionalAmount.toLocaleString()}\n                  </td>\n                  <td className=\"px-3 py-1 text-fd-text-muted\">{a.tradeVersion}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\lifecycle\\AmendTradeModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\lifecycle\\CouponSchedulePanel.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'autoGenerate', 'generateSchedule', 'loadSchedule', and 'periods.length'. Either include them or remove the dependency array.","line":48,"column":6,"nodeType":"ArrayExpression","endLine":48,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [autoGenerate, generateSchedule, loadSchedule, periods.length, tradeId]","fix":{"range":[1410,1419],"text":"[autoGenerate, generateSchedule, loadSchedule, periods.length, tradeId]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\lifecycle\\NotionalAdjustmentModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\AttachInstrumentsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\AttachTradesModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\CreatePortfolioModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\EnhancedOverview.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'basketConstituents', 'bondConstituents', and 'cdsConstituents'. Either include them or remove the dependency array.","line":180,"column":6,"nodeType":"ArrayExpression","endLine":180,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [basketConstituents, bondConstituents, cdsConstituents]","fix":{"range":[6122,6124],"text":"[basketConstituents, bondConstituents, cdsConstituents]"}}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":200,"column":12,"nodeType":"MemberExpression","endLine":200,"endColumn":29}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'calculateExposures'. Either include it or remove the dependency array.","line":48,"column":6,"nodeType":"ArrayExpression","endLine":48,"endColumn":61,"suggestions":[{"desc":"Update the dependencies array to be: [cdsConstituents, bondConstituents, basketConstituents, calculateExposures]","fix":{"range":[1277,1332],"text":"[cdsConstituents, bondConstituents, basketConstituents, calculateExposures]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  BondPortfolioConstituent,\n  BasketPortfolioConstituent,\n  CdsPortfolioConstituent,\n} from '../../services/portfolioService';\n\ninterface EnhancedOverviewProps {\n  portfolioId: number;\n  cdsConstituents: CdsPortfolioConstituent[];\n  bondConstituents: BondPortfolioConstituent[];\n  basketConstituents: BasketPortfolioConstituent[];\n  pricingData: any;\n}\n\ninterface IssuerExposure {\n  issuer: string;\n  sector: string;\n  bondNotional: number;\n  cdsProtectionBought: number;\n  cdsProtectionSold: number;\n  netCreditExposure: number;\n  hedgeRatio: number;\n  hedgeStatus: 'OVER_HEDGED' | 'UNDER_HEDGED' | 'BALANCED' | 'UNHEDGED';\n  recommendation: string;\n}\n\ninterface SectorExposure {\n  sector: string;\n  notional: number;\n  percentage: number;\n  instrumentCount: number;\n}\n\nconst EnhancedOverview: React.FC<EnhancedOverviewProps> = ({\n  portfolioId,\n  cdsConstituents,\n  bondConstituents,\n  basketConstituents,\n  pricingData,\n}) => {\n  const [issuerExposures, setIssuerExposures] = useState<IssuerExposure[]>([]);\n  const [sectorExposures, setSectorExposures] = useState<SectorExposure[]>([]);\n\n  useEffect(() => {\n    calculateExposures();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [cdsConstituents, bondConstituents, basketConstituents]);\n\n  const calculateExposures = useCallback(() => {\n    // Map to aggregate by issuer\n    const issuerMap = new Map<string, IssuerExposure>();\n\n    // Process bonds\n    bondConstituents.forEach((bc) => {\n      const issuer = bc.bond.issuer;\n      if (!issuerMap.has(issuer)) {\n        issuerMap.set(issuer, {\n          issuer,\n          sector: getSectorFromIssuer(issuer),\n          bondNotional: 0,\n          cdsProtectionBought: 0,\n          cdsProtectionSold: 0,\n          netCreditExposure: 0,\n          hedgeRatio: 0,\n          hedgeStatus: 'UNHEDGED',\n          recommendation: '',\n        });\n      }\n      const exposure = issuerMap.get(issuer)!;\n      exposure.bondNotional += bc.bond.notional;\n    });\n\n    // Process CDS\n    cdsConstituents.forEach((cc) => {\n      const issuer = cc.trade.referenceEntity;\n      if (!issuerMap.has(issuer)) {\n        issuerMap.set(issuer, {\n          issuer,\n          sector: getSectorFromIssuer(issuer),\n          bondNotional: 0,\n          cdsProtectionBought: 0,\n          cdsProtectionSold: 0,\n          netCreditExposure: 0,\n          hedgeRatio: 0,\n          hedgeStatus: 'UNHEDGED',\n          recommendation: '',\n        });\n      }\n      const exposure = issuerMap.get(issuer)!;\n\n      // Assuming BUY = buying protection (short credit), SELL = selling protection (long credit)\n      // This is a simplification - you may need to check actual buySell field\n      exposure.cdsProtectionBought += cc.trade.notionalAmount;\n    });\n\n    // Calculate net exposures and recommendations\n    const exposures: IssuerExposure[] = [];\n    issuerMap.forEach((exp) => {\n      exp.netCreditExposure = exp.bondNotional - exp.cdsProtectionBought + exp.cdsProtectionSold;\n\n      if (exp.bondNotional > 0) {\n        exp.hedgeRatio = (exp.cdsProtectionBought / exp.bondNotional) * 100;\n\n        if (exp.hedgeRatio > 110) {\n          exp.hedgeStatus = 'OVER_HEDGED';\n          exp.recommendation = `Consider reducing CDS protection by $${((exp.cdsProtectionBought - exp.bondNotional) / 1000000).toFixed(1)}M`;\n        } else if (exp.hedgeRatio >= 90 && exp.hedgeRatio <= 110) {\n          exp.hedgeStatus = 'BALANCED';\n          exp.recommendation = 'Well hedged';\n        } else if (exp.hedgeRatio > 0) {\n          exp.hedgeStatus = 'UNDER_HEDGED';\n          exp.recommendation = `Consider buying $${((exp.bondNotional - exp.cdsProtectionBought) / 1000000).toFixed(1)}M CDS protection`;\n        } else {\n          exp.hedgeStatus = 'UNHEDGED';\n          exp.recommendation = ` Buy $${(exp.bondNotional / 1000000).toFixed(1)}M CDS protection to hedge bond exposure`;\n        }\n      } else if (exp.cdsProtectionBought > 0) {\n        exp.hedgeStatus = 'UNHEDGED';\n        exp.recommendation = `Consider buying $${(exp.cdsProtectionBought / 1000000).toFixed(1)}M in bonds to capture basis`;\n      }\n\n      exposures.push(exp);\n    });\n\n    setIssuerExposures(\n      exposures.sort((a, b) => Math.abs(b.netCreditExposure) - Math.abs(a.netCreditExposure))\n    );\n\n    // Calculate sector exposures\n    const sectorMap = new Map<string, { notional: number; count: number }>();\n\n    bondConstituents.forEach((bc) => {\n      const sector = getSectorFromIssuer(bc.bond.issuer);\n      if (!sectorMap.has(sector)) {\n        sectorMap.set(sector, { notional: 0, count: 0 });\n      }\n      const sectorData = sectorMap.get(sector)!;\n      sectorData.notional += bc.bond.notional;\n      sectorData.count++;\n    });\n\n    cdsConstituents.forEach((cc) => {\n      const sector = getSectorFromIssuer(cc.trade.referenceEntity);\n      if (!sectorMap.has(sector)) {\n        sectorMap.set(sector, { notional: 0, count: 0 });\n      }\n      const sectorData = sectorMap.get(sector)!;\n      sectorData.notional += cc.trade.notionalAmount;\n      sectorData.count++;\n    });\n\n    // Add baskets as \"BASKET\" sector for now\n    // TODO: In future, unwind basket constituents to their actual sectors\n    basketConstituents.forEach((bc) => {\n      const sector = 'BASKET';\n      if (!sectorMap.has(sector)) {\n        sectorMap.set(sector, { notional: 0, count: 0 });\n      }\n      const sectorData = sectorMap.get(sector)!;\n      // Use basket.notional (backend field name)\n      const notional = bc.basket?.notional || bc.weightValue || 0;\n      sectorData.notional += notional;\n      sectorData.count++;\n    });\n\n    const totalNotional = Array.from(sectorMap.values()).reduce((sum, s) => sum + s.notional, 0);\n    const sectors: SectorExposure[] = [];\n\n    sectorMap.forEach((data, sector) => {\n      sectors.push({\n        sector,\n        notional: data.notional,\n        percentage: totalNotional > 0 ? (data.notional / totalNotional) * 100 : 0,\n        instrumentCount: data.count,\n      });\n    });\n\n    setSectorExposures(sectors.sort((a, b) => b.notional - a.notional));\n  }, []); // useCallback dependency array\n\n  const getSectorFromIssuer = (issuer: string): string => {\n    const sectorMap: Record<string, string> = {\n      AAPL: 'TECH',\n      MSFT: 'TECH',\n      AMZN: 'TECH',\n      GOOGL: 'TECH',\n      TSLA: 'TECH',\n      NFLX: 'TECH',\n      META: 'TECH',\n      NVDA: 'TECH',\n      AMD: 'TECH',\n      JPM: 'FINANCIALS',\n      BAC: 'FINANCIALS',\n      WFC: 'FINANCIALS',\n      GS: 'FINANCIALS',\n      MS: 'FINANCIALS',\n      C: 'FINANCIALS',\n    };\n    return sectorMap[issuer] || 'OTHER';\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(amount);\n  };\n\n  const getHedgeStatusColor = (status: string) => {\n    switch (status) {\n      case 'BALANCED':\n        return 'text-fd-green';\n      case 'UNDER_HEDGED':\n        return 'text-yellow-400';\n      case 'OVER_HEDGED':\n        return 'text-blue-400';\n      case 'UNHEDGED':\n        return 'text-red-400';\n      default:\n        return 'text-fd-text-muted';\n    }\n  };\n\n  const getHedgeStatusBadge = (status: string) => {\n    switch (status) {\n      case 'BALANCED':\n        return 'bg-green-900/30 text-green-400 border-green-500';\n      case 'UNDER_HEDGED':\n        return 'bg-yellow-900/30 text-yellow-400 border-yellow-500';\n      case 'OVER_HEDGED':\n        return 'bg-blue-900/30 text-blue-400 border-blue-500';\n      case 'UNHEDGED':\n        return 'bg-red-900/30 text-red-400 border-red-500';\n      default:\n        return 'bg-fd-dark text-fd-text-muted border-fd-border';\n    }\n  };\n\n  const getSectorColor = (index: number) => {\n    const colors = [\n      'bg-fd-green',\n      'bg-blue-500',\n      'bg-yellow-500',\n      'bg-purple-500',\n      'bg-pink-500',\n      'bg-indigo-500',\n      'bg-teal-500',\n      'bg-orange-500',\n    ];\n    return colors[index % colors.length];\n  };\n\n  const totalCdsNotional = cdsConstituents.reduce((sum, c) => sum + c.trade.notionalAmount, 0);\n  const totalBondNotional = bondConstituents.reduce((sum, c) => sum + c.bond.notional, 0);\n  const totalBasketNotional = basketConstituents.reduce((sum, c) => {\n    // Use basket.notional (backend field name)\n    const notional = c.basket?.notional || c.weightValue || 0;\n    return sum + notional;\n  }, 0);\n  const totalNotional = totalCdsNotional + totalBondNotional + totalBasketNotional;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Instrument Distribution */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Instrument Type Breakdown */}\n        <div className=\"bg-fd-darker border border-fd-border rounded-lg p-6\">\n          <h3 className=\"text-lg font-semibold text-fd-text mb-4\">Instrument Distribution</h3>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-4 h-4 bg-fd-green rounded\"></div>\n                <span className=\"text-fd-text\"> CDS Trades</span>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-fd-text font-medium\">{formatCurrency(totalCdsNotional)}</div>\n                <div className=\"text-sm text-fd-text-muted\">\n                  {totalNotional > 0 ? ((totalCdsNotional / totalNotional) * 100).toFixed(1) : 0}% {' '}\n                  {cdsConstituents.length} positions\n                </div>\n              </div>\n            </div>\n            <div className=\"w-full bg-fd-dark rounded-full h-2\">\n              <div\n                className=\"bg-fd-green h-2 rounded-full transition-all\"\n                style={{\n                  width: `${totalNotional > 0 ? (totalCdsNotional / totalNotional) * 100 : 0}%`,\n                }}\n              ></div>\n            </div>\n\n            <div className=\"flex items-center justify-between mt-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-4 h-4 bg-blue-500 rounded\"></div>\n                <span className=\"text-fd-text\"> Corporate Bonds</span>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-fd-text font-medium\">{formatCurrency(totalBondNotional)}</div>\n                <div className=\"text-sm text-fd-text-muted\">\n                  {totalNotional > 0 ? ((totalBondNotional / totalNotional) * 100).toFixed(1) : 0}%\n                   {bondConstituents.length} positions\n                </div>\n              </div>\n            </div>\n            <div className=\"w-full bg-fd-dark rounded-full h-2\">\n              <div\n                className=\"bg-blue-500 h-2 rounded-full transition-all\"\n                style={{\n                  width: `${totalNotional > 0 ? (totalBondNotional / totalNotional) * 100 : 0}%`,\n                }}\n              ></div>\n            </div>\n\n            <div className=\"flex items-center justify-between mt-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-4 h-4 bg-purple-500 rounded\"></div>\n                <span className=\"text-fd-text\"> Credit Baskets</span>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-fd-text font-medium\">\n                  {formatCurrency(totalBasketNotional)}\n                </div>\n                <div className=\"text-sm text-fd-text-muted\">\n                  {totalNotional > 0 ? ((totalBasketNotional / totalNotional) * 100).toFixed(1) : 0}\n                  %  {basketConstituents.length} positions\n                </div>\n              </div>\n            </div>\n            <div className=\"w-full bg-fd-dark rounded-full h-2\">\n              <div\n                className=\"bg-purple-500 h-2 rounded-full transition-all\"\n                style={{\n                  width: `${totalNotional > 0 ? (totalBasketNotional / totalNotional) * 100 : 0}%`,\n                }}\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        {/* Sector Exposure */}\n        <div className=\"bg-fd-darker border border-fd-border rounded-lg p-6\">\n          <h3 className=\"text-lg font-semibold text-fd-text mb-4\">Sector Allocation</h3>\n          <div className=\"space-y-3\">\n            {sectorExposures.slice(0, 5).map((sector, idx) => (\n              <div key={sector.sector} className=\"space-y-1\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <div className=\"flex items-center space-x-2\">\n                    <div className={`w-3 h-3 rounded ${getSectorColor(idx)}`}></div>\n                    <span className=\"text-fd-text\">{sector.sector}</span>\n                  </div>\n                  <div className=\"text-fd-text-muted\">\n                    {sector.percentage.toFixed(1)}%  {sector.instrumentCount} instruments\n                  </div>\n                </div>\n                <div className=\"w-full bg-fd-dark rounded-full h-1.5\">\n                  <div\n                    className={`${getSectorColor(idx)} h-1.5 rounded-full transition-all`}\n                    style={{ width: `${sector.percentage}%` }}\n                  ></div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Net Exposure by Issuer */}\n      <div className=\"bg-fd-darker border border-fd-border rounded-lg p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-fd-text\">Net Credit Exposure by Issuer</h3>\n          <div className=\"text-sm text-fd-text-muted\">Showing bond positions vs CDS hedges</div>\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-fd-border\">\n            <thead>\n              <tr className=\"text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\">\n                <th className=\"px-4 py-3\">Issuer</th>\n                <th className=\"px-4 py-3\">Sector</th>\n                <th className=\"px-4 py-3 text-right\">Bond Exposure</th>\n                <th className=\"px-4 py-3 text-right\">CDS Protection</th>\n                <th className=\"px-4 py-3 text-right\">Net Exposure</th>\n                <th className=\"px-4 py-3 text-center\">Hedge Ratio</th>\n                <th className=\"px-4 py-3 text-center\">Status</th>\n                <th className=\"px-4 py-3\">Recommendation</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-fd-border\">\n              {issuerExposures.map((exp) => (\n                <tr key={exp.issuer} className=\"hover:bg-fd-dark transition-colors\">\n                  <td className=\"px-4 py-3 text-sm font-medium text-fd-text\">{exp.issuer}</td>\n                  <td className=\"px-4 py-3 text-sm text-fd-text-muted\">{exp.sector}</td>\n                  <td className=\"px-4 py-3 text-sm text-right text-fd-text\">\n                    {exp.bondNotional > 0 ? formatCurrency(exp.bondNotional) : '-'}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm text-right text-fd-text\">\n                    {exp.cdsProtectionBought > 0 ? formatCurrency(exp.cdsProtectionBought) : '-'}\n                  </td>\n                  <td\n                    className={`px-4 py-3 text-sm text-right font-medium ${\n                      exp.netCreditExposure > 0\n                        ? 'text-red-400'\n                        : exp.netCreditExposure < 0\n                          ? 'text-fd-green'\n                          : 'text-fd-text'\n                    }`}\n                  >\n                    {formatCurrency(Math.abs(exp.netCreditExposure))}\n                    {exp.netCreditExposure > 0\n                      ? ' Long'\n                      : exp.netCreditExposure < 0\n                        ? ' Short'\n                        : ''}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm text-center text-fd-text\">\n                    {exp.bondNotional > 0 ? `${exp.hedgeRatio.toFixed(0)}%` : 'N/A'}\n                  </td>\n                  <td className=\"px-4 py-3 text-center\">\n                    <span\n                      className={`inline-flex items-center px-2 py-1 rounded text-xs font-medium border ${getHedgeStatusBadge(exp.hedgeStatus)}`}\n                    >\n                      {exp.hedgeStatus.replace('_', ' ')}\n                    </span>\n                  </td>\n                  <td className={`px-4 py-3 text-sm ${getHedgeStatusColor(exp.hedgeStatus)}`}>\n                    {exp.recommendation}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {issuerExposures.length === 0 && (\n          <div className=\"text-center py-8 text-fd-text-muted\">\n            No exposures to analyze. Add some CDS trades and bonds to see hedge recommendations.\n          </div>\n        )}\n      </div>\n\n      {/* Key Metrics Summary */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"bg-fd-darker border border-fd-border rounded-lg p-4\">\n          <div className=\"text-sm text-fd-text-muted mb-1\">Total Instruments</div>\n          <div className=\"text-2xl font-semibold text-fd-text\">\n            {cdsConstituents.length + bondConstituents.length + basketConstituents.length}\n          </div>\n          <div className=\"text-xs text-fd-text-muted mt-1\">\n            {cdsConstituents.length} CDS  {bondConstituents.length} Bonds {' '}\n            {basketConstituents.length} Baskets\n          </div>\n        </div>\n\n        <div className=\"bg-fd-darker border border-fd-border rounded-lg p-4\">\n          <div className=\"text-sm text-fd-text-muted mb-1\">Unique Issuers</div>\n          <div className=\"text-2xl font-semibold text-fd-text\">{issuerExposures.length}</div>\n          <div className=\"text-xs text-fd-text-muted mt-1\">{sectorExposures.length} sectors</div>\n        </div>\n\n        <div className=\"bg-fd-darker border border-fd-border rounded-lg p-4\">\n          <div className=\"text-sm text-fd-text-muted mb-1\">Hedge Coverage</div>\n          <div className=\"text-2xl font-semibold text-fd-text\">\n            {totalBondNotional > 0 ? ((totalCdsNotional / totalBondNotional) * 100).toFixed(0) : 0}%\n          </div>\n          <div className=\"text-xs text-fd-text-muted mt-1\">CDS / Bond ratio</div>\n        </div>\n\n        <div className=\"bg-fd-darker border border-fd-border rounded-lg p-4\">\n          <div className=\"text-sm text-fd-text-muted mb-1\">Unhedged Exposure</div>\n          <div className=\"text-2xl font-semibold text-red-400\">\n            {\n              issuerExposures.filter(\n                (e) => e.hedgeStatus === 'UNHEDGED' || e.hedgeStatus === 'UNDER_HEDGED'\n              ).length\n            }\n          </div>\n          <div className=\"text-xs text-fd-text-muted mt-1\">issuers need attention</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EnhancedOverview;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\PortfolioDetail.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cdsTradeService' is defined but never used.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CDSTradeResponse' is defined but never used.","line":10,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":43},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadPortfolioData'. Either include it or remove the dependency array.","line":37,"column":6,"nodeType":"ArrayExpression","endLine":37,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [loadPortfolioData, portfolioId]","fix":{"range":[1595,1608],"text":"[loadPortfolioData, portfolioId]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MetricCard' is assigned a value but never used.","line":640,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":640,"endColumn":61}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  portfolioService,\n  CdsPortfolio,\n  CdsPortfolioConstituent,\n  BondPortfolioConstituent,\n  BasketPortfolioConstituent,\n  PortfolioPricingResponse,\n} from '../../services/portfolioService';\nimport { cdsTradeService, CDSTradeResponse } from '../../services/cdsTradeService';\nimport AttachInstrumentsModal from './AttachInstrumentsModal';\nimport SimulationPanel from './simulation/SimulationPanel';\nimport EnhancedOverview from './EnhancedOverview';\n\ninterface PortfolioDetailProps {\n  portfolioId: number;\n  onBack?: () => void;\n}\n\nconst PortfolioDetail: React.FC<PortfolioDetailProps> = ({ portfolioId, onBack }) => {\n  const [portfolio, setPortfolio] = useState<CdsPortfolio | null>(null);\n  const [constituents, setConstituents] = useState<CdsPortfolioConstituent[]>([]);\n  const [bondConstituents, setBondConstituents] = useState<BondPortfolioConstituent[]>([]);\n  const [basketConstituents, setBasketConstituents] = useState<BasketPortfolioConstituent[]>([]);\n  const [riskSummary, setRiskSummary] = useState<PortfolioPricingResponse | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [pricingLoading, setPricingLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState<\n    'overview' | 'constituents' | 'concentration' | 'simulation'\n  >('overview');\n  const [showAttachModal, setShowAttachModal] = useState(false);\n  const [valuationDate, setValuationDate] = useState<string>('');\n\n  useEffect(() => {\n    loadPortfolioData();\n  }, [portfolioId]);\n\n  const loadPortfolioData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const [portfolioData, constituentsData, bondsData, basketsData] = await Promise.all([\n        portfolioService.getPortfolioById(portfolioId),\n        portfolioService.getConstituents(portfolioId),\n        portfolioService.getPortfolioBonds(portfolioId),\n        portfolioService.getPortfolioBaskets(portfolioId),\n      ]);\n\n      setPortfolio(portfolioData);\n      setConstituents(constituentsData);\n      setBondConstituents(bondsData);\n      setBasketConstituents(basketsData);\n\n      // Try to load cached risk summary\n      try {\n        const cachedRisk = await portfolioService.getRiskSummary(portfolioId);\n        setRiskSummary(cachedRisk);\n        setValuationDate(cachedRisk.valuationDate);\n      } catch (err) {\n        // No cached risk available, that's okay\n        console.log('No cached risk summary available');\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to load portfolio';\n      setError(errorMessage);\n      console.error('Error loading portfolio:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getBusinessDaysFromToday = (days: number): string => {\n    const today = new Date();\n    const target = new Date(today);\n    let addedDays = 0;\n\n    while (addedDays < days) {\n      target.setDate(target.getDate() + 1);\n      const dayOfWeek = target.getDay();\n      if (dayOfWeek !== 0 && dayOfWeek !== 6) {\n        addedDays++;\n      }\n    }\n\n    return target.toISOString().split('T')[0];\n  };\n\n  const handleQuickValuationDate = async (option: 'today' | 't+1' | 't+7' | 't+45') => {\n    let newDate: string;\n\n    switch (option) {\n      case 'today':\n        newDate = new Date().toISOString().split('T')[0];\n        break;\n      case 't+1':\n        newDate = getBusinessDaysFromToday(1);\n        break;\n      case 't+7':\n        newDate = getBusinessDaysFromToday(7);\n        break;\n      case 't+45':\n        newDate = getBusinessDaysFromToday(45);\n        break;\n    }\n\n    setValuationDate(newDate);\n    await handlePriceWithDate(newDate);\n  };\n\n  const handlePriceWithDate = async (date: string) => {\n    try {\n      setPricingLoading(true);\n      setError(null);\n      const result = await portfolioService.pricePortfolio(portfolioId, date);\n      setRiskSummary(result);\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.error || err.message || 'Failed to price portfolio';\n      setError(errorMessage);\n      console.error('Error pricing portfolio:', err);\n    } finally {\n      setPricingLoading(false);\n    }\n  };\n\n  const handlePriceNow = async () => {\n    const today = new Date().toISOString().split('T')[0];\n    setValuationDate(today);\n    await handlePriceWithDate(today);\n  };\n\n  const handleDetachConstituent = async (constituentId: number) => {\n    if (!window.confirm('Are you sure you want to remove this trade from the portfolio?')) {\n      return;\n    }\n\n    try {\n      await portfolioService.detachConstituent(portfolioId, constituentId);\n      loadPortfolioData();\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to detach constituent';\n      alert(errorMessage);\n    }\n  };\n\n  const handleDetachBond = async (bondId: number) => {\n    if (!window.confirm('Are you sure you want to remove this bond from the portfolio?')) {\n      return;\n    }\n\n    try {\n      await portfolioService.removeBond(portfolioId, bondId);\n      loadPortfolioData();\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to remove bond';\n      alert(errorMessage);\n    }\n  };\n\n  const handleDetachBasket = async (basketId: number) => {\n    if (!window.confirm('Are you sure you want to remove this basket from the portfolio?')) {\n      return;\n    }\n\n    try {\n      await portfolioService.removeBasket(portfolioId, basketId);\n      loadPortfolioData();\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to remove basket';\n      alert(errorMessage);\n    }\n  };\n\n  const handleAttachSuccess = () => {\n    setShowAttachModal(false);\n    loadPortfolioData();\n  };\n\n  const formatCurrency = (amount: number | undefined) => {\n    if (amount === undefined || amount === null) return '-';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    }).format(amount);\n  };\n\n  const formatNumber = (num: number | undefined, decimals: number = 2) => {\n    if (num === undefined || num === null) return '-';\n    return num.toFixed(decimals);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-fd-green\"></div>\n      </div>\n    );\n  }\n\n  if (error || !portfolio) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n        <div className=\"flex\">\n          <div className=\"flex-shrink-0\">\n            <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path\n                fillRule=\"evenodd\"\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n          </div>\n          <div className=\"ml-3\">\n            <h3 className=\"text-sm font-medium text-red-800\">Error</h3>\n            <div className=\"mt-2 text-sm text-red-700\">\n              <p>{error || 'Portfolio not found'}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6\">\n        <div className=\"flex justify-between items-center\">\n          <div className=\"flex items-center space-x-4\">\n            {onBack && (\n              <button\n                onClick={onBack}\n                className=\"text-fd-green hover:text-fd-green-hover font-medium\"\n              >\n                 Back\n              </button>\n            )}\n            <div>\n              <h2 className=\"text-2xl font-semibold text-fd-text\">{portfolio.name}</h2>\n              {portfolio.description && (\n                <p className=\"text-sm text-fd-text-muted mt-1\">{portfolio.description}</p>\n              )}\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            {/* Valuation Date Quick Selector */}\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-xs text-fd-text-muted\">Valuation:</span>\n              <div className=\"flex space-x-1\">\n                <button\n                  onClick={() => handleQuickValuationDate('today')}\n                  disabled={pricingLoading}\n                  className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n                    valuationDate === new Date().toISOString().split('T')[0]\n                      ? 'bg-fd-green text-fd-dark'\n                      : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n                  } disabled:opacity-50 disabled:cursor-not-allowed`}\n                >\n                  Today\n                </button>\n                <button\n                  onClick={() => handleQuickValuationDate('t+1')}\n                  disabled={pricingLoading}\n                  className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n                    valuationDate === getBusinessDaysFromToday(1)\n                      ? 'bg-fd-green text-fd-dark'\n                      : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n                  } disabled:opacity-50 disabled:cursor-not-allowed`}\n                >\n                  T+1\n                </button>\n                <button\n                  onClick={() => handleQuickValuationDate('t+7')}\n                  disabled={pricingLoading}\n                  className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n                    valuationDate === getBusinessDaysFromToday(7)\n                      ? 'bg-fd-green text-fd-dark'\n                      : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n                  } disabled:opacity-50 disabled:cursor-not-allowed`}\n                >\n                  T+7\n                </button>\n                <button\n                  onClick={() => handleQuickValuationDate('t+45')}\n                  disabled={pricingLoading}\n                  className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n                    valuationDate === getBusinessDaysFromToday(45)\n                      ? 'bg-fd-green text-fd-dark'\n                      : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n                  } disabled:opacity-50 disabled:cursor-not-allowed`}\n                >\n                  T+45\n                </button>\n              </div>\n            </div>\n\n            <button\n              onClick={() => setShowAttachModal(true)}\n              className=\"bg-fd-green hover:bg-fd-green-hover text-fd-dark font-medium py-2 px-4 rounded transition-colors\"\n            >\n              + Add Instruments\n            </button>\n            <button\n              onClick={handlePriceNow}\n              disabled={pricingLoading || constituents.length === 0}\n              className=\"bg-fd-green hover:bg-fd-green-hover text-fd-dark font-medium py-2 px-4 rounded transition-colors disabled:bg-fd-text-muted/50 disabled:cursor-not-allowed\"\n            >\n              {pricingLoading ? 'Pricing...' : 'Reprice Now'}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"bg-fd-darker rounded-lg shadow-fd border border-fd-border\">\n        <div className=\"border-b border-fd-border px-6\">\n          <nav className=\"-mb-px flex space-x-8\">\n            <button\n              onClick={() => setActiveTab('overview')}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'overview'\n                  ? 'border-fd-green text-fd-green'\n                  : 'border-transparent text-fd-text-muted hover:text-fd-text hover:border-fd-border'\n              }`}\n            >\n              Overview\n            </button>\n            <button\n              onClick={() => setActiveTab('constituents')}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'constituents'\n                  ? 'border-fd-green text-fd-green'\n                  : 'border-transparent text-fd-text-muted hover:text-fd-text hover:border-fd-border'\n              }`}\n            >\n              Constituents (\n              {constituents.length + bondConstituents.length + basketConstituents.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('concentration')}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'concentration'\n                  ? 'border-fd-green text-fd-green'\n                  : 'border-transparent text-fd-text-muted hover:text-fd-text hover:border-fd-border'\n              }`}\n            >\n              Concentration\n            </button>\n            <button\n              onClick={() => setActiveTab('simulation')}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'simulation'\n                  ? 'border-fd-green text-fd-green'\n                  : 'border-transparent text-fd-text-muted hover:text-fd-text hover:border-fd-border'\n              }`}\n            >\n              Monte Carlo Simulation\n            </button>\n          </nav>\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"p-6\">\n          {activeTab === 'overview' && (\n            <EnhancedOverview\n              portfolioId={portfolioId}\n              cdsConstituents={constituents}\n              bondConstituents={bondConstituents}\n              basketConstituents={basketConstituents}\n              pricingData={riskSummary}\n            />\n          )}\n\n          {activeTab === 'constituents' && (\n            <>\n              {constituents.length === 0 &&\n              bondConstituents.length === 0 &&\n              basketConstituents.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <svg\n                    className=\"mx-auto h-12 w-12 text-fd-text-muted\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                    aria-hidden=\"true\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                    />\n                  </svg>\n                  <h3 className=\"mt-2 text-sm font-medium text-fd-text\">\n                    No instruments in portfolio\n                  </h3>\n                  <p className=\"mt-1 text-sm text-fd-text-muted\">\n                    Add CDS trades or bonds to get started.\n                  </p>\n                </div>\n              ) : (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"min-w-full divide-y divide-fd-border\">\n                    <thead className=\"bg-fd-dark\">\n                      <tr>\n                        <th\n                          scope=\"col\"\n                          className=\"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\"\n                        >\n                          Type\n                        </th>\n                        <th\n                          scope=\"col\"\n                          className=\"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\"\n                        >\n                          ID\n                        </th>\n                        <th\n                          scope=\"col\"\n                          className=\"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\"\n                        >\n                          Reference / Issuer\n                        </th>\n                        <th\n                          scope=\"col\"\n                          className=\"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\"\n                        >\n                          Notional\n                        </th>\n                        <th\n                          scope=\"col\"\n                          className=\"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\"\n                        >\n                          Weight Type\n                        </th>\n                        <th\n                          scope=\"col\"\n                          className=\"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\"\n                        >\n                          Weight Value\n                        </th>\n                        <th\n                          scope=\"col\"\n                          className=\"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\"\n                        >\n                          Actions\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-fd-darker divide-y divide-fd-border\">\n                      {constituents.map((constituent) => (\n                        <tr\n                          key={`cds-${constituent.id}`}\n                          className=\"hover:bg-fd-dark transition-colors\"\n                        >\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                            <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-900 text-blue-200\">\n                               CDS\n                            </span>\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text\">\n                            CDS-{constituent.trade.id}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-fd-text\">\n                            {constituent.trade.referenceEntity}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-fd-text\">\n                            {formatCurrency(constituent.trade.notionalAmount)}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-fd-text-muted\">\n                            {constituent.weightType}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-fd-text\">\n                            {constituent.weightType === 'PERCENT'\n                              ? `${(constituent.weightValue * 100).toFixed(2)}%`\n                              : formatCurrency(constituent.weightValue)}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                            <button\n                              onClick={() => handleDetachConstituent(constituent.id)}\n                              className=\"text-red-400 hover:text-red-300 font-medium\"\n                            >\n                              Remove\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                      {bondConstituents.map((bondConstituent) => (\n                        <tr\n                          key={`bond-${bondConstituent.id}`}\n                          className=\"hover:bg-fd-dark transition-colors\"\n                        >\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                            <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-900 text-green-200\">\n                               Bond\n                            </span>\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text\">\n                            {bondConstituent.bond.isin}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-fd-text\">\n                            {bondConstituent.bond.issuer}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-fd-text\">\n                            {formatCurrency(bondConstituent.bond.notional)}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-fd-text-muted\">\n                            {bondConstituent.weightType}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-fd-text\">\n                            {formatCurrency(bondConstituent.weightValue)}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                            <button\n                              onClick={() => handleDetachBond(bondConstituent.bond.id)}\n                              className=\"text-red-400 hover:text-red-300 font-medium\"\n                            >\n                              Remove\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                      {basketConstituents.map((basketConstituent) => (\n                        <tr\n                          key={`basket-${basketConstituent.id}`}\n                          className=\"hover:bg-fd-dark transition-colors\"\n                        >\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                            <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-900 text-purple-200\">\n                               Basket\n                            </span>\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text\">\n                            {basketConstituent.basket.name}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-fd-text\">\n                            {basketConstituent.basket.basketType === 'FIRST_TO_DEFAULT'\n                              ? 'FTD'\n                              : basketConstituent.basket.basketType === 'NTH_TO_DEFAULT'\n                                ? `${basketConstituent.basket.kthToDefault}th-to-Default`\n                                : 'Tranchette'}{' '}\n                            ({basketConstituent.basket.numberOfConstituents} names)\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-fd-text\">\n                            {formatCurrency(basketConstituent.basket.notional)}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-fd-text-muted\">\n                            {basketConstituent.weightType}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-fd-text\">\n                            {formatCurrency(basketConstituent.weightValue)}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                            <button\n                              onClick={() => handleDetachBasket(basketConstituent.basket.id)}\n                              className=\"text-red-400 hover:text-red-300 font-medium\"\n                            >\n                              Remove\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </>\n          )}\n\n          {activeTab === 'concentration' && (\n            <div className=\"space-y-4\">\n              {riskSummary?.concentration ? (\n                <>\n                  <div className=\"bg-fd-dark p-6 rounded-lg border border-fd-border\">\n                    <h3 className=\"text-lg font-semibold text-fd-text mb-4\">\n                      Top 5 CS01 Concentration\n                    </h3>\n                    <div className=\"text-3xl font-bold text-fd-green\">\n                      {formatNumber(riskSummary.concentration.top5PctCs01, 1)}%\n                    </div>\n                    <p className=\"text-sm text-fd-text-muted mt-2\">\n                      of total CS01 is concentrated in the top 5 contributors\n                    </p>\n                  </div>\n\n                  <div className=\"bg-fd-dark p-6 rounded-lg border border-fd-border\">\n                    <h3 className=\"text-lg font-semibold text-fd-text mb-4\">Sector Breakdown</h3>\n                    <div className=\"space-y-3\">\n                      {riskSummary.concentration.sectorBreakdown.map((sector) => (\n                        <div key={sector.sector} className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center space-x-3 flex-1\">\n                            <span className=\"text-sm font-medium text-fd-text w-32\">\n                              {sector.sector}\n                            </span>\n                            <div className=\"flex-1 bg-fd-darker rounded-full h-4\">\n                              <div\n                                className={`h-4 rounded-full ${\n                                  sector.cs01Pct > 25 ? 'bg-red-500' : 'bg-fd-green'\n                                }`}\n                                style={{ width: `${Math.min(sector.cs01Pct, 100)}%` }}\n                              ></div>\n                            </div>\n                          </div>\n                          <span className=\"text-sm font-semibold text-fd-text ml-3\">\n                            {formatNumber(sector.cs01Pct, 1)}%\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </>\n              ) : (\n                <div className=\"bg-fd-dark p-6 rounded-lg border border-fd-border text-center\">\n                  <p className=\"text-fd-text-muted\">\n                    No concentration metrics available. Price the portfolio first.\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'simulation' && <SimulationPanel portfolioId={portfolioId} />}\n        </div>\n      </div>\n\n      {showAttachModal && (\n        <AttachInstrumentsModal\n          portfolioId={portfolioId}\n          onClose={() => setShowAttachModal(false)}\n          onSuccess={handleAttachSuccess}\n        />\n      )}\n    </div>\n  );\n};\n\nconst MetricCard: React.FC<{ label: string; value: string }> = ({ label, value }) => (\n  <div className=\"bg-fd-dark p-4 rounded-lg border border-fd-border\">\n    <p className=\"text-sm text-fd-text-muted mb-1\">{label}</p>\n    <p className=\"text-xl font-semibold text-fd-text\">{value}</p>\n  </div>\n);\n\nexport default PortfolioDetail;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\PortfolioList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\PortfolioPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\ContributorsTable.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":25,"column":16,"nodeType":"MemberExpression","endLine":25,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":26,"column":16,"nodeType":"MemberExpression","endLine":26,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Contributor } from '../../../services/simulationService';\n\ninterface ContributorsTableProps {\n  contributors: Contributor[];\n}\n\ntype SortField = 'entity' | 'marginalElPct' | 'beta';\ntype SortDirection = 'asc' | 'desc';\n\nconst ContributorsTable: React.FC<ContributorsTableProps> = ({ contributors }) => {\n  const [sortField, setSortField] = useState<SortField>('marginalElPct');\n  const [sortDirection, setSortDirection] = useState<SortDirection>('desc');\n\n  const handleSort = (field: SortField) => {\n    if (sortField === field) {\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortField(field);\n      setSortDirection(field === 'entity' ? 'asc' : 'desc');\n    }\n  };\n\n  const sortedContributors = [...contributors].sort((a, b) => {\n    let aVal = a[sortField];\n    let bVal = b[sortField];\n\n    if (typeof aVal === 'string') {\n      aVal = aVal.toLowerCase();\n      bVal = (bVal as string).toLowerCase();\n    }\n\n    if (aVal < bVal) return sortDirection === 'asc' ? -1 : 1;\n    if (aVal > bVal) return sortDirection === 'asc' ? 1 : -1;\n    return 0;\n  });\n\n  const SortIcon = ({ field }: { field: SortField }) => {\n    if (sortField !== field) {\n      return (\n        <svg\n          className=\"w-4 h-4 text-fd-text-muted\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4\"\n          />\n        </svg>\n      );\n    }\n\n    return sortDirection === 'asc' ? (\n      <svg className=\"w-4 h-4 text-fd-green\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 15l7-7 7 7\" />\n      </svg>\n    ) : (\n      <svg className=\"w-4 h-4 text-fd-green\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n      </svg>\n    );\n  };\n\n  return (\n    <div className=\"bg-fd-darker rounded-lg border border-fd-border overflow-hidden\">\n      <div className=\"overflow-x-auto\">\n        <table className=\"w-full\">\n          <thead className=\"bg-fd-dark border-b border-fd-border\">\n            <tr>\n              <th\n                className=\"px-4 py-3 text-left text-sm font-medium text-fd-text cursor-pointer hover:bg-fd-border transition-colors\"\n                onClick={() => handleSort('entity')}\n              >\n                <div className=\"flex items-center gap-2\">\n                  Entity Name\n                  <SortIcon field=\"entity\" />\n                </div>\n              </th>\n              <th\n                className=\"px-4 py-3 text-right text-sm font-medium text-fd-text cursor-pointer hover:bg-fd-border transition-colors\"\n                onClick={() => handleSort('marginalElPct')}\n              >\n                <div className=\"flex items-center justify-end gap-2\">\n                  Marginal EL %\n                  <SortIcon field=\"marginalElPct\" />\n                </div>\n              </th>\n              <th\n                className=\"px-4 py-3 text-right text-sm font-medium text-fd-text cursor-pointer hover:bg-fd-border transition-colors\"\n                onClick={() => handleSort('beta')}\n              >\n                <div className=\"flex items-center justify-end gap-2\">\n                  Beta ()\n                  <SortIcon field=\"beta\" />\n                </div>\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-fd-border\">\n            {sortedContributors.map((contributor, index) => (\n              <tr key={index} className=\"hover:bg-fd-dark/50 transition-colors\">\n                <td className=\"px-4 py-3 text-sm text-fd-text\">{contributor.entity}</td>\n                <td className=\"px-4 py-3 text-sm text-fd-text text-right font-medium\">\n                  {contributor.marginalElPct.toFixed(2)}%\n                </td>\n                <td className=\"px-4 py-3 text-sm text-fd-text-muted text-right\">\n                  {contributor.beta.toFixed(3)}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {sortedContributors.length === 0 && (\n        <div className=\"p-8 text-center text-fd-text-muted\">No contributors data available</div>\n      )}\n    </div>\n  );\n};\n\nexport default ContributorsTable;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\MetricsCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\MetricsGlossaryModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\SimulationConfigForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\SimulationPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'polling' is assigned a value but never used.","line":20,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { simulationService, SimulationRequest } from '../../../services/simulationService';\nimport { useSimulationPolling } from '../../../hooks/useSimulationPolling';\nimport SimulationConfigForm from './SimulationConfigForm';\nimport SimulationResults from './SimulationResults';\nimport MetricsGlossaryModal from './MetricsGlossaryModal';\n\ninterface SimulationPanelProps {\n  portfolioId: number;\n}\n\nconst SimulationPanel: React.FC<SimulationPanelProps> = ({ portfolioId }) => {\n  const [runId, setRunId] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  const [showGlossary, setShowGlossary] = useState(false);\n\n  const {\n    simulation,\n    loading: polling,\n    error: pollingError,\n  } = useSimulationPolling(runId, !!runId);\n\n  const handleSubmit = async (request: SimulationRequest) => {\n    try {\n      setIsSubmitting(true);\n      setSubmitError(null);\n\n      const response = await simulationService.runSimulation(portfolioId, request);\n      setRunId(response.runId);\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to start simulation';\n      setSubmitError(errorMessage);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleCancel = async () => {\n    if (runId && window.confirm('Are you sure you want to cancel this simulation?')) {\n      try {\n        await simulationService.cancelSimulation(runId);\n      } catch (err) {\n        console.error('Failed to cancel simulation:', err);\n      }\n    }\n  };\n\n  const handleDownload = () => {\n    if (simulation) {\n      simulationService.downloadResults(simulation);\n    }\n  };\n\n  const handleReset = () => {\n    setRunId(null);\n    setSubmitError(null);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Help Button */}\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-fd-text\">Monte Carlo Simulation</h3>\n          <p className=\"text-sm text-fd-text-muted mt-1\">\n            Correlated default risk analysis with portfolio metrics\n          </p>\n        </div>\n        <button\n          onClick={() => setShowGlossary(true)}\n          className=\"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-fd-green hover:text-fd-green-hover transition-colors\"\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n            />\n          </svg>\n          <span>Help & Glossary</span>\n        </button>\n      </div>\n\n      {/* Error Display */}\n      {(submitError || pollingError) && (\n        <div className=\"bg-red-900/20 border border-red-500/50 rounded-md p-4\">\n          <div className=\"flex\">\n            <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path\n                fillRule=\"evenodd\"\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-400\">Error</h3>\n              <div className=\"mt-2 text-sm text-red-300\">\n                <p>{submitError || pollingError}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Configuration Form or Results */}\n      {!runId || !simulation ? (\n        <SimulationConfigForm onSubmit={handleSubmit} isSubmitting={isSubmitting} />\n      ) : (\n        <SimulationResults\n          simulation={simulation}\n          onCancel={handleCancel}\n          onDownload={handleDownload}\n          onReset={handleReset}\n        />\n      )}\n\n      {/* Glossary Modal */}\n      <MetricsGlossaryModal isOpen={showGlossary} onClose={() => setShowGlossary(false)} />\n    </div>\n  );\n};\n\nexport default SimulationPanel;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\SimulationResults.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'displayHorizon' is assigned a value but never used.","line":25,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { SimulationResponse } from '../../../services/simulationService';\nimport SimulationStatusBadge from './SimulationStatusBadge';\nimport MetricsCard from './MetricsCard';\nimport ContributorsTable from './ContributorsTable';\n\ninterface SimulationResultsProps {\n  simulation: SimulationResponse;\n  onCancel: () => void;\n  onDownload: () => void;\n  onReset: () => void;\n}\n\nconst SimulationResults: React.FC<SimulationResultsProps> = ({\n  simulation,\n  onCancel,\n  onDownload,\n  onReset,\n}) => {\n  const isRunning = simulation.status === 'RUNNING' || simulation.status === 'QUEUED';\n  const isComplete = simulation.status === 'COMPLETE';\n  const isFailed = simulation.status === 'FAILED';\n\n  // For display, use the horizon with most data (prefer 5Y, then 3Y, then 1Y)\n  const displayHorizon =\n    simulation.horizons?.find((h) => h.tenor === '5Y') ||\n    simulation.horizons?.find((h) => h.tenor === '3Y') ||\n    simulation.horizons?.[0];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Status Header */}\n      <div className=\"bg-fd-darker rounded-lg border border-fd-border p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h3 className=\"text-lg font-medium text-fd-text\">Simulation Status</h3>\n            <p className=\"text-sm text-fd-text-muted mt-1\">Run ID: {simulation.runId}</p>\n          </div>\n          <SimulationStatusBadge status={simulation.status} />\n        </div>\n\n        {simulation.errorMessage && (\n          <div className=\"mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded text-red-400 text-sm\">\n            <strong>Error:</strong> {simulation.errorMessage}\n          </div>\n        )}\n\n        <div className=\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n          <div>\n            <span className=\"text-fd-text-muted\">Valuation Date:</span>\n            <p className=\"text-fd-text font-medium\">{simulation.valuationDate || 'N/A'}</p>\n          </div>\n          <div>\n            <span className=\"text-fd-text-muted\">Paths:</span>\n            <p className=\"text-fd-text font-medium\">\n              {simulation.paths?.toLocaleString() || 'N/A'}\n            </p>\n          </div>\n          <div>\n            <span className=\"text-fd-text-muted\">Horizons:</span>\n            <p className=\"text-fd-text font-medium\">\n              {simulation.horizons?.map((h) => h.tenor).join(', ') || 'N/A'}\n            </p>\n          </div>\n          <div>\n            <span className=\"text-fd-text-muted\">Seed:</span>\n            <p className=\"text-fd-text font-medium\">{simulation.seedUsed ?? 'Random'}</p>\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"mt-4 flex gap-3\">\n          {isRunning && (\n            <button\n              onClick={onCancel}\n              className=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded text-sm font-medium transition-colors\"\n            >\n              Cancel Simulation\n            </button>\n          )}\n          {isComplete && (\n            <>\n              <button\n                onClick={onDownload}\n                className=\"bg-fd-green hover:bg-fd-green-hover text-fd-dark px-4 py-2 rounded text-sm font-medium transition-colors\"\n              >\n                Download Results (JSON)\n              </button>\n              <button\n                onClick={onReset}\n                className=\"bg-fd-border hover:bg-fd-text-muted text-fd-text px-4 py-2 rounded text-sm font-medium transition-colors\"\n              >\n                Run New Simulation\n              </button>\n            </>\n          )}\n          {isFailed && (\n            <button\n              onClick={onReset}\n              className=\"bg-fd-border hover:bg-fd-text-muted text-fd-text px-4 py-2 rounded text-sm font-medium transition-colors\"\n            >\n              Try Again\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Metrics Grid - Show ALL Horizons */}\n      {isComplete && simulation.horizons && simulation.horizons.length > 0 && (\n        <>\n          {simulation.horizons.map((horizon, idx) => (\n            <div key={horizon.tenor}>\n              <h3 className=\"text-lg font-medium text-fd-text mb-4\">\n                Risk Metrics ({horizon.tenor})\n              </h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                <MetricsCard\n                  label=\"Probability of Any Default\"\n                  value={`${((horizon.pAnyDefault || horizon.panyDefault || 0) * 100).toFixed(2)}%`}\n                  description=\"Likelihood that at least one entity defaults\"\n                />\n                <MetricsCard\n                  label=\"Expected Loss\"\n                  value={`$${horizon.loss.mean.toLocaleString(undefined, {\n                    minimumFractionDigits: 2,\n                    maximumFractionDigits: 2,\n                  })}`}\n                  description=\"Mean loss across all scenarios\"\n                />\n                <MetricsCard\n                  label=\"VaR 95%\"\n                  value={`$${horizon.loss.var95.toLocaleString(undefined, {\n                    minimumFractionDigits: 2,\n                    maximumFractionDigits: 2,\n                  })}`}\n                  description=\"Loss not exceeded in 95% of scenarios\"\n                />\n                <MetricsCard\n                  label=\"VaR 99%\"\n                  value={`$${horizon.loss.var99.toLocaleString(undefined, {\n                    minimumFractionDigits: 2,\n                    maximumFractionDigits: 2,\n                  })}`}\n                  description=\"Loss not exceeded in 99% of scenarios\"\n                />\n                <MetricsCard\n                  label=\"Expected Shortfall 97.5%\"\n                  value={`$${horizon.loss.es97_5.toLocaleString(undefined, {\n                    minimumFractionDigits: 2,\n                    maximumFractionDigits: 2,\n                  })}`}\n                  description=\"Mean loss in worst 2.5% of scenarios\"\n                />\n                <MetricsCard\n                  label=\"Diversification Benefit\"\n                  value={`${horizon.diversification.benefitPct.toFixed(2)}%`}\n                  description=\"Risk reduction from portfolio diversification\"\n                />\n              </div>\n            </div>\n          ))}\n\n          {/* Contributors Table */}\n          {simulation.contributors && simulation.contributors.length > 0 && (\n            <div>\n              <h3 className=\"text-lg font-medium text-fd-text mb-4\">\n                Top Contributors to Expected Loss\n              </h3>\n              <ContributorsTable contributors={simulation.contributors} />\n            </div>\n          )}\n        </>\n      )}\n\n      {/* Loading State */}\n      {isRunning && (\n        <div className=\"bg-fd-darker rounded-lg border border-fd-border p-8 text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-fd-green mx-auto mb-4\"></div>\n          <p className=\"text-fd-text-muted\">\n            {simulation.status === 'QUEUED'\n              ? 'Simulation queued...'\n              : 'Running Monte Carlo simulation...'}\n          </p>\n          <p className=\"text-fd-text-muted text-sm mt-2\">\n            This may take a minute or two depending on the number of paths\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SimulationResults;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\SimulationStatusBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\risk\\CashflowScheduleTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\risk\\MarketDataPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DiscountCurveData' is defined but never used.","line":4,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DefaultCurveData' is defined but never used.","line":5,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  MarketDataSnapshot,\n  DiscountCurveData,\n  DefaultCurveData,\n} from '../../services/risk/riskTypes';\n\ninterface Props {\n  marketDataSnapshot?: MarketDataSnapshot | null;\n}\n\nconst MarketDataPanel: React.FC<Props> = ({ marketDataSnapshot }) => {\n  const [activeView, setActiveView] = useState<'structured' | 'raw'>('structured');\n  const [activeRawFile, setActiveRawFile] = useState<'market' | 'todaysmarket' | 'curveconfig'>(\n    'market'\n  );\n\n  console.log(' MarketDataPanel rendered with:', {\n    marketDataSnapshot: !!marketDataSnapshot,\n    activeView,\n    activeRawFile,\n  });\n\n  const handleViewChange = (view: 'structured' | 'raw') => {\n    console.log(' View change requested:', { from: activeView, to: view });\n    setActiveView(view);\n    console.log(' View state updated to:', view);\n  };\n\n  // For demonstration purposes, use mock data if no snapshot available\n  const mockSnapshot: MarketDataSnapshot = {\n    valuationDate: '2025-10-15',\n    baseCurrency: 'USD',\n    discountCurves: [\n      {\n        currency: 'USD',\n        curveId: 'USD6M',\n        quotes: [\n          { tenor: '0D/1D', quoteName: 'MM/USD/0D/1D', value: 0.05, type: 'DEPOSIT' },\n          { tenor: '1D/1W', quoteName: 'MM/USD/1D/1W', value: 0.0501, type: 'DEPOSIT' },\n          { tenor: '1W/1M', quoteName: 'MM/USD/1W/1M', value: 0.0502, type: 'DEPOSIT' },\n          { tenor: '1M/3M', quoteName: 'IR_SWAP/USD/1M/3M', value: 0.0505, type: 'SWAP' },\n          { tenor: '3M/6M', quoteName: 'IR_SWAP/USD/3M/6M', value: 0.051, type: 'SWAP' },\n        ],\n      },\n    ],\n    defaultCurves: [\n      {\n        referenceEntity: 'TECH_CORP',\n        currency: 'USD',\n        curveId: 'TECH_CORP_SR_USD',\n        recoveryRate: 0.4,\n        spreadQuotes: [\n          { tenor: '6M', quoteName: 'CDS/TECH_CORP/USD/6M', value: 0.015, type: 'CDS_SPREAD' },\n          { tenor: '1Y', quoteName: 'CDS/TECH_CORP/USD/1Y', value: 0.0155, type: 'CDS_SPREAD' },\n          { tenor: '2Y', quoteName: 'CDS/TECH_CORP/USD/2Y', value: 0.016, type: 'CDS_SPREAD' },\n          { tenor: '3Y', quoteName: 'CDS/TECH_CORP/USD/3Y', value: 0.0165, type: 'CDS_SPREAD' },\n          { tenor: '5Y', quoteName: 'CDS/TECH_CORP/USD/5Y', value: 0.017, type: 'CDS_SPREAD' },\n        ],\n      },\n    ],\n    fxRates: {\n      'FX/EUR/USD': 1.1,\n      'FX/GBP/USD': 1.25,\n    },\n    marketDataFileContent: `# Market Data File for CDS Calculation\n# Valuation Date: 2025-10-15\n\n# Yield Curves\nMM/USD/0D/1D 0.050000\nMM/USD/1D/1W 0.050100\nMM/USD/1W/1M 0.050200\nIR_SWAP/USD/1M/3M 0.050500\nIR_SWAP/USD/3M/6M 0.051000\n\n# FX Rates\nFX/EUR/USD 1.10\nFX/GBP/USD 1.25\n\n# CDS Curves\nCDS/TECH_CORP/USD/6M 0.0150\nCDS/TECH_CORP/USD/1Y 0.0155\nCDS/TECH_CORP/USD/2Y 0.0160\nCDS/TECH_CORP/USD/3Y 0.0165\nCDS/TECH_CORP/USD/5Y 0.0170\nRECOVERY_RATE/TECH_CORP/USD 0.40`,\n    todaysMarketFileContent: `<?xml version=\"1.0\"?>\n<TodaysMarket>\n  <Configuration id=\"default\">\n    <DiscountingCurvesId>default</DiscountingCurvesId>\n    <IndexForwardingCurvesId>default</IndexForwardingCurvesId>\n  </Configuration>\n  <DiscountingCurves id=\"default\">\n    <DiscountingCurve currency=\"USD\">Yield/USD/USD6M</DiscountingCurve>\n  </DiscountingCurves>\n  <DefaultCurves id=\"default\">\n    <DefaultCurve name=\"TECH_CORP\">Default/USD/TECH_CORP_SR_USD</DefaultCurve>\n  </DefaultCurves>\n</TodaysMarket>`,\n    curveConfigFileContent: `<?xml version=\"1.0\"?>\n<CurveConfiguration>\n  <YieldCurves>\n    <YieldCurve>\n      <CurveId>USD6M</CurveId>\n      <CurveDescription>USD 6M yield curve</CurveDescription>\n      <Currency>USD</Currency>\n    </YieldCurve>\n  </YieldCurves>\n  <DefaultCurves>\n    <DefaultCurve>\n      <CurveId>TECH_CORP_SR_USD</CurveId>\n      <CurveDescription>TECH_CORP SR CDS USD</CurveDescription>\n      <Currency>USD</Currency>\n      <Type>SpreadCDS</Type>\n    </DefaultCurve>\n  </DefaultCurves>\n</CurveConfiguration>`,\n  };\n\n  const snapshot = marketDataSnapshot || mockSnapshot;\n\n  console.log(' Using snapshot data:', {\n    isFromProps: !!marketDataSnapshot,\n    isMockData: !marketDataSnapshot,\n    hasDiscountCurves: !!snapshot?.discountCurves?.length,\n    hasDefaultCurves: !!snapshot?.defaultCurves?.length,\n    hasFxRates: !!snapshot?.fxRates && Object.keys(snapshot.fxRates).length > 0,\n    discountCurvesCount: snapshot?.discountCurves?.length || 0,\n    defaultCurvesCount: snapshot?.defaultCurves?.length || 0,\n    fxRatesCount: snapshot?.fxRates ? Object.keys(snapshot.fxRates).length : 0,\n  });\n\n  if (!snapshot) {\n    return (\n      <div className=\"bg-fd-darker p-6 rounded-md border border-dashed border-fd-border text-center\">\n        <svg\n          className=\"w-12 h-12 text-fd-text-muted mx-auto mb-3\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"2\"\n            d=\"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n          ></path>\n        </svg>\n        <p className=\"text-fd-text-muted\">\n          No market data snapshot available for this calculation.\n        </p>\n        <p className=\"text-fd-text-muted text-sm mt-2\">\n          Market data snapshots are captured with each risk calculation to provide full\n          transparency.\n        </p>\n      </div>\n    );\n  }\n\n  const formatDate = (dateString?: string) => {\n    if (!dateString) return 'N/A';\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n  };\n\n  const formatBasisPoints = (value?: number) => {\n    if (value === undefined || value === null) return '-';\n    return (value * 10000).toFixed(2) + ' bps';\n  };\n\n  const formatPercent = (value?: number) => {\n    if (value === undefined || value === null) return '-';\n    return (value * 100).toFixed(2) + '%';\n  };\n\n  const formatRate = (value?: number) => {\n    if (value === undefined || value === null) return '-';\n    return value.toFixed(6);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with view toggle */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-fd-text flex items-center gap-2\">\n            <svg\n              className=\"w-5 h-5 text-fd-green\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"\n              ></path>\n            </svg>\n            Market Data Used for Calculation\n          </h3>\n          <p className=\"text-sm text-fd-text-muted mt-1\">\n            Valuation Date: {formatDate(snapshot.valuationDate)}  Base Currency:{' '}\n            {snapshot.baseCurrency || 'USD'}\n          </p>\n        </div>\n\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => {\n              console.log(' Structured View button clicked');\n              handleViewChange('structured');\n            }}\n            className={`px-3 py-1.5 text-sm font-medium rounded transition-colors ${\n              activeView === 'structured'\n                ? 'bg-fd-green text-fd-dark'\n                : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n            }`}\n          >\n            Structured View\n          </button>\n          <button\n            onClick={() => {\n              console.log(' Raw Files button clicked');\n              handleViewChange('raw');\n            }}\n            className={`px-3 py-1.5 text-sm font-medium rounded transition-colors ${\n              activeView === 'raw'\n                ? 'bg-fd-green text-fd-dark'\n                : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n            }`}\n          >\n            Raw Files\n          </button>\n        </div>\n      </div>\n\n      {activeView === 'structured' ? (\n        <>\n          {console.log(' Rendering structured view...')}\n          {/* Discount Curves */}\n          {snapshot.discountCurves && snapshot.discountCurves.length > 0 && (\n            <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n              <h4 className=\"text-fd-green font-semibold mb-3 flex items-center gap-2\">\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth=\"2\"\n                    d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\"\n                  ></path>\n                </svg>\n                Discount Curves ({snapshot.discountCurves.length})\n              </h4>\n\n              <div className=\"space-y-4\">\n                {snapshot.discountCurves.map((curve, idx) => (\n                  <div key={idx} className=\"bg-fd-dark rounded p-3\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"font-medium text-fd-text\">\n                        {curve.currency} - {curve.curveId}\n                      </span>\n                      <span className=\"text-xs text-fd-text-muted\">\n                        {curve.quotes?.length || 0} quotes\n                      </span>\n                    </div>\n\n                    {curve.quotes && curve.quotes.length > 0 && (\n                      <div className=\"mt-2\">\n                        <div className=\"grid grid-cols-4 gap-2 text-xs font-medium text-fd-text-muted border-b border-fd-border pb-1 mb-1\">\n                          <span>Tenor</span>\n                          <span>Type</span>\n                          <span>Quote Name</span>\n                          <span className=\"text-right\">Rate</span>\n                        </div>\n                        {curve.quotes.map((quote, qIdx) => (\n                          <div\n                            key={qIdx}\n                            className=\"grid grid-cols-4 gap-2 text-xs py-1 hover:bg-fd-darker\"\n                          >\n                            <span className=\"font-mono text-fd-text\">{quote.tenor}</span>\n                            <span className=\"text-fd-text-muted\">{quote.type}</span>\n                            <span className=\"font-mono text-fd-text-muted text-xs\">\n                              {quote.quoteName}\n                            </span>\n                            <span className=\"font-mono text-fd-text text-right\">\n                              {formatRate(quote.value)}\n                            </span>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Default/Credit Curves */}\n          {snapshot.defaultCurves && snapshot.defaultCurves.length > 0 && (\n            <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n              <h4 className=\"text-fd-green font-semibold mb-3 flex items-center gap-2\">\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth=\"2\"\n                    d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-1.964-1.333-2.732 0L3.268 16c-.77 1.333.192 3 1.732 3z\"\n                  ></path>\n                </svg>\n                Credit/Default Curves ({snapshot.defaultCurves.length})\n              </h4>\n\n              <div className=\"space-y-4\">\n                {snapshot.defaultCurves.map((curve, idx) => (\n                  <div key={idx} className=\"bg-fd-dark rounded p-3\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <div>\n                        <span className=\"font-medium text-fd-text\">{curve.referenceEntity}</span>\n                        <span className=\"text-fd-text-muted ml-2 text-sm\">\n                          ({curve.currency} - {curve.curveId})\n                        </span>\n                      </div>\n                      <div className=\"flex items-center gap-4\">\n                        {curve.recoveryRate !== undefined && curve.recoveryRate !== null && (\n                          <div className=\"text-right\">\n                            <div className=\"text-xs text-fd-text-muted\">Recovery Rate</div>\n                            <div className=\"font-mono text-fd-green font-semibold\">\n                              {formatPercent(curve.recoveryRate)}\n                            </div>\n                          </div>\n                        )}\n                        <span className=\"text-xs text-fd-text-muted\">\n                          {curve.spreadQuotes?.length || 0} spreads\n                        </span>\n                      </div>\n                    </div>\n\n                    {curve.spreadQuotes && curve.spreadQuotes.length > 0 && (\n                      <div className=\"mt-2\">\n                        <div className=\"grid grid-cols-3 gap-2 text-xs font-medium text-fd-text-muted border-b border-fd-border pb-1 mb-1\">\n                          <span>Tenor</span>\n                          <span>Quote Name</span>\n                          <span className=\"text-right\">Spread</span>\n                        </div>\n                        {curve.spreadQuotes.map((quote, qIdx) => (\n                          <div\n                            key={qIdx}\n                            className=\"grid grid-cols-3 gap-2 text-xs py-1 hover:bg-fd-darker\"\n                          >\n                            <span className=\"font-mono text-fd-text\">{quote.tenor}</span>\n                            <span className=\"font-mono text-fd-text-muted text-xs\">\n                              {quote.quoteName}\n                            </span>\n                            <span className=\"font-mono text-fd-text text-right\">\n                              {formatBasisPoints(quote.value)}\n                            </span>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* FX Rates */}\n          {snapshot.fxRates && Object.keys(snapshot.fxRates).length > 0 && (\n            <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n              <h4 className=\"text-fd-green font-semibold mb-3 flex items-center gap-2\">\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth=\"2\"\n                    d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                  ></path>\n                </svg>\n                FX Rates ({Object.keys(snapshot.fxRates).length})\n              </h4>\n\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3\">\n                {Object.entries(snapshot.fxRates).map(([pair, rate]) => (\n                  <div key={pair} className=\"bg-fd-dark rounded p-2\">\n                    <div className=\"text-xs text-fd-text-muted\">{pair}</div>\n                    <div className=\"font-mono text-fd-text font-medium\">{rate.toFixed(6)}</div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </>\n      ) : (\n        <>\n          {console.log(' Rendering raw files view...')}\n          {/* Raw Files View */}\n          <div className=\"bg-fd-darker rounded-md border border-fd-border overflow-hidden\">\n            {/* File tabs */}\n            <div className=\"flex border-b border-fd-border bg-fd-dark\">\n              {[\n                { key: 'market', label: 'market.txt', icon: '' },\n                { key: 'todaysmarket', label: 'todaysmarket.xml', icon: '' },\n                { key: 'curveconfig', label: 'curveconfig.xml', icon: '' },\n              ].map((tab) => (\n                <button\n                  key={tab.key}\n                  onClick={() => setActiveRawFile(tab.key as any)}\n                  className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${\n                    activeRawFile === tab.key\n                      ? 'border-fd-green text-fd-text bg-fd-darker'\n                      : 'border-transparent text-fd-text-muted hover:text-fd-text hover:bg-fd-darker'\n                  }`}\n                >\n                  <span className=\"mr-2\">{tab.icon}</span>\n                  {tab.label}\n                </button>\n              ))}\n            </div>\n\n            {/* File content */}\n            <div className=\"p-4 bg-fd-darker\">\n              <pre className=\"text-xs font-mono text-fd-text bg-fd-dark p-4 rounded overflow-x-auto max-h-96 overflow-y-auto border border-fd-border\">\n                {activeRawFile === 'market' &&\n                  (snapshot.marketDataFileContent || 'No market data file content available')}\n                {activeRawFile === 'todaysmarket' &&\n                  (snapshot.todaysMarketFileContent || 'No todaysmarket.xml content available')}\n                {activeRawFile === 'curveconfig' &&\n                  (snapshot.curveConfigFileContent || 'No curveconfig.xml content available')}\n              </pre>\n            </div>\n          </div>\n\n          <div className=\"text-xs text-fd-text-muted bg-fd-dark rounded p-3 border border-fd-border\">\n            <p>\n               <strong>Tip:</strong> These are the exact files that were sent to ORE for this\n              calculation. You can use these to reproduce the calculation or audit the pricing.\n            </p>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default MarketDataPanel;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\risk\\RegressionStatusBadge.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":17,"column":88,"nodeType":"MemberExpression","endLine":17,"endColumn":104}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\ninterface Props {\n  status: 'PASS' | 'FAIL' | 'UNKNOWN';\n  lastRun?: string;\n}\n\nconst colorMap: Record<string, string> = {\n  PASS: 'bg-green-600 text-white',\n  FAIL: 'bg-red-600 text-white',\n  UNKNOWN: 'bg-gray-600 text-white',\n};\n\nconst RegressionStatusBadge: React.FC<Props> = ({ status, lastRun }) => {\n  return (\n    <span\n      className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold ${colorMap[status]}`}\n      title={\n        lastRun ? `Last regression: ${new Date(lastRun).toLocaleString()}` : 'No regression run yet'\n      }\n    >\n      Regression: {status}\n    </span>\n  );\n};\n\nexport default RegressionStatusBadge;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\risk\\RiskMeasuresPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CashflowScheduleTable' is defined but never used.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'refreshKey' is assigned a value but never used.","line":24,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setRefreshKey' is assigned a value but never used.","line":24,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'addedDays' is assigned a value but never used.","line":165,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":165,"endColumn":18},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'checkForPayoutEvent', 'loadCouponPeriods', and 'loadRiskMeasures'. Either include them or remove the dependency array.","line":216,"column":6,"nodeType":"ArrayExpression","endLine":216,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [checkForPayoutEvent, loadCouponPeriods, loadRiskMeasures, tradeId]","fix":{"range":[7391,7400],"text":"[checkForPayoutEvent, loadCouponPeriods, loadRiskMeasures, tradeId]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'unpaidCoupons' is assigned a value but never used.","line":487,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":487,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport { fetchRiskMeasures } from '../../services/risk/riskService';\nimport { RiskMeasures } from '../../services/risk/riskTypes';\nimport CashflowScheduleTable from './CashflowScheduleTable';\nimport { lifecycleService } from '../../services/lifecycleService';\nimport { CouponPeriod } from '../../types/lifecycle';\nimport { CDSTrade } from '../../data/referenceData';\nimport { creditEventService } from '../../services/creditEventService';\n\ninterface Props {\n  tradeId: number;\n  trade?: CDSTrade; // Optional trade object for richer display\n}\n\nconst RiskMeasuresPanel: React.FC<Props> = ({ tradeId, trade }) => {\n  const [data, setData] = useState<RiskMeasures | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [couponPeriods, setCouponPeriods] = useState<CouponPeriod[]>([]);\n  const [payingPeriodId, setPayingPeriodId] = useState<number | null>(null);\n  const [recalculating, setRecalculating] = useState(false);\n  const [generatingSchedule, setGeneratingSchedule] = useState(false);\n  const [valuationDate, setValuationDate] = useState<string | undefined>(undefined); // undefined means \"today\"\n  const [refreshKey, setRefreshKey] = useState(0); // Used to force refresh when clicking same button\n  const [hasPayoutEvent, setHasPayoutEvent] = useState(false);\n\n  const checkForPayoutEvent = async () => {\n    try {\n      const events = await creditEventService.getCreditEventsForTrade(tradeId);\n      const payoutExists = events.some((event) => event.eventType === 'PAYOUT');\n      setHasPayoutEvent(payoutExists);\n    } catch (error) {\n      console.error('Failed to check for payout events:', error);\n      setHasPayoutEvent(false);\n    }\n  };\n\n  const loadRiskMeasures = async (customValuationDate?: string, forceRefresh: boolean = false) => {\n    if (!tradeId) return;\n    setLoading(true);\n    try {\n      // When forceRefresh is true, use customValuationDate directly (even if undefined)\n      // Otherwise fall back to state's valuationDate\n      const dateToUse = forceRefresh ? customValuationDate : customValuationDate || valuationDate;\n      console.log(` DEBUG loadRiskMeasures called with:`, {\n        customValuationDate,\n        valuationDate,\n        forceRefresh,\n        dateToUse,\n        tradeId,\n        timestamp: new Date().toISOString(),\n      });\n      console.log(\n        `Loading risk measures for trade ${tradeId} with valuation date: ${dateToUse || 'today'}...`\n      );\n      const measures = await fetchRiskMeasures(tradeId, dateToUse);\n      console.log('Risk measures loaded:', {\n        npv: measures.npv,\n        currency: measures.currency,\n        timestamp: measures.valuationTimestamp,\n        loadedAt: new Date().toISOString(),\n      });\n      setData(measures);\n      setError(null);\n    } catch (e: any) {\n      console.error('Failed to load risk measures:', e);\n      setError(e.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadCouponPeriods = async () => {\n    if (!tradeId) return;\n    try {\n      console.log('Loading coupon periods for trade:', tradeId);\n      const periods = await lifecycleService.getCouponSchedule(tradeId);\n      console.log('Loaded coupon periods:', periods.length, periods);\n      setCouponPeriods(periods);\n    } catch (e: any) {\n      console.error('Failed to load coupon periods:', e);\n      setCouponPeriods([]); // Ensure it's set to empty array on error\n    }\n  };\n\n  const handlePayCoupon = async (periodId: number, payOnTime: boolean = false) => {\n    setPayingPeriodId(periodId);\n    try {\n      await lifecycleService.payCoupon(tradeId, periodId, payOnTime);\n      console.log('Coupon paid successfully, reloading data...');\n\n      // Reload coupon periods to reflect payment\n      await loadCouponPeriods();\n\n      // Trigger risk recalculation - CRITICAL: Clear old data first to force re-render\n      setRecalculating(true);\n      setData(null); // Force clear to ensure React detects the change\n\n      // Wait a bit to ensure backend has processed the payment\n      await new Promise((resolve) => setTimeout(resolve, 500));\n\n      await loadRiskMeasures();\n      console.log('Risk measures reloaded after coupon payment');\n      setRecalculating(false);\n    } catch (e: any) {\n      alert('Failed to pay coupon: ' + e.message);\n      setRecalculating(false);\n    } finally {\n      setPayingPeriodId(null);\n    }\n  };\n\n  const handleUnpayCoupon = async (periodId: number) => {\n    setPayingPeriodId(periodId);\n    try {\n      await lifecycleService.unpayCoupon(tradeId, periodId);\n      console.log('Coupon payment cancelled successfully, reloading data...');\n\n      // Reload coupon periods to reflect cancellation\n      await loadCouponPeriods();\n\n      // Trigger risk recalculation\n      setRecalculating(true);\n      setData(null);\n\n      await new Promise((resolve) => setTimeout(resolve, 500));\n\n      await loadRiskMeasures();\n      console.log('Risk measures reloaded after coupon cancellation');\n      setRecalculating(false);\n    } catch (e: any) {\n      alert('Failed to cancel coupon payment: ' + e.message);\n      setRecalculating(false);\n    } finally {\n      setPayingPeriodId(null);\n    }\n  };\n\n  const handleGenerateSchedule = async () => {\n    setGeneratingSchedule(true);\n    try {\n      await lifecycleService.generateCouponSchedule(tradeId);\n      // Reload the schedule\n      await loadCouponPeriods();\n    } catch (e: any) {\n      alert('Failed to generate coupon schedule: ' + e.message);\n    } finally {\n      setGeneratingSchedule(false);\n    }\n  };\n\n  // Helper function to calculate business days offset (simplified - assumes no holidays)\n  const getBusinessDaysFromToday = (days: number): string => {\n    const today = new Date();\n    const target = new Date(today);\n\n    let addedDays = 0;\n    let daysToAdd = days;\n\n    while (daysToAdd > 0) {\n      target.setDate(target.getDate() + 1);\n      const dayOfWeek = target.getDay();\n      // Skip weekends (0 = Sunday, 6 = Saturday)\n      if (dayOfWeek !== 0 && dayOfWeek !== 6) {\n        addedDays++;\n        daysToAdd--;\n      }\n    }\n\n    return target.toISOString().split('T')[0];\n  };\n\n  const handleQuickValuationDate = async (option: 'today' | 't+1' | 't+7' | 't+45') => {\n    let newDate: string | undefined = undefined;\n\n    switch (option) {\n      case 'today':\n        newDate = undefined; // undefined means use backend's \"today\"\n        break;\n      case 't+1':\n        newDate = getBusinessDaysFromToday(1);\n        break;\n      case 't+7':\n        newDate = getBusinessDaysFromToday(7);\n        break;\n      case 't+45':\n        newDate = getBusinessDaysFromToday(45);\n        break;\n    }\n\n    console.log(` DEBUG handleQuickValuationDate:`, {\n      option,\n      newDate,\n      currentValuationDate: valuationDate,\n    });\n\n    // Update state first\n    setValuationDate(newDate);\n\n    // Force a fresh fetch by clearing data first\n    setData(null);\n    setLoading(true);\n    setError(null);\n\n    // Small delay to ensure state updates propagate\n    await new Promise((resolve) => setTimeout(resolve, 10));\n\n    // Now fetch with the new date, passing forceRefresh=true to use newDate directly\n    await loadRiskMeasures(newDate, true);\n  };\n\n  useEffect(() => {\n    loadRiskMeasures();\n    loadCouponPeriods();\n    checkForPayoutEvent();\n  }, [tradeId]);\n\n  if (!tradeId) return <div className=\"text-fd-text\">No trade selected</div>;\n\n  // Show payout message if PAYOUT event exists\n  if (hasPayoutEvent) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"bg-fd-darker p-6 rounded-md border-2 border-fd-green\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"w-12 h-12 bg-fd-green/20 rounded-full flex items-center justify-center\">\n              <svg\n                className=\"w-6 h-6 text-fd-green\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                ></path>\n              </svg>\n            </div>\n            <div>\n              <h3 className=\"text-fd-green font-semibold text-lg\">CDS Protection Paid Out</h3>\n              <p className=\"text-fd-text-muted text-sm\">\n                A credit event has triggered payout - all risk measures are now zero\n              </p>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6\">\n            <div className=\"bg-fd-dark rounded p-4\">\n              <div className=\"text-xs text-fd-text-muted mb-1\">Net Present Value</div>\n              <div className=\"text-2xl font-bold text-fd-green font-mono\">$0.00</div>\n            </div>\n            <div className=\"bg-fd-dark rounded p-4\">\n              <div className=\"text-xs text-fd-text-muted mb-1\">Jump-to-Default (JTD)</div>\n              <div className=\"text-2xl font-bold text-fd-green font-mono\">$0.00</div>\n            </div>\n            <div className=\"bg-fd-dark rounded p-4\">\n              <div className=\"text-xs text-fd-text-muted mb-1\">Fair Spread</div>\n              <div className=\"text-2xl font-bold text-fd-green font-mono\">0 bps</div>\n            </div>\n          </div>\n\n          <div className=\"mt-6 bg-fd-dark rounded p-4\">\n            <div className=\"flex items-start gap-2\">\n              <svg\n                className=\"w-5 h-5 text-fd-green mt-0.5 flex-shrink-0\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                ></path>\n              </svg>\n              <div className=\"text-sm text-fd-text-muted\">\n                <p className=\"mb-2\">\n                  This trade has experienced a credit event (Bankruptcy or Restructuring) resulting\n                  in payout. The CDS contract has fulfilled its protection obligation.\n                </p>\n                <p>\n                  All risk exposures have been reduced to zero as the contract has settled and no\n                  further obligations remain.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Paid Coupons Information */}\n          <div className=\"mt-6 bg-fd-dark rounded p-4\">\n            <h4 className=\"text-fd-text font-semibold mb-3 flex items-center gap-2\">\n              <svg\n                className=\"w-5 h-5 text-fd-green\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4\"\n                ></path>\n              </svg>\n              Coupon Payment History\n            </h4>\n            {couponPeriods.length === 0 ? (\n              <p className=\"text-fd-text-muted text-sm\">\n                No coupon schedule was generated for this trade.\n              </p>\n            ) : (\n              (() => {\n                const paidCoupons = couponPeriods.filter((p) => p.paid === true);\n                if (paidCoupons.length === 0) {\n                  return (\n                    <p className=\"text-fd-text-muted text-sm\">\n                      No coupons were paid before the credit event occurred.\n                    </p>\n                  );\n                }\n                return (\n                  <div className=\"space-y-2\">\n                    <p className=\"text-fd-text text-sm mb-3\">\n                      {paidCoupons.length} coupon{paidCoupons.length > 1 ? 's' : ''} paid before\n                      credit event:\n                    </p>\n                    <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                      {paidCoupons.map((period, index) => (\n                        <div\n                          key={period.id}\n                          className=\"bg-fd-darker rounded p-3 flex items-center justify-between border border-fd-border\"\n                        >\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2\">\n                              <svg\n                                className=\"w-4 h-4 text-fd-green\"\n                                fill=\"currentColor\"\n                                viewBox=\"0 0 20 20\"\n                              >\n                                <path\n                                  fillRule=\"evenodd\"\n                                  d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                                  clipRule=\"evenodd\"\n                                ></path>\n                              </svg>\n                              <span className=\"text-fd-text text-sm font-medium\">\n                                Period #{index + 1}\n                              </span>\n                              <span className=\"text-fd-text-muted text-xs\">\n                                ({new Date(period.periodStartDate).toLocaleDateString()} -{' '}\n                                {new Date(period.periodEndDate).toLocaleDateString()})\n                              </span>\n                            </div>\n                            <div className=\"text-xs text-fd-text-muted mt-1\">\n                              Payment Date: {new Date(period.paymentDate).toLocaleDateString()}\n                              {period.paidAt && (\n                                <span className=\"ml-2 text-fd-green\">\n                                   Paid: {new Date(period.paidAt).toLocaleDateString()}\n                                </span>\n                              )}\n                            </div>\n                          </div>\n                          <div className=\"text-right\">\n                            <div className=\"text-fd-green font-mono font-semibold\">\n                              {new Intl.NumberFormat('en-US', {\n                                style: 'currency',\n                                currency: data?.currency || 'USD',\n                                minimumFractionDigits: 2,\n                                maximumFractionDigits: 2,\n                              }).format(period.couponAmount || 0)}\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                );\n              })()\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading)\n    return (\n      <div className=\"flex items-center gap-2 text-fd-text\">\n        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-fd-green\"></div>\n        <span>Calculating risk measures with ORE...</span>\n      </div>\n    );\n  if (error)\n    return (\n      <div className=\"text-red-400\" role=\"alert\">\n        Failed: {error}\n      </div>\n    );\n  if (!data) return null;\n\n  const formatValue = (value: number | null | undefined, decimals: number = 2): string => {\n    if (value === null || value === undefined) return '-';\n    return typeof value === 'number'\n      ? value.toLocaleString(undefined, {\n          minimumFractionDigits: decimals,\n          maximumFractionDigits: decimals,\n        })\n      : String(value);\n  };\n\n  const formatCurrency = (value: number | null | undefined, currency: string = 'USD'): string => {\n    if (value === null || value === undefined) return '-';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: currency,\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    }).format(value);\n  };\n\n  const formatBasisPoints = (value: number | null | undefined): string => {\n    if (value === null || value === undefined) return '-';\n    return (value * 10000).toFixed(2) + ' bps';\n  };\n\n  // Calculate Risky PV01 if ORE doesn't provide it\n  // Formula: |Premium Leg NPV + Accrued Premium| / (Notional  Running Spread)\n  const calculateRiskyPV01 = (): number | null => {\n    // If ORE provided it, use that\n    if (data.riskyAnnuity !== null && data.riskyAnnuity !== undefined) {\n      return data.riskyAnnuity;\n    }\n\n    // Otherwise calculate it from available data\n    const premiumLegNPV = data.premiumLegNPVClean || 0;\n    const accruedPremium = data.accruedPremium || 0;\n    const notional = data.currentNotional || data.originalNotional;\n    const runningSpread = data.fairSpreadClean; // Fair spread in decimal form\n\n    if (!notional || !runningSpread || runningSpread === 0) {\n      return null;\n    }\n\n    const riskyPV01 = Math.abs(premiumLegNPV + accruedPremium) / (notional * runningSpread);\n    return riskyPV01;\n  };\n\n  const riskyPV01 = calculateRiskyPV01();\n\n  // Find the next unpaid coupon (earliest payment date among unpaid)\n  const getNextUnpaidCoupon = (): CouponPeriod | null => {\n    const unpaidCoupons = couponPeriods\n      .filter((p) => !p.paid)\n      .sort((a, b) => new Date(a.paymentDate).getTime() - new Date(b.paymentDate).getTime());\n    return unpaidCoupons.length > 0 ? unpaidCoupons[0] : null;\n  };\n\n  // Find the most recently paid coupon (latest payment date among paid coupons)\n  const getMostRecentlyPaidCoupon = (): CouponPeriod | null => {\n    const paidCoupons = couponPeriods\n      .filter((p) => p.paid)\n      .sort((a, b) => new Date(b.paymentDate).getTime() - new Date(a.paymentDate).getTime());\n    return paidCoupons.length > 0 ? paidCoupons[0] : null;\n  };\n\n  const nextUnpaidCoupon = getNextUnpaidCoupon();\n  const mostRecentlyPaidCoupon = getMostRecentlyPaidCoupon();\n\n  const canPayCoupon = (period: CouponPeriod): boolean => {\n    if (period.paid) return false;\n    if (!nextUnpaidCoupon) return false;\n    return period.id === nextUnpaidCoupon.id;\n  };\n\n  const canUnpayCoupon = (period: CouponPeriod): boolean => {\n    if (!period.paid) return false;\n    if (!mostRecentlyPaidCoupon) return false;\n    return period.id === mostRecentlyPaidCoupon.id;\n  };\n\n  // Calculate coupon statistics\n  const totalCoupons = couponPeriods.length;\n  const paidCoupons = couponPeriods.filter((p) => p.paid).length;\n  const unpaidCoupons = totalCoupons - paidCoupons;\n  const totalPaidAmount = couponPeriods\n    .filter((p) => p.paid && p.couponAmount)\n    .reduce((sum, p) => sum + (p.couponAmount || 0), 0);\n\n  // Derive frequency and maturity from coupon periods\n  const getScheduleDescription = () => {\n    if (couponPeriods.length === 0) return '';\n\n    // Get maturity from last period\n    const lastPeriod = couponPeriods[couponPeriods.length - 1];\n    const maturityDate = new Date(lastPeriod.periodEndDate);\n    const maturityYear = maturityDate.getFullYear();\n    const maturityMonth = maturityDate.toLocaleDateString('en-US', { month: 'short' });\n\n    // Use trade's premium frequency if available\n    let frequency = 'Periodic';\n    if (trade?.premiumFrequency) {\n      // Map the database values to display names\n      const frequencyMap: Record<string, string> = {\n        MONTHLY: 'Monthly',\n        QUARTERLY: 'Quarterly',\n        SEMI_ANNUAL: 'Semi-annual',\n        ANNUAL: 'Annual',\n      };\n      frequency = frequencyMap[trade.premiumFrequency] || trade.premiumFrequency;\n    } else if (couponPeriods.length > 1) {\n      // Fall back to calculating from payment date intervals if trade data not available\n      const firstPayment = new Date(couponPeriods[0].paymentDate);\n      const secondPayment = new Date(couponPeriods[1].paymentDate);\n      const daysDiff = Math.round(\n        (secondPayment.getTime() - firstPayment.getTime()) / (1000 * 60 * 60 * 24)\n      );\n\n      // More lenient ranges for CDS IMM schedules\n      // Quarterly: ~91 days (3 months)\n      // Semi-annual: ~182 days (6 months)\n      // Monthly: ~30 days\n      // Annual: ~365 days\n      if (daysDiff >= 25 && daysDiff <= 35) frequency = 'Monthly';\n      else if (daysDiff >= 80 && daysDiff <= 100) frequency = 'Quarterly';\n      else if (daysDiff >= 170 && daysDiff <= 195) frequency = 'Semi-annual';\n      else if (daysDiff >= 350 && daysDiff <= 375) frequency = 'Annual';\n    }\n\n    return `${frequency} until ${maturityMonth} ${maturityYear}`;\n  };\n\n  const hasCashflows = data.cashflows && data.cashflows.length > 0;\n  const hasCDSMetrics = data.fairSpreadClean !== null || data.protectionLegNPV !== null;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Core ORE Valuation */}\n      <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n        <div className=\"flex justify-between items-start mb-3\">\n          <h3 className=\"text-fd-green font-semibold flex items-center gap-2\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\n              ></path>\n            </svg>\n            ORE Valuation\n          </h3>\n\n          {/* Valuation Date Quick Selector */}\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-xs text-fd-text-muted\">Valuation Date:</span>\n            <div className=\"flex gap-1\">\n              <button\n                onClick={() => handleQuickValuationDate('today')}\n                disabled={loading || recalculating}\n                className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n                  valuationDate === undefined || valuationDate === ''\n                    ? 'bg-fd-green text-fd-dark'\n                    : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n                } disabled:opacity-50 disabled:cursor-not-allowed`}\n              >\n                Today\n              </button>\n              <button\n                onClick={() => handleQuickValuationDate('t+1')}\n                disabled={loading || recalculating}\n                className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n                  valuationDate === getBusinessDaysFromToday(1)\n                    ? 'bg-fd-green text-fd-dark'\n                    : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n                } disabled:opacity-50 disabled:cursor-not-allowed`}\n              >\n                T+1\n              </button>\n              <button\n                onClick={() => handleQuickValuationDate('t+7')}\n                disabled={loading || recalculating}\n                className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n                  valuationDate === getBusinessDaysFromToday(7)\n                    ? 'bg-fd-green text-fd-dark'\n                    : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n                } disabled:opacity-50 disabled:cursor-not-allowed`}\n              >\n                T+7\n              </button>\n              <button\n                onClick={() => handleQuickValuationDate('t+45')}\n                disabled={loading || recalculating}\n                className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n                  valuationDate === getBusinessDaysFromToday(45)\n                    ? 'bg-fd-green text-fd-dark'\n                    : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n                } disabled:opacity-50 disabled:cursor-not-allowed`}\n              >\n                T+45\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"bg-fd-dark rounded p-3\">\n            <div className=\"text-xs text-fd-text-muted mb-1\">Net Present Value</div>\n            <div className=\"text-2xl font-bold text-fd-green font-mono\">\n              {formatCurrency(data.npv, data.currency)}\n            </div>\n          </div>\n          <div className=\"bg-fd-dark rounded p-3\">\n            <div className=\"text-xs text-fd-text-muted mb-1\">Currency</div>\n            <div className=\"text-2xl font-bold text-fd-text font-mono\">\n              {data.currency || 'USD'}\n            </div>\n          </div>\n          <div className=\"bg-fd-dark rounded p-3\">\n            <div className=\"text-xs text-fd-text-muted mb-1\">Valuation Time</div>\n            <div className=\"text-sm text-fd-text\">\n              {new Date(data.valuationTimestamp).toLocaleString()}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* CDS-Specific Metrics (if available) */}\n      {hasCDSMetrics && (\n        <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n          <h3 className=\"text-fd-green font-semibold mb-3 flex items-center gap-2\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\"\n              ></path>\n            </svg>\n            CDS Valuation Breakdown\n          </h3>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 text-sm\">\n            {data.jtd !== null && data.jtd !== undefined && (\n              <div className=\"md:col-span-2 lg:col-span-4 bg-fd-dark rounded p-3 border-l-4 border-fd-green\">\n                <span className=\"text-fd-text-muted\">Jump-to-Default (JTD) Exposure:</span>\n                <div className=\"font-mono text-fd-green font-bold text-xl mt-1\">\n                  {formatCurrency(data.jtd, data.currency)}\n                </div>\n                <div className=\"text-xs text-fd-text-muted mt-1\">\n                  Potential loss if reference entity defaults immediately\n                </div>\n              </div>\n            )}\n            <div>\n              <span className=\"text-fd-text-muted\">Fair Spread (Clean):</span>\n              <div className=\"font-mono text-fd-text font-semibold\">\n                {formatBasisPoints(data.fairSpreadClean)}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Fair Spread (Dirty):</span>\n              <div className=\"font-mono text-fd-text font-semibold\">\n                {formatBasisPoints(data.fairSpreadDirty)}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Protection Leg NPV:</span>\n              <div className=\"font-mono text-fd-text font-semibold\">\n                {formatCurrency(data.protectionLegNPV, data.currency)}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Premium Leg NPV:</span>\n              <div className=\"font-mono text-fd-text font-semibold\">\n                {formatCurrency(data.premiumLegNPVClean, data.currency)}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Accrued Premium:</span>\n              <div className=\"font-mono text-fd-text\">\n                {formatCurrency(data.accruedPremium, data.currency)}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Upfront Premium:</span>\n              <div className=\"font-mono text-fd-text\">\n                {formatCurrency(data.upfrontPremium, data.currency)}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Coupon Leg BPS:</span>\n              <div className=\"font-mono text-fd-text\">{formatValue(data.couponLegBPS, 2)}</div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Current Notional:</span>\n              <div className=\"font-mono text-fd-text\">\n                {formatCurrency(data.currentNotional, data.currency)}\n              </div>\n            </div>\n            {riskyPV01 !== null && (\n              <div>\n                <span className=\"text-fd-text-muted\">Risky PV01:</span>\n                <div className=\"font-mono text-fd-text font-semibold text-fd-green\">\n                  {formatValue(riskyPV01, 6)}\n                </div>\n                <div className=\"text-xs text-fd-text-muted mt-0.5\">\n                  {data.riskyAnnuity ? 'From ORE' : 'Calculated'}\n                </div>\n              </div>\n            )}\n            {trade?.recoveryRate !== undefined && trade?.recoveryRate !== null && (\n              <div>\n                <span className=\"text-fd-text-muted\">Recovery Rate:</span>\n                <div className=\"font-mono text-fd-text font-semibold\">{trade.recoveryRate}%</div>\n              </div>\n            )}\n            {paidCoupons > 0 && (\n              <div>\n                <span className=\"text-fd-text-muted\">Total Paid Coupons:</span>\n                <div className=\"font-mono text-fd-green font-semibold\">\n                  {formatCurrency(totalPaidAmount, data.currency)}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Credit Risk Profile (if available) */}\n      {data.defaultProbabilities && data.defaultProbabilities.length > 0 && (\n        <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n          <h3 className=\"text-fd-green font-semibold mb-3 flex items-center gap-2\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-1.964-1.333-2.732 0L3.268 16c-.77 1.333.192 3 1.732 3z\"\n              ></path>\n            </svg>\n            Credit Risk Profile\n          </h3>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <h4 className=\"text-sm font-medium text-fd-text mb-2\">\n                Default Probabilities by Period\n              </h4>\n              <div className=\"space-y-1 text-sm\">\n                {data.defaultProbabilities.slice(0, 6).map((prob, idx) => (\n                  <div key={idx} className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Period {idx + 1}:</span>\n                    <span className=\"font-mono text-fd-text\">{(prob * 100).toFixed(2)}%</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {data.expectedLosses && data.expectedLosses.length > 0 && (\n              <div>\n                <h4 className=\"text-sm font-medium text-fd-text mb-2\">Expected Losses by Period</h4>\n                <div className=\"space-y-1 text-sm\">\n                  {data.expectedLosses.slice(0, 6).map((loss, idx) => (\n                    <div key={idx} className=\"flex justify-between\">\n                      <span className=\"text-fd-text-muted\">Period {idx + 1}:</span>\n                      <span className=\"font-mono text-fd-text\">\n                        {formatCurrency(loss, data.currency)}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Coupon Payment Schedule */}\n      {couponPeriods.length > 0 && (\n        <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n          <h3 className=\"text-fd-green font-semibold mb-3 flex items-center gap-2\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\"\n              ></path>\n            </svg>\n            Coupon Payment Schedule\n            <span className=\"ml-auto text-sm font-normal text-fd-text-muted\">\n              {paidCoupons} of {totalCoupons} paid\n            </span>\n            {recalculating && (\n              <span className=\"ml-2 text-sm font-normal text-fd-text-muted flex items-center gap-1\">\n                <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-fd-green\"></div>\n                Recalculating risk...\n              </span>\n            )}\n          </h3>\n\n          {/* Schedule description */}\n          <div className=\"mb-3 text-sm text-fd-text-muted italic\">{getScheduleDescription()}</div>\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-sm text-fd-text\">\n              <thead>\n                <tr className=\"text-left border-b-2 border-fd-border bg-fd-dark\">\n                  <th className=\"py-2 px-3 font-medium\">Payment Date</th>\n                  <th className=\"py-2 px-3 font-medium\">Period</th>\n                  <th className=\"py-2 px-3 font-medium text-right\">Days</th>\n                  <th className=\"py-2 px-3 font-medium text-right\">Notional</th>\n                  <th className=\"py-2 px-3 font-medium text-right\">Coupon Amount</th>\n                  <th className=\"py-2 px-3 font-medium\">Status</th>\n                  <th className=\"py-2 px-3 font-medium text-center\">Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                {couponPeriods.map((period) => (\n                  <tr\n                    key={period.id}\n                    className={`border-b border-fd-border hover:bg-fd-dark transition-colors ${period.paid ? 'opacity-60' : ''}`}\n                  >\n                    <td className=\"py-2 px-3 font-mono\">\n                      {new Date(period.paymentDate).toLocaleDateString()}\n                    </td>\n                    <td className=\"py-2 px-3 text-fd-text-muted\">\n                      {new Date(period.periodStartDate).toLocaleDateString()} {' '}\n                      {new Date(period.periodEndDate).toLocaleDateString()}\n                    </td>\n                    <td className=\"py-2 px-3 font-mono text-right\">{period.accrualDays}</td>\n                    <td className=\"py-2 px-3 font-mono text-right\">\n                      {formatCurrency(period.notionalAmount, data?.currency)}\n                    </td>\n                    <td className=\"py-2 px-3 font-mono text-right\">\n                      {period.couponAmount\n                        ? formatCurrency(period.couponAmount, data?.currency)\n                        : '-'}\n                    </td>\n                    <td className=\"py-2 px-3\">\n                      {period.paid ? (\n                        <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-500/20 text-green-400\">\n                          <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path\n                              fillRule=\"evenodd\"\n                              d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\n                              clipRule=\"evenodd\"\n                            />\n                          </svg>\n                          Paid\n                        </span>\n                      ) : (\n                        <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-500/20 text-yellow-400\">\n                          <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path\n                              fillRule=\"evenodd\"\n                              d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\"\n                              clipRule=\"evenodd\"\n                            />\n                          </svg>\n                          Unpaid\n                        </span>\n                      )}\n                    </td>\n                    <td className=\"py-2 px-3 text-center\">\n                      {/* Show Cancel button for the most recently paid coupon */}\n                      {period.paid && canUnpayCoupon(period) && (\n                        <div className=\"flex flex-col gap-1 items-center\">\n                          <button\n                            onClick={() => handleUnpayCoupon(period.id)}\n                            disabled={payingPeriodId === period.id || recalculating}\n                            title=\"Cancel this payment (for demo)\"\n                            className=\"px-2 py-1 text-xs bg-red-600 text-white rounded font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors w-full\"\n                          >\n                            {payingPeriodId === period.id ? (\n                              <span className=\"flex items-center gap-1 justify-center\">\n                                <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-white\"></div>\n                              </span>\n                            ) : (\n                              ' Cancel Payment'\n                            )}\n                          </button>\n                          <span className=\"text-xs text-fd-text-muted\">\n                            {new Date(period.paidAt!).toLocaleString()}\n                          </span>\n                        </div>\n                      )}\n\n                      {/* Show payment timestamp for other paid coupons */}\n                      {period.paid && !canUnpayCoupon(period) && period.paidAt && (\n                        <span className=\"text-xs text-fd-text-muted\">\n                          {new Date(period.paidAt).toLocaleString()}\n                        </span>\n                      )}\n\n                      {/* Show payment buttons for unpaid coupons */}\n                      {!period.paid && (\n                        <div className=\"flex gap-1 justify-center\">\n                          <button\n                            onClick={() => handlePayCoupon(period.id, true)}\n                            disabled={\n                              !canPayCoupon(period) || payingPeriodId === period.id || recalculating\n                            }\n                            title={\n                              !canPayCoupon(period)\n                                ? 'You must pay earlier coupons first'\n                                : 'Pay on the scheduled payment date'\n                            }\n                            className=\"px-2 py-1 text-xs bg-fd-green text-fd-dark rounded font-medium hover:bg-fd-green-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                          >\n                            {payingPeriodId === period.id ? (\n                              <span className=\"flex items-center gap-1\">\n                                <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-fd-dark\"></div>\n                              </span>\n                            ) : canPayCoupon(period) ? (\n                              'Pay On Time'\n                            ) : (\n                              ' Locked'\n                            )}\n                          </button>\n                          <button\n                            onClick={() => handlePayCoupon(period.id, false)}\n                            disabled={\n                              !canPayCoupon(period) || payingPeriodId === period.id || recalculating\n                            }\n                            title={\n                              !canPayCoupon(period)\n                                ? 'You must pay earlier coupons first'\n                                : 'Pay now (backdated)'\n                            }\n                            className=\"px-2 py-1 text-xs bg-blue-600 text-white rounded font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                          >\n                            {canPayCoupon(period) ? 'Pay Now' : ''}\n                          </button>\n                        </div>\n                      )}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          <div className=\"mt-3 text-xs text-fd-text-muted\">\n            <p>\n               <strong>Tip:</strong> Coupons must be paid sequentially by payment date. Only the\n              next unpaid coupon can be paid  earlier coupons must be settled before later ones.\n              <br /> <strong>Pay On Time:</strong> Marks the coupon as paid on its scheduled\n              payment date (no accrued premium).\n              <br /> <strong>Pay Now:</strong> Marks the coupon as paid today (shows accrued\n              premium if applicable).\n              <br /> <strong>Cancel:</strong> Reverts the most recently paid coupon (for demo\n              purposes only).\n              <br />\n              Paying or canceling a coupon will trigger a risk recalculation.\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* No coupon schedule message */}\n      {couponPeriods.length === 0 && data && !loading && (\n        <div className=\"bg-fd-darker p-4 rounded-md border border-dashed border-fd-border text-center\">\n          <svg\n            className=\"w-12 h-12 text-fd-text-muted mx-auto mb-3\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n            ></path>\n          </svg>\n          <p className=\"text-fd-text-muted mb-4\">\n            No coupon schedule generated for this trade yet.\n          </p>\n          <button\n            onClick={handleGenerateSchedule}\n            disabled={generatingSchedule}\n            className=\"px-4 py-2 bg-fd-green text-fd-dark rounded font-medium hover:bg-fd-green-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n          >\n            {generatingSchedule ? (\n              <span className=\"flex items-center gap-2\">\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-fd-dark\"></div>\n                Generating Schedule...\n              </span>\n            ) : (\n              'Generate Coupon Schedule'\n            )}\n          </button>\n        </div>\n      )}\n\n      {/* Cashflow Schedule - Hidden: Merged with Coupon Payment Schedule above */}\n      {/* hasCashflows && (\n        <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n          <h3 className=\"text-fd-green font-semibold mb-3 flex items-center gap-2\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n            </svg>\n            Cashflow Schedule\n            <span className=\"ml-auto text-sm font-normal text-fd-text-muted\">\n              {data.cashflows!.length} payment{data.cashflows!.length !== 1 ? 's' : ''}\n            </span>\n          </h3>\n          \n          <CashflowScheduleTable cashflows={data.cashflows!} />\n        </div>\n      ) */}\n\n      {/* No data message */}\n      {!hasCashflows && !hasCDSMetrics && (\n        <div className=\"bg-fd-darker p-6 rounded-md border border-dashed border-fd-border text-center\">\n          <svg\n            className=\"w-12 h-12 text-fd-text-muted mx-auto mb-3\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n            ></path>\n          </svg>\n          <p className=\"text-fd-text-muted\">\n            Additional CDS metrics and cashflow schedule will appear here once available.\n          </p>\n          <p className=\"text-fd-text-muted text-sm mt-2\">\n            Currently showing NPV calculated by ORE.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default RiskMeasuresPanel;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\risk\\ScenarioRunModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\risk\\__tests__\\RegressionStatusBadge.test.tsx","messages":[{"ruleId":"testing-library/prefer-screen-queries","severity":2,"message":"Avoid destructuring queries from `render` result, use `screen.getByText` instead","line":7,"column":10,"nodeType":"Identifier","messageId":"preferScreenQueries","endLine":7,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { render } from '@testing-library/react';\nimport RegressionStatusBadge from '../RegressionStatusBadge';\n\ntest('renders regression status badge', () => {\n  const { getByText } = render(<RegressionStatusBadge status=\"PASS\" />);\n  expect(getByText(/Regression: PASS/)).toBeInTheDocument();\n});\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\services-status-modal\\ServicesStatusModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getStatusColor' is assigned a value but never used.","line":152,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":152,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\n\n// Use the same API base URL pattern as other services\nimport { API_BASE_URL } from '../../config/api';\n\ninterface ServiceStatus {\n  name: string;\n  status: 'ONLINE' | 'OFFLINE' | 'UNKNOWN';\n  responseTime?: number;\n  lastChecked?: string;\n  error?: string;\n  url?: string;\n}\n\ninterface ServicesStatusModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst ServicesStatusModal: React.FC<ServicesStatusModalProps> = ({ isOpen, onClose }) => {\n  const [services, setServices] = useState<ServiceStatus[]>([\n    { name: 'PostgreSQL Database', status: 'UNKNOWN' },\n    { name: 'API Gateway', status: 'UNKNOWN' },\n    { name: 'Backend Service', status: 'UNKNOWN' },\n    { name: 'CDS Risk Engine', status: 'UNKNOWN' },\n    { name: 'Open Source Risk Engine (ORE)', status: 'UNKNOWN' },\n    { name: 'React Frontend', status: 'UNKNOWN' },\n  ]);\n  const [lastUpdated, setLastUpdated] = useState<Date | null>(null);\n  const [autoRefresh, setAutoRefresh] = useState(true);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n\n  const checkServicesHealth = async () => {\n    setIsRefreshing(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/health/status`);\n      const data = await response.json();\n\n      // Generate dummy status for additional services\n      const generateDummyResponseTime = () => Math.floor(Math.random() * 15) + 5; // 5-20ms\n\n      const updatedServices: ServiceStatus[] = [\n        // PostgreSQL - inferred from backend status\n        {\n          name: 'PostgreSQL Database',\n          status: data.backendStatus?.status === 'UP' ? 'ONLINE' : 'OFFLINE',\n          responseTime: data.backendStatus?.responseTime,\n          lastChecked: new Date().toLocaleTimeString(),\n          error: data.backendStatus?.status !== 'UP' ? 'Database connection issues' : undefined,\n        },\n        // API Gateway\n        {\n          name: 'API Gateway',\n          status: data.status === 'UP' ? 'ONLINE' : 'OFFLINE',\n          responseTime: 15, // Gateway response is usually fast\n          lastChecked: new Date().toLocaleTimeString(),\n          url: API_BASE_URL.replace('/api', ''), // Remove /api suffix for display\n          error: data.status !== 'UP' ? 'Gateway unavailable' : undefined,\n        },\n        // Backend Service\n        {\n          name: 'Backend Service',\n          status: data.backendStatus?.status === 'UP' ? 'ONLINE' : 'OFFLINE',\n          responseTime: data.backendStatus?.responseTime,\n          lastChecked: new Date().toLocaleTimeString(),\n          url: data.backendStatus?.healthEndpoint\n            ? `${API_BASE_URL.replace('/api', '')}${data.backendStatus.healthEndpoint}`\n            : 'Backend Service',\n          error:\n            data.backendStatus?.error ||\n            (data.backendStatus?.status !== 'UP' ? 'Service unavailable' : undefined),\n        },\n        // CDS Risk Engine (dummy health)\n        {\n          name: 'CDS Risk Engine',\n          status: 'ONLINE',\n          responseTime: generateDummyResponseTime(),\n          lastChecked: new Date().toLocaleTimeString(),\n          url: 'http://localhost:8082',\n        },\n        // Open Source Risk Engine - ORE (dummy health)\n        {\n          name: 'Open Source Risk Engine (ORE)',\n          status: 'ONLINE',\n          responseTime: generateDummyResponseTime(),\n          lastChecked: new Date().toLocaleTimeString(),\n          url: 'ore-engine',\n        },\n        // React Frontend (dummy health)\n        {\n          name: 'React Frontend',\n          status: 'ONLINE',\n          responseTime: generateDummyResponseTime(),\n          lastChecked: new Date().toLocaleTimeString(),\n          url: 'http://localhost:3000',\n        },\n      ];\n\n      setServices(updatedServices);\n      setLastUpdated(new Date());\n    } catch (error) {\n      console.error('Failed to check services health:', error);\n      // Mark gateway as offline, others as unknown\n      setServices([\n        { name: 'PostgreSQL Database', status: 'UNKNOWN', error: 'Cannot reach gateway' },\n        {\n          name: 'API Gateway',\n          status: 'OFFLINE',\n          error: 'Connection failed',\n          url: 'http://localhost:8081',\n        },\n        { name: 'Backend Service', status: 'UNKNOWN', error: 'Cannot reach gateway' },\n        {\n          name: 'CDS Risk Engine',\n          status: 'UNKNOWN',\n          error: 'Cannot reach gateway',\n          url: 'http://localhost:8082',\n        },\n        {\n          name: 'Open Source Risk Engine (ORE)',\n          status: 'UNKNOWN',\n          error: 'Cannot reach gateway',\n          url: 'ore-engine',\n        },\n        {\n          name: 'React Frontend',\n          status: 'UNKNOWN',\n          error: 'Cannot reach gateway',\n          url: 'http://localhost:3000',\n        },\n      ]);\n    } finally {\n      setIsRefreshing(false);\n    }\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      checkServicesHealth();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (autoRefresh && isOpen) {\n      const interval = setInterval(checkServicesHealth, 5000); // Refresh every 5 seconds\n      return () => clearInterval(interval);\n    }\n  }, [autoRefresh, isOpen]);\n\n  if (!isOpen) return null;\n\n  const getStatusColor = (status: ServiceStatus['status']) => {\n    switch (status) {\n      case 'ONLINE':\n        return 'text-fd-green';\n      case 'OFFLINE':\n        return 'text-red-500';\n      case 'UNKNOWN':\n        return 'text-fd-text-muted';\n      default:\n        return 'text-fd-text-muted';\n    }\n  };\n\n  const getStatusBadgeColor = (status: ServiceStatus['status']) => {\n    switch (status) {\n      case 'ONLINE':\n        return 'bg-fd-green text-fd-dark';\n      case 'OFFLINE':\n        return 'bg-red-500 text-white';\n      case 'UNKNOWN':\n        return 'bg-fd-text-muted text-fd-dark';\n      default:\n        return 'bg-fd-text-muted text-fd-dark';\n    }\n  };\n\n  const onlineCount = services.filter((s) => s.status === 'ONLINE').length;\n  const totalCount = services.length;\n  const systemHealthPercentage = Math.round((onlineCount / totalCount) * 100);\n  const avgResponseTime =\n    services.filter((s) => s.responseTime).reduce((acc, s) => acc + (s.responseTime || 0), 0) /\n      services.filter((s) => s.responseTime).length || 0;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-fd-darker border border-fd-border rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex justify-between items-center p-6 border-b border-fd-border\">\n          <h2 className=\"text-2xl font-bold text-fd-text\">Services Status</h2>\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-fd-text-muted text-sm\">Auto Refresh (5 seconds)</span>\n              <label className=\"relative inline-flex items-center cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={autoRefresh}\n                  onChange={(e) => setAutoRefresh(e.target.checked)}\n                  className=\"sr-only peer\"\n                />\n                <div className=\"w-11 h-6 bg-fd-input peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-fd-green\"></div>\n              </label>\n            </div>\n            <button\n              onClick={checkServicesHealth}\n              disabled={isRefreshing}\n              className=\"px-3 py-1 bg-fd-green text-fd-dark rounded hover:bg-fd-green-hover disabled:opacity-50 transition-colors\"\n            >\n              {isRefreshing ? 'Refreshing...' : 'Refresh Now'}\n            </button>\n            <button onClick={onClose} className=\"text-fd-text-muted hover:text-fd-text\">\n              \n            </button>\n          </div>\n        </div>\n\n        {/* Overview Stats */}\n        <div className=\"p-6 border-b border-fd-border\">\n          <h3 className=\"text-lg font-semibold text-fd-text mb-4\">Services Overview</h3>\n          <div className=\"flex justify-between\">\n            <div className=\"text-left\">\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <div className=\"w-3 h-3 bg-fd-green rounded-full\"></div>\n                <span className=\"text-fd-text-muted\">System Health</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"text-2xl font-bold text-fd-text\">{systemHealthPercentage}%</span>\n                <span\n                  className={`text-sm px-2 py-1 rounded ${systemHealthPercentage === 100 ? 'bg-fd-green text-fd-dark' : 'bg-red-500 text-white'}`}\n                >\n                  {systemHealthPercentage === 100 ? 'Good' : 'Issues'}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"text-center\">\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <div className=\"w-3 h-3 bg-fd-green rounded-full\"></div>\n                <span className=\"text-fd-text-muted\">Services Online</span>\n              </div>\n              <span className=\"text-2xl font-bold text-fd-green\">\n                {onlineCount}/{totalCount}\n              </span>\n            </div>\n\n            <div className=\"text-center\">\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <div className=\"w-3 h-3 bg-red-500 rounded-full\"></div>\n                <span className=\"text-fd-text-muted\">Issues</span>\n              </div>\n              <span className=\"text-2xl font-bold text-red-500\">{totalCount - onlineCount}</span>\n            </div>\n\n            <div className=\"text-right\">\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <div className=\"w-3 h-3 bg-fd-cyan rounded-full\"></div>\n                <span className=\"text-fd-text-muted\">Avg Response</span>\n              </div>\n              <span className=\"text-2xl font-bold text-fd-cyan\">\n                {avgResponseTime > 0 ? `${Math.round(avgResponseTime)}ms` : '--'}\n              </span>\n            </div>\n          </div>\n\n          {lastUpdated && (\n            <p className=\"text-fd-text-muted text-sm mt-4\">\n              Last updated: {lastUpdated.toLocaleTimeString()}\n              <span className=\"text-fd-green ml-2\">(Auto-refreshing every 5 seconds)</span>\n            </p>\n          )}\n        </div>\n\n        {/* Service Details */}\n        <div className=\"p-6\">\n          <h3 className=\"text-lg font-semibold text-fd-text mb-4\">Service Details</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {services.map((service, index) => (\n              <div key={index} className=\"bg-fd-dark border border-fd-border rounded-lg p-4\">\n                <div className=\"flex justify-between items-start mb-3\">\n                  <h4 className=\"font-semibold text-fd-text\">{service.name}</h4>\n                  <div className=\"flex items-center space-x-2\">\n                    <span\n                      className={`text-xs px-2 py-1 rounded font-medium ${getStatusBadgeColor(service.status)}`}\n                    >\n                      {service.status}\n                    </span>\n                    {service.status === 'ONLINE' && (\n                      <div className=\"w-2 h-2 bg-fd-green rounded-full animate-pulse\"></div>\n                    )}\n                    {service.status === 'OFFLINE' && (\n                      <div className=\"w-2 h-2 bg-red-500 rounded-full\"></div>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"space-y-2 text-sm\">\n                  {service.url && (\n                    <div>\n                      <span className=\"text-fd-text-muted\">URL: </span>\n                      <span className=\"text-fd-text font-mono text-xs\">{service.url}</span>\n                    </div>\n                  )}\n\n                  {service.responseTime && (\n                    <div>\n                      <span className=\"text-fd-text-muted\">Response Time: </span>\n                      <span className=\"text-fd-cyan font-medium\">{service.responseTime}ms</span>\n                    </div>\n                  )}\n\n                  {service.lastChecked && (\n                    <div>\n                      <span className=\"text-fd-text-muted\">Last Checked: </span>\n                      <span className=\"text-fd-text\">{service.lastChecked}</span>\n                    </div>\n                  )}\n\n                  {service.error && (\n                    <div className=\"mt-2 p-2 bg-red-900/20 border border-red-500/30 rounded\">\n                      <span className=\"text-red-400 text-xs\">Error: {service.error}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ServicesStatusModal;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\settlement-view\\SettlementView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\top-bar\\TopBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\trade-detail-modal\\TradeDetailModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'bondService' is defined but never used.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Bond' is defined but never used.","line":10,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport { CDSTradeResponse, cdsTradeService } from '../../services/cdsTradeService';\nimport { CreditEvent, creditEventService } from '../../services/creditEventService';\nimport RiskMeasuresPanel from '../risk/RiskMeasuresPanel';\nimport MarketDataPanel from '../risk/MarketDataPanel';\nimport ScenarioRunModal from '../risk/ScenarioRunModal';\nimport RegressionStatusBadge from '../risk/RegressionStatusBadge';\nimport { fetchRiskMeasures } from '../../services/risk/riskService';\nimport { RiskMeasures } from '../../services/risk/riskTypes';\nimport { bondService, Bond } from '../../services/bondService';\nimport CreditEventModal, { CreateCreditEventRequest } from '../credit-event-modal/CreditEventModal';\n\ninterface TradeDetailModalProps {\n  isOpen: boolean;\n  trade: CDSTradeResponse | null;\n  onClose: () => void;\n  onTradeUpdated?: (updatedTrade: CDSTradeResponse) => void;\n}\n\nconst TradeDetailModal: React.FC<TradeDetailModalProps> = ({\n  isOpen,\n  trade,\n  onClose,\n  onTradeUpdated,\n}) => {\n  const [currentTrade, setCurrentTrade] = useState<CDSTradeResponse | null>(trade);\n  const [creditEvents, setCreditEvents] = useState<CreditEvent[]>([]);\n  const [loadingEvents, setLoadingEvents] = useState(false);\n  const [activeTab, setActiveTab] = useState<'details' | 'events' | 'risk' | 'marketdata'>(\n    'details'\n  );\n  const [showScenarioModal, setShowScenarioModal] = useState(false);\n  const [riskMeasures, setRiskMeasures] = useState<RiskMeasures | null>(null);\n  const [loadingRisk, setLoadingRisk] = useState(false);\n  const [showCreditEventModal, setShowCreditEventModal] = useState(false);\n  const [recordingEvent, setRecordingEvent] = useState(false);\n  const [showSuccessNotification, setShowSuccessNotification] = useState(false);\n\n  // Update currentTrade when trade prop changes\n  useEffect(() => {\n    setCurrentTrade(trade);\n  }, [trade]);\n\n  const loadCreditEvents = useCallback(async () => {\n    if (!currentTrade) return;\n\n    setLoadingEvents(true);\n    try {\n      const events = await creditEventService.getCreditEventsForTrade(currentTrade.id);\n      setCreditEvents(events);\n    } catch (error) {\n      console.error('Failed to load credit events:', error);\n      setCreditEvents([]);\n    } finally {\n      setLoadingEvents(false);\n    }\n  }, [currentTrade]);\n\n  const loadRiskMeasures = useCallback(async () => {\n    if (!currentTrade) return;\n\n    setLoadingRisk(true);\n    try {\n      const measures = await fetchRiskMeasures(currentTrade.id);\n      setRiskMeasures(measures);\n    } catch (error) {\n      console.error('Failed to load risk measures:', error);\n      setRiskMeasures(null);\n    } finally {\n      setLoadingRisk(false);\n    }\n  }, [currentTrade]);\n\n  const handleRecordCreditEvent = async (request: CreateCreditEventRequest) => {\n    if (!currentTrade) return;\n\n    setRecordingEvent(true);\n    try {\n      await creditEventService.recordCreditEvent(currentTrade.id, request);\n\n      // Reload the trade to get updated status\n      const updatedTrade = await cdsTradeService.getTradeById(currentTrade.id);\n      setCurrentTrade(updatedTrade);\n\n      // Notify parent component if callback provided\n      if (onTradeUpdated) {\n        onTradeUpdated(updatedTrade);\n      }\n\n      // Reload credit events after successful recording\n      await loadCreditEvents();\n      setShowCreditEventModal(false);\n\n      // Show success notification\n      setShowSuccessNotification(true);\n      setTimeout(() => setShowSuccessNotification(false), 3000);\n    } catch (error: any) {\n      console.error('Failed to record credit event:', error);\n      alert('Failed to record credit event: ' + (error.message || 'Unknown error'));\n    } finally {\n      setRecordingEvent(false);\n    }\n  };\n\n  useEffect(() => {\n    if (isOpen && currentTrade) {\n      loadCreditEvents();\n      // Load risk measures when opening modal or switching to risk/marketdata tabs\n      if (activeTab === 'risk' || activeTab === 'marketdata') {\n        loadRiskMeasures();\n      }\n    }\n  }, [isOpen, currentTrade, activeTab, loadCreditEvents, loadRiskMeasures]);\n\n  if (!isOpen || !currentTrade) return null;\n\n  const formatCurrency = (amount: number, currency: string) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: currency || 'USD',\n    }).format(amount);\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n  };\n\n  const formatDateTime = (dateString: string) => {\n    return new Date(dateString).toLocaleString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6 max-w-5xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n        {/* Header with tabs */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-8 h-8 bg-fd-green rounded-full flex items-center justify-center\">\n              <svg\n                className=\"w-5 h-5 text-fd-dark\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                ></path>\n              </svg>\n            </div>\n            <h2 className=\"text-2xl font-bold text-fd-text\">CDS Trade Details</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-fd-text-muted hover:text-fd-text transition-colors\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M6 18L18 6M6 6l12 12\"\n              ></path>\n            </svg>\n          </button>\n        </div>\n        {/* Tab selector */}\n        <div className=\"flex space-x-4 border-b border-fd-border mb-6\">\n          {[\n            { key: 'details', label: 'Details' },\n            { key: 'events', label: 'Credit Events' },\n            { key: 'risk', label: 'Risk' },\n            { key: 'marketdata', label: 'Market Data' },\n          ].map((t) => (\n            <button\n              key={t.key}\n              onClick={() => {\n                console.log(' Tab switch:', { from: activeTab, to: t.key });\n                setActiveTab(t.key as any);\n              }}\n              className={`pb-2 px-1 text-sm font-medium border-b-2 -mb-px transition-colors ${\n                activeTab === t.key\n                  ? 'border-fd-green text-fd-text'\n                  : 'border-transparent text-fd-text-muted hover:text-fd-text'\n              }`}\n            >\n              {t.label}\n            </button>\n          ))}\n        </div>\n        {activeTab === 'details' && (\n          <>\n            <div className=\"bg-fd-dark rounded-lg p-4 mb-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-fd-text-muted\">Trade ID:</span>\n                  <span className=\"text-fd-green font-mono font-semibold\">\n                    CDS-{currentTrade.id}\n                  </span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-fd-text-muted\">Created:</span>\n                  <span className=\"text-fd-text\">{formatDateTime(currentTrade.createdAt)}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-fd-text-muted\">Last Updated:</span>\n                  <span className=\"text-fd-text\">\n                    {currentTrade.updatedAt ? formatDateTime(currentTrade.updatedAt) : 'Never'}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n              {/* Trade Information */}\n              <div className=\"space-y-6\">\n                <h3 className=\"text-lg font-semibold text-fd-text border-b border-fd-border pb-2\">\n                  Trade Information\n                </h3>\n\n                <div className=\"space-y-4\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Reference Entity:</span>\n                    <span className=\"text-fd-text font-medium\">{currentTrade.referenceEntity}</span>\n                  </div>\n                  {currentTrade.obligation && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-fd-text-muted\">Obligation:</span>\n                      <span className=\"text-fd-text font-medium\">\n                        <span className=\"text-fd-green\">\n                          {currentTrade.obligation.isin ? `${currentTrade.obligation.isin} - ` : ''}\n                          {currentTrade.obligation.issuer} {currentTrade.obligation.seniority}(\n                          {(currentTrade.obligation.couponRate * 100).toFixed(2)}%)\n                        </span>\n                      </span>\n                    </div>\n                  )}\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Counterparty:</span>\n                    <span className=\"text-fd-text font-medium\">{currentTrade.counterparty}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Direction:</span>\n                    <span\n                      className={`font-medium ${currentTrade.buySellProtection === 'BUY' ? 'text-blue-400' : 'text-orange-400'}`}\n                    >\n                      {currentTrade.buySellProtection === 'BUY'\n                        ? 'Buy Protection'\n                        : 'Sell Protection'}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Notional Amount:</span>\n                    <span className=\"text-fd-text font-semibold text-lg\">\n                      {formatCurrency(currentTrade.notionalAmount, currentTrade.currency)}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Spread:</span>\n                    <span className=\"text-fd-text font-medium\">{currentTrade.spread} bps</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Currency:</span>\n                    <span className=\"text-fd-text font-medium\">{currentTrade.currency}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Status:</span>\n                    <span className=\"text-fd-green font-medium\">\n                      {currentTrade.tradeStatus.replace(/_/g, ' ')}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Date Information */}\n              <div className=\"space-y-6\">\n                <h3 className=\"text-lg font-semibold text-fd-text border-b border-fd-border pb-2\">\n                  Date Information\n                </h3>\n\n                <div className=\"space-y-4\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Trade Date:</span>\n                    <span className=\"text-fd-text\">{formatDate(currentTrade.tradeDate)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Effective Date:</span>\n                    <span className=\"text-fd-text\">{formatDate(currentTrade.effectiveDate)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Maturity Date:</span>\n                    <span className=\"text-fd-text\">{formatDate(currentTrade.maturityDate)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Accrual Start Date:</span>\n                    <span className=\"text-fd-text\">\n                      {formatDate(currentTrade.accrualStartDate)}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Contract Terms */}\n              <div className=\"space-y-6\">\n                <h3 className=\"text-lg font-semibold text-fd-text border-b border-fd-border pb-2\">\n                  Contract Terms\n                </h3>\n\n                <div className=\"space-y-4\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Premium Frequency:</span>\n                    <span className=\"text-fd-text\">\n                      {currentTrade.premiumFrequency.replace('_', ' ')}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Day Count Convention:</span>\n                    <span className=\"text-fd-text\">\n                      {currentTrade.dayCountConvention.replace('_', '/')}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Payment Calendar:</span>\n                    <span className=\"text-fd-text\">{currentTrade.paymentCalendar}</span>\n                  </div>\n                  {currentTrade.restructuringClause && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-fd-text-muted\">Restructuring Clause:</span>\n                      <span className=\"text-fd-text\">\n                        {currentTrade.restructuringClause.replace(/_/g, ' ')}\n                      </span>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Additional Information */}\n              <div className=\"space-y-6\">\n                <h3 className=\"text-lg font-semibold text-fd-text border-b border-fd-border pb-2\">\n                  Additional Information\n                </h3>\n\n                <div className=\"space-y-4\">\n                  <div className=\"bg-fd-dark rounded-lg p-4\">\n                    <div className=\"text-sm text-fd-text-muted mb-2\">Trade Identifier</div>\n                    <div className=\"font-mono text-fd-green text-lg\">CDS-{currentTrade.id}</div>\n                  </div>\n\n                  <div className=\"bg-fd-dark rounded-lg p-4\">\n                    <div className=\"text-sm text-fd-text-muted mb-2\">Risk Metrics</div>\n                    <div className=\"space-y-1\">\n                      <div className=\"text-sm\">\n                        <span className=\"text-fd-text-muted\">Mark-to-Market:</span>\n                        <span className=\"text-fd-text ml-2\">TBD</span>\n                      </div>\n                      <div className=\"text-sm\">\n                        <span className=\"text-fd-text-muted\">Credit Duration:</span>\n                        <span className=\"text-fd-text ml-2\">TBD</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </>\n        )}\n        {activeTab === 'events' && (\n          <div className=\"mt-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-fd-text border-b border-fd-border pb-2\">\n                Credit Events\n              </h3>\n              {currentTrade?.tradeStatus === 'ACTIVE' && (\n                <button\n                  onClick={() => setShowCreditEventModal(true)}\n                  className=\"px-4 py-2 bg-fd-green text-fd-dark font-medium rounded hover:bg-fd-green-hover transition-colors flex items-center gap-2\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"\n                    ></path>\n                  </svg>\n                  Record Credit Event\n                </button>\n              )}\n            </div>\n            {loadingEvents ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-fd-green\"></div>\n                <span className=\"ml-3 text-fd-text-muted\">Loading credit events...</span>\n              </div>\n            ) : creditEvents.length === 0 ? (\n              <div className=\"bg-fd-dark rounded-lg p-6 text-center\">\n                <div className=\"w-12 h-12 bg-fd-border rounded-full flex items-center justify-center mx-auto mb-3\">\n                  <svg\n                    className=\"w-6 h-6 text-fd-text-muted\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                    ></path>\n                  </svg>\n                </div>\n                <p className=\"text-fd-text-muted\">No credit events recorded for this trade</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {creditEvents.map((event) => (\n                  <div\n                    key={event.id}\n                    className={`bg-fd-dark rounded-lg p-4 border ${\n                      event.eventType === 'PAYOUT' ? 'border-fd-green' : 'border-fd-border'\n                    }`}\n                  >\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div\n                          className={`w-10 h-10 rounded-full flex items-center justify-center ${\n                            event.eventType === 'PAYOUT' ? 'bg-fd-green/20' : 'bg-red-500/20'\n                          }`}\n                        >\n                          {event.eventType === 'PAYOUT' ? (\n                            <svg\n                              className=\"w-5 h-5 text-fd-green\"\n                              fill=\"none\"\n                              stroke=\"currentColor\"\n                              viewBox=\"0 0 24 24\"\n                            >\n                              <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                strokeWidth=\"2\"\n                                d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                              ></path>\n                            </svg>\n                          ) : (\n                            <svg\n                              className=\"w-5 h-5 text-red-400\"\n                              fill=\"none\"\n                              stroke=\"currentColor\"\n                              viewBox=\"0 0 24 24\"\n                            >\n                              <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                strokeWidth=\"2\"\n                                d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\n                              ></path>\n                            </svg>\n                          )}\n                        </div>\n                        <div>\n                          <h4\n                            className={`font-medium ${\n                              event.eventType === 'PAYOUT' ? 'text-fd-green' : 'text-fd-text'\n                            }`}\n                          >\n                            {event.eventType.replace(/_/g, ' ')}\n                          </h4>\n                          <p className=\"text-fd-text-muted text-sm\">Event ID: {event.id}</p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-fd-text text-sm\">{formatDate(event.eventDate)}</div>\n                        <div className=\"text-fd-text-muted text-xs\">\n                          {formatDateTime(event.createdAt)}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3\">\n                      <div>\n                        <span className=\"text-fd-text-muted text-sm\">Notice Date:</span>\n                        <div className=\"text-fd-text\">{formatDate(event.noticeDate)}</div>\n                      </div>\n                      <div>\n                        <span className=\"text-fd-text-muted text-sm\">Settlement Method:</span>\n                        <div className=\"text-fd-text font-medium\">\n                          <span\n                            className={`inline-flex px-2 py-1 rounded text-xs font-medium ${\n                              event.settlementMethod === 'CASH'\n                                ? 'bg-green-500/20 text-green-400'\n                                : 'bg-blue-500/20 text-blue-400'\n                            }`}\n                          >\n                            {event.settlementMethod}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n\n                    {event.comments && (\n                      <div className=\"bg-fd-darker rounded p-3\">\n                        <span className=\"text-fd-text-muted text-sm\">Comments:</span>\n                        <p className=\"text-fd-text text-sm mt-1\">{event.comments}</p>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n        {activeTab === 'risk' && currentTrade && (\n          <div className=\"mt-4 space-y-6\" aria-labelledby=\"risk-panel-heading\">\n            <div className=\"flex items-center justify-between\">\n              <h3 id=\"risk-panel-heading\" className=\"text-lg font-semibold text-fd-text\">\n                Risk Analytics\n              </h3>\n              <div className=\"flex items-center gap-3\">\n                <RegressionStatusBadge status=\"UNKNOWN\" />\n                <button\n                  onClick={() => setShowScenarioModal(true)}\n                  className=\"px-3 py-1.5 bg-fd-green text-fd-dark rounded text-sm font-medium hover:bg-fd-green-hover\"\n                >\n                  Run Scenarios\n                </button>\n              </div>\n            </div>\n            <RiskMeasuresPanel tradeId={currentTrade.id} trade={currentTrade} />\n          </div>\n        )}\n        {activeTab === 'marketdata' &&\n          currentTrade &&\n          (() => {\n            console.log(' Market Data tab active:', {\n              tradeId: currentTrade.id,\n              loadingRisk,\n              hasRiskMeasures: !!riskMeasures,\n              hasMarketSnapshot: !!riskMeasures?.marketDataSnapshot,\n            });\n            return (\n              <div className=\"mt-4 space-y-6\">\n                {loadingRisk ? (\n                  <div className=\"flex items-center justify-center py-8\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-fd-green\"></div>\n                    <span className=\"ml-3 text-fd-text-muted\">Loading market data snapshot...</span>\n                  </div>\n                ) : (\n                  <MarketDataPanel marketDataSnapshot={riskMeasures?.marketDataSnapshot} />\n                )}\n              </div>\n            );\n          })()}\n        <div className=\"flex justify-end space-x-4 mt-8 pt-4 border-t border-fd-border\">\n          <button\n            onClick={onClose}\n            className=\"px-6 py-2 bg-fd-green text-fd-dark font-medium rounded hover:bg-fd-green-hover transition-colors\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n      {currentTrade && (\n        <ScenarioRunModal\n          tradeId={currentTrade.id}\n          isOpen={showScenarioModal}\n          onClose={() => setShowScenarioModal(false)}\n        />\n      )}\n      {currentTrade && (\n        <CreditEventModal\n          isOpen={showCreditEventModal}\n          onClose={() => setShowCreditEventModal(false)}\n          onSubmit={handleRecordCreditEvent}\n          tradeId={currentTrade.id}\n          isLoading={recordingEvent}\n        />\n      )}\n\n      {/* Success Notification */}\n      {showSuccessNotification && (\n        <div className=\"fixed top-4 right-4 z-[60] animate-fade-in\">\n          <div className=\"bg-fd-dark border-2 border-fd-green rounded-lg shadow-lg p-4 flex items-center gap-3 min-w-[320px]\">\n            <div className=\"flex-shrink-0\">\n              <svg\n                className=\"w-6 h-6 text-fd-green\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                ></path>\n              </svg>\n            </div>\n            <div className=\"flex-1\">\n              <h4 className=\"text-fd-text font-semibold\">Success!</h4>\n              <p className=\"text-fd-text-muted text-sm\">Credit event recorded successfully</p>\n            </div>\n            <button\n              onClick={() => setShowSuccessNotification(false)}\n              className=\"flex-shrink-0 text-fd-text-muted hover:text-fd-text transition-colors\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M6 18L18 6M6 6l12 12\"\n                ></path>\n              </svg>\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TradeDetailModal;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\config\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\data\\referenceData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\data\\simulationGlossary.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\hooks\\useSimulationPolling.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\basketService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\bondService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\cdsTradeService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\creditEventService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\lifecycleService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\portfolioService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\risk\\riskService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\risk\\riskTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\simulationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\setupTests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\types\\basket.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\types\\lifecycle.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]}]