[{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\SaCcrDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\SimmDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\basket\\BasketCreationModal.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":150,"column":9,"nodeType":"MemberExpression","endLine":150,"endColumn":22},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":160,"column":5,"nodeType":"MemberExpression","endLine":160,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":160,"column":27,"nodeType":"MemberExpression","endLine":160,"endColumn":41},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":164,"column":9,"nodeType":"MemberExpression","endLine":164,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":196,"column":19,"nodeType":"MemberExpression","endLine":196,"endColumn":41},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":473,"column":42,"nodeType":"MemberExpression","endLine":473,"endColumn":66}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Basket, BasketType, BasketConstituent } from '../../types/basket';\nimport { basketService } from '../../services/basketService';\nimport { REFERENCE_ENTITIES } from '../../data/referenceData';\n\ninterface BasketCreationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: (basket: Basket) => void;\n}\n\ninterface FormErrors {\n  [key: string]: string;\n}\n\nconst BASKET_TYPE_OPTIONS = [\n  { value: 'FIRST_TO_DEFAULT', label: 'First-to-Default (FTD)' },\n  { value: 'NTH_TO_DEFAULT', label: 'N-th-to-Default' },\n  { value: 'TRANCHETTE', label: 'Tranchette (Loss Slice)' },\n];\n\nconst PREMIUM_FREQUENCY_OPTIONS = [\n  { value: 'QUARTERLY', label: 'Quarterly' },\n  { value: 'SEMI_ANNUAL', label: 'Semi-Annual' },\n  { value: 'ANNUAL', label: 'Annual' },\n];\n\nconst DAY_COUNT_OPTIONS = [\n  { value: 'ACT_360', label: 'ACT/360' },\n  { value: 'ACT_365', label: 'ACT/365' },\n  { value: 'THIRTY_360', label: '30/360' },\n];\n\nconst CURRENCY_OPTIONS = ['USD', 'EUR', 'GBP', 'JPY'];\n\nconst SENIORITY_OPTIONS = [\n  { value: 'SR_UNSEC', label: 'Senior Unsecured' },\n  { value: 'SR_SEC', label: 'Senior Secured' },\n  { value: 'SUBORD', label: 'Subordinated' },\n];\n\nconst BasketCreationModal: React.FC<BasketCreationModalProps> = ({\n  isOpen,\n  onClose,\n  onSuccess,\n}) => {\n  const [formData, setFormData] = useState<Partial<Basket>>({\n    type: 'FIRST_TO_DEFAULT',\n    currency: 'USD',\n    premiumFrequency: 'QUARTERLY',\n    dayCount: 'ACT_360',\n    constituents: [],\n  });\n\n  const [constituents, setConstituents] = useState<Partial<BasketConstituent>[]>([]);\n  const [errors, setErrors] = useState<FormErrors>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Calculate normalized weights dynamically\n  const calculateNormalizedWeights = () => {\n    const totalWeight = constituents.reduce((sum, c) => sum + (c.weight || 0), 0);\n\n    if (totalWeight === 0) {\n      // Equal weights if none provided\n      return constituents.map(() => 1 / constituents.length);\n    }\n\n    // Normalize to sum to 1\n    return constituents.map((c) => (c.weight || 0) / totalWeight);\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: FormErrors = {};\n\n    if (!formData.name?.trim()) {\n      newErrors.name = 'Basket name is required';\n    }\n\n    if (!formData.type) {\n      newErrors.type = 'Basket type is required';\n    }\n\n    if (formData.type === 'NTH_TO_DEFAULT' && (!formData.nth || formData.nth < 1)) {\n      newErrors.nth = 'N-th value must be >= 1';\n    }\n\n    if (formData.type === 'NTH_TO_DEFAULT' && formData.nth && formData.nth > constituents.length) {\n      newErrors.nth = `N-th value cannot exceed number of constituents (${constituents.length})`;\n    }\n\n    if (formData.type === 'TRANCHETTE') {\n      if (\n        formData.attachmentPoint === undefined ||\n        formData.attachmentPoint < 0 ||\n        formData.attachmentPoint > 1\n      ) {\n        newErrors.attachmentPoint = 'Attachment point must be between 0 and 1';\n      }\n      if (\n        formData.detachmentPoint === undefined ||\n        formData.detachmentPoint < 0 ||\n        formData.detachmentPoint > 1\n      ) {\n        newErrors.detachmentPoint = 'Detachment point must be between 0 and 1';\n      }\n      if (\n        formData.attachmentPoint !== undefined &&\n        formData.detachmentPoint !== undefined &&\n        formData.attachmentPoint >= formData.detachmentPoint\n      ) {\n        newErrors.detachmentPoint = 'Detachment point must be greater than attachment point';\n      }\n    }\n\n    if (!formData.notional || formData.notional <= 0) {\n      newErrors.notional = 'Notional must be positive';\n    }\n\n    if (!formData.maturityDate) {\n      newErrors.maturityDate = 'Maturity date is required';\n    }\n\n    if (constituents.length === 0) {\n      newErrors.constituents = 'At least one constituent is required';\n    }\n\n    // Check for duplicate issuers\n    const issuerSet = new Set<string>();\n    constituents.forEach((c, idx) => {\n      if (c.issuer) {\n        if (issuerSet.has(c.issuer)) {\n          newErrors[`constituent_${idx}_issuer`] = 'Duplicate issuer';\n        }\n        issuerSet.add(c.issuer);\n      } else {\n        newErrors[`constituent_${idx}_issuer`] = 'Issuer is required';\n      }\n    });\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleInputChange = (field: keyof Basket, value: any) => {\n    setFormData((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n\n    if (errors[field]) {\n      setErrors((prev) => ({\n        ...prev,\n        [field]: '',\n      }));\n    }\n  };\n\n  const handleConstituentChange = (index: number, field: keyof BasketConstituent, value: string | number) => {\n    const updated = [...constituents];\n    updated[index] = { ...updated[index], [field]: value };\n    setConstituents(updated);\n\n    const errorKey = `constituent_${index}_${field}`;\n    if (errors[errorKey]) {\n      setErrors((prev) => ({\n        ...prev,\n        [errorKey]: '',\n      }));\n    }\n  };\n\n  const addConstituent = () => {\n    setConstituents([...constituents, { seniority: 'SR_UNSEC' }]);\n  };\n\n  const removeConstituent = (index: number) => {\n    setConstituents(constituents.filter((_, i) => i !== index));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      const normalizedWeights = calculateNormalizedWeights();\n\n      const basketRequest = {\n        ...formData,\n        constituents: constituents.map((c, idx) => ({\n          issuer: c.issuer!,\n          weight: normalizedWeights[idx],\n          recoveryOverride: c.recoveryOverride,\n          seniority: c.seniority || 'SR_UNSEC',\n          sector: c.sector,\n        })),\n      };\n\n      const basket = await basketService.createBasket(basketRequest as any);\n      onSuccess(basket);\n      resetForm();\n      onClose();\n    } catch (error: any) {\n      setErrors({ submit: error.message || 'Failed to create basket' });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      type: 'FIRST_TO_DEFAULT',\n      currency: 'USD',\n      premiumFrequency: 'QUARTERLY',\n      dayCount: 'ACT_360',\n      constituents: [],\n    });\n    setConstituents([]);\n    setErrors({});\n  };\n\n  if (!isOpen) return null;\n\n  const normalizedWeights = calculateNormalizedWeights();\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-fd-darker rounded-lg shadow-xl border border-fd-border max-w-6xl w-full max-h-[90vh] overflow-y-auto m-4\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"sticky top-0 bg-fd-darker border-b border-fd-border px-6 py-4 flex justify-between items-center z-10\">\n          <h2 className=\"text-xl font-semibold text-fd-text\">Create New Basket Derivative</h2>\n          <button\n            onClick={onClose}\n            className=\"text-fd-text-muted hover:text-fd-text transition-colors\"\n            aria-label=\"Close modal\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Basic Information Section */}\n            <div className=\"md:col-span-2\">\n              <h3 className=\"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4\">\n                Basic Information\n              </h3>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Basket Name <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={formData.name || ''}\n                onChange={(e) => handleInputChange('name', e.target.value)}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.name ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n                placeholder=\"e.g., US_IG_TECH_FTD_5Y\"\n              />\n              {errors.name && <p className=\"mt-1 text-sm text-red-400\">{errors.name}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Basket Type <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.type}\n                onChange={(e) => handleInputChange('type', e.target.value as BasketType)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {BASKET_TYPE_OPTIONS.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n              {errors.type && <p className=\"mt-1 text-sm text-red-400\">{errors.type}</p>}\n            </div>\n\n            {/* Conditional Fields for N-th-to-Default */}\n            {formData.type === 'NTH_TO_DEFAULT' && (\n              <div>\n                <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                  N-th Value <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  value={formData.nth || ''}\n                  onChange={(e) => handleInputChange('nth', parseInt(e.target.value))}\n                  className={`w-full px-3 py-2 bg-fd-dark border ${errors.nth ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n                  placeholder=\"e.g., 2 for 2nd-to-default\"\n                />\n                {errors.nth && <p className=\"mt-1 text-sm text-red-400\">{errors.nth}</p>}\n              </div>\n            )}\n\n            {/* Conditional Fields for Tranchette */}\n            {formData.type === 'TRANCHETTE' && (\n              <>\n                <div>\n                  <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                    Attachment Point (0-1) <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    max=\"1\"\n                    value={formData.attachmentPoint || ''}\n                    onChange={(e) =>\n                      handleInputChange('attachmentPoint', parseFloat(e.target.value))\n                    }\n                    className={`w-full px-3 py-2 bg-fd-dark border ${errors.attachmentPoint ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n                    placeholder=\"e.g., 0.03 for 3%\"\n                  />\n                  {errors.attachmentPoint && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.attachmentPoint}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                    Detachment Point (0-1) <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    max=\"1\"\n                    value={formData.detachmentPoint || ''}\n                    onChange={(e) =>\n                      handleInputChange('detachmentPoint', parseFloat(e.target.value))\n                    }\n                    className={`w-full px-3 py-2 bg-fd-dark border ${errors.detachmentPoint ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n                    placeholder=\"e.g., 0.07 for 7%\"\n                  />\n                  {errors.detachmentPoint && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.detachmentPoint}</p>\n                  )}\n                </div>\n              </>\n            )}\n\n            {/* Economics Section */}\n            <div className=\"md:col-span-2 mt-4\">\n              <h3 className=\"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4\">\n                Economics\n              </h3>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Currency <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.currency}\n                onChange={(e) => handleInputChange('currency', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {CURRENCY_OPTIONS.map((curr) => (\n                  <option key={curr} value={curr}>\n                    {curr}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Notional <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={formData.notional || ''}\n                onChange={(e) => handleInputChange('notional', parseFloat(e.target.value))}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.notional ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n                placeholder=\"e.g., 10000000\"\n              />\n              {errors.notional && <p className=\"mt-1 text-sm text-red-400\">{errors.notional}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Premium Frequency\n              </label>\n              <select\n                value={formData.premiumFrequency}\n                onChange={(e) => handleInputChange('premiumFrequency', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {PREMIUM_FREQUENCY_OPTIONS.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Day Count Convention\n              </label>\n              <select\n                value={formData.dayCount}\n                onChange={(e) => handleInputChange('dayCount', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {DAY_COUNT_OPTIONS.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Maturity Date <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"date\"\n                value={formData.maturityDate || ''}\n                onChange={(e) => handleInputChange('maturityDate', e.target.value)}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.maturityDate ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n              />\n              {errors.maturityDate && (\n                <p className=\"mt-1 text-sm text-red-400\">{errors.maturityDate}</p>\n              )}\n            </div>\n\n            {/* Constituents Section */}\n            <div className=\"md:col-span-2 mt-4\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-sm font-semibold text-fd-text-muted uppercase tracking-wide\">\n                  Basket Constituents <span className=\"text-red-500\">*</span>\n                </h3>\n                <button\n                  type=\"button\"\n                  onClick={addConstituent}\n                  className=\"px-3 py-1 text-sm bg-fd-green text-fd-dark rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green\"\n                >\n                  + Add Constituent\n                </button>\n              </div>\n\n              {errors.constituents && (\n                <p className=\"mb-2 text-sm text-red-400\">{errors.constituents}</p>\n              )}\n\n              {constituents.map((constituent, index) => {\n                const normalizedWeight = normalizedWeights[index];\n                return (\n                  <div\n                    key={index}\n                    className=\"mb-4 p-4 bg-fd-dark border border-fd-border rounded-md\"\n                  >\n                    <div className=\"flex justify-between items-center mb-3\">\n                      <h4 className=\"text-sm font-medium text-fd-text\">Constituent #{index + 1}</h4>\n                      <button\n                        type=\"button\"\n                        onClick={() => removeConstituent(index)}\n                        className=\"text-red-400 hover:text-red-300 text-sm\"\n                      >\n                        Remove\n                      </button>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                      <div>\n                        <label className=\"block text-xs font-medium text-fd-text-muted mb-1\">\n                          Issuer <span className=\"text-red-500\">*</span>\n                        </label>\n                        <select\n                          value={constituent.issuer || ''}\n                          onChange={(e) => handleConstituentChange(index, 'issuer', e.target.value)}\n                          className={`w-full px-2 py-1 text-sm bg-fd-darker border ${errors[`constituent_${index}_issuer`] ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green`}\n                        >\n                          <option value=\"\">Select Issuer</option>\n                          {REFERENCE_ENTITIES.map((entity) => (\n                            <option key={entity.code} value={entity.code}>\n                              {entity.code} - {entity.name}\n                            </option>\n                          ))}\n                        </select>\n                        {errors[`constituent_${index}_issuer`] && (\n                          <p className=\"mt-1 text-xs text-red-400\">\n                            {errors[`constituent_${index}_issuer`]}\n                          </p>\n                        )}\n                      </div>\n\n                      <div>\n                        <label className=\"block text-xs font-medium text-fd-text-muted mb-1\">\n                          Weight (optional, normalized)\n                        </label>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          value={constituent.weight || ''}\n                          onChange={(e) =>\n                            handleConstituentChange(\n                              index,\n                              'weight',\n                              parseFloat(e.target.value) || 0\n                            )\n                          }\n                          className=\"w-full px-2 py-1 text-sm bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green\"\n                          placeholder={`Auto: ${normalizedWeight.toFixed(4)}`}\n                        />\n                        {normalizedWeight !== undefined && (\n                          <p className=\"mt-1 text-xs text-fd-text-muted\">\n                            Normalized: {(normalizedWeight * 100).toFixed(2)}%\n                          </p>\n                        )}\n                      </div>\n\n                      <div>\n                        <label className=\"block text-xs font-medium text-fd-text-muted mb-1\">\n                          Seniority\n                        </label>\n                        <select\n                          value={constituent.seniority || 'SR_UNSEC'}\n                          onChange={(e) =>\n                            handleConstituentChange(index, 'seniority', e.target.value)\n                          }\n                          className=\"w-full px-2 py-1 text-sm bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green\"\n                        >\n                          {SENIORITY_OPTIONS.map((opt) => (\n                            <option key={opt.value} value={opt.value}>\n                              {opt.label}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-xs font-medium text-fd-text-muted mb-1\">\n                          Recovery Override (0-1)\n                        </label>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          min=\"0\"\n                          max=\"1\"\n                          value={constituent.recoveryOverride || ''}\n                          onChange={(e) =>\n                            handleConstituentChange(\n                              index,\n                              'recoveryOverride',\n                              parseFloat(e.target.value)\n                            )\n                          }\n                          className=\"w-full px-2 py-1 text-sm bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green\"\n                          placeholder=\"Optional\"\n                        />\n                      </div>\n\n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-xs font-medium text-fd-text-muted mb-1\">\n                          Sector (optional)\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={constituent.sector || ''}\n                          onChange={(e) => handleConstituentChange(index, 'sector', e.target.value)}\n                          className=\"w-full px-2 py-1 text-sm bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green\"\n                          placeholder=\"e.g., TECH, ENERGY\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Error Message */}\n          {errors.submit && (\n            <div className=\"mt-4 p-3 bg-red-900/20 border border-red-500/30 rounded-md\">\n              <p className=\"text-sm text-red-400\">{errors.submit}</p>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"mt-6 flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-darker focus:outline-none focus:ring-2 focus:ring-fd-green\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className=\"px-4 py-2 text-sm font-medium text-fd-dark bg-fd-green border border-transparent rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green disabled:bg-fd-green/50 disabled:cursor-not-allowed\"\n            >\n              {isSubmitting ? 'Creating...' : 'Create Basket'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default BasketCreationModal;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\basket\\BasketDetailView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\basket\\BasketList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\basket\\BasketPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\bond\\BondCreationModal.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":112,"column":9,"nodeType":"MemberExpression","endLine":112,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Bond, bondService } from '../../services/bondService';\nimport { REFERENCE_ENTITIES, SECTORS } from '../../data/referenceData';\n\ninterface BondCreationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: (bond: Bond) => void;\n}\n\ninterface FormErrors {\n  [key: string]: string;\n}\n\nconst SENIORITY_OPTIONS = [\n  { value: 'SR_UNSEC', label: 'Senior Unsecured' },\n  { value: 'SR_SEC', label: 'Senior Secured' },\n  { value: 'SUBORD', label: 'Subordinated' },\n];\n\nconst COUPON_FREQUENCY_OPTIONS = [\n  { value: 'ANNUAL', label: 'Annual' },\n  { value: 'SEMI_ANNUAL', label: 'Semi-Annual' },\n  { value: 'QUARTERLY', label: 'Quarterly' },\n];\n\nconst DAY_COUNT_OPTIONS = [\n  { value: 'ACT_ACT', label: 'ACT/ACT' },\n  { value: 'THIRTY_360', label: '30/360' },\n];\n\nconst CURRENCY_OPTIONS = ['USD', 'EUR', 'GBP', 'JPY'];\n\nconst BondCreationModal: React.FC<BondCreationModalProps> = ({ isOpen, onClose, onSuccess }) => {\n  const [formData, setFormData] = useState<Partial<Bond>>({\n    currency: 'USD',\n    couponFrequency: 'SEMI_ANNUAL',\n    dayCount: 'ACT_ACT',\n    seniority: 'SR_UNSEC',\n    settlementDays: 2,\n    faceValue: 100,\n    priceConvention: 'CLEAN',\n  });\n\n  const [errors, setErrors] = useState<FormErrors>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [userModifiedSector, setUserModifiedSector] = useState(false);\n\n  // Auto-populate sector when issuer changes\n  useEffect(() => {\n    if (!userModifiedSector && formData.issuer) {\n      const entity = REFERENCE_ENTITIES.find((e) => e.code === formData.issuer);\n      if (entity?.sector) {\n        setFormData((prev) => ({\n          ...prev,\n          sector: entity.sector,\n        }));\n      }\n    }\n  }, [formData.issuer, userModifiedSector]);\n\n  const validateForm = (): boolean => {\n    const newErrors: FormErrors = {};\n\n    if (!formData.issuer?.trim()) {\n      newErrors.issuer = 'Issuer is required';\n    }\n\n    if (!formData.notional || formData.notional <= 0) {\n      newErrors.notional = 'Notional must be positive';\n    }\n\n    if (!formData.couponRate || formData.couponRate < 0) {\n      newErrors.couponRate = 'Coupon rate must be >= 0';\n    }\n\n    if (formData.couponRate && formData.couponRate > 1) {\n      newErrors.couponRate = 'Coupon rate exceeds 100% - please verify';\n    }\n\n    if (!formData.issueDate) {\n      newErrors.issueDate = 'Issue date is required';\n    }\n\n    if (!formData.maturityDate) {\n      newErrors.maturityDate = 'Maturity date is required';\n    }\n\n    if (\n      formData.issueDate &&\n      formData.maturityDate &&\n      new Date(formData.issueDate) >= new Date(formData.maturityDate)\n    ) {\n      newErrors.maturityDate = 'Maturity date must be after issue date';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleInputChange = (field: keyof Bond, value: any) => {\n    // Track if user manually edits the sector\n    if (field === 'sector') {\n      setUserModifiedSector(true);\n    }\n\n    setFormData((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n\n    if (errors[field]) {\n      setErrors((prev) => ({\n        ...prev,\n        [field]: '',\n      }));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      const bond = await bondService.createBond(formData as Bond);\n      onSuccess(bond);\n      resetForm();\n      onClose();\n    } catch (error: any) {\n      setErrors({ submit: error.message || 'Failed to create bond' });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      currency: 'USD',\n      couponFrequency: 'SEMI_ANNUAL',\n      dayCount: 'ACT_ACT',\n      seniority: 'SR_UNSEC',\n      settlementDays: 2,\n      faceValue: 100,\n      priceConvention: 'CLEAN',\n    });\n    setErrors({});\n    setUserModifiedSector(false);\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-fd-darker rounded-lg shadow-xl border border-fd-border max-w-4xl w-full max-h-[90vh] overflow-y-auto m-4\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"sticky top-0 bg-fd-darker border-b border-fd-border px-6 py-4 flex justify-between items-center z-10\">\n          <h2 className=\"text-xl font-semibold text-fd-text\">Create New Bond</h2>\n          <button\n            onClick={onClose}\n            className=\"text-fd-text-muted hover:text-fd-text transition-colors\"\n            aria-label=\"Close modal\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Issuer & Credit Info Section */}\n            <div className=\"md:col-span-2\">\n              <h3 className=\"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4\">\n                Issuer & Credit Information\n              </h3>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Issuer <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.issuer || ''}\n                onChange={(e) => handleInputChange('issuer', e.target.value)}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.issuer ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n              >\n                <option value=\"\">Select Issuer</option>\n                {REFERENCE_ENTITIES.map((entity) => (\n                  <option key={entity.code} value={entity.code}>\n                    {entity.code} - {entity.name}\n                  </option>\n                ))}\n              </select>\n              {errors.issuer && <p className=\"mt-1 text-sm text-red-400\">{errors.issuer}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Seniority <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.seniority}\n                onChange={(e) => handleInputChange('seniority', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {SENIORITY_OPTIONS.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">Sector</label>\n              <select\n                value={formData.sector || ''}\n                onChange={(e) => handleInputChange('sector', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                <option value=\"\">Auto-suggested from issuer</option>\n                {SECTORS.map((sector) => (\n                  <option key={sector.code} value={sector.code}>\n                    {sector.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">ISIN</label>\n              <input\n                type=\"text\"\n                value={formData.isin || ''}\n                onChange={(e) => handleInputChange('isin', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted\"\n                placeholder=\"Optional\"\n                maxLength={12}\n              />\n            </div>\n\n            {/* Economics Section */}\n            <div className=\"md:col-span-2 mt-4\">\n              <h3 className=\"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4\">\n                Bond Economics\n              </h3>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Currency <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.currency}\n                onChange={(e) => handleInputChange('currency', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {CURRENCY_OPTIONS.map((curr) => (\n                  <option key={curr} value={curr}>\n                    {curr}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Notional <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={formData.notional || ''}\n                onChange={(e) => handleInputChange('notional', parseFloat(e.target.value))}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.notional ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted`}\n              />\n              {errors.notional && <p className=\"mt-1 text-sm text-red-400\">{errors.notional}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Coupon Rate (decimal) <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.000001\"\n                value={formData.couponRate || ''}\n                onChange={(e) => handleInputChange('couponRate', parseFloat(e.target.value))}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.couponRate ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted`}\n                placeholder=\"e.g., 0.045 for 4.5%\"\n              />\n              {errors.couponRate && (\n                <p className=\"mt-1 text-sm text-red-400\">{errors.couponRate}</p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Coupon Frequency\n              </label>\n              <select\n                value={formData.couponFrequency}\n                onChange={(e) => handleInputChange('couponFrequency', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {COUPON_FREQUENCY_OPTIONS.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Day Count Convention\n              </label>\n              <select\n                value={formData.dayCount}\n                onChange={(e) => handleInputChange('dayCount', e.target.value)}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent\"\n              >\n                {DAY_COUNT_OPTIONS.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Dates Section */}\n            <div className=\"md:col-span-2 mt-4\">\n              <h3 className=\"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4\">\n                Dates\n              </h3>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Issue Date <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"date\"\n                value={formData.issueDate || ''}\n                onChange={(e) => handleInputChange('issueDate', e.target.value)}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.issueDate ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n              />\n              {errors.issueDate && <p className=\"mt-1 text-sm text-red-400\">{errors.issueDate}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">\n                Maturity Date <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"date\"\n                value={formData.maturityDate || ''}\n                onChange={(e) => handleInputChange('maturityDate', e.target.value)}\n                className={`w-full px-3 py-2 bg-fd-dark border ${errors.maturityDate ? 'border-red-500' : 'border-fd-border'} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}\n              />\n              {errors.maturityDate && (\n                <p className=\"mt-1 text-sm text-red-400\">{errors.maturityDate}</p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">Settlement Days</label>\n              <input\n                type=\"number\"\n                value={formData.settlementDays || ''}\n                onChange={(e) => handleInputChange('settlementDays', parseInt(e.target.value))}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-fd-text mb-1\">Face Value</label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={formData.faceValue || ''}\n                onChange={(e) => handleInputChange('faceValue', parseFloat(e.target.value))}\n                className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted\"\n              />\n            </div>\n          </div>\n\n          {/* Error Message */}\n          {errors.submit && (\n            <div className=\"mt-4 p-3 bg-red-900/20 border border-red-500/30 rounded-md\">\n              <p className=\"text-sm text-red-400\">{errors.submit}</p>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"mt-6 flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-darker focus:outline-none focus:ring-2 focus:ring-fd-green\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className=\"px-4 py-2 text-sm font-medium text-fd-dark bg-fd-green border border-transparent rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green disabled:bg-fd-green/50 disabled:cursor-not-allowed\"\n            >\n              {isSubmitting ? 'Creating...' : 'Create Bond'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default BondCreationModal;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\bond\\BondDetailView.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadBondDetails'. Either include it or remove the dependency array.","line":24,"column":6,"nodeType":"ArrayExpression","endLine":24,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [bondId, loadBondDetails]","fix":{"range":[959,967],"text":"[bondId, loadBondDetails]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\bond\\BondList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\bond\\BondPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\cds-blotter\\CDSBlotter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\cds-trade-form\\CDSTradeForm.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":132,"column":9,"nodeType":"MemberExpression","endLine":132,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":147,"column":9,"nodeType":"MemberExpression","endLine":147,"endColumn":22},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":210,"column":28,"nodeType":"MemberExpression","endLine":210,"endColumn":45},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":218,"column":28,"nodeType":"MemberExpression","endLine":218,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  REFERENCE_ENTITIES,\n  COUNTERPARTIES,\n  CURRENCIES,\n  PREMIUM_FREQUENCIES,\n  DAY_COUNT_CONVENTIONS,\n  RESTRUCTURING_CLAUSES,\n  PAYMENT_CALENDARS,\n  TRADE_STATUSES,\n  SETTLEMENT_METHODS,\n  CDSTrade\n} from '../../data/referenceData';\nimport { bondService, Bond } from '../../services/bondService';\n\ninterface FormErrors {\n  [key: string]: string;\n}\n\ninterface CDSTradeFormProps {\n  onSubmit: (trade: CDSTrade) => void;\n}\n\nconst CDSTradeForm: React.FC<CDSTradeFormProps> = ({ onSubmit }) => {\n  const [formData, setFormData] = useState<Partial<CDSTrade>>({\n    tradeDate: new Date().toISOString().split('T')[0],\n    currency: 'USD',\n    premiumFrequency: 'QUARTERLY',\n    dayCountConvention: 'ACT_360',\n    buySellProtection: 'BUY',\n    paymentCalendar: 'NYC',\n    tradeStatus: 'PENDING',\n    recoveryRate: 40,\n    settlementType: 'CASH'\n  });\n\n  const [errors, setErrors] = useState<FormErrors>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [availableBonds, setAvailableBonds] = useState<Bond[]>([]);\n  const [loadingBonds, setLoadingBonds] = useState(false);\n\n  // Fetch bonds when reference entity changes\n  useEffect(() => {\n    const fetchBonds = async () => {\n      if (!formData.referenceEntity) {\n        setAvailableBonds([]);\n        return;\n      }\n\n      setLoadingBonds(true);\n      try {\n        const bonds = await bondService.getBondsByIssuer(formData.referenceEntity);\n        setAvailableBonds(bonds);\n      } catch (error) {\n        console.error('Error fetching bonds:', error);\n        setAvailableBonds([]);\n      } finally {\n        setLoadingBonds(false);\n      }\n    };\n\n    fetchBonds();\n  }, [formData.referenceEntity]);\n\n  const validateForm = (): boolean => {\n    const newErrors: FormErrors = {};\n\n    // Required field validations\n    if (!formData.referenceEntity) {\n      newErrors.referenceEntity = 'Reference Entity is required';\n    }\n    \n    if (formData.referenceEntity && !formData.obligation?.id) {\n      newErrors.obligation = 'Obligation is required';\n    }\n\n    if (!formData.notionalAmount || formData.notionalAmount <= 0) {\n      newErrors.notionalAmount = 'Notional Amount must be greater than 0';\n    }\n\n    if (!formData.spread || formData.spread < 0) {\n      newErrors.spread = 'Spread must be 0 or greater';\n    }\n\n    if (!formData.recoveryRate || formData.recoveryRate < 0 || formData.recoveryRate > 100) {\n      newErrors.recoveryRate = 'Recovery Rate must be between 0 and 100';\n    }\n\n    if (!formData.maturityDate) {\n      newErrors.maturityDate = 'Maturity Date is required';\n    }\n\n    if (!formData.effectiveDate) {\n      newErrors.effectiveDate = 'Effective Date is required';\n    }\n\n    if (!formData.counterparty) {\n      newErrors.counterparty = 'Counterparty is required';\n    }\n\n    if (!formData.tradeDate) {\n      newErrors.tradeDate = 'Trade Date is required';\n    }\n\n    if (!formData.accrualStartDate) {\n      newErrors.accrualStartDate = 'Accrual Start Date is required';\n    }\n\n    // Date validations\n    if (formData.effectiveDate && formData.maturityDate && \n        new Date(formData.effectiveDate) >= new Date(formData.maturityDate)) {\n      newErrors.maturityDate = 'Maturity Date must be after Effective Date';\n    }\n\n    if (formData.tradeDate && formData.effectiveDate && \n        new Date(formData.tradeDate) > new Date(formData.effectiveDate)) {\n      newErrors.effectiveDate = 'Effective Date must be on or after Trade Date';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleInputChange = (field: keyof CDSTrade, value: any) => {\n    setFormData(prev => {\n      const updates: Partial<CDSTrade> = {};\n      \n      // Handle obligation specially - convert to nested object\n      if (field === 'obligation') {\n        updates.obligation = value ? { id: value } : undefined;\n      } else {\n        updates[field] = value as any;\n      }\n      \n      // Clear obligation when reference entity changes\n      if (field === 'referenceEntity' && prev.referenceEntity !== value) {\n        updates.obligation = undefined;\n      }\n      \n      return {\n        ...prev,\n        ...updates\n      };\n    });\n\n    // Clear error for this field when user starts typing\n    if (errors[field]) {\n      setErrors(prev => ({\n        ...prev,\n        [field]: ''\n      }));\n    }\n  };\n\n  // Format number with commas for display\n  const formatNumberWithCommas = (num: number | undefined): string => {\n    if (!num && num !== 0) return '';\n    return num.toLocaleString('en-US');\n  };\n\n  // Handle notional amount input with formatting\n  const handleNotionalChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const rawValue = e.target.value.replace(/,/g, ''); // Remove commas\n    const numValue = parseFloat(rawValue);\n    \n    if (!isNaN(numValue) || rawValue === '') {\n      handleInputChange('notionalAmount', rawValue === '' ? undefined : numValue);\n    }\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    // Defensive normalization\n    if (formData.tradeStatus === 'SETTLED' || formData.tradeStatus === 'CONFIRMED') {\n      formData.tradeStatus = 'ACTIVE';\n    }\n\n    // Simulate API call delay\n    setTimeout(() => {\n      onSubmit(formData as CDSTrade);\n      setIsSubmitting(false);\n      \n      // Reset form\n      setFormData({\n        tradeDate: new Date().toISOString().split('T')[0],\n        currency: 'USD',\n        premiumFrequency: 'QUARTERLY',\n        dayCountConvention: 'ACT_360',\n        buySellProtection: 'BUY',\n        paymentCalendar: 'NYC',\n        tradeStatus: 'PENDING',\n        recoveryRate: 40,\n        settlementType: 'CASH'\n      });\n    }, 1000);\n  };\n\n  const inputClassName = (fieldName: string) => {\n    const baseClass = \"w-full px-3 py-2 bg-fd-input border rounded-md text-fd-text placeholder-fd-text-muted focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-fd-green\";\n    const errorClass = \"border-red-500\";\n    const normalClass = \"border-fd-border\";\n    \n    return `${baseClass} ${errors[fieldName] ? errorClass : normalClass}`;\n  };\n\n  const selectClassName = (fieldName: string) => {\n    const baseClass = \"w-full px-3 py-2 bg-fd-input border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-fd-green\";\n    const errorClass = \"border-red-500\";\n    const normalClass = \"border-fd-border\";\n    \n    return `${baseClass} ${errors[fieldName] ? errorClass : normalClass}`;\n  };\n\n  const generateRandomData = () => {\n    // Helper function to get random item from array\n    const getRandomItem = (array: any[]) => array[Math.floor(Math.random() * array.length)];\n    \n    // Helper function to get random date within a range (days offset from today)\n    const getRandomDate = (startDays: number, endDays: number) => {\n      const start = new Date();\n      start.setDate(start.getDate() + startDays);\n      const end = new Date();\n      end.setDate(end.getDate() + endDays);\n      \n      const randomTime = start.getTime() + Math.random() * (end.getTime() - start.getTime());\n      return new Date(randomTime).toISOString().split('T')[0];\n    };\n    \n    // Generate trades that started in the PAST for demo purposes\n    // This allows demonstrating coupon payments immediately\n    \n    // Trade date: 24-48 months ago (2-4 years in the past) for more coupons\n    const tradeDate = getRandomDate(-365 * 4, -365 * 2);\n    \n    // Effective date: 1-7 days after trade date (still in the past)\n    const tradeDateObj = new Date(tradeDate);\n    const effectiveDaysOffset = Math.floor(Math.random() * 7) + 1;\n    const effectiveDateObj = new Date(tradeDateObj);\n    effectiveDateObj.setDate(effectiveDateObj.getDate() + effectiveDaysOffset);\n    const effectiveDate = effectiveDateObj.toISOString().split('T')[0];\n    \n    // Maturity date: 2-5 years from TODAY (in the future)\n    const maturityDate = getRandomDate(365 * 2, 365 * 5);\n    \n    // Accrual start date: same as effective date\n    const accrualStartDate = effectiveDate;\n    \n    // Generate round notional amounts (5M, 10M, 20M, 50M, 100M, 200M, 500M)\n    const roundNotionals = [5000000, 10000000, 20000000, 50000000, 100000000, 200000000, 500000000];\n    const notionalAmount = getRandomItem(roundNotionals);\n    \n    const randomData: Partial<CDSTrade> = {\n      referenceEntity: getRandomItem(REFERENCE_ENTITIES).code,\n      counterparty: getRandomItem(COUNTERPARTIES).code,\n      currency: getRandomItem(CURRENCIES).code,\n      notionalAmount,\n      spread: Math.floor(Math.random() * 500) + 50, // 50 to 550 bps\n      buySellProtection: Math.random() > 0.5 ? 'BUY' : 'SELL',\n      tradeDate,\n      effectiveDate,\n      maturityDate,\n      accrualStartDate,\n      premiumFrequency: getRandomItem(PREMIUM_FREQUENCIES).value,\n      dayCountConvention: getRandomItem(DAY_COUNT_CONVENTIONS).value,\n      restructuringClause: Math.random() > 0.3 ? getRandomItem(RESTRUCTURING_CLAUSES).value : '', // 70% chance of having a clause\n      paymentCalendar: getRandomItem(PAYMENT_CALENDARS).value,\n      tradeStatus: 'ACTIVE', // Always generate ACTIVE trades for demo purposes\n      recoveryRate: 40,  // Default recovery rate\n      settlementType: getRandomItem(SETTLEMENT_METHODS).value\n    };\n    setFormData(randomData);\n    setErrors({}); // Clear any existing errors\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-fd-text\">New CDS Trade Entry</h2>\n      </div>\n      \n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {/* Row 1: Reference Entity, Counterparty, Currency */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Reference Entity <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.referenceEntity || ''}\n              onChange={(e) => handleInputChange('referenceEntity', e.target.value)}\n              className={selectClassName('referenceEntity')}\n            >\n              <option value=\"\">Select Reference Entity</option>\n              {REFERENCE_ENTITIES.map((entity) => (\n                <option key={entity.code} value={entity.code}>\n                  {entity.code} - {entity.name}\n                </option>\n              ))}\n            </select>\n            {errors.referenceEntity && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.referenceEntity}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Counterparty <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.counterparty || ''}\n              onChange={(e) => handleInputChange('counterparty', e.target.value)}\n              className={selectClassName('counterparty')}\n            >\n              <option value=\"\">Select Counterparty</option>\n              {COUNTERPARTIES.map((cp) => (\n                <option key={cp.code} value={cp.code}>\n                  {cp.name}\n                </option>\n              ))}\n            </select>\n            {errors.counterparty && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.counterparty}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Currency <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.currency || 'USD'}\n              onChange={(e) => handleInputChange('currency', e.target.value)}\n              className={selectClassName('currency')}\n            >\n              {CURRENCIES.map((curr) => (\n                <option key={curr.code} value={curr.code}>\n                  {curr.code} - {curr.name}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        {/* Row 1.5: Obligation (conditional on reference entity) */}\n        {formData.referenceEntity && (\n          <div className=\"grid grid-cols-1 gap-4\">\n            <div>\n              <label className=\"block text-fd-text font-medium mb-2\">\n                Obligation (Bond) <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.obligation?.id || ''}\n                onChange={(e) => handleInputChange('obligation', e.target.value ? Number(e.target.value) : undefined)}\n                className={selectClassName('obligation')}\n                disabled={loadingBonds}\n              >\n                <option value=\"\">Select Obligation</option>\n                {loadingBonds && <option value=\"\">Loading bonds...</option>}\n                {!loadingBonds && availableBonds.length === 0 && (\n                  <option value=\"\">No bonds available for {formData.referenceEntity}</option>\n                )}\n                {!loadingBonds && availableBonds.map((bond) => (\n                  <option key={bond.id} value={bond.id}>\n                    {bond.isin ? `${bond.isin} - ` : ''}\n                    {bond.issuer} {bond.seniority} - \n                    Coupon: {bond.couponRate}% - \n                    Maturity: {new Date(bond.maturityDate).toLocaleDateString()}\n                  </option>\n                ))}\n              </select>\n              <p className=\"text-xs text-fd-text-muted mt-1\">\n                Select a specific bond from {formData.referenceEntity}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* Row 2: Notional Amount, Spread, Buy/Sell Protection */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Notional Amount <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              value={formatNumberWithCommas(formData.notionalAmount)}\n              onChange={handleNotionalChange}\n              className={inputClassName('notionalAmount')}\n              placeholder=\"e.g., 10,000,000\"\n            />\n            {errors.notionalAmount && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.notionalAmount}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Spread (bps) <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              min=\"0\"\n              value={formData.spread || ''}\n              onChange={(e) => handleInputChange('spread', parseFloat(e.target.value))}\n              className={inputClassName('spread')}\n              placeholder=\"e.g., 100\"\n            />\n            {errors.spread && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.spread}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Recovery Rate (%) <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"number\"\n              step=\"1\"\n              min=\"0\"\n              max=\"100\"\n              value={formData.recoveryRate || 40}\n              onChange={(e) => handleInputChange('recoveryRate', parseFloat(e.target.value))}\n              className={inputClassName('recoveryRate')}\n              placeholder=\"e.g., 40\"\n            />\n            {errors.recoveryRate && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.recoveryRate}</p>\n            )}\n          </div>\n        </div>\n\n        {/* Row 3: Buy/Sell Protection, Settlement Type */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Buy/Sell Protection <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.buySellProtection || 'BUY'}\n              onChange={(e) => handleInputChange('buySellProtection', e.target.value)}\n              className={selectClassName('buySellProtection')}\n            >\n              <option value=\"BUY\">Buy Protection</option>\n              <option value=\"SELL\">Sell Protection</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Settlement Type <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.settlementType || 'CASH'}\n              onChange={(e) => handleInputChange('settlementType', e.target.value)}\n              className={selectClassName('settlementType')}\n            >\n              {SETTLEMENT_METHODS.map((method) => (\n                <option key={method.value} value={method.value}>\n                  {method.label}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        {/* Row 4: Trade Date, Effective Date, Maturity Date */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Trade Date <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"date\"\n              value={formData.tradeDate || ''}\n              onChange={(e) => handleInputChange('tradeDate', e.target.value)}\n              className={inputClassName('tradeDate')}\n            />\n            {errors.tradeDate && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.tradeDate}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Effective Date <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"date\"\n              value={formData.effectiveDate || ''}\n              onChange={(e) => handleInputChange('effectiveDate', e.target.value)}\n              className={inputClassName('effectiveDate')}\n            />\n            {errors.effectiveDate && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.effectiveDate}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Maturity Date <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"date\"\n              value={formData.maturityDate || ''}\n              onChange={(e) => handleInputChange('maturityDate', e.target.value)}\n              className={inputClassName('maturityDate')}\n            />\n            {errors.maturityDate && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.maturityDate}</p>\n            )}\n          </div>\n        </div>\n\n        {/* Row 4: Premium Frequency, Day Count Convention, Accrual Start Date */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Premium Frequency <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.premiumFrequency || 'QUARTERLY'}\n              onChange={(e) => handleInputChange('premiumFrequency', e.target.value)}\n              className={selectClassName('premiumFrequency')}\n            >\n              {PREMIUM_FREQUENCIES.map((freq) => (\n                <option key={freq.value} value={freq.value}>\n                  {freq.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Day Count Convention <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.dayCountConvention || 'ACT_360'}\n              onChange={(e) => handleInputChange('dayCountConvention', e.target.value)}\n              className={selectClassName('dayCountConvention')}\n            >\n              {DAY_COUNT_CONVENTIONS.map((dcc) => (\n                <option key={dcc.value} value={dcc.value}>\n                  {dcc.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Accrual Start Date <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"date\"\n              value={formData.accrualStartDate || ''}\n              onChange={(e) => handleInputChange('accrualStartDate', e.target.value)}\n              className={inputClassName('accrualStartDate')}\n            />\n            {errors.accrualStartDate && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.accrualStartDate}</p>\n            )}\n          </div>\n        </div>\n\n        {/* Row 5: Payment Calendar, Restructuring Clause, Trade Status */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Payment Calendar <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.paymentCalendar || 'NYC'}\n              onChange={(e) => handleInputChange('paymentCalendar', e.target.value)}\n              className={selectClassName('paymentCalendar')}\n            >\n              {PAYMENT_CALENDARS.map((cal) => (\n                <option key={cal.value} value={cal.value}>\n                  {cal.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Restructuring Clause\n            </label>\n            <select\n              value={formData.restructuringClause || ''}\n              onChange={(e) => handleInputChange('restructuringClause', e.target.value)}\n              className={selectClassName('restructuringClause')}\n            >\n              <option value=\"\">None</option>\n              {RESTRUCTURING_CLAUSES.map((clause) => (\n                <option key={clause.value} value={clause.value}>\n                  {clause.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-fd-text font-medium mb-2\">\n              Trade Status <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.tradeStatus || 'PENDING'}\n              onChange={(e) => handleInputChange('tradeStatus', e.target.value)}\n              className={selectClassName('tradeStatus')}\n            >\n              {TRADE_STATUSES.map((status) => (\n                <option key={status.value} value={status.value}>\n                  {status.label}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        {/* Submit Button */}\n        <div className=\"flex justify-end space-x-4 pt-6 border-t border-fd-border\">\n          <button\n            type=\"button\"\n            onClick={generateRandomData}\n            className=\"px-6 py-2 bg-transparent border border-fd-border text-fd-text rounded hover:bg-fd-dark transition-colors\"\n          >\n            Fill Random Data\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => {\n              setFormData({\n                tradeDate: new Date().toISOString().split('T')[0],\n                currency: 'USD',\n                premiumFrequency: 'QUARTERLY',\n                dayCountConvention: 'ACT_360',\n                buySellProtection: 'BUY',\n                paymentCalendar: 'NYC',\n                tradeStatus: 'PENDING',\n                recoveryRate: 40\n              });\n              setErrors({});\n            }}\n            className=\"px-6 py-2 bg-transparent border border-fd-border text-fd-text rounded hover:bg-fd-dark transition-colors\"\n          >\n            Clear Form\n          </button>\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className=\"px-6 py-2 bg-fd-green text-fd-dark font-medium rounded hover:bg-fd-green-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n          >\n            {isSubmitting ? 'Booking Trade...' : 'Book Trade'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default CDSTradeForm;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\confirmation-modal\\ConfirmationModal.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":35,"column":12,"nodeType":"MemberExpression","endLine":35,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { CDSTradeResponse } from '../../services/cdsTradeService';\n\ninterface ConfirmationModalProps {\n  isOpen: boolean;\n  trade: CDSTradeResponse | null;\n  onClose: () => void;\n}\n\nconst ConfirmationModal: React.FC<ConfirmationModalProps> = ({ isOpen, trade, onClose }) => {\n  if (!isOpen || !trade) return null;\n\n  const formatCurrency = (amount: number, currency: string) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: currency || 'USD',\n    }).format(amount);\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n  };\n\n  const formatRestructuringClause = (clause: string) => {\n    const labels: { [key: string]: string } = {\n      'NO_RESTRUCTURING': 'No R',\n      'MODIFIED_RESTRUCTURING': 'Mod R',\n      'MODIFIED_MODIFIED_RESTRUCTURING': 'Mod Mod R',\n      'FULL_RESTRUCTURING': 'Full R'\n    };\n    return labels[clause] || clause.replace(/_/g, ' ');\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-8 h-8 bg-fd-green rounded-full flex items-center justify-center\">\n              <svg\n                className=\"w-5 h-5 text-fd-dark\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M5 13l4 4L19 7\"\n                ></path>\n              </svg>\n            </div>\n            <h2 className=\"text-2xl font-bold text-fd-text\">Trade Booked Successfully</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-fd-text-muted hover:text-fd-text transition-colors\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M6 18L18 6M6 6l12 12\"\n              ></path>\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"bg-fd-dark rounded-lg p-4 mb-6\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-fd-text-muted\">Trade ID:</span>\n            <span className=\"text-fd-green font-mono\">CDS-{trade.id}</span>\n          </div>\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-fd-text-muted\">Booking Time:</span>\n            <span className=\"text-fd-text\">{new Date(trade.createdAt).toLocaleString()}</span>\n          </div>\n        </div>\n\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-semibold text-fd-text border-b border-fd-border pb-2\">\n            Trade Details\n          </h3>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-fd-text-muted\">Reference Entity:</span>\n                <span className=\"text-fd-text\">{trade.referenceEntity}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-fd-text-muted\">Counterparty:</span>\n                <span className=\"text-fd-text\">{trade.counterparty}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-fd-text-muted\">Direction:</span>\n                <span\n                  className={`${trade.buySellProtection === 'BUY' ? 'text-blue-400' : 'text-orange-400'}`}\n                >\n                  {trade.buySellProtection === 'BUY' ? 'Buy Protection' : 'Sell Protection'}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-fd-text-muted\">Settlement Type:</span>\n                <span className={`${trade.settlementType === 'CASH' ? 'text-fd-cyan' : 'text-fd-teal'}`}>\n                  {trade.settlementType === 'CASH' ? 'Cash Settlement' : 'Physical Settlement'}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-fd-text-muted\">Notional:</span>\n                <span className=\"text-fd-text font-medium\">\n                  {formatCurrency(trade.notionalAmount, trade.currency)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-fd-text-muted\">Spread:</span>\n                <span className=\"text-fd-text\">{trade.spread} bps</span>\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-fd-text-muted\">Trade Date:</span>\n                <span className=\"text-fd-text\">{formatDate(trade.tradeDate)}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-fd-text-muted\">Effective Date:</span>\n                <span className=\"text-fd-text\">{formatDate(trade.effectiveDate)}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-fd-text-muted\">Maturity Date:</span>\n                <span className=\"text-fd-text\">{formatDate(trade.maturityDate)}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-fd-text-muted\">Premium Frequency:</span>\n                <span className=\"text-fd-text\">{trade.premiumFrequency.replace('_', ' ')}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-fd-text-muted\">Status:</span>\n                <span className=\"text-fd-green\">{trade.tradeStatus}</span>\n              </div>\n            </div>\n          </div>\n\n          {trade.restructuringClause && (\n            <div className=\"pt-2 border-t border-fd-border\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-fd-text-muted\">Restructuring Clause:</span>\n                <span className=\"text-fd-text\">{formatRestructuringClause(trade.restructuringClause)}</span>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex justify-end space-x-4 mt-8 pt-4 border-t border-fd-border\">\n          <button\n            onClick={onClose}\n            className=\"px-6 py-2 bg-fd-green text-fd-dark font-medium rounded hover:bg-fd-green-hover transition-colors\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ConfirmationModal;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\credit-event-modal\\CreditEventModal.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":128,"column":9,"nodeType":"MemberExpression","endLine":128,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { REFERENCE_ENTITIES } from '../../data/referenceData';\n\nexport type CreditEventType =\n  | 'BANKRUPTCY'\n  | 'FAILURE_TO_PAY'\n  | 'RESTRUCTURING'\n  | 'OBLIGATION_DEFAULT'\n  | 'REPUDIATION_MORATORIUM'\n  | 'PAYOUT';\nexport type SettlementMethod = 'CASH' | 'PHYSICAL';\n\nexport interface CreateCreditEventRequest {\n  eventType: CreditEventType;\n  eventDate: string;\n  noticeDate: string;\n  settlementMethod: SettlementMethod;\n  comments?: string;\n}\n\ninterface CreditEventModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (request: CreateCreditEventRequest) => Promise<void>;\n  tradeId: number;\n  referenceEntity?: string;\n  isLoading?: boolean;\n}\n\nconst CreditEventModal: React.FC<CreditEventModalProps> = ({\n  isOpen,\n  onClose,\n  onSubmit,\n  tradeId,\n  referenceEntity,\n  isLoading = false\n}) => {\n  // Get today's date in YYYY-MM-DD format\n  const getTodayDate = () => {\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  };\n\n  // Helper function to get full name of reference entity\n  const getReferenceEntityFullName = (code: string): string => {\n    const entity = REFERENCE_ENTITIES.find(e => e.code === code);\n    return entity ? entity.name : code;\n  };\n\n  const [formData, setFormData] = useState<CreateCreditEventRequest>({\n    eventType: 'RESTRUCTURING',\n    eventDate: getTodayDate(),\n    noticeDate: getTodayDate(),\n    settlementMethod: 'PHYSICAL',\n    comments: '',\n  });\n\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const eventTypeOptions: { value: CreditEventType; label: string }[] = [\n    { value: 'RESTRUCTURING', label: 'Restructuring' },\n    { value: 'BANKRUPTCY', label: 'Bankruptcy' },\n  ];\n\n  const settlementMethodOptions: { value: SettlementMethod; label: string }[] = [\n    { value: 'PHYSICAL', label: 'Physical Settlement' },\n    { value: 'CASH', label: 'Cash Settlement' },\n  ];\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n\n    if (!formData.eventType) {\n      newErrors.eventType = 'Event type is required';\n    }\n\n    if (!formData.eventDate) {\n      newErrors.eventDate = 'Event date is required';\n    } else if (new Date(formData.eventDate) > new Date()) {\n      newErrors.eventDate = 'Event date cannot be in the future';\n    }\n\n    if (!formData.noticeDate) {\n      newErrors.noticeDate = 'Notice date is required';\n    } else if (formData.eventDate && new Date(formData.noticeDate) < new Date(formData.eventDate)) {\n      newErrors.noticeDate = 'Notice date must be on or after event date';\n    }\n\n    if (!formData.settlementMethod) {\n      newErrors.settlementMethod = 'Settlement method is required';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      await onSubmit(formData);\n      // Reset form on successful submission\n      setFormData({\n        eventType: 'RESTRUCTURING',\n        eventDate: getTodayDate(),\n        noticeDate: getTodayDate(),\n        settlementMethod: 'PHYSICAL',\n        comments: '',\n      });\n      setErrors({});\n      onClose();\n    } catch (error) {\n      console.error('Error submitting credit event:', error);\n    }\n  };\n\n  const handleInputChange = (field: keyof CreateCreditEventRequest, value: string) => {\n    setFormData((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n\n    // Clear error when user starts typing\n    if (errors[field]) {\n      setErrors((prev) => ({\n        ...prev,\n        [field]: '',\n      }));\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6 w-full max-w-md max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-semibold text-fd-text\">Record Credit Event</h2>\n          <button\n            onClick={onClose}\n            className=\"text-fd-text-muted hover:text-fd-text transition-colors\"\n            disabled={isLoading}\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Reference Entity Information */}\n        {referenceEntity && (\n          <div className=\"mb-4 p-3 bg-fd-dark rounded-lg border border-fd-border\">\n            <div className=\"flex items-center gap-2\">\n              <svg className=\"w-5 h-5 text-fd-green\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n              </svg>\n              <div className=\"flex-1\">\n                <p className=\"text-xs text-fd-text-muted uppercase tracking-wide\">Reference Entity</p>\n                <p className=\"text-fd-green font-semibold\">{getReferenceEntityFullName(referenceEntity)}</p>\n                <p className=\"text-fd-text-muted text-xs mt-0.5\">{referenceEntity}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label htmlFor=\"eventType\" className=\"block text-sm font-medium text-fd-text mb-1\">\n              Event Type *\n            </label>\n            <select\n              id=\"eventType\"\n              value={formData.eventType}\n              onChange={(e) => handleInputChange('eventType', e.target.value)}\n              className={`w-full px-3 py-2 bg-fd-dark border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text ${\n                errors.eventType ? 'border-red-500' : 'border-fd-border'\n              }`}\n              disabled={isLoading}\n            >\n              {eventTypeOptions.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </select>\n            {errors.eventType && <p className=\"mt-1 text-sm text-red-400\">{errors.eventType}</p>}\n          </div>\n\n          <div>\n            <label htmlFor=\"eventDate\" className=\"block text-sm font-medium text-fd-text mb-1\">\n              Event Date *\n            </label>\n            <input\n              type=\"date\"\n              id=\"eventDate\"\n              value={formData.eventDate}\n              onChange={(e) => handleInputChange('eventDate', e.target.value)}\n              className={`w-full px-3 py-2 bg-fd-dark border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text ${\n                errors.eventDate ? 'border-red-500' : 'border-fd-border'\n              }`}\n              disabled={isLoading}\n            />\n            {errors.eventDate && <p className=\"mt-1 text-sm text-red-400\">{errors.eventDate}</p>}\n          </div>\n\n          <div>\n            <label htmlFor=\"noticeDate\" className=\"block text-sm font-medium text-fd-text mb-1\">\n              Notice Date *\n            </label>\n            <input\n              type=\"date\"\n              id=\"noticeDate\"\n              value={formData.noticeDate}\n              onChange={(e) => handleInputChange('noticeDate', e.target.value)}\n              className={`w-full px-3 py-2 bg-fd-dark border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text ${\n                errors.noticeDate ? 'border-red-500' : 'border-fd-border'\n              }`}\n              disabled={isLoading}\n            />\n            {errors.noticeDate && <p className=\"mt-1 text-sm text-red-400\">{errors.noticeDate}</p>}\n          </div>\n\n          <div>\n            <label\n              htmlFor=\"settlementMethod\"\n              className=\"block text-sm font-medium text-fd-text mb-1\"\n            >\n              Settlement Method *\n            </label>\n            <select\n              id=\"settlementMethod\"\n              value={formData.settlementMethod}\n              onChange={(e) => handleInputChange('settlementMethod', e.target.value)}\n              className={`w-full px-3 py-2 bg-fd-dark border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text ${\n                errors.settlementMethod ? 'border-red-500' : 'border-fd-border'\n              }`}\n              disabled={isLoading}\n            >\n              {settlementMethodOptions.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </select>\n            {errors.settlementMethod && (\n              <p className=\"mt-1 text-sm text-red-400\">{errors.settlementMethod}</p>\n            )}\n          </div>\n\n          <div>\n            <label htmlFor=\"comments\" className=\"block text-sm font-medium text-fd-text mb-1\">\n              Comments\n            </label>\n            <textarea\n              id=\"comments\"\n              value={formData.comments}\n              onChange={(e) => handleInputChange('comments', e.target.value)}\n              rows={3}\n              className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text placeholder-fd-text-muted\"\n              placeholder=\"Optional comments about the credit event...\"\n              disabled={isLoading}\n            />\n          </div>\n\n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-border focus:outline-none focus:ring-2 focus:ring-fd-green transition-colors\"\n              disabled={isLoading}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"px-4 py-2 text-sm font-medium text-fd-dark bg-fd-green border border-transparent rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green disabled:opacity-50 transition-colors\"\n              disabled={isLoading}\n            >\n              {isLoading ? 'Recording...' : 'Record Credit Event'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default CreditEventModal;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\dashboard\\MarginDashboard.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":100,"column":68,"nodeType":"MemberExpression","endLine":100,"endColumn":76}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadStatements'. Either include it or remove the dependency array.","line":57,"column":6,"nodeType":"ArrayExpression","endLine":57,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [asOfDate, loadStatements]","fix":{"range":[1507,1517],"text":"[asOfDate, loadStatements]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { formatCurrency, formatDateTime } from '../../utils/formatters';\n\ninterface MarginStatement {\n  id: number;\n  statementId: string;\n  ccpName: string;\n  memberFirm: string;\n  accountNumber: string;\n  statementDate: string;\n  currency: string;\n  format: string;\n  fileName: string;\n  fileSize: number;\n  status: string;\n  createdAt: string;\n  updatedAt: string;\n  processedAt: string | null;\n  errorMessage: string;\n  retryCount: number;\n  variationMargin?: number;\n  initialMargin?: number;\n  totalPositions?: number;\n}\n\ninterface MarginPosition {\n  id: number;\n  positionId: string;\n  ccpAccount: string;\n  product: string;\n  variationMargin: number;\n  initialMargin: number;\n  currency: string;\n}\n\ninterface MarginDashboardProps {\n  asOfDate: string;\n  onRefresh: () => void;\n}\n\nconst MarginDashboard: React.FC<MarginDashboardProps> = ({\n  asOfDate,\n  onRefresh\n}) => {\n  const [statements, setStatements] = useState<MarginStatement[]>([]);\n  const [selectedStatement, setSelectedStatement] = useState<MarginStatement | null>(null);\n  const [positions, setPositions] = useState<MarginPosition[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingPositions, setLoadingPositions] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [filter, setFilter] = useState<string>('ALL');\n\n  const statusFilters = ['ALL', 'PROCESSED', 'PENDING', 'FAILED'];\n\n  useEffect(() => {\n    loadStatements();\n  }, [asOfDate]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const loadStatements = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const response = await fetch(`/api/margin-statements?asOfDate=${asOfDate}`);\n      if (!response.ok) {\n        throw new Error('Failed to load statements');\n      }\n      \n      const data = await response.json();\n      setStatements(data);\n    } catch (err: any) {\n      setError(err.message || 'Failed to load statements');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadPositions = async (statementId: number) => {\n    try {\n      setLoadingPositions(true);\n      const response = await fetch(`/api/margin-statements/${statementId}/positions`);\n      if (!response.ok) {\n        throw new Error('Failed to load positions');\n      }\n      const data = await response.json();\n      setPositions(data);\n    } catch (err: any) {\n      console.error('Failed to load positions:', err);\n      setPositions([]);\n    } finally {\n      setLoadingPositions(false);\n    }\n  };\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'PENDING':\n        return 'text-yellow-400';\n      case 'PROCESSING':\n        return 'text-blue-400';\n      case 'PROCESSED':\n        return 'text-green-400';\n      case 'FAILED':\n        return 'text-red-400';\n      case 'DISPUTED':\n        return 'text-orange-400';\n      default:\n        return 'text-fd-text-muted';\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'PENDING':\n        return (\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n          </svg>\n        );\n      case 'PROCESSING':\n        return (\n          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-current\"></div>\n        );\n      case 'PROCESSED':\n        return (\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n          </svg>\n        );\n      case 'FAILED':\n        return (\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n          </svg>\n        );\n      default:\n        return null;\n    }\n  };\n\n  const filteredStatements = statements.filter(statement => \n    filter === 'ALL' || statement.status === filter\n  );\n\n  const handleStatementClick = (statement: MarginStatement) => {\n    setSelectedStatement(statement);\n    if (statement.status === 'PROCESSED') {\n      loadPositions(statement.id);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-500/20 border border-red-500/50 rounded-lg p-4\">\n        <div className=\"flex items-center\">\n          <svg className=\"w-5 h-5 text-red-400 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n          </svg>\n          <div>\n            <h3 className=\"text-sm font-medium text-red-400\">Error Loading Statements</h3>\n            <p className=\"text-sm text-red-300 mt-1\">{error}</p>\n          </div>\n        </div>\n        <button\n          onClick={loadStatements}\n          className=\"mt-3 px-3 py-1 bg-red-500/30 text-red-400 rounded text-sm hover:bg-red-500/40 transition-colors\"\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-fd-darker rounded-lg border border-fd-border\">\n      {/* Header */}\n      <div className=\"px-6 py-4 border-b border-fd-border\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <svg className=\"w-8 h-8 text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n            </svg>\n            <div>\n              <h3 className=\"text-xl font-semibold text-fd-text\">Margin Statements</h3>\n              <p className=\"text-sm text-fd-text-muted\">Daily VM/IM positions from CCPs</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-3\">\n            <span className=\"text-sm text-fd-text-muted\">As of {asOfDate}</span>\n            <button\n              onClick={() => { loadStatements(); onRefresh(); }}\n              className=\"p-2 text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50 rounded-md transition-colors\"\n              title=\"Refresh statements\"\n            >\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        {/* Filter Tabs */}\n        <div className=\"flex space-x-1 bg-fd-dark rounded-lg p-1 mt-4\">\n          {statusFilters.map(status => (\n            <button\n              key={status}\n              onClick={() => setFilter(status)}\n              className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                filter === status\n                  ? 'bg-blue-500 text-white'\n                  : 'text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50'\n              }`}\n            >\n              {status}\n              <span className=\"ml-1 text-xs\">\n                ({status === 'ALL' ? statements.length : statements.filter(s => s.status === status).length})\n              </span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Statements Grid */}\n      <div className=\"p-6\">\n        {filteredStatements.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <svg className=\"mx-auto h-12 w-12 text-fd-text-muted\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n            </svg>\n            <h3 className=\"mt-2 text-sm font-medium text-fd-text\">No margin statements found</h3>\n            <p className=\"mt-1 text-sm text-fd-text-muted\">\n              {filter === 'ALL' ? `No statements available for ${asOfDate}` : `No statements with status: ${filter}`}\n            </p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {filteredStatements.map((statement) => (\n              <div\n                key={statement.id}\n                className=\"bg-fd-dark rounded-lg p-4 border border-fd-border hover:border-blue-500/50 cursor-pointer transition-all duration-200 hover:shadow-lg\"\n                onClick={() => handleStatementClick(statement)}\n              >\n                {/* Statement Header */}\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div className=\"flex items-center space-x-2\">\n                    <div className={`flex items-center space-x-1 ${getStatusColor(statement.status)}`}>\n                      {getStatusIcon(statement.status)}\n                      <span className=\"text-xs font-medium uppercase\">{statement.status}</span>\n                    </div>\n                  </div>\n                  <span className=\"text-xs text-fd-text-muted\">\n                    {new Date(statement.statementDate).toLocaleDateString()}\n                  </span>\n                </div>\n\n                {/* Statement Details */}\n                <div className=\"space-y-2\">\n                  <div>\n                    <h4 className=\"font-medium text-fd-text truncate\">{statement.statementId}</h4>\n                    <p className=\"text-sm text-fd-text-muted\">{statement.ccpName}</p>\n                  </div>\n\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-fd-text-muted\">Account:</span>\n                    <span className=\"text-fd-text font-mono\">{statement.accountNumber}</span>\n                  </div>\n\n                  {statement.status === 'PROCESSED' && (\n                    <>\n                      {statement.variationMargin !== undefined && (\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-fd-text-muted\">VM:</span>\n                          <span className={`font-medium ${statement.variationMargin >= 0 ? 'text-green-400' : 'text-red-400'}`}>\n                            {formatCurrency(statement.variationMargin)}\n                          </span>\n                        </div>\n                      )}\n                      {statement.initialMargin !== undefined && (\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-fd-text-muted\">IM:</span>\n                          <span className=\"text-fd-text font-medium\">\n                            {formatCurrency(statement.initialMargin)}\n                          </span>\n                        </div>\n                      )}\n                      {statement.totalPositions !== undefined && (\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-fd-text-muted\">Positions:</span>\n                          <span className=\"text-fd-text\">{statement.totalPositions}</span>\n                        </div>\n                      )}\n                    </>\n                  )}\n\n                  <div className=\"flex justify-between text-xs text-fd-text-muted\">\n                    <span>{formatFileSize(statement.fileSize)} {statement.format}</span>\n                    <span>{formatDateTime(statement.createdAt)}</span>\n                  </div>\n                </div>\n\n                {statement.errorMessage && (\n                  <div className=\"mt-2 p-2 bg-red-500/20 border border-red-500/50 rounded text-xs text-red-400\">\n                    {statement.errorMessage.substring(0, 100)}...\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Statement Detail Modal */}\n      {selectedStatement && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-fd-darker rounded-lg shadow-lg border border-fd-border p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-bold text-fd-text\">{selectedStatement.statementId}</h3>\n              <button \n                onClick={() => setSelectedStatement(null)}\n                className=\"text-fd-text-muted hover:text-fd-text transition-colors\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                </svg>\n              </button>\n            </div>\n\n            {/* Statement Info */}\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 text-sm\">\n              <div>\n                <span className=\"text-fd-text-muted\">CCP:</span>\n                <div className=\"text-fd-text font-medium\">{selectedStatement.ccpName}</div>\n              </div>\n              <div>\n                <span className=\"text-fd-text-muted\">Account:</span>\n                <div className=\"text-fd-text font-mono\">{selectedStatement.accountNumber}</div>\n              </div>\n              <div>\n                <span className=\"text-fd-text-muted\">Date:</span>\n                <div className=\"text-fd-text\">{new Date(selectedStatement.statementDate).toLocaleDateString()}</div>\n              </div>\n              <div>\n                <span className=\"text-fd-text-muted\">Status:</span>\n                <div className={`flex items-center space-x-1 ${getStatusColor(selectedStatement.status)}`}>\n                  {getStatusIcon(selectedStatement.status)}\n                  <span className=\"font-medium\">{selectedStatement.status}</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Positions Table */}\n            {selectedStatement.status === 'PROCESSED' && (\n              <div className=\"border border-fd-border rounded-lg\">\n                <div className=\"px-4 py-3 border-b border-fd-border bg-fd-dark\">\n                  <h4 className=\"font-medium text-fd-text\">Margin Positions</h4>\n                </div>\n                \n                {loadingPositions ? (\n                  <div className=\"flex items-center justify-center py-8\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400\"></div>\n                  </div>\n                ) : positions.length > 0 ? (\n                  <div className=\"overflow-x-auto\">\n                    <table className=\"w-full\">\n                      <thead className=\"bg-fd-dark text-xs\">\n                        <tr>\n                          <th className=\"px-4 py-2 text-left text-fd-text-muted\">Position</th>\n                          <th className=\"px-4 py-2 text-left text-fd-text-muted\">Account</th>\n                          <th className=\"px-4 py-2 text-left text-fd-text-muted\">Product</th>\n                          <th className=\"px-4 py-2 text-right text-fd-text-muted\">VM</th>\n                          <th className=\"px-4 py-2 text-right text-fd-text-muted\">IM</th>\n                          <th className=\"px-4 py-2 text-right text-fd-text-muted\">Currency</th>\n                        </tr>\n                      </thead>\n                      <tbody className=\"text-sm\">\n                        {positions.map((position) => (\n                          <tr key={position.id} className=\"border-t border-fd-border hover:bg-fd-dark/50\">\n                            <td className=\"px-4 py-2 text-fd-text font-mono text-xs\">{position.positionId}</td>\n                            <td className=\"px-4 py-2 text-fd-text\">{position.ccpAccount}</td>\n                            <td className=\"px-4 py-2 text-fd-text\">{position.product}</td>\n                            <td className={`px-4 py-2 text-right font-medium ${position.variationMargin >= 0 ? 'text-green-400' : 'text-red-400'}`}>\n                              {formatCurrency(position.variationMargin)}\n                            </td>\n                            <td className=\"px-4 py-2 text-right text-fd-text font-medium\">\n                              {formatCurrency(position.initialMargin)}\n                            </td>\n                            <td className=\"px-4 py-2 text-right text-fd-text-muted\">{position.currency}</td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                ) : (\n                  <div className=\"text-center py-8 text-fd-text-muted\">\n                    No positions found\n                  </div>\n                )}\n              </div>\n            )}\n\n            {selectedStatement.errorMessage && (\n              <div className=\"mt-4 bg-red-500/20 border border-red-500/50 rounded-lg p-3\">\n                <div className=\"text-red-400 text-sm font-medium mb-1\">Error Message:</div>\n                <div className=\"text-red-300 text-sm\">{selectedStatement.errorMessage}</div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MarginDashboard;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\dashboard\\ReconciliationDashboard.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchDashboardData'. Either include it or remove the dependency array.","line":108,"column":6,"nodeType":"ArrayExpression","endLine":108,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [fetchDashboardData, selectedDate]","fix":{"range":[3221,3235],"text":"[fetchDashboardData, selectedDate]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchDashboardData'. Either include it or remove the dependency array.","line":125,"column":6,"nodeType":"ArrayExpression","endLine":125,"endColumn":33,"suggestions":[{"desc":"Update the dependencies array to be: [autoRefresh, fetchDashboardData, selectedDate]","fix":{"range":[3594,3621],"text":"[autoRefresh, fetchDashboardData, selectedDate]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\dashboard\\SaCcrDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\dashboard\\SimmDashboard.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":57,"column":12,"nodeType":"MemberExpression","endLine":57,"endColumn":23},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":58,"column":9,"nodeType":"MemberExpression","endLine":58,"endColumn":20},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":60,"column":7,"nodeType":"MemberExpression","endLine":60,"endColumn":18},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":70,"column":12,"nodeType":"MemberExpression","endLine":70,"endColumn":30},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":71,"column":9,"nodeType":"MemberExpression","endLine":71,"endColumn":27},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":77,"column":7,"nodeType":"MemberExpression","endLine":77,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":78,"column":7,"nodeType":"MemberExpression","endLine":78,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":79,"column":7,"nodeType":"MemberExpression","endLine":79,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { formatCurrency, formatNumber } from '../../utils/formatters';\n\ninterface SimmBucketData {\n  bucketNumber: string;\n  assetClass: string;\n  initialMargin: number;\n  sensitivities: number;\n  delta: number;\n  vega: number;\n  curvature: number;\n}\n\ninterface SimmCalculation {\n  id: string;\n  portfolioId: string;\n  calculationDate: string;\n  totalInitialMargin: number;\n  currency: string;\n  buckets: SimmBucketData[];\n  parametersVersion: string;\n  calculationStatus: 'COMPLETED' | 'FAILED' | 'PENDING';\n}\n\ninterface SimmDashboardProps {\n  simmCalculations: SimmCalculation[];\n  asOfDate: string;\n  onRefresh: () => void;\n}\n\nconst SimmDashboard: React.FC<SimmDashboardProps> = ({\n  simmCalculations,\n  asOfDate,\n  onRefresh\n}) => {\n  const [selectedCalculation, setSelectedCalculation] = useState<SimmCalculation | null>(\n    simmCalculations.length > 0 ? simmCalculations[0] : null\n  );\n  const [expandedBuckets, setExpandedBuckets] = useState<Set<string>>(new Set());\n  const [groupBy, setGroupBy] = useState<'assetClass' | 'bucket'>('assetClass');\n\n  const toggleBucketExpansion = (bucketId: string) => {\n    const newExpanded = new Set(expandedBuckets);\n    if (newExpanded.has(bucketId)) {\n      newExpanded.delete(bucketId);\n    } else {\n      newExpanded.add(bucketId);\n    }\n    setExpandedBuckets(newExpanded);\n  };\n\n  const getGroupedBuckets = () => {\n    if (!selectedCalculation) return {};\n    \n    return selectedCalculation.buckets.reduce((groups, bucket) => {\n      const key = groupBy === 'assetClass' ? bucket.assetClass : bucket.bucketNumber;\n      if (!groups[key]) {\n        groups[key] = [];\n      }\n      groups[key].push(bucket);\n      return groups;\n    }, {} as Record<string, SimmBucketData[]>);\n  };\n\n  const getAssetClassTotals = () => {\n    if (!selectedCalculation) return {};\n    \n    return selectedCalculation.buckets.reduce((totals, bucket) => {\n      const assetClass = bucket.assetClass;\n      if (!totals[assetClass]) {\n        totals[assetClass] = {\n          initialMargin: 0,\n          sensitivities: 0,\n          bucketCount: 0\n        };\n      }\n      totals[assetClass].initialMargin += bucket.initialMargin;\n      totals[assetClass].sensitivities += bucket.sensitivities;\n      totals[assetClass].bucketCount += 1;\n      return totals;\n    }, {} as Record<string, { initialMargin: number; sensitivities: number; bucketCount: number }>);\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'COMPLETED': return 'text-green-400';\n      case 'FAILED': return 'text-red-400';\n      case 'PENDING': return 'text-yellow-400';\n      default: return 'text-fd-text-muted';\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'COMPLETED':\n        return (\n          <svg className=\"w-4 h-4 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\"></path>\n          </svg>\n        );\n      case 'FAILED':\n        return (\n          <svg className=\"w-4 h-4 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n          </svg>\n        );\n      case 'PENDING':\n        return (\n          <svg className=\"w-4 h-4 text-yellow-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n          </svg>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"bg-fd-darker rounded-lg border border-fd-border p-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center space-x-3\">\n          <svg className=\"w-8 h-8 text-purple-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z\"></path>\n          </svg>\n          <div>\n            <h3 className=\"text-xl font-semibold text-fd-text\">SIMM Calculations</h3>\n            <p className=\"text-sm text-fd-text-muted\">Initial Margin Model</p>\n          </div>\n        </div>\n        <div className=\"flex items-center space-x-3\">\n          <span className=\"text-sm text-fd-text-muted\">As of {asOfDate}</span>\n          <button\n            onClick={onRefresh}\n            className=\"p-2 text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50 rounded-md transition-colors\"\n            title=\"Refresh SIMM data\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\n            </svg>\n          </button>\n        </div>\n      </div>\n\n      {simmCalculations.length === 0 ? (\n        <div className=\"text-center py-8\">\n          <svg className=\"w-12 h-12 text-fd-text-muted mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n          </svg>\n          <p className=\"text-fd-text-muted\">No SIMM calculations available</p>\n          <p className=\"text-sm text-fd-text-muted mt-1\">Upload CRIF files to generate calculations</p>\n        </div>\n      ) : (\n        <>\n          {/* Calculation Selector */}\n          <div className=\"flex items-center space-x-4 mb-6\">\n            <label className=\"text-sm font-medium text-fd-text\">Calculation:</label>\n            <select\n              value={selectedCalculation?.id || ''}\n              onChange={(e) => {\n                const calc = simmCalculations.find(c => c.id === e.target.value);\n                setSelectedCalculation(calc || null);\n              }}\n              className=\"bg-fd-dark border border-fd-border rounded-md px-3 py-2 text-fd-text focus:outline-none focus:ring-2 focus:ring-purple-500\"\n            >\n              {simmCalculations.map((calc) => (\n                <option key={calc.id} value={calc.id}>\n                  {calc.portfolioId} - {calc.calculationDate} ({calc.parametersVersion})\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {selectedCalculation && (\n            <>\n              {/* Summary Card */}\n              <div className=\"bg-fd-dark rounded-lg p-6 border border-fd-border mb-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n                  <div>\n                    <p className=\"text-sm font-medium text-fd-text-muted\">Total Initial Margin</p>\n                    <p className=\"text-2xl font-bold text-fd-text mt-1\">\n                      {formatCurrency(selectedCalculation.totalInitialMargin)}\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium text-fd-text-muted\">Portfolio</p>\n                    <p className=\"text-lg font-semibold text-fd-text mt-1\">\n                      {selectedCalculation.portfolioId}\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium text-fd-text-muted\">Parameters Version</p>\n                    <p className=\"text-lg font-semibold text-fd-text mt-1\">\n                      {selectedCalculation.parametersVersion}\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium text-fd-text-muted\">Status</p>\n                    <div className=\"flex items-center space-x-2 mt-1\">\n                      {getStatusIcon(selectedCalculation.calculationStatus)}\n                      <span className={`text-lg font-semibold ${getStatusColor(selectedCalculation.calculationStatus)}`}>\n                        {selectedCalculation.calculationStatus}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Asset Class Summary */}\n              <div className=\"bg-fd-dark rounded-lg p-6 border border-fd-border mb-6\">\n                <h4 className=\"text-lg font-medium text-fd-text mb-4\">Asset Class Breakdown</h4>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4\">\n                  {Object.entries(getAssetClassTotals()).map(([assetClass, totals]) => (\n                    <div key={assetClass} className=\"bg-fd-darker rounded-lg p-4\">\n                      <p className=\"text-sm font-medium text-fd-text-muted\">{assetClass}</p>\n                      <p className=\"text-lg font-bold text-fd-text mt-1\">\n                        {formatCurrency(totals.initialMargin)}\n                      </p>\n                      <p className=\"text-xs text-fd-text-muted mt-1\">\n                        {totals.bucketCount} bucket{totals.bucketCount !== 1 ? 's' : ''}\n                      </p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Bucket Details */}\n              <div className=\"bg-fd-dark rounded-lg border border-fd-border\">\n                <div className=\"px-6 py-4 border-b border-fd-border\">\n                  <div className=\"flex items-center justify-between\">\n                    <h4 className=\"text-lg font-medium text-fd-text\">\n                      Bucket Details ({selectedCalculation.buckets.length})\n                    </h4>\n                    <div className=\"flex items-center space-x-2\">\n                      <label className=\"text-sm text-fd-text-muted\">Group by:</label>\n                      <select\n                        value={groupBy}\n                        onChange={(e) => setGroupBy(e.target.value as 'assetClass' | 'bucket')}\n                        className=\"bg-fd-darker border border-fd-border rounded-md px-3 py-1 text-sm text-fd-text focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                      >\n                        <option value=\"assetClass\">Asset Class</option>\n                        <option value=\"bucket\">Bucket</option>\n                      </select>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"overflow-hidden\">\n                  {Object.entries(getGroupedBuckets()).map(([groupKey, buckets]) => (\n                    <div key={groupKey} className=\"border-b border-fd-border last:border-b-0\">\n                      {/* Group Header */}\n                      <div className=\"px-6 py-3 bg-fd-darker/50\">\n                        <h5 className=\"font-medium text-fd-text\">\n                          {groupBy === 'assetClass' ? `${groupKey} Asset Class` : `Bucket ${groupKey}`}\n                        </h5>\n                      </div>\n\n                      {/* Bucket Rows */}\n                      {buckets.map((bucket) => (\n                        <div key={`${bucket.assetClass}-${bucket.bucketNumber}`}>\n                          <div\n                            className=\"px-6 py-4 hover:bg-fd-darker/30 cursor-pointer transition-colors\"\n                            onClick={() => toggleBucketExpansion(`${bucket.assetClass}-${bucket.bucketNumber}`)}\n                          >\n                            <div className=\"flex items-center justify-between\">\n                              <div className=\"flex items-center space-x-4\">\n                                <svg \n                                  className={`w-4 h-4 text-fd-text-muted transition-transform ${\n                                    expandedBuckets.has(`${bucket.assetClass}-${bucket.bucketNumber}`) ? 'rotate-90' : ''\n                                  }`} \n                                  fill=\"none\" \n                                  stroke=\"currentColor\" \n                                  viewBox=\"0 0 24 24\"\n                                >\n                                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                                </svg>\n                                <div>\n                                  <p className=\"font-medium text-fd-text\">\n                                    {groupBy === 'assetClass' ? `Bucket ${bucket.bucketNumber}` : bucket.assetClass}\n                                  </p>\n                                  <p className=\"text-sm text-fd-text-muted\">\n                                    {formatNumber(bucket.sensitivities)} sensitivities\n                                  </p>\n                                </div>\n                              </div>\n                              <div className=\"text-right\">\n                                <p className=\"font-medium text-fd-text\">\n                                  {formatCurrency(bucket.initialMargin)}\n                                </p>\n                                <p className=\"text-sm text-fd-text-muted\">\n                                  {formatNumber((bucket.initialMargin / selectedCalculation.totalInitialMargin) * 100, 1)}%\n                                </p>\n                              </div>\n                            </div>\n                          </div>\n\n                          {/* Expanded Risk Details */}\n                          {expandedBuckets.has(`${bucket.assetClass}-${bucket.bucketNumber}`) && (\n                            <div className=\"px-6 pb-4 bg-fd-darker/20\">\n                              <div className=\"grid grid-cols-3 gap-4 pt-4\">\n                                <div className=\"bg-fd-dark rounded-md p-3\">\n                                  <p className=\"text-xs text-fd-text-muted uppercase tracking-wide\">Delta</p>\n                                  <p className=\"text-lg font-semibold text-fd-text mt-1\">\n                                    {formatCurrency(bucket.delta)}\n                                  </p>\n                                </div>\n                                <div className=\"bg-fd-dark rounded-md p-3\">\n                                  <p className=\"text-xs text-fd-text-muted uppercase tracking-wide\">Vega</p>\n                                  <p className=\"text-lg font-semibold text-fd-text mt-1\">\n                                    {formatCurrency(bucket.vega)}\n                                  </p>\n                                </div>\n                                <div className=\"bg-fd-dark rounded-md p-3\">\n                                  <p className=\"text-xs text-fd-text-muted uppercase tracking-wide\">Curvature</p>\n                                  <p className=\"text-lg font-semibold text-fd-text mt-1\">\n                                    {formatCurrency(bucket.curvature)}\n                                  </p>\n                                </div>\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default SimmDashboard;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\lifecycle\\AccrualHistoryPanel.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'loadCumulative' function makes the dependencies of useEffect Hook (at line 39) change on every render. Move it inside the useEffect callback. Alternatively, wrap the definition of 'loadCumulative' in its own useCallback() Hook.","line":30,"column":9,"nodeType":"VariableDeclarator","endLine":35,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport { lifecycleService } from '../../services/lifecycleService';\nimport { AccrualEvent } from '../../types/lifecycle';\n\ninterface Props {\n  tradeId: number;\n}\n\nexport const AccrualHistoryPanel: React.FC<Props> = ({ tradeId }) => {\n  const [accruals, setAccruals] = useState<AccrualEvent[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [range, setRange] = useState({ start: '', end: '' });\n  const [cumulative, setCumulative] = useState<number | null>(null);\n\n  const loadAccruals = async () => {\n    if (!range.start || !range.end) return;\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await lifecycleService.getAccrualEvents(tradeId, range.start, range.end);\n      setAccruals(data);\n    } catch (e: any) {\n      setError(e.message || 'Failed to load accrual events');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadCumulative = async () => {\n    try {\n      const cum = await lifecycleService.getCumulativeAccrual(tradeId);\n      setCumulative(cum);\n    } catch {}\n  };\n\n  useEffect(() => {\n    loadCumulative();\n  }, [tradeId, loadCumulative]);\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h4 className=\"text-fd-text font-semibold\">Accrual History</h4>\n        <div className=\"flex items-center space-x-2\">\n          <input\n            type=\"date\"\n            value={range.start}\n            onChange={(e) => setRange((r) => ({ ...r, start: e.target.value }))}\n            className=\"bg-fd-dark border border-fd-border rounded px-2 py-1 text-xs text-fd-text\"\n          />\n          <span className=\"text-fd-text-muted text-xs\">to</span>\n          <input\n            type=\"date\"\n            value={range.end}\n            onChange={(e) => setRange((r) => ({ ...r, end: e.target.value }))}\n            className=\"bg-fd-dark border border-fd-border rounded px-2 py-1 text-xs text-fd-text\"\n          />\n          <button\n            onClick={loadAccruals}\n            disabled={!range.start || !range.end}\n            className=\"px-3 py-1 text-xs bg-fd-green text-fd-dark rounded font-medium disabled:opacity-40\"\n          >\n            Load\n          </button>\n        </div>\n      </div>\n      {cumulative !== null && (\n        <div className=\"bg-fd-dark border border-fd-border rounded p-3 flex items-center justify-between\">\n          <span className=\"text-fd-text-muted text-xs uppercase tracking-wide\">\n            Cumulative Accrual\n          </span>\n          <span className=\"text-fd-green font-semibold\">\n            {cumulative.toLocaleString(undefined, {\n              minimumFractionDigits: 2,\n              maximumFractionDigits: 2,\n            })}\n          </span>\n        </div>\n      )}\n      {loading && <div className=\"text-fd-text-muted text-sm\">Loading accruals...</div>}\n      {error && <div className=\"text-red-400 text-sm\">{error}</div>}\n      {!loading && accruals.length === 0 && !error && range.start && range.end && (\n        <div className=\"text-fd-text-muted text-sm\">No accruals in range.</div>\n      )}\n      {accruals.length > 0 && (\n        <div className=\"overflow-x-auto border border-fd-border rounded max-h-72 overflow-y-auto\">\n          <table className=\"min-w-full text-xs\">\n            <thead className=\"bg-fd-dark sticky top-0\">\n              <tr className=\"text-fd-text-muted\">\n                <th className=\"px-3 py-2 text-left font-medium\">Date</th>\n                <th className=\"px-3 py-2 text-left font-medium\">Accrual</th>\n                <th className=\"px-3 py-2 text-left font-medium\">Cumulative</th>\n                <th className=\"px-3 py-2 text-left font-medium\">Notional</th>\n                <th className=\"px-3 py-2 text-left font-medium\">Version</th>\n              </tr>\n            </thead>\n            <tbody>\n              {accruals.map((a) => (\n                <tr key={a.id} className=\"border-t border-fd-border hover:bg-fd-darker/40\">\n                  <td className=\"px-3 py-1 text-fd-text font-mono\">{a.accrualDate}</td>\n                  <td className=\"px-3 py-1 text-fd-green font-medium\">\n                    {a.accrualAmount.toLocaleString(undefined, { minimumFractionDigits: 2 })}\n                  </td>\n                  <td className=\"px-3 py-1 text-fd-text-muted\">\n                    {a.cumulativeAccrual.toLocaleString(undefined, { minimumFractionDigits: 2 })}\n                  </td>\n                  <td className=\"px-3 py-1 text-fd-text-muted\">\n                    {a.notionalAmount.toLocaleString()}\n                  </td>\n                  <td className=\"px-3 py-1 text-fd-text-muted\">{a.tradeVersion}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\lifecycle\\AmendTradeModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\lifecycle\\CashflowPanel.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadCashflowData'. Either include it or remove the dependency array.","line":47,"column":6,"nodeType":"ArrayExpression","endLine":47,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [loadCashflowData, trade.id]","fix":{"range":[1451,1461],"text":"[loadCashflowData, trade.id]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\lifecycle\\CouponSchedulePanel.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'autoGenerate', 'generateSchedule', 'loadSchedule', and 'periods.length'. Either include them or remove the dependency array.","line":48,"column":6,"nodeType":"ArrayExpression","endLine":48,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [autoGenerate, generateSchedule, loadSchedule, periods.length, tradeId]","fix":{"range":[1410,1419],"text":"[autoGenerate, generateSchedule, loadSchedule, periods.length, tradeId]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\lifecycle\\LifecycleTimeline.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadLifecycleData'. Either include it or remove the dependency array.","line":49,"column":6,"nodeType":"ArrayExpression","endLine":49,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [loadLifecycleData, trade.id]","fix":{"range":[1641,1651],"text":"[loadLifecycleData, trade.id]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\lifecycle\\NotionalAdjustmentModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\margin\\AutomatedStatementGenerator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\margin\\MarginPositionsModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadPositions'. Either include it or remove the dependency array.","line":54,"column":6,"nodeType":"ArrayExpression","endLine":54,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [loadPositions, statementId]","fix":{"range":[1353,1366],"text":"[loadPositions, statementId]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\margin\\MarginStatementsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\margin\\StatementList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'apiUrl' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":97,"column":68,"nodeType":"MemberExpression","endLine":97,"endColumn":76}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { apiUrl } from '../../config/api';\nimport MarginPositionsModal from './MarginPositionsModal';\n\ninterface MarginStatement {\n  id: number;\n  statementId: string;\n  ccpName: string;\n  memberFirm: string;\n  accountNumber: string;\n  statementDate: string;\n  currency: string;\n  format: string;\n  fileName: string;\n  fileSize: number;\n  status: string;\n  createdAt: string;\n  updatedAt: string;\n  processedAt: string | null;\n  errorMessage: string;\n  retryCount: number;\n}\n\ninterface StatementListProps {\n  refreshTrigger?: number;\n}\n\nconst StatementList: React.FC<StatementListProps> = ({ refreshTrigger }) => {\n  const [statements, setStatements] = useState<MarginStatement[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [filter, setFilter] = useState<string>('ALL');\n  const [selectedStatement, setSelectedStatement] = useState<MarginStatement | null>(null);\n  const [showPositionsModal, setShowPositionsModal] = useState(false);\n\n  const statusFilters = ['ALL', 'PENDING', 'PROCESSING', 'PROCESSED', 'FAILED', 'DISPUTED', 'RETRYING'];\n\n  useEffect(() => {\n    loadStatements();\n  }, [refreshTrigger]);\n\n  const loadStatements = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const response = await fetch('/api/margin-statements');\n      if (!response.ok) {\n        throw new Error('Failed to load statements');\n      }\n      \n      const data = await response.json();\n      setStatements(data);\n    } catch (err: any) {\n      setError(err.message || 'Failed to load statements');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRetryFailed = async () => {\n    try {\n      const response = await fetch('/api/margin-statements/retry-failed', {\n        method: 'POST'\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to retry statements');\n      }\n      \n      // Refresh the list after retry\n      setTimeout(() => {\n        loadStatements();\n      }, 1000);\n      \n    } catch (err: any) {\n      setError(err.message || 'Failed to retry statements');\n    }\n  };\n\n  const formatDateTime = (dateString: string) => {\n    if (!dateString) return '-';\n    return new Date(dateString).toLocaleString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'PENDING':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'PROCESSING':\n        return 'bg-blue-100 text-blue-800';\n      case 'PROCESSED':\n        return 'bg-green-100 text-green-800';\n      case 'FAILED':\n        return 'bg-red-100 text-red-800';\n      case 'DISPUTED':\n        return 'bg-orange-100 text-orange-800';\n      case 'RETRYING':\n        return 'bg-purple-100 text-purple-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'PENDING':\n        return (\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n          </svg>\n        );\n      case 'PROCESSING':\n        return (\n          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-current\"></div>\n        );\n      case 'PROCESSED':\n        return (\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n          </svg>\n        );\n      case 'FAILED':\n        return (\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n          </svg>\n        );\n      case 'DISPUTED':\n        return (\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"></path>\n          </svg>\n        );\n      case 'RETRYING':\n        return (\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\n          </svg>\n        );\n      default:\n        return null;\n    }\n  };\n\n  const filteredStatements = statements.filter(statement => \n    filter === 'ALL' || statement.status === filter\n  );\n\n  const failedCount = statements.filter(s => s.status === 'FAILED').length;\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-fd-green\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n        <div className=\"flex\">\n          <div className=\"flex-shrink-0\">\n            <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n            </svg>\n          </div>\n          <div className=\"ml-3\">\n            <h3 className=\"text-sm font-medium text-red-800\">Error Loading Statements</h3>\n            <div className=\"mt-2 text-sm text-red-700\">\n              <p>{error}</p>\n            </div>\n            <div className=\"mt-4\">\n              <button\n                onClick={loadStatements}\n                className=\"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200\"\n              >\n                Retry\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-fd-darker rounded-lg border border-fd-border\">\n      {/* Header */}\n      <div className=\"p-6 border-b border-fd-border\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center\">\n              <svg className=\"w-5 h-5 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n              </svg>\n            </div>\n            <h2 className=\"text-2xl font-bold text-fd-text\">Margin Statements</h2>\n          </div>\n          \n          <div className=\"flex items-center space-x-4\">\n            {failedCount > 0 && (\n              <button\n                onClick={handleRetryFailed}\n                className=\"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors flex items-center space-x-2\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\n                </svg>\n                <span>Retry Failed ({failedCount})</span>\n              </button>\n            )}\n            \n            <button\n              onClick={loadStatements}\n              className=\"px-4 py-2 bg-fd-green text-fd-dark rounded hover:bg-fd-green/80 transition-colors flex items-center space-x-2\"\n            >\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\n              </svg>\n              <span>Refresh</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Filter Tabs */}\n        <div className=\"flex space-x-1 bg-fd-dark rounded-lg p-1\">\n          {statusFilters.map(status => (\n            <button\n              key={status}\n              onClick={() => setFilter(status)}\n              className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                filter === status\n                  ? 'bg-fd-green text-fd-dark'\n                  : 'text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50'\n              }`}\n            >\n              {status}\n              {status !== 'ALL' && (\n                <span className=\"ml-1 text-xs\">\n                  ({statements.filter(s => s.status === status).length})\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Statements Table */}\n      <div className=\"overflow-hidden\">\n        <table className=\"min-w-full\">\n          <thead className=\"bg-fd-dark\">\n            <tr>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\">\n                Statement\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\">\n                CCP\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\">\n                Date\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\">\n                Status\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\">\n                Created\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-fd-darker divide-y divide-fd-border\">\n            {filteredStatements.map((statement) => (\n              <tr\n                key={statement.id}\n                className=\"hover:bg-fd-dark transition-colors cursor-pointer\"\n                onClick={() => setSelectedStatement(statement)}\n              >\n                <td className=\"px-4 py-4\">\n                  <div className=\"flex flex-col max-w-xs\">\n                    <div className=\"text-sm font-medium text-fd-text truncate\">\n                      {statement.statementId}\n                    </div>\n                    <div className=\"text-xs text-fd-text-muted truncate\">\n                      {statement.accountNumber}\n                    </div>\n                  </div>\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap\">\n                  <div className=\"text-sm font-medium text-fd-text\">\n                    {statement.ccpName}\n                  </div>\n                  <div className=\"text-xs text-fd-text-muted\">\n                    {statement.currency}\n                  </div>\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap\">\n                  <div className=\"text-sm text-fd-text\">\n                    {new Date(statement.statementDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n                  </div>\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap\">\n                  <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${getStatusColor(statement.status)}`}>\n                    <span className=\"mr-1\">{getStatusIcon(statement.status)}</span>\n                    {statement.status}\n                  </span>\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-fd-text-muted\">\n                  {formatDateTime(statement.createdAt).replace(', ', '\\n').split('\\n')[0]}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm\">\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setSelectedStatement(statement);\n                    }}\n                    className=\"text-fd-green hover:text-fd-green/80 font-medium\"\n                  >\n                    View\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {filteredStatements.length === 0 && (\n        <div className=\"text-center py-12\">\n          <svg\n            className=\"mx-auto h-12 w-12 text-fd-text-muted\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n            />\n          </svg>\n          <h3 className=\"mt-2 text-sm font-medium text-fd-text\">No statements found</h3>\n          <p className=\"mt-1 text-sm text-fd-text-muted\">\n            {filter === 'ALL' ? 'Upload your first margin statement to get started.' : `No statements with status: ${filter}`}\n          </p>\n        </div>\n      )}\n\n      {/* Statement Detail Modal */}\n      {selectedStatement && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-bold text-fd-text\">Statement Details</h3>\n              <button \n                onClick={() => setSelectedStatement(null)}\n                className=\"text-fd-text-muted hover:text-fd-text transition-colors\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                <div>\n                  <span className=\"text-fd-text-muted\">Statement ID:</span>\n                  <span className=\"text-fd-text ml-2 font-mono\">{selectedStatement.statementId}</span>\n                </div>\n                <div>\n                  <span className=\"text-fd-text-muted\">CCP:</span>\n                  <span className=\"text-fd-text ml-2\">{selectedStatement.ccpName}</span>\n                </div>\n                <div>\n                  <span className=\"text-fd-text-muted\">Member Firm:</span>\n                  <span className=\"text-fd-text ml-2\">{selectedStatement.memberFirm}</span>\n                </div>\n                <div>\n                  <span className=\"text-fd-text-muted\">Account:</span>\n                  <span className=\"text-fd-text ml-2\">{selectedStatement.accountNumber}</span>\n                </div>\n                <div>\n                  <span className=\"text-fd-text-muted\">Date:</span>\n                  <span className=\"text-fd-text ml-2\">{new Date(selectedStatement.statementDate).toLocaleDateString()}</span>\n                </div>\n                <div>\n                  <span className=\"text-fd-text-muted\">Currency:</span>\n                  <span className=\"text-fd-text ml-2\">{selectedStatement.currency}</span>\n                </div>\n                <div>\n                  <span className=\"text-fd-text-muted\">Format:</span>\n                  <span className=\"text-fd-text ml-2\">{selectedStatement.format}</span>\n                </div>\n                <div>\n                  <span className=\"text-fd-text-muted\">File Size:</span>\n                  <span className=\"text-fd-text ml-2\">{formatFileSize(selectedStatement.fileSize)}</span>\n                </div>\n              </div>\n\n              {selectedStatement.errorMessage && (\n                <div className=\"bg-red-500/20 border border-red-500/50 rounded-lg p-3\">\n                  <div className=\"text-red-400 text-sm font-medium mb-1\">Error Message:</div>\n                  <div className=\"text-red-300 text-sm\">{selectedStatement.errorMessage}</div>\n                </div>\n              )}\n\n              <div className=\"flex justify-end space-x-4 pt-4 border-t border-fd-border\">\n                <button\n                  onClick={() => setSelectedStatement(null)}\n                  className=\"px-4 py-2 bg-fd-border text-fd-text rounded hover:bg-fd-border/80 transition-colors\"\n                >\n                  Close\n                </button>\n                {selectedStatement.status === 'PROCESSED' && (\n                  <button\n                    onClick={() => {\n                      setShowPositionsModal(true);\n                    }}\n                    className=\"px-4 py-2 bg-fd-green text-fd-dark rounded hover:bg-fd-green/80 transition-colors\"\n                  >\n                    View Positions\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Positions Modal */}\n      {showPositionsModal && selectedStatement && (\n        <MarginPositionsModal\n          statementId={selectedStatement.id}\n          statementName={`${selectedStatement.ccpName} - ${selectedStatement.statementId}`}\n          onClose={() => setShowPositionsModal(false)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default StatementList;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\margin\\StatementUpload.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":203,"column":68,"nodeType":"MemberExpression","endLine":203,"endColumn":76}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef } from 'react';\n\ninterface StatementUploadProps {\n  onUploadSuccess?: (statementId: number) => void;\n  onUploadError?: (error: string) => void;\n}\n\ninterface UploadFormData {\n  statementId: string;\n  ccpName: string;\n  memberFirm: string;\n  accountNumber: string;\n  statementDate: string;\n  currency: string;\n  format: string;\n}\n\nconst StatementUpload: React.FC<StatementUploadProps> = ({ onUploadSuccess, onUploadError }) => {\n  const [formData, setFormData] = useState<UploadFormData>({\n    statementId: '',\n    ccpName: 'LCH',\n    memberFirm: '',\n    accountNumber: '',\n    statementDate: '',\n    currency: 'USD',\n    format: 'CSV'\n  });\n\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const [dragActive, setDragActive] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const ccpOptions = ['LCH', 'CME', 'EUREX', 'ICE'];\n  const currencyOptions = ['USD', 'EUR', 'GBP', 'JPY', 'CHF'];\n  const formatOptions = ['CSV', 'XML', 'JSON', 'PROPRIETARY'];\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    setError(null);\n  };\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      handleFileSelect(e.dataTransfer.files[0]);\n    }\n  };\n\n  const handleFileSelect = (file: File) => {\n    setSelectedFile(file);\n    setError(null);\n    setSuccess(null);\n\n    // Auto-detect format based on file extension\n    const extension = file.name.toLowerCase().split('.').pop();\n    if (extension === 'csv') {\n      setFormData(prev => ({ ...prev, format: 'CSV' }));\n    } else if (extension === 'xml') {\n      setFormData(prev => ({ ...prev, format: 'XML' }));\n    } else if (extension === 'json') {\n      setFormData(prev => ({ ...prev, format: 'JSON' }));\n    }\n\n    // Generate statement ID if not provided\n    if (!formData.statementId) {\n      const timestamp = new Date().toISOString().split('T')[0].replace(/-/g, '');\n      const randomSuffix = Math.random().toString(36).substring(2, 8).toUpperCase();\n      setFormData(prev => ({ \n        ...prev, \n        statementId: `${formData.ccpName}_${timestamp}_${randomSuffix}` \n      }));\n    }\n  };\n\n  const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      handleFileSelect(e.target.files[0]);\n    }\n  };\n\n  const validateForm = (): string | null => {\n    if (!selectedFile) return 'Please select a file to upload';\n    if (!formData.statementId.trim()) return 'Statement ID is required';\n    if (!formData.memberFirm.trim()) return 'Member firm is required';\n    if (!formData.accountNumber.trim()) return 'Account number is required';\n    if (!formData.statementDate) return 'Statement date is required';\n    \n    // Validate file size (50MB limit)\n    if (selectedFile.size > 50 * 1024 * 1024) {\n      return 'File size must be less than 50MB';\n    }\n\n    // Validate date is not in future\n    const statementDate = new Date(formData.statementDate);\n    if (statementDate > new Date()) {\n      return 'Statement date cannot be in the future';\n    }\n\n    return null;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    const validationError = validateForm();\n    if (validationError) {\n      setError(validationError);\n      return;\n    }\n\n    setUploading(true);\n    setError(null);\n    setSuccess(null);\n    setUploadProgress(0);\n\n    try {\n      const formDataToSend = new FormData();\n      formDataToSend.append('file', selectedFile!);\n      formDataToSend.append('statementId', formData.statementId);\n      formDataToSend.append('ccpName', formData.ccpName);\n      formDataToSend.append('memberFirm', formData.memberFirm);\n      formDataToSend.append('accountNumber', formData.accountNumber);\n      formDataToSend.append('statementDate', formData.statementDate);\n      formDataToSend.append('currency', formData.currency);\n      formDataToSend.append('format', formData.format);\n\n      // Simulate upload progress\n      const progressInterval = setInterval(() => {\n        setUploadProgress(prev => Math.min(prev + 10, 90));\n      }, 200);\n\n      const response = await fetch('/api/margin-statements/upload', {\n        method: 'POST',\n        body: formDataToSend\n      });\n\n      clearInterval(progressInterval);\n      setUploadProgress(100);\n\n      const result = await response.json();\n\n      if (!response.ok) {\n        throw new Error(result.error || 'Upload failed');\n      }\n\n      setSuccess(`Statement uploaded successfully! ID: ${result.statementId}`);\n      \n      // Reset form\n      setSelectedFile(null);\n      setFormData({\n        statementId: '',\n        ccpName: 'LCH',\n        memberFirm: '',\n        accountNumber: '',\n        statementDate: '',\n        currency: 'USD',\n        format: 'CSV'\n      });\n      \n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n\n      if (onUploadSuccess) {\n        onUploadSuccess(result.statementId);\n      }\n\n    } catch (err: any) {\n      setError(err.message || 'Upload failed');\n      if (onUploadError) {\n        onUploadError(err.message);\n      }\n    } finally {\n      setUploading(false);\n      setTimeout(() => setUploadProgress(0), 2000);\n    }\n  };\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  return (\n    <div className=\"bg-fd-darker rounded-lg border border-fd-border p-6\">\n      <div className=\"flex items-center space-x-3 mb-6\">\n        <div className=\"w-8 h-8 bg-blue-500/20 rounded-full flex items-center justify-center\">\n          <svg className=\"w-5 h-5 text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"></path>\n          </svg>\n        </div>\n        <h2 className=\"text-2xl font-bold text-fd-text\">Upload Margin Statement</h2>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {/* File Upload Area */}\n        <div className=\"space-y-4\">\n          <label className=\"block text-sm font-medium text-fd-text\">Statement File</label>\n          <div\n            className={`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n              dragActive\n                ? 'border-blue-400 bg-blue-400/10'\n                : 'border-fd-border hover:border-fd-green'\n            }`}\n            onDragEnter={handleDrag}\n            onDragLeave={handleDrag}\n            onDragOver={handleDrag}\n            onDrop={handleDrop}\n          >\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              onChange={handleFileInputChange}\n              accept=\".csv,.xml,.json,.txt\"\n              className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n            />\n            \n            {selectedFile ? (\n              <div className=\"space-y-2\">\n                <div className=\"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center mx-auto\">\n                  <svg className=\"w-6 h-6 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                  </svg>\n                </div>\n                <div className=\"text-fd-text font-medium\">{selectedFile.name}</div>\n                <div className=\"text-fd-text-muted text-sm\">{formatFileSize(selectedFile.size)}</div>\n                {uploadProgress > 0 && uploadProgress < 100 && (\n                  <div className=\"w-full bg-fd-border rounded-full h-2 mt-2\">\n                    <div \n                      className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\n                      style={{ width: `${uploadProgress}%` }}\n                    ></div>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                <div className=\"w-12 h-12 bg-fd-border rounded-full flex items-center justify-center mx-auto\">\n                  <svg className=\"w-6 h-6 text-fd-text-muted\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"></path>\n                  </svg>\n                </div>\n                <div className=\"text-fd-text\">\n                  <span className=\"font-medium\">Click to upload</span> or drag and drop\n                </div>\n                <div className=\"text-fd-text-muted text-sm\">\n                  CSV, XML, JSON files up to 50MB\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Form Fields */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-fd-text mb-2\">Statement ID</label>\n            <input\n              type=\"text\"\n              name=\"statementId\"\n              value={formData.statementId}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"AUTO_GENERATED_001\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-fd-text mb-2\">CCP Name</label>\n            <select\n              name=\"ccpName\"\n              value={formData.ccpName}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              {ccpOptions.map(ccp => (\n                <option key={ccp} value={ccp}>{ccp}</option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-fd-text mb-2\">Member Firm</label>\n            <input\n              type=\"text\"\n              name=\"memberFirm\"\n              value={formData.memberFirm}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"Goldman Sachs\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-fd-text mb-2\">Account Number</label>\n            <input\n              type=\"text\"\n              name=\"accountNumber\"\n              value={formData.accountNumber}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"HOUSE-001\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-fd-text mb-2\">Statement Date</label>\n            <input\n              type=\"date\"\n              name=\"statementDate\"\n              value={formData.statementDate}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-fd-text mb-2\">Currency</label>\n            <select\n              name=\"currency\"\n              value={formData.currency}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              {currencyOptions.map(currency => (\n                <option key={currency} value={currency}>{currency}</option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-fd-text mb-2\">Format</label>\n            <select\n              name=\"format\"\n              value={formData.format}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              {formatOptions.map(format => (\n                <option key={format} value={format}>{format}</option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        {/* Error/Success Messages */}\n        {error && (\n          <div className=\"bg-red-500/20 border border-red-500/50 rounded-lg p-3\">\n            <div className=\"flex items-center space-x-2\">\n              <svg className=\"w-5 h-5 text-red-400 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"></path>\n              </svg>\n              <span className=\"text-red-400 text-sm\">{error}</span>\n            </div>\n          </div>\n        )}\n\n        {success && (\n          <div className=\"bg-green-500/20 border border-green-500/50 rounded-lg p-3\">\n            <div className=\"flex items-center space-x-2\">\n              <svg className=\"w-5 h-5 text-green-400 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n              </svg>\n              <span className=\"text-green-400 text-sm\">{success}</span>\n            </div>\n          </div>\n        )}\n\n        {/* Submit Button */}\n        <div className=\"flex justify-end space-x-4 pt-4 border-t border-fd-border\">\n          <button\n            type=\"button\"\n            onClick={() => {\n              setSelectedFile(null);\n              setFormData({\n                statementId: '',\n                ccpName: 'LCH',\n                memberFirm: '',\n                accountNumber: '',\n                statementDate: '',\n                currency: 'USD',\n                format: 'CSV'\n              });\n              setError(null);\n              setSuccess(null);\n              if (fileInputRef.current) {\n                fileInputRef.current.value = '';\n              }\n            }}\n            className=\"px-6 py-2 bg-fd-border text-fd-text rounded hover:bg-fd-border/80 transition-colors\"\n          >\n            Clear\n          </button>\n          <button\n            type=\"submit\"\n            disabled={uploading || !selectedFile}\n            className=\"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2\"\n          >\n            {uploading && (\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n            )}\n            <span>{uploading ? 'Uploading...' : 'Upload Statement'}</span>\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default StatementUpload;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\novation\\NovationModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\AttachInstrumentsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\AttachTradesModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\CreatePortfolioModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\EnhancedOverview.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":200,"column":12,"nodeType":"MemberExpression","endLine":200,"endColumn":29}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'calculateExposures'. Either include it or remove the dependency array.","line":48,"column":6,"nodeType":"ArrayExpression","endLine":48,"endColumn":61,"suggestions":[{"desc":"Update the dependencies array to be: [cdsConstituents, bondConstituents, basketConstituents, calculateExposures]","fix":{"range":[1277,1332],"text":"[cdsConstituents, bondConstituents, basketConstituents, calculateExposures]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  BondPortfolioConstituent,\n  BasketPortfolioConstituent,\n  CdsPortfolioConstituent,\n} from '../../services/portfolioService';\n\ninterface EnhancedOverviewProps {\n  portfolioId: number;\n  cdsConstituents: CdsPortfolioConstituent[];\n  bondConstituents: BondPortfolioConstituent[];\n  basketConstituents: BasketPortfolioConstituent[];\n  pricingData: any;\n}\n\ninterface IssuerExposure {\n  issuer: string;\n  sector: string;\n  bondNotional: number;\n  cdsProtectionBought: number;\n  cdsProtectionSold: number;\n  netCreditExposure: number;\n  hedgeRatio: number;\n  hedgeStatus: 'OVER_HEDGED' | 'UNDER_HEDGED' | 'BALANCED' | 'UNHEDGED';\n  recommendation: string;\n}\n\ninterface SectorExposure {\n  sector: string;\n  notional: number;\n  percentage: number;\n  instrumentCount: number;\n}\n\nconst EnhancedOverview: React.FC<EnhancedOverviewProps> = ({\n  portfolioId,\n  cdsConstituents,\n  bondConstituents,\n  basketConstituents,\n  pricingData,\n}) => {\n  const [issuerExposures, setIssuerExposures] = useState<IssuerExposure[]>([]);\n  const [sectorExposures, setSectorExposures] = useState<SectorExposure[]>([]);\n\n  useEffect(() => {\n    calculateExposures();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [cdsConstituents, bondConstituents, basketConstituents]);\n\n  const calculateExposures = useCallback(() => {\n    // Map to aggregate by issuer\n    const issuerMap = new Map<string, IssuerExposure>();\n\n    // Process bonds\n    bondConstituents.forEach((bc) => {\n      const issuer = bc.bond.issuer;\n      if (!issuerMap.has(issuer)) {\n        issuerMap.set(issuer, {\n          issuer,\n          sector: getSectorFromIssuer(issuer),\n          bondNotional: 0,\n          cdsProtectionBought: 0,\n          cdsProtectionSold: 0,\n          netCreditExposure: 0,\n          hedgeRatio: 0,\n          hedgeStatus: 'UNHEDGED',\n          recommendation: '',\n        });\n      }\n      const exposure = issuerMap.get(issuer)!;\n      exposure.bondNotional += bc.bond.notional;\n    });\n\n    // Process CDS\n    cdsConstituents.forEach((cc) => {\n      const issuer = cc.trade.referenceEntity;\n      if (!issuerMap.has(issuer)) {\n        issuerMap.set(issuer, {\n          issuer,\n          sector: getSectorFromIssuer(issuer),\n          bondNotional: 0,\n          cdsProtectionBought: 0,\n          cdsProtectionSold: 0,\n          netCreditExposure: 0,\n          hedgeRatio: 0,\n          hedgeStatus: 'UNHEDGED',\n          recommendation: '',\n        });\n      }\n      const exposure = issuerMap.get(issuer)!;\n\n      // Assuming BUY = buying protection (short credit), SELL = selling protection (long credit)\n      // This is a simplification - you may need to check actual buySell field\n      exposure.cdsProtectionBought += cc.trade.notionalAmount;\n    });\n\n    // Calculate net exposures and recommendations\n    const exposures: IssuerExposure[] = [];\n    issuerMap.forEach((exp) => {\n      exp.netCreditExposure = exp.bondNotional - exp.cdsProtectionBought + exp.cdsProtectionSold;\n\n      if (exp.bondNotional > 0) {\n        exp.hedgeRatio = (exp.cdsProtectionBought / exp.bondNotional) * 100;\n\n        if (exp.hedgeRatio > 110) {\n          exp.hedgeStatus = 'OVER_HEDGED';\n          exp.recommendation = `Consider reducing CDS protection by $${((exp.cdsProtectionBought - exp.bondNotional) / 1000000).toFixed(1)}M`;\n        } else if (exp.hedgeRatio >= 90 && exp.hedgeRatio <= 110) {\n          exp.hedgeStatus = 'BALANCED';\n          exp.recommendation = 'Well hedged';\n        } else if (exp.hedgeRatio > 0) {\n          exp.hedgeStatus = 'UNDER_HEDGED';\n          exp.recommendation = `Consider buying $${((exp.bondNotional - exp.cdsProtectionBought) / 1000000).toFixed(1)}M CDS protection`;\n        } else {\n          exp.hedgeStatus = 'UNHEDGED';\n          exp.recommendation = ` Buy $${(exp.bondNotional / 1000000).toFixed(1)}M CDS protection to hedge bond exposure`;\n        }\n      } else if (exp.cdsProtectionBought > 0) {\n        exp.hedgeStatus = 'UNHEDGED';\n        exp.recommendation = `Consider buying $${(exp.cdsProtectionBought / 1000000).toFixed(1)}M in bonds to capture basis`;\n      }\n\n      exposures.push(exp);\n    });\n\n    setIssuerExposures(\n      exposures.sort((a, b) => Math.abs(b.netCreditExposure) - Math.abs(a.netCreditExposure))\n    );\n\n    // Calculate sector exposures\n    const sectorMap = new Map<string, { notional: number; count: number }>();\n\n    bondConstituents.forEach((bc) => {\n      const sector = getSectorFromIssuer(bc.bond.issuer);\n      if (!sectorMap.has(sector)) {\n        sectorMap.set(sector, { notional: 0, count: 0 });\n      }\n      const sectorData = sectorMap.get(sector)!;\n      sectorData.notional += bc.bond.notional;\n      sectorData.count++;\n    });\n\n    cdsConstituents.forEach((cc) => {\n      const sector = getSectorFromIssuer(cc.trade.referenceEntity);\n      if (!sectorMap.has(sector)) {\n        sectorMap.set(sector, { notional: 0, count: 0 });\n      }\n      const sectorData = sectorMap.get(sector)!;\n      sectorData.notional += cc.trade.notionalAmount;\n      sectorData.count++;\n    });\n\n    // Add baskets as \"BASKET\" sector for now\n    // TODO: In future, unwind basket constituents to their actual sectors\n    basketConstituents.forEach((bc) => {\n      const sector = 'BASKET';\n      if (!sectorMap.has(sector)) {\n        sectorMap.set(sector, { notional: 0, count: 0 });\n      }\n      const sectorData = sectorMap.get(sector)!;\n      // Use basket.notional (backend field name)\n      const notional = bc.basket?.notional || bc.weightValue || 0;\n      sectorData.notional += notional;\n      sectorData.count++;\n    });\n\n    const totalNotional = Array.from(sectorMap.values()).reduce((sum, s) => sum + s.notional, 0);\n    const sectors: SectorExposure[] = [];\n\n    sectorMap.forEach((data, sector) => {\n      sectors.push({\n        sector,\n        notional: data.notional,\n        percentage: totalNotional > 0 ? (data.notional / totalNotional) * 100 : 0,\n        instrumentCount: data.count,\n      });\n    });\n\n    setSectorExposures(sectors.sort((a, b) => b.notional - a.notional));\n  }, [basketConstituents, bondConstituents, cdsConstituents]); // useCallback dependency array\n\n  const getSectorFromIssuer = (issuer: string): string => {\n    const sectorMap: Record<string, string> = {\n      AAPL: 'TECH',\n      MSFT: 'TECH',\n      AMZN: 'TECH',\n      GOOGL: 'TECH',\n      TSLA: 'TECH',\n      NFLX: 'TECH',\n      META: 'TECH',\n      NVDA: 'TECH',\n      AMD: 'TECH',\n      JPM: 'FINANCIALS',\n      BAC: 'FINANCIALS',\n      WFC: 'FINANCIALS',\n      GS: 'FINANCIALS',\n      MS: 'FINANCIALS',\n      C: 'FINANCIALS',\n    };\n    return sectorMap[issuer] || 'OTHER';\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(amount);\n  };\n\n  const getHedgeStatusColor = (status: string) => {\n    switch (status) {\n      case 'BALANCED':\n        return 'text-fd-green';\n      case 'UNDER_HEDGED':\n        return 'text-yellow-400';\n      case 'OVER_HEDGED':\n        return 'text-blue-400';\n      case 'UNHEDGED':\n        return 'text-red-400';\n      default:\n        return 'text-fd-text-muted';\n    }\n  };\n\n  const getHedgeStatusBadge = (status: string) => {\n    switch (status) {\n      case 'BALANCED':\n        return 'bg-green-900/30 text-green-400 border-green-500';\n      case 'UNDER_HEDGED':\n        return 'bg-yellow-900/30 text-yellow-400 border-yellow-500';\n      case 'OVER_HEDGED':\n        return 'bg-blue-900/30 text-blue-400 border-blue-500';\n      case 'UNHEDGED':\n        return 'bg-red-900/30 text-red-400 border-red-500';\n      default:\n        return 'bg-fd-dark text-fd-text-muted border-fd-border';\n    }\n  };\n\n  const getSectorColor = (index: number) => {\n    const colors = [\n      'bg-fd-green',\n      'bg-blue-500',\n      'bg-yellow-500',\n      'bg-purple-500',\n      'bg-pink-500',\n      'bg-indigo-500',\n      'bg-teal-500',\n      'bg-orange-500',\n    ];\n    return colors[index % colors.length];\n  };\n\n  const totalCdsNotional = cdsConstituents.reduce((sum, c) => sum + c.trade.notionalAmount, 0);\n  const totalBondNotional = bondConstituents.reduce((sum, c) => sum + c.bond.notional, 0);\n  const totalBasketNotional = basketConstituents.reduce((sum, c) => {\n    // Use basket.notional (backend field name)\n    const notional = c.basket?.notional || c.weightValue || 0;\n    return sum + notional;\n  }, 0);\n  const totalNotional = totalCdsNotional + totalBondNotional + totalBasketNotional;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Instrument Distribution */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Instrument Type Breakdown */}\n        <div className=\"bg-fd-darker border border-fd-border rounded-lg p-6\">\n          <h3 className=\"text-lg font-semibold text-fd-text mb-4\">Instrument Distribution</h3>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-4 h-4 bg-fd-green rounded\"></div>\n                <span className=\"text-fd-text\"> CDS Trades</span>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-fd-text font-medium\">{formatCurrency(totalCdsNotional)}</div>\n                <div className=\"text-sm text-fd-text-muted\">\n                  {totalNotional > 0 ? ((totalCdsNotional / totalNotional) * 100).toFixed(1) : 0}% {' '}\n                  {cdsConstituents.length} positions\n                </div>\n              </div>\n            </div>\n            <div className=\"w-full bg-fd-dark rounded-full h-2\">\n              <div\n                className=\"bg-fd-green h-2 rounded-full transition-all\"\n                style={{\n                  width: `${totalNotional > 0 ? (totalCdsNotional / totalNotional) * 100 : 0}%`,\n                }}\n              ></div>\n            </div>\n\n            <div className=\"flex items-center justify-between mt-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-4 h-4 bg-blue-500 rounded\"></div>\n                <span className=\"text-fd-text\"> Corporate Bonds</span>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-fd-text font-medium\">{formatCurrency(totalBondNotional)}</div>\n                <div className=\"text-sm text-fd-text-muted\">\n                  {totalNotional > 0 ? ((totalBondNotional / totalNotional) * 100).toFixed(1) : 0}%\n                   {bondConstituents.length} positions\n                </div>\n              </div>\n            </div>\n            <div className=\"w-full bg-fd-dark rounded-full h-2\">\n              <div\n                className=\"bg-blue-500 h-2 rounded-full transition-all\"\n                style={{\n                  width: `${totalNotional > 0 ? (totalBondNotional / totalNotional) * 100 : 0}%`,\n                }}\n              ></div>\n            </div>\n\n            <div className=\"flex items-center justify-between mt-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-4 h-4 bg-purple-500 rounded\"></div>\n                <span className=\"text-fd-text\"> Credit Baskets</span>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-fd-text font-medium\">\n                  {formatCurrency(totalBasketNotional)}\n                </div>\n                <div className=\"text-sm text-fd-text-muted\">\n                  {totalNotional > 0 ? ((totalBasketNotional / totalNotional) * 100).toFixed(1) : 0}\n                  %  {basketConstituents.length} positions\n                </div>\n              </div>\n            </div>\n            <div className=\"w-full bg-fd-dark rounded-full h-2\">\n              <div\n                className=\"bg-purple-500 h-2 rounded-full transition-all\"\n                style={{\n                  width: `${totalNotional > 0 ? (totalBasketNotional / totalNotional) * 100 : 0}%`,\n                }}\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        {/* Sector Exposure */}\n        <div className=\"bg-fd-darker border border-fd-border rounded-lg p-6\">\n          <h3 className=\"text-lg font-semibold text-fd-text mb-4\">Sector Allocation</h3>\n          <div className=\"space-y-3\">\n            {sectorExposures.slice(0, 5).map((sector, idx) => (\n              <div key={sector.sector} className=\"space-y-1\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <div className=\"flex items-center space-x-2\">\n                    <div className={`w-3 h-3 rounded ${getSectorColor(idx)}`}></div>\n                    <span className=\"text-fd-text\">{sector.sector}</span>\n                  </div>\n                  <div className=\"text-fd-text-muted\">\n                    {sector.percentage.toFixed(1)}%  {sector.instrumentCount} instruments\n                  </div>\n                </div>\n                <div className=\"w-full bg-fd-dark rounded-full h-1.5\">\n                  <div\n                    className={`${getSectorColor(idx)} h-1.5 rounded-full transition-all`}\n                    style={{ width: `${sector.percentage}%` }}\n                  ></div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Net Exposure by Issuer */}\n      <div className=\"bg-fd-darker border border-fd-border rounded-lg p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-fd-text\">Net Credit Exposure by Issuer</h3>\n          <div className=\"text-sm text-fd-text-muted\">Showing bond positions vs CDS hedges</div>\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-fd-border\">\n            <thead>\n              <tr className=\"text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider\">\n                <th className=\"px-4 py-3\">Issuer</th>\n                <th className=\"px-4 py-3\">Sector</th>\n                <th className=\"px-4 py-3 text-right\">Bond Exposure</th>\n                <th className=\"px-4 py-3 text-right\">CDS Protection</th>\n                <th className=\"px-4 py-3 text-right\">Net Exposure</th>\n                <th className=\"px-4 py-3 text-center\">Hedge Ratio</th>\n                <th className=\"px-4 py-3 text-center\">Status</th>\n                <th className=\"px-4 py-3\">Recommendation</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-fd-border\">\n              {issuerExposures.map((exp) => (\n                <tr key={exp.issuer} className=\"hover:bg-fd-dark transition-colors\">\n                  <td className=\"px-4 py-3 text-sm font-medium text-fd-text\">{exp.issuer}</td>\n                  <td className=\"px-4 py-3 text-sm text-fd-text-muted\">{exp.sector}</td>\n                  <td className=\"px-4 py-3 text-sm text-right text-fd-text\">\n                    {exp.bondNotional > 0 ? formatCurrency(exp.bondNotional) : '-'}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm text-right text-fd-text\">\n                    {exp.cdsProtectionBought > 0 ? formatCurrency(exp.cdsProtectionBought) : '-'}\n                  </td>\n                  <td\n                    className={`px-4 py-3 text-sm text-right font-medium ${\n                      exp.netCreditExposure > 0\n                        ? 'text-red-400'\n                        : exp.netCreditExposure < 0\n                          ? 'text-fd-green'\n                          : 'text-fd-text'\n                    }`}\n                  >\n                    {formatCurrency(Math.abs(exp.netCreditExposure))}\n                    {exp.netCreditExposure > 0\n                      ? ' Long'\n                      : exp.netCreditExposure < 0\n                        ? ' Short'\n                        : ''}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm text-center text-fd-text\">\n                    {exp.bondNotional > 0 ? `${exp.hedgeRatio.toFixed(0)}%` : 'N/A'}\n                  </td>\n                  <td className=\"px-4 py-3 text-center\">\n                    <span\n                      className={`inline-flex items-center px-2 py-1 rounded text-xs font-medium border ${getHedgeStatusBadge(exp.hedgeStatus)}`}\n                    >\n                      {exp.hedgeStatus.replace('_', ' ')}\n                    </span>\n                  </td>\n                  <td className={`px-4 py-3 text-sm ${getHedgeStatusColor(exp.hedgeStatus)}`}>\n                    {exp.recommendation}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {issuerExposures.length === 0 && (\n          <div className=\"text-center py-8 text-fd-text-muted\">\n            No exposures to analyze. Add some CDS trades and bonds to see hedge recommendations.\n          </div>\n        )}\n      </div>\n\n      {/* Key Metrics Summary */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"bg-fd-darker border border-fd-border rounded-lg p-4\">\n          <div className=\"text-sm text-fd-text-muted mb-1\">Total Instruments</div>\n          <div className=\"text-2xl font-semibold text-fd-text\">\n            {cdsConstituents.length + bondConstituents.length + basketConstituents.length}\n          </div>\n          <div className=\"text-xs text-fd-text-muted mt-1\">\n            {cdsConstituents.length} CDS  {bondConstituents.length} Bonds {' '}\n            {basketConstituents.length} Baskets\n          </div>\n        </div>\n\n        <div className=\"bg-fd-darker border border-fd-border rounded-lg p-4\">\n          <div className=\"text-sm text-fd-text-muted mb-1\">Unique Issuers</div>\n          <div className=\"text-2xl font-semibold text-fd-text\">{issuerExposures.length}</div>\n          <div className=\"text-xs text-fd-text-muted mt-1\">{sectorExposures.length} sectors</div>\n        </div>\n\n        <div className=\"bg-fd-darker border border-fd-border rounded-lg p-4\">\n          <div className=\"text-sm text-fd-text-muted mb-1\">Hedge Coverage</div>\n          <div className=\"text-2xl font-semibold text-fd-text\">\n            {totalBondNotional > 0 ? ((totalCdsNotional / totalBondNotional) * 100).toFixed(0) : 0}%\n          </div>\n          <div className=\"text-xs text-fd-text-muted mt-1\">CDS / Bond ratio</div>\n        </div>\n\n        <div className=\"bg-fd-darker border border-fd-border rounded-lg p-4\">\n          <div className=\"text-sm text-fd-text-muted mb-1\">Unhedged Exposure</div>\n          <div className=\"text-2xl font-semibold text-red-400\">\n            {\n              issuerExposures.filter(\n                (e) => e.hedgeStatus === 'UNHEDGED' || e.hedgeStatus === 'UNDER_HEDGED'\n              ).length\n            }\n          </div>\n          <div className=\"text-xs text-fd-text-muted mt-1\">issuers need attention</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EnhancedOverview;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\PortfolioDetail.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadPortfolioData'. Either include it or remove the dependency array.","line":37,"column":6,"nodeType":"ArrayExpression","endLine":37,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [loadPortfolioData, portfolioId]","fix":{"range":[1571,1584],"text":"[loadPortfolioData, portfolioId]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\PortfolioList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\PortfolioPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\ContributorsTable.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":25,"column":16,"nodeType":"MemberExpression","endLine":25,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":26,"column":16,"nodeType":"MemberExpression","endLine":26,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Contributor } from '../../../services/simulationService';\n\ninterface ContributorsTableProps {\n  contributors: Contributor[];\n}\n\ntype SortField = 'entity' | 'marginalElPct' | 'beta';\ntype SortDirection = 'asc' | 'desc';\n\nconst ContributorsTable: React.FC<ContributorsTableProps> = ({ contributors }) => {\n  const [sortField, setSortField] = useState<SortField>('marginalElPct');\n  const [sortDirection, setSortDirection] = useState<SortDirection>('desc');\n\n  const handleSort = (field: SortField) => {\n    if (sortField === field) {\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortField(field);\n      setSortDirection(field === 'entity' ? 'asc' : 'desc');\n    }\n  };\n\n  const sortedContributors = [...contributors].sort((a, b) => {\n    let aVal = a[sortField];\n    let bVal = b[sortField];\n\n    if (typeof aVal === 'string') {\n      aVal = aVal.toLowerCase();\n      bVal = (bVal as string).toLowerCase();\n    }\n\n    if (aVal < bVal) return sortDirection === 'asc' ? -1 : 1;\n    if (aVal > bVal) return sortDirection === 'asc' ? 1 : -1;\n    return 0;\n  });\n\n  const SortIcon = ({ field }: { field: SortField }) => {\n    if (sortField !== field) {\n      return (\n        <svg\n          className=\"w-4 h-4 text-fd-text-muted\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4\"\n          />\n        </svg>\n      );\n    }\n\n    return sortDirection === 'asc' ? (\n      <svg className=\"w-4 h-4 text-fd-green\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 15l7-7 7 7\" />\n      </svg>\n    ) : (\n      <svg className=\"w-4 h-4 text-fd-green\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n      </svg>\n    );\n  };\n\n  return (\n    <div className=\"bg-fd-darker rounded-lg border border-fd-border overflow-hidden\">\n      <div className=\"overflow-x-auto\">\n        <table className=\"w-full\">\n          <thead className=\"bg-fd-dark border-b border-fd-border\">\n            <tr>\n              <th\n                className=\"px-4 py-3 text-left text-sm font-medium text-fd-text cursor-pointer hover:bg-fd-border transition-colors\"\n                onClick={() => handleSort('entity')}\n              >\n                <div className=\"flex items-center gap-2\">\n                  Entity Name\n                  <SortIcon field=\"entity\" />\n                </div>\n              </th>\n              <th\n                className=\"px-4 py-3 text-right text-sm font-medium text-fd-text cursor-pointer hover:bg-fd-border transition-colors\"\n                onClick={() => handleSort('marginalElPct')}\n              >\n                <div className=\"flex items-center justify-end gap-2\">\n                  Marginal EL %\n                  <SortIcon field=\"marginalElPct\" />\n                </div>\n              </th>\n              <th\n                className=\"px-4 py-3 text-right text-sm font-medium text-fd-text cursor-pointer hover:bg-fd-border transition-colors\"\n                onClick={() => handleSort('beta')}\n              >\n                <div className=\"flex items-center justify-end gap-2\">\n                  Beta ()\n                  <SortIcon field=\"beta\" />\n                </div>\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-fd-border\">\n            {sortedContributors.map((contributor, index) => (\n              <tr key={index} className=\"hover:bg-fd-dark/50 transition-colors\">\n                <td className=\"px-4 py-3 text-sm text-fd-text\">{contributor.entity}</td>\n                <td className=\"px-4 py-3 text-sm text-fd-text text-right font-medium\">\n                  {contributor.marginalElPct.toFixed(2)}%\n                </td>\n                <td className=\"px-4 py-3 text-sm text-fd-text-muted text-right\">\n                  {contributor.beta.toFixed(3)}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {sortedContributors.length === 0 && (\n        <div className=\"p-8 text-center text-fd-text-muted\">No contributors data available</div>\n      )}\n    </div>\n  );\n};\n\nexport default ContributorsTable;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\MetricsCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\MetricsGlossaryModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\SimulationConfigForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\SimulationPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\SimulationResults.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\portfolio\\simulation\\SimulationStatusBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\risk\\CashflowScheduleTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\risk\\MarketDataPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\risk\\RegressionStatusBadge.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":17,"column":88,"nodeType":"MemberExpression","endLine":17,"endColumn":104}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\ninterface Props {\n  status: 'PASS' | 'FAIL' | 'UNKNOWN';\n  lastRun?: string;\n}\n\nconst colorMap: Record<string, string> = {\n  PASS: 'bg-green-600 text-white',\n  FAIL: 'bg-red-600 text-white',\n  UNKNOWN: 'bg-gray-600 text-white',\n};\n\nconst RegressionStatusBadge: React.FC<Props> = ({ status, lastRun }) => {\n  return (\n    <span\n      className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold ${colorMap[status]}`}\n      title={\n        lastRun ? `Last regression: ${new Date(lastRun).toLocaleString()}` : 'No regression run yet'\n      }\n    >\n      Regression: {status}\n    </span>\n  );\n};\n\nexport default RegressionStatusBadge;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\risk\\RiskMeasuresPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'addedDays' is assigned a value but never used.","line":170,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":170,"endColumn":18}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'checkForPayoutEvent', 'loadCouponPeriods', and 'loadRiskMeasures'. Either include them or remove the dependency array.","line":222,"column":6,"nodeType":"ArrayExpression","endLine":222,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [checkForPayoutEvent, loadCouponPeriods, loadRiskMeasures, tradeId]","fix":{"range":[7585,7594],"text":"[checkForPayoutEvent, loadCouponPeriods, loadRiskMeasures, tradeId]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport { fetchRiskMeasures } from '../../services/risk/riskService';\nimport { RiskMeasures } from '../../services/risk/riskTypes';\nimport { lifecycleService } from '../../services/lifecycleService';\nimport { CouponPeriod } from '../../types/lifecycle';\nimport { CDSTradeResponse } from '../../services/cdsTradeService';\nimport { creditEventService } from '../../services/creditEventService';\n\ninterface Props {\n  tradeId: number;\n  trade?: CDSTradeResponse; // Optional trade object for richer display\n}\n\nconst RiskMeasuresPanel: React.FC<Props> = ({ tradeId, trade }) => {\n  const [data, setData] = useState<RiskMeasures | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [couponPeriods, setCouponPeriods] = useState<CouponPeriod[]>([]);\n  const [payingPeriodId, setPayingPeriodId] = useState<number | null>(null);\n  const [recalculating, setRecalculating] = useState(false);\n  const [generatingSchedule, setGeneratingSchedule] = useState(false);\n  const [valuationDate, setValuationDate] = useState<string | undefined>(undefined); // undefined means \"today\"\n  const [hasPayoutEvent, setHasPayoutEvent] = useState(false);\n\n  // Check if trade is in a final state (settled or terminated) where no modifications are allowed\n  const isTradeFinalized = trade && (\n    trade.tradeStatus === 'SETTLED_CASH' || \n    trade.tradeStatus === 'SETTLED_PHYSICAL' ||\n    trade.tradeStatus === 'TERMINATED'\n  );\n\n  const checkForPayoutEvent = async () => {\n    try {\n      const events = await creditEventService.getCreditEventsForTrade(tradeId);\n      const payoutExists = events.some((event) => event.eventType === 'PAYOUT');\n      setHasPayoutEvent(payoutExists);\n    } catch (error) {\n      console.error('Failed to check for payout events:', error);\n      setHasPayoutEvent(false);\n    }\n  };\n\n  const loadRiskMeasures = async (customValuationDate?: string, forceRefresh: boolean = false) => {\n    if (!tradeId) return;\n    setLoading(true);\n    try {\n      // When forceRefresh is true, use customValuationDate directly (even if undefined)\n      // Otherwise fall back to state's valuationDate\n      const dateToUse = forceRefresh ? customValuationDate : customValuationDate || valuationDate;\n      console.log(` DEBUG loadRiskMeasures called with:`, {\n        customValuationDate,\n        valuationDate,\n        forceRefresh,\n        dateToUse,\n        tradeId,\n        timestamp: new Date().toISOString(),\n      });\n      console.log(\n        `Loading risk measures for trade ${tradeId} with valuation date: ${dateToUse || 'today'}...`\n      );\n      const measures = await fetchRiskMeasures(tradeId, dateToUse);\n      console.log('Risk measures loaded:', {\n        npv: measures.npv,\n        currency: measures.currency,\n        timestamp: measures.valuationTimestamp,\n        loadedAt: new Date().toISOString(),\n      });\n      setData(measures);\n      setError(null);\n    } catch (e: any) {\n      console.error('Failed to load risk measures:', e);\n      setError(e.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadCouponPeriods = async () => {\n    if (!tradeId) return;\n    try {\n      console.log('Loading coupon periods for trade:', tradeId);\n      const periods = await lifecycleService.getCouponSchedule(tradeId);\n      console.log('Loaded coupon periods:', periods.length, periods);\n      setCouponPeriods(periods);\n    } catch (e: any) {\n      console.error('Failed to load coupon periods:', e);\n      setCouponPeriods([]); // Ensure it's set to empty array on error\n    }\n  };\n\n  const handlePayCoupon = async (periodId: number, payOnTime: boolean = false) => {\n    setPayingPeriodId(periodId);\n    try {\n      await lifecycleService.payCoupon(tradeId, periodId, payOnTime);\n      console.log('Coupon paid successfully, reloading data...');\n\n      // Reload coupon periods to reflect payment\n      await loadCouponPeriods();\n\n      // Trigger risk recalculation - CRITICAL: Clear old data first to force re-render\n      setRecalculating(true);\n      setData(null); // Force clear to ensure React detects the change\n\n      // Wait a bit to ensure backend has processed the payment\n      await new Promise((resolve) => setTimeout(resolve, 500));\n\n      await loadRiskMeasures();\n      console.log('Risk measures reloaded after coupon payment');\n      setRecalculating(false);\n    } catch (e: any) {\n      alert('Failed to pay coupon: ' + e.message);\n      setRecalculating(false);\n    } finally {\n      setPayingPeriodId(null);\n    }\n  };\n\n  const handleUnpayCoupon = async (periodId: number) => {\n    setPayingPeriodId(periodId);\n    try {\n      await lifecycleService.unpayCoupon(tradeId, periodId);\n      console.log('Coupon payment cancelled successfully, reloading data...');\n\n      // Reload coupon periods to reflect cancellation\n      await loadCouponPeriods();\n\n      // Trigger risk recalculation\n      setRecalculating(true);\n      setData(null);\n\n      await new Promise((resolve) => setTimeout(resolve, 500));\n\n      await loadRiskMeasures();\n      console.log('Risk measures reloaded after coupon cancellation');\n      setRecalculating(false);\n    } catch (e: any) {\n      alert('Failed to cancel coupon payment: ' + e.message);\n      setRecalculating(false);\n    } finally {\n      setPayingPeriodId(null);\n    }\n  };\n\n  const handleGenerateSchedule = async () => {\n    setGeneratingSchedule(true);\n    try {\n      await lifecycleService.generateCouponSchedule(tradeId);\n      // Reload the schedule\n      await loadCouponPeriods();\n    } catch (e: any) {\n      alert('Failed to generate coupon schedule: ' + e.message);\n    } finally {\n      setGeneratingSchedule(false);\n    }\n  };\n\n  // Helper function to calculate business days offset (simplified - assumes no holidays)\n  const getBusinessDaysFromToday = (days: number): string => {\n    const today = new Date();\n    const target = new Date(today);\n\n    let addedDays = 0;\n    let daysToAdd = days;\n\n    while (daysToAdd > 0) {\n      target.setDate(target.getDate() + 1);\n      const dayOfWeek = target.getDay();\n      // Skip weekends (0 = Sunday, 6 = Saturday)\n      if (dayOfWeek !== 0 && dayOfWeek !== 6) {\n        addedDays++;\n        daysToAdd--;\n      }\n    }\n\n    return target.toISOString().split('T')[0];\n  };\n\n  const handleQuickValuationDate = async (option: 'today' | 't+1' | 't+7' | 't+45') => {\n    let newDate: string | undefined = undefined;\n\n    switch (option) {\n      case 'today':\n        newDate = undefined; // undefined means use backend's \"today\"\n        break;\n      case 't+1':\n        newDate = getBusinessDaysFromToday(1);\n        break;\n      case 't+7':\n        newDate = getBusinessDaysFromToday(7);\n        break;\n      case 't+45':\n        newDate = getBusinessDaysFromToday(45);\n        break;\n    }\n\n    console.log(` DEBUG handleQuickValuationDate:`, {\n      option,\n      newDate,\n      currentValuationDate: valuationDate,\n    });\n\n    // Update state first\n    setValuationDate(newDate);\n\n    // Force a fresh fetch by clearing data first\n    setData(null);\n    setLoading(true);\n    setError(null);\n\n    // Small delay to ensure state updates propagate\n    await new Promise((resolve) => setTimeout(resolve, 10));\n\n    // Now fetch with the new date, passing forceRefresh=true to use newDate directly\n    await loadRiskMeasures(newDate, true);\n  };\n\n  useEffect(() => {\n    loadRiskMeasures();\n    loadCouponPeriods();\n    checkForPayoutEvent();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tradeId]);\n\n  if (!tradeId) return <div className=\"text-fd-text\">No trade selected</div>;\n\n  // Show payout message if PAYOUT event exists\n  if (hasPayoutEvent) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"bg-fd-darker p-6 rounded-md border-2 border-fd-green\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"w-12 h-12 bg-fd-green/20 rounded-full flex items-center justify-center\">\n              <svg\n                className=\"w-6 h-6 text-fd-green\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                ></path>\n              </svg>\n            </div>\n            <div>\n              <h3 className=\"text-fd-green font-semibold text-lg\">CDS Protection Paid Out</h3>\n              <p className=\"text-fd-text-muted text-sm\">\n                A credit event has triggered payout - all risk measures are now zero\n              </p>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6\">\n            <div className=\"bg-fd-dark rounded p-4\">\n              <div className=\"text-xs text-fd-text-muted mb-1\">Net Present Value</div>\n              <div className=\"text-2xl font-bold text-fd-green font-mono\">$0.00</div>\n            </div>\n            <div className=\"bg-fd-dark rounded p-4\">\n              <div className=\"text-xs text-fd-text-muted mb-1\">Jump-to-Default (JTD)</div>\n              <div className=\"text-2xl font-bold text-fd-green font-mono\">$0.00</div>\n            </div>\n            <div className=\"bg-fd-dark rounded p-4\">\n              <div className=\"text-xs text-fd-text-muted mb-1\">Fair Spread</div>\n              <div className=\"text-2xl font-bold text-fd-green font-mono\">0 bps</div>\n            </div>\n          </div>\n\n          <div className=\"mt-6 bg-fd-dark rounded p-4\">\n            <div className=\"flex items-start gap-2\">\n              <svg\n                className=\"w-5 h-5 text-fd-green mt-0.5 flex-shrink-0\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                ></path>\n              </svg>\n              <div className=\"text-sm text-fd-text-muted\">\n                <p className=\"mb-2\">\n                  This trade has experienced a credit event (Bankruptcy or Restructuring) resulting\n                  in payout. The CDS contract has fulfilled its protection obligation.\n                </p>\n                <p>\n                  All risk exposures have been reduced to zero as the contract has settled and no\n                  further obligations remain.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Paid Coupons Information */}\n          <div className=\"mt-6 bg-fd-dark rounded p-4\">\n            <h4 className=\"text-fd-text font-semibold mb-3 flex items-center gap-2\">\n              <svg\n                className=\"w-5 h-5 text-fd-green\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4\"\n                ></path>\n              </svg>\n              Coupon Payment History\n            </h4>\n            {couponPeriods.length === 0 ? (\n              <p className=\"text-fd-text-muted text-sm\">\n                No coupon schedule was generated for this trade.\n              </p>\n            ) : (\n              (() => {\n                const paidCoupons = couponPeriods.filter((p) => p.paid === true);\n                if (paidCoupons.length === 0) {\n                  return (\n                    <p className=\"text-fd-text-muted text-sm\">\n                      No coupons were paid before the credit event occurred.\n                    </p>\n                  );\n                }\n                return (\n                  <div className=\"space-y-2\">\n                    <p className=\"text-fd-text text-sm mb-3\">\n                      {paidCoupons.length} coupon{paidCoupons.length > 1 ? 's' : ''} paid before\n                      credit event:\n                    </p>\n                    <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                      {paidCoupons.map((period, index) => (\n                        <div\n                          key={period.id}\n                          className=\"bg-fd-darker rounded p-3 flex items-center justify-between border border-fd-border\"\n                        >\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2\">\n                              <svg\n                                className=\"w-4 h-4 text-fd-green\"\n                                fill=\"currentColor\"\n                                viewBox=\"0 0 20 20\"\n                              >\n                                <path\n                                  fillRule=\"evenodd\"\n                                  d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                                  clipRule=\"evenodd\"\n                                ></path>\n                              </svg>\n                              <span className=\"text-fd-text text-sm font-medium\">\n                                Period #{index + 1}\n                              </span>\n                              <span className=\"text-fd-text-muted text-xs\">\n                                ({new Date(period.periodStartDate).toLocaleDateString()} -{' '}\n                                {new Date(period.periodEndDate).toLocaleDateString()})\n                              </span>\n                            </div>\n                            <div className=\"text-xs text-fd-text-muted mt-1\">\n                              Payment Date: {new Date(period.paymentDate).toLocaleDateString()}\n                              {period.paidAt && (\n                                <span className=\"ml-2 text-fd-green\">\n                                   Paid: {new Date(period.paidAt).toLocaleDateString()}\n                                </span>\n                              )}\n                            </div>\n                          </div>\n                          <div className=\"text-right\">\n                            <div className=\"text-fd-green font-mono font-semibold\">\n                              {new Intl.NumberFormat('en-US', {\n                                style: 'currency',\n                                currency: data?.currency || 'USD',\n                                minimumFractionDigits: 2,\n                                maximumFractionDigits: 2,\n                              }).format(period.couponAmount || 0)}\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                );\n              })()\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading)\n    return (\n      <div className=\"flex items-center gap-2 text-fd-text\">\n        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-fd-green\"></div>\n        <span>Calculating risk measures with ORE...</span>\n      </div>\n    );\n  if (error)\n    return (\n      <div className=\"text-red-400\" role=\"alert\">\n        Failed: {error}\n      </div>\n    );\n  if (!data) return null;\n\n  const formatValue = (value: number | null | undefined, decimals: number = 2): string => {\n    if (value === null || value === undefined) return '-';\n    return typeof value === 'number'\n      ? value.toLocaleString(undefined, {\n          minimumFractionDigits: decimals,\n          maximumFractionDigits: decimals,\n        })\n      : String(value);\n  };\n\n  const formatCurrency = (value: number | null | undefined, currency: string = 'USD'): string => {\n    if (value === null || value === undefined) return '-';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: currency,\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    }).format(value);\n  };\n\n  const formatBasisPoints = (value: number | null | undefined): string => {\n    if (value === null || value === undefined) return '-';\n    return (value * 10000).toFixed(2) + ' bps';\n  };\n\n  // Calculate Risky PV01 if ORE doesn't provide it\n  // Formula: |Premium Leg NPV + Accrued Premium| / (Notional  Running Spread)\n  const calculateRiskyPV01 = (): number | null => {\n    // If ORE provided it, use that\n    if (data.riskyAnnuity !== null && data.riskyAnnuity !== undefined) {\n      return data.riskyAnnuity;\n    }\n\n    // Otherwise calculate it from available data\n    const premiumLegNPV = data.premiumLegNPVClean || 0;\n    const accruedPremium = data.accruedPremium || 0;\n    const notional = data.currentNotional || data.originalNotional;\n    const runningSpread = data.fairSpreadClean; // Fair spread in decimal form\n\n    if (!notional || !runningSpread || runningSpread === 0) {\n      return null;\n    }\n\n    const riskyPV01 = Math.abs(premiumLegNPV + accruedPremium) / (notional * runningSpread);\n    return riskyPV01;\n  };\n\n  const riskyPV01 = calculateRiskyPV01();\n\n  // Find the next unpaid coupon (earliest payment date among unpaid)\n  const getNextUnpaidCoupon = (): CouponPeriod | null => {\n    const unpaidCoupons = couponPeriods\n      .filter((p) => !p.paid)\n      .sort((a, b) => new Date(a.paymentDate).getTime() - new Date(b.paymentDate).getTime());\n    return unpaidCoupons.length > 0 ? unpaidCoupons[0] : null;\n  };\n\n  // Find the most recently paid coupon (latest payment date among paid coupons)\n  const getMostRecentlyPaidCoupon = (): CouponPeriod | null => {\n    const paidCoupons = couponPeriods\n      .filter((p) => p.paid)\n      .sort((a, b) => new Date(b.paymentDate).getTime() - new Date(a.paymentDate).getTime());\n    return paidCoupons.length > 0 ? paidCoupons[0] : null;\n  };\n\n  const nextUnpaidCoupon = getNextUnpaidCoupon();\n  const mostRecentlyPaidCoupon = getMostRecentlyPaidCoupon();\n\n  const canPayCoupon = (period: CouponPeriod): boolean => {\n    if (period.paid) return false;\n    if (!nextUnpaidCoupon) return false;\n    return period.id === nextUnpaidCoupon.id;\n  };\n\n  const canUnpayCoupon = (period: CouponPeriod): boolean => {\n    if (!period.paid) return false;\n    if (!mostRecentlyPaidCoupon) return false;\n    return period.id === mostRecentlyPaidCoupon.id;\n  };\n\n  // Calculate coupon statistics\n  const totalCoupons = couponPeriods.length;\n  const paidCoupons = couponPeriods.filter((p) => p.paid).length;\n  const totalPaidAmount = couponPeriods\n    .filter((p) => p.paid && p.couponAmount)\n    .reduce((sum, p) => sum + (p.couponAmount || 0), 0);\n\n  // Derive frequency and maturity from coupon periods\n  const getScheduleDescription = () => {\n    if (couponPeriods.length === 0) return '';\n\n    // Get maturity from last period\n    const lastPeriod = couponPeriods[couponPeriods.length - 1];\n    const maturityDate = new Date(lastPeriod.periodEndDate);\n    const maturityYear = maturityDate.getFullYear();\n    const maturityMonth = maturityDate.toLocaleDateString('en-US', { month: 'short' });\n\n    // Use trade's premium frequency if available\n    let frequency = 'Periodic';\n    if (trade?.premiumFrequency) {\n      // Map the database values to display names\n      const frequencyMap: Record<string, string> = {\n        MONTHLY: 'Monthly',\n        QUARTERLY: 'Quarterly',\n        SEMI_ANNUAL: 'Semi-annual',\n        ANNUAL: 'Annual',\n      };\n      frequency = frequencyMap[trade.premiumFrequency] || trade.premiumFrequency;\n    } else if (couponPeriods.length > 1) {\n      // Fall back to calculating from payment date intervals if trade data not available\n      const firstPayment = new Date(couponPeriods[0].paymentDate);\n      const secondPayment = new Date(couponPeriods[1].paymentDate);\n      const daysDiff = Math.round(\n        (secondPayment.getTime() - firstPayment.getTime()) / (1000 * 60 * 60 * 24)\n      );\n\n      // More lenient ranges for CDS IMM schedules\n      // Quarterly: ~91 days (3 months)\n      // Semi-annual: ~182 days (6 months)\n      // Monthly: ~30 days\n      // Annual: ~365 days\n      if (daysDiff >= 25 && daysDiff <= 35) frequency = 'Monthly';\n      else if (daysDiff >= 80 && daysDiff <= 100) frequency = 'Quarterly';\n      else if (daysDiff >= 170 && daysDiff <= 195) frequency = 'Semi-annual';\n      else if (daysDiff >= 350 && daysDiff <= 375) frequency = 'Annual';\n    }\n\n    return `${frequency} until ${maturityMonth} ${maturityYear}`;\n  };\n\n  const hasCashflows = data.cashflows && data.cashflows.length > 0;\n  const hasCDSMetrics = data.fairSpreadClean !== null || data.protectionLegNPV !== null;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Core ORE Valuation */}\n      <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n        <div className=\"flex justify-between items-start mb-3\">\n          <h3 className=\"text-fd-green font-semibold flex items-center gap-2\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\n              ></path>\n            </svg>\n            ORE Valuation\n          </h3>\n\n          {/* Valuation Date Quick Selector */}\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-xs text-fd-text-muted\">Valuation Date:</span>\n            <div className=\"flex gap-1\">\n              <button\n                onClick={() => handleQuickValuationDate('today')}\n                disabled={loading || recalculating}\n                className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n                  valuationDate === undefined || valuationDate === ''\n                    ? 'bg-fd-green text-fd-dark'\n                    : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n                } disabled:opacity-50 disabled:cursor-not-allowed`}\n              >\n                Today\n              </button>\n              <button\n                onClick={() => handleQuickValuationDate('t+1')}\n                disabled={loading || recalculating}\n                className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n                  valuationDate === getBusinessDaysFromToday(1)\n                    ? 'bg-fd-green text-fd-dark'\n                    : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n                } disabled:opacity-50 disabled:cursor-not-allowed`}\n              >\n                T+1\n              </button>\n              <button\n                onClick={() => handleQuickValuationDate('t+7')}\n                disabled={loading || recalculating}\n                className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n                  valuationDate === getBusinessDaysFromToday(7)\n                    ? 'bg-fd-green text-fd-dark'\n                    : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n                } disabled:opacity-50 disabled:cursor-not-allowed`}\n              >\n                T+7\n              </button>\n              <button\n                onClick={() => handleQuickValuationDate('t+45')}\n                disabled={loading || recalculating}\n                className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n                  valuationDate === getBusinessDaysFromToday(45)\n                    ? 'bg-fd-green text-fd-dark'\n                    : 'bg-fd-dark text-fd-text hover:bg-fd-border'\n                } disabled:opacity-50 disabled:cursor-not-allowed`}\n              >\n                T+45\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"bg-fd-dark rounded p-3\">\n            <div className=\"text-xs text-fd-text-muted mb-1\">Net Present Value</div>\n            <div className=\"text-2xl font-bold text-fd-green font-mono\">\n              {formatCurrency(data.npv, data.currency)}\n            </div>\n          </div>\n          <div className=\"bg-fd-dark rounded p-3\">\n            <div className=\"text-xs text-fd-text-muted mb-1\">Currency</div>\n            <div className=\"text-2xl font-bold text-fd-text font-mono\">\n              {data.currency || 'USD'}\n            </div>\n          </div>\n          <div className=\"bg-fd-dark rounded p-3\">\n            <div className=\"text-xs text-fd-text-muted mb-1\">Valuation Time</div>\n            <div className=\"text-sm text-fd-text\">\n              {new Date(data.valuationTimestamp).toLocaleString()}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* CDS-Specific Metrics (if available) */}\n      {hasCDSMetrics && (\n        <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n          <h3 className=\"text-fd-green font-semibold mb-3 flex items-center gap-2\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\"\n              ></path>\n            </svg>\n            CDS Valuation Breakdown\n          </h3>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 text-sm\">\n            {data.jtd !== null && data.jtd !== undefined && (\n              <div className=\"md:col-span-2 lg:col-span-4 bg-fd-dark rounded p-3 border-l-4 border-fd-green\">\n                <span className=\"text-fd-text-muted\">Jump-to-Default (JTD) Exposure:</span>\n                <div className=\"font-mono text-fd-green font-bold text-xl mt-1\">\n                  {formatCurrency(data.jtd, data.currency)}\n                </div>\n                <div className=\"text-xs text-fd-text-muted mt-1\">\n                  Potential loss if reference entity defaults immediately\n                </div>\n              </div>\n            )}\n            <div>\n              <span className=\"text-fd-text-muted\">Fair Spread (Clean):</span>\n              <div className=\"font-mono text-fd-text font-semibold\">\n                {formatBasisPoints(data.fairSpreadClean)}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Fair Spread (Dirty):</span>\n              <div className=\"font-mono text-fd-text font-semibold\">\n                {formatBasisPoints(data.fairSpreadDirty)}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Protection Leg NPV:</span>\n              <div className=\"font-mono text-fd-text font-semibold\">\n                {formatCurrency(data.protectionLegNPV, data.currency)}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Premium Leg NPV:</span>\n              <div className=\"font-mono text-fd-text font-semibold\">\n                {formatCurrency(data.premiumLegNPVClean, data.currency)}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Accrued Premium:</span>\n              <div className=\"font-mono text-fd-text\">\n                {formatCurrency(data.accruedPremium, data.currency)}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Upfront Premium:</span>\n              <div className=\"font-mono text-fd-text\">\n                {formatCurrency(data.upfrontPremium, data.currency)}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Coupon Leg BPS:</span>\n              <div className=\"font-mono text-fd-text\">{formatValue(data.couponLegBPS, 2)}</div>\n            </div>\n            <div>\n              <span className=\"text-fd-text-muted\">Current Notional:</span>\n              <div className=\"font-mono text-fd-text\">\n                {formatCurrency(data.currentNotional, data.currency)}\n              </div>\n            </div>\n            {riskyPV01 !== null && (\n              <div>\n                <span className=\"text-fd-text-muted\">Risky PV01:</span>\n                <div className=\"font-mono text-fd-text font-semibold text-fd-green\">\n                  {formatValue(riskyPV01, 6)}\n                </div>\n                <div className=\"text-xs text-fd-text-muted mt-0.5\">\n                  {data.riskyAnnuity ? 'From ORE' : 'Calculated'}\n                </div>\n              </div>\n            )}\n            {trade?.recoveryRate !== undefined && trade?.recoveryRate !== null && (\n              <div>\n                <span className=\"text-fd-text-muted\">Recovery Rate:</span>\n                <div className=\"font-mono text-fd-text font-semibold\">{trade.recoveryRate}%</div>\n              </div>\n            )}\n            {paidCoupons > 0 && (\n              <div>\n                <span className=\"text-fd-text-muted\">Total Paid Coupons:</span>\n                <div className=\"font-mono text-fd-green font-semibold\">\n                  {formatCurrency(totalPaidAmount, data.currency)}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Credit Risk Profile (if available) */}\n      {data.defaultProbabilities && data.defaultProbabilities.length > 0 && (\n        <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n          <h3 className=\"text-fd-green font-semibold mb-3 flex items-center gap-2\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-1.964-1.333-2.732 0L3.268 16c-.77 1.333.192 3 1.732 3z\"\n              ></path>\n            </svg>\n            Credit Risk Profile\n          </h3>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <h4 className=\"text-sm font-medium text-fd-text mb-2\">\n                Default Probabilities by Period\n              </h4>\n              <div className=\"space-y-1 text-sm\">\n                {data.defaultProbabilities.slice(0, 6).map((prob, idx) => (\n                  <div key={idx} className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Period {idx + 1}:</span>\n                    <span className=\"font-mono text-fd-text\">{(prob * 100).toFixed(2)}%</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {data.expectedLosses && data.expectedLosses.length > 0 && (\n              <div>\n                <h4 className=\"text-sm font-medium text-fd-text mb-2\">Expected Losses by Period</h4>\n                <div className=\"space-y-1 text-sm\">\n                  {data.expectedLosses.slice(0, 6).map((loss, idx) => (\n                    <div key={idx} className=\"flex justify-between\">\n                      <span className=\"text-fd-text-muted\">Period {idx + 1}:</span>\n                      <span className=\"font-mono text-fd-text\">\n                        {formatCurrency(loss, data.currency)}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Coupon Payment Schedule */}\n      {couponPeriods.length > 0 && (\n        <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n          <h3 className=\"text-fd-green font-semibold mb-3 flex items-center gap-2\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\"\n              ></path>\n            </svg>\n            Coupon Payment Schedule\n            <span className=\"ml-auto text-sm font-normal text-fd-text-muted\">\n              {paidCoupons} of {totalCoupons} paid\n            </span>\n            {recalculating && (\n              <span className=\"ml-2 text-sm font-normal text-fd-text-muted flex items-center gap-1\">\n                <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-fd-green\"></div>\n                Recalculating risk...\n              </span>\n            )}\n          </h3>\n\n          {/* Schedule description */}\n          <div className=\"mb-3 text-sm text-fd-text-muted italic\">{getScheduleDescription()}</div>\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-sm text-fd-text\">\n              <thead>\n                <tr className=\"text-left border-b-2 border-fd-border bg-fd-dark\">\n                  <th className=\"py-2 px-3 font-medium\">Payment Date</th>\n                  <th className=\"py-2 px-3 font-medium\">Period</th>\n                  <th className=\"py-2 px-3 font-medium text-right\">Days</th>\n                  <th className=\"py-2 px-3 font-medium text-right\">Notional</th>\n                  <th className=\"py-2 px-3 font-medium text-right\">Coupon Amount</th>\n                  <th className=\"py-2 px-3 font-medium\">Status</th>\n                  <th className=\"py-2 px-3 font-medium text-center\">Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                {couponPeriods.map((period) => (\n                  <tr\n                    key={period.id}\n                    className={`border-b border-fd-border hover:bg-fd-dark transition-colors ${period.paid ? 'opacity-60' : ''}`}\n                  >\n                    <td className=\"py-2 px-3 font-mono\">\n                      {new Date(period.paymentDate).toLocaleDateString()}\n                    </td>\n                    <td className=\"py-2 px-3 text-fd-text-muted\">\n                      {new Date(period.periodStartDate).toLocaleDateString()} {' '}\n                      {new Date(period.periodEndDate).toLocaleDateString()}\n                    </td>\n                    <td className=\"py-2 px-3 font-mono text-right\">{period.accrualDays}</td>\n                    <td className=\"py-2 px-3 font-mono text-right\">\n                      {formatCurrency(period.notionalAmount, data?.currency)}\n                    </td>\n                    <td className=\"py-2 px-3 font-mono text-right\">\n                      {period.couponAmount\n                        ? formatCurrency(period.couponAmount, data?.currency)\n                        : '-'}\n                    </td>\n                    <td className=\"py-2 px-3\">\n                      {period.paid ? (\n                        <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-500/20 text-green-400\">\n                          <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path\n                              fillRule=\"evenodd\"\n                              d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\n                              clipRule=\"evenodd\"\n                            />\n                          </svg>\n                          Paid\n                        </span>\n                      ) : (\n                        <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-500/20 text-yellow-400\">\n                          <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path\n                              fillRule=\"evenodd\"\n                              d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\"\n                              clipRule=\"evenodd\"\n                            />\n                          </svg>\n                          Unpaid\n                        </span>\n                      )}\n                    </td>\n                    <td className=\"py-2 px-3 text-center\">\n                      {/* Show Cancel button for the most recently paid coupon */}\n                      {period.paid && canUnpayCoupon(period) && !isTradeFinalized && (\n                        <div className=\"flex flex-col gap-1 items-center\">\n                          <button\n                            onClick={() => handleUnpayCoupon(period.id)}\n                            disabled={payingPeriodId === period.id || recalculating}\n                            title=\"Cancel this payment (for demo)\"\n                            className=\"px-2 py-1 text-xs bg-red-600 text-white rounded font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors w-full\"\n                          >\n                            {payingPeriodId === period.id ? (\n                              <span className=\"flex items-center gap-1 justify-center\">\n                                <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-white\"></div>\n                              </span>\n                            ) : (\n                              ' Cancel Payment'\n                            )}\n                          </button>\n                          <span className=\"text-xs text-fd-text-muted\">\n                            {new Date(period.paidAt!).toLocaleString()}\n                          </span>\n                        </div>\n                      )}\n\n                      {/* Show payment timestamp for other paid coupons */}\n                      {period.paid && !canUnpayCoupon(period) && period.paidAt && (\n                        <span className=\"text-xs text-fd-text-muted\">\n                          {new Date(period.paidAt).toLocaleString()}\n                        </span>\n                      )}\n                      \n                      {/* Show payment timestamp for finalized trades (no cancel button) */}\n                      {period.paid && canUnpayCoupon(period) && isTradeFinalized && (\n                        <span className=\"text-xs text-fd-text-muted\">\n                          {new Date(period.paidAt!).toLocaleString()}\n                        </span>\n                      )}\n                      \n                      {/* Show payment buttons for unpaid coupons */}\n                      {!period.paid && !isTradeFinalized && (\n                        <div className=\"flex gap-1 justify-center\">\n                          <button\n                            onClick={() => handlePayCoupon(period.id, true)}\n                            disabled={\n                              !canPayCoupon(period) || payingPeriodId === period.id || recalculating\n                            }\n                            title={\n                              !canPayCoupon(period)\n                                ? 'You must pay earlier coupons first'\n                                : 'Pay on the scheduled payment date'\n                            }\n                            className=\"px-2 py-1 text-xs bg-fd-green text-fd-dark rounded font-medium hover:bg-fd-green-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                          >\n                            {payingPeriodId === period.id ? (\n                              <span className=\"flex items-center gap-1\">\n                                <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-fd-dark\"></div>\n                              </span>\n                            ) : canPayCoupon(period) ? (\n                              'Pay On Time'\n                            ) : (\n                              ' Locked'\n                            )}\n                          </button>\n                          <button\n                            onClick={() => handlePayCoupon(period.id, false)}\n                            disabled={\n                              !canPayCoupon(period) || payingPeriodId === period.id || recalculating\n                            }\n                            title={\n                              !canPayCoupon(period)\n                                ? 'You must pay earlier coupons first'\n                                : 'Pay now (backdated)'\n                            }\n                            className=\"px-2 py-1 text-xs bg-blue-600 text-white rounded font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                          >\n                            {canPayCoupon(period) ? 'Pay Now' : ''}\n                          </button>\n                        </div>\n                      )}\n                      \n                      {/* Show locked message for finalized trades */}\n                      {!period.paid && isTradeFinalized && (\n                        <span className=\"text-xs text-red-400\">\n                           Trade {trade?.tradeStatus.replace(/_/g, ' ').toLowerCase()}\n                        </span>\n                      )}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          <div className=\"mt-3 text-xs text-fd-text-muted\">\n            <p>\n               <strong>Tip:</strong> Coupons must be paid sequentially by payment date. Only the\n              next unpaid coupon can be paid  earlier coupons must be settled before later ones.\n              <br /> <strong>Pay On Time:</strong> Marks the coupon as paid on its scheduled\n              payment date (no accrued premium).\n              <br /> <strong>Pay Now:</strong> Marks the coupon as paid today (shows accrued\n              premium if applicable).\n              <br /> <strong>Cancel:</strong> Reverts the most recently paid coupon (for demo\n              purposes only).\n              <br />\n              Paying or canceling a coupon will trigger a risk recalculation.\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* No coupon schedule message */}\n      {couponPeriods.length === 0 && data && !loading && (\n        <div className=\"bg-fd-darker p-4 rounded-md border border-dashed border-fd-border text-center\">\n          <svg\n            className=\"w-12 h-12 text-fd-text-muted mx-auto mb-3\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n            ></path>\n          </svg>\n          <p className=\"text-fd-text-muted mb-4\">\n            No coupon schedule generated for this trade yet.\n          </p>\n          {isTradeFinalized ? (\n            <p className=\"text-red-400 text-sm\">\n              Cannot generate schedule - trade is {trade?.tradeStatus.replace(/_/g, ' ').toLowerCase()}\n            </p>\n          ) : (\n            <button\n              onClick={handleGenerateSchedule}\n              disabled={generatingSchedule}\n              className=\"px-4 py-2 bg-fd-green text-fd-dark rounded font-medium hover:bg-fd-green-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              {generatingSchedule ? (\n                <span className=\"flex items-center gap-2\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-fd-dark\"></div>\n                  Generating Schedule...\n                </span>\n              ) : (\n                'Generate Coupon Schedule'\n              )}\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Cashflow Schedule - Hidden: Merged with Coupon Payment Schedule above */}\n      {/* hasCashflows && (\n        <div className=\"bg-fd-darker p-4 rounded-md border border-fd-border\">\n          <h3 className=\"text-fd-green font-semibold mb-3 flex items-center gap-2\">\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n            </svg>\n            Cashflow Schedule\n            <span className=\"ml-auto text-sm font-normal text-fd-text-muted\">\n              {data.cashflows!.length} payment{data.cashflows!.length !== 1 ? 's' : ''}\n            </span>\n          </h3>\n          \n          <CashflowScheduleTable cashflows={data.cashflows!} />\n        </div>\n      ) */}\n\n      {/* No data message */}\n      {!hasCashflows && !hasCDSMetrics && (\n        <div className=\"bg-fd-darker p-6 rounded-md border border-dashed border-fd-border text-center\">\n          <svg\n            className=\"w-12 h-12 text-fd-text-muted mx-auto mb-3\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n            ></path>\n          </svg>\n          <p className=\"text-fd-text-muted\">\n            Additional CDS metrics and cashflow schedule will appear here once available.\n          </p>\n          <p className=\"text-fd-text-muted text-sm mt-2\">\n            Currently showing NPV calculated by ORE.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default RiskMeasuresPanel;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\risk\\ScenarioRunModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\risk\\__tests__\\RegressionStatusBadge.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\services-status-modal\\ServicesStatusModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\settlement-view\\SettlementView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\top-bar\\TopBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\components\\trade-detail-modal\\TradeDetailModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'bondService' is defined but never used.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Bond' is defined but never used.","line":10,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":27},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":182,"column":12,"nodeType":"MemberExpression","endLine":182,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport { CDSTradeResponse, cdsTradeService } from '../../services/cdsTradeService';\nimport { CreditEvent, creditEventService } from '../../services/creditEventService';\nimport RiskMeasuresPanel from '../risk/RiskMeasuresPanel';\nimport MarketDataPanel from '../risk/MarketDataPanel';\nimport ScenarioRunModal from '../risk/ScenarioRunModal';\nimport RegressionStatusBadge from '../risk/RegressionStatusBadge';\nimport { fetchRiskMeasures } from '../../services/risk/riskService';\nimport { RiskMeasures } from '../../services/risk/riskTypes';\nimport { bondService, Bond } from '../../services/bondService';\nimport CreditEventModal, { CreateCreditEventRequest } from '../credit-event-modal/CreditEventModal';\nimport LifecycleTimeline from '../lifecycle/LifecycleTimeline';\nimport CashflowPanel from '../lifecycle/CashflowPanel';\n\ninterface TradeDetailModalProps {\n  isOpen: boolean;\n  trade: CDSTradeResponse | null;\n  onClose: () => void;\n  onTradeUpdated?: (updatedTrade: CDSTradeResponse) => void;\n  onTradesUpdated?: (affectedTradeIds?: number[]) => void;\n}\n\nconst TradeDetailModal: React.FC<TradeDetailModalProps> = ({ isOpen, trade, onClose, onTradeUpdated, onTradesUpdated }) => {\n  const [currentTrade, setCurrentTrade] = useState<CDSTradeResponse | null>(trade);\n  const [creditEvents, setCreditEvents] = useState<CreditEvent[]>([]);\n  const [loadingEvents, setLoadingEvents] = useState(false);\n  const [activeTab, setActiveTab] = useState<'details' | 'lifecycle' | 'cashflow' | 'events' | 'risk' | 'marketdata'>('details');\n  const [showScenarioModal, setShowScenarioModal] = useState(false);\n  const [riskMeasures, setRiskMeasures] = useState<RiskMeasures | null>(null);\n  const [loadingRisk, setLoadingRisk] = useState(false);\n  const [showCreditEventModal, setShowCreditEventModal] = useState(false);\n  const [recordingEvent, setRecordingEvent] = useState(false);\n  const [showSuccessNotification, setShowSuccessNotification] = useState(false);\n  const [successMessage, setSuccessMessage] = useState<string>('Credit event recorded successfully');\n\n  // Update currentTrade when trade prop changes\n  useEffect(() => {\n    setCurrentTrade(trade);\n  }, [trade]);\n\n  const loadCreditEvents = useCallback(async () => {\n    if (!currentTrade) return;\n    \n    setLoadingEvents(true);\n    try {\n      const events = await creditEventService.getCreditEventsForTrade(currentTrade.id);\n      setCreditEvents(events);\n    } catch (error) {\n      console.error('Failed to load credit events:', error);\n      setCreditEvents([]);\n    } finally {\n      setLoadingEvents(false);\n    }\n  }, [currentTrade]);\n\n  const loadRiskMeasures = useCallback(async () => {\n    if (!currentTrade) return;\n    \n    setLoadingRisk(true);\n    try {\n      const measures = await fetchRiskMeasures(currentTrade.id);\n      setRiskMeasures(measures);\n    } catch (error) {\n      console.error('Failed to load risk measures:', error);\n      setRiskMeasures(null);\n    } finally {\n      setLoadingRisk(false);\n    }\n  }, [currentTrade]);\n\n  const handleRecordCreditEvent = async (request: CreateCreditEventRequest) => {\n    if (!currentTrade) return;\n    \n    setRecordingEvent(true);\n    try {\n      const response = await creditEventService.recordCreditEvent(currentTrade.id, request);\n      \n      // Reload the trade to get updated status\n      const updatedTrade = await cdsTradeService.getTradeById(currentTrade.id);\n      setCurrentTrade(updatedTrade);\n      \n      // Notify parent component if callback provided\n      if (onTradeUpdated) {\n        onTradeUpdated(updatedTrade);\n      }\n      \n      // Notify parent about all affected trades (for UI refresh)\n      if (onTradesUpdated && response.affectedTradeIds && response.affectedTradeIds.length > 1) {\n        onTradesUpdated(response.affectedTradeIds);\n      }\n      \n      // Reload credit events after successful recording\n      await loadCreditEvents();\n      setShowCreditEventModal(false);\n      \n      // Show success notification with propagation info\n      const propagatedCount = response.affectedTradeIds.length - 1;\n      if (propagatedCount > 0) {\n        setSuccessMessage(\n          `This ${response.creditEvent.eventType} event has been propagated to ${propagatedCount} other active CDS contract(s) for the same reference entity. All affected trades have been settled.`\n        );\n      } else {\n        setSuccessMessage('Credit event recorded successfully');\n      }\n      \n      setShowSuccessNotification(true);\n      setTimeout(() => setShowSuccessNotification(false), 5000);\n    } catch (error: any) {\n      console.error('Failed to record credit event:', error);\n      alert('Failed to record credit event: ' + (error.message || 'Unknown error'));\n    } finally {\n      setRecordingEvent(false);\n    }\n  };\n\n  const handleTradeUpdated = async () => {\n    if (!currentTrade) return;\n    \n    try {\n      // Reload the trade to get updated status\n      const updatedTrade = await cdsTradeService.getTradeById(currentTrade.id);\n      setCurrentTrade(updatedTrade);\n      \n      // Notify parent component if callback provided\n      if (onTradeUpdated) {\n        onTradeUpdated(updatedTrade);\n      }\n      \n      // Notify parent to refresh the blotter with this trade ID\n      if (onTradesUpdated) {\n        onTradesUpdated([currentTrade.id]);\n      }\n    } catch (error) {\n      console.error('Failed to reload trade:', error);\n    }\n  };\n\n  useEffect(() => {\n    if (isOpen && currentTrade) {\n      loadCreditEvents();\n      // Load risk measures when opening modal or switching to risk/marketdata tabs\n      if (activeTab === 'risk' || activeTab === 'marketdata') {\n        loadRiskMeasures();\n      }\n    }\n  }, [isOpen, currentTrade, activeTab, loadCreditEvents, loadRiskMeasures]);\n\n  if (!isOpen || !currentTrade) return null;\n\n  const formatCurrency = (amount: number, currency: string) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: currency || 'USD'\n    }).format(amount);\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  const formatDateTime = (dateString: string) => {\n    return new Date(dateString).toLocaleString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const formatRestructuringClause = (clause: string) => {\n    const labels: { [key: string]: string } = {\n      'NO_RESTRUCTURING': 'No R',\n      'MODIFIED_RESTRUCTURING': 'Mod R',\n      'MODIFIED_MODIFIED_RESTRUCTURING': 'Mod Mod R',\n      'FULL_RESTRUCTURING': 'Full R'\n    };\n    return labels[clause] || clause.replace(/_/g, ' ');\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6 max-w-5xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n        {/* Header with tabs */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-8 h-8 bg-fd-green rounded-full flex items-center justify-center\">\n              <svg className=\"w-5 h-5 text-fd-dark\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n              </svg>\n            </div>\n            <h2 className=\"text-2xl font-bold text-fd-text\">CDS Trade Details</h2>\n          </div>\n          <button onClick={onClose} className=\"text-fd-text-muted hover:text-fd-text transition-colors\">\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n            </svg>\n          </button>\n        </div>\n        {/* Tab selector */}\n        <div className=\"flex space-x-4 border-b border-fd-border mb-6\">\n          {[\n            { key: 'details', label: 'Details' },\n            { key: 'lifecycle', label: 'Lifecycle' },\n            { key: 'cashflow', label: 'Cashflow' },\n            { key: 'events', label: 'Credit Events' },\n            { key: 'risk', label: 'Risk' },\n            { key: 'marketdata', label: 'Market Data' }\n          ].map(t => (\n            <button\n              key={t.key}\n              onClick={() => {\n                console.log(' Tab switch:', { from: activeTab, to: t.key });\n                setActiveTab(t.key as any);\n              }}\n              className={`pb-2 px-1 text-sm font-medium border-b-2 -mb-px transition-colors ${\n                activeTab === t.key ? 'border-fd-green text-fd-text' : 'border-transparent text-fd-text-muted hover:text-fd-text'\n              }`}\n            >{t.label}</button>\n          ))}\n        </div>\n        {activeTab === 'details' && (\n          <>\n            <div className=\"bg-fd-dark rounded-lg p-4 mb-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-fd-text-muted\">Trade ID:</span>\n                  <span className=\"text-fd-green font-mono font-semibold\">CDS-{currentTrade.id}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-fd-text-muted\">Created:</span>\n                  <span className=\"text-fd-text\">{formatDateTime(currentTrade.createdAt)}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-fd-text-muted\">Last Updated:</span>\n                  <span className=\"text-fd-text\">\n                    {currentTrade.updatedAt ? formatDateTime(currentTrade.updatedAt) : 'Never'}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n              {/* Trade Information */}\n              <div className=\"space-y-6\">\n                <h3 className=\"text-lg font-semibold text-fd-text border-b border-fd-border pb-2\">\n                  Trade Information\n                </h3>\n                \n                <div className=\"space-y-4\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Reference Entity:</span>\n                    <span className=\"text-fd-text font-medium\">{currentTrade.referenceEntity}</span>\n                  </div>\n                  {currentTrade.obligation && (\n                    <div className=\"bg-fd-dark rounded-lg p-3 space-y-2\">\n                      <div className=\"text-sm text-fd-text-muted mb-1\">Reference Obligation</div>\n                      <div className=\"space-y-1\">\n                        {currentTrade.obligation.isin && (\n                          <div className=\"flex justify-between text-sm\">\n                            <span className=\"text-fd-text-muted\">ISIN:</span>\n                            <span className=\"text-fd-green font-mono\">{currentTrade.obligation.isin}</span>\n                          </div>\n                        )}\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-fd-text-muted\">Issuer:</span>\n                          <span className=\"text-fd-text\">{currentTrade.obligation.issuer}</span>\n                        </div>\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-fd-text-muted\">Seniority:</span>\n                          <span className=\"text-fd-text\">{currentTrade.obligation.seniority}</span>\n                        </div>\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-fd-text-muted\">Coupon:</span>\n                          <span className=\"text-fd-text\">{(currentTrade.obligation.couponRate * 100).toFixed(3)}%</span>\n                        </div>\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-fd-text-muted\">Maturity:</span>\n                          <span className=\"text-fd-text\">{formatDate(currentTrade.obligation.maturityDate)}</span>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Counterparty:</span>\n                    <span className=\"text-fd-text font-medium\">{currentTrade.counterparty}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Direction:</span>\n                    <span className={`font-medium ${currentTrade.buySellProtection === 'BUY' ? 'text-blue-400' : 'text-orange-400'}`}>\n                      {currentTrade.buySellProtection === 'BUY' ? 'Buy Protection' : 'Sell Protection'}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Settlement Type:</span>\n                    <span className={`font-medium ${currentTrade.settlementType === 'CASH' ? 'text-fd-cyan' : 'text-fd-teal'}`}>\n                      {currentTrade.settlementType === 'CASH' ? 'Cash Settlement' : 'Physical Settlement'}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Notional Amount:</span>\n                    <span className=\"text-fd-text font-semibold text-lg\">\n                      {formatCurrency(currentTrade.notionalAmount, currentTrade.currency)}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Spread:</span>\n                    <span className=\"text-fd-text font-medium\">{currentTrade.spread} bps</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Currency:</span>\n                    <span className=\"text-fd-text font-medium\">{currentTrade.currency}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Status:</span>\n                    <span className=\"text-fd-green font-medium\">{currentTrade.tradeStatus.replace(/_/g, ' ')}</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Date Information */}\n              <div className=\"space-y-6\">\n                <h3 className=\"text-lg font-semibold text-fd-text border-b border-fd-border pb-2\">\n                  Date Information\n                </h3>\n                \n                <div className=\"space-y-4\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Trade Date:</span>\n                    <span className=\"text-fd-text\">{formatDate(currentTrade.tradeDate)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Effective Date:</span>\n                    <span className=\"text-fd-text\">{formatDate(currentTrade.effectiveDate)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Maturity Date:</span>\n                    <span className=\"text-fd-text\">{formatDate(currentTrade.maturityDate)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Accrual Start Date:</span>\n                    <span className=\"text-fd-text\">{formatDate(currentTrade.accrualStartDate)}</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Contract Terms */}\n              <div className=\"space-y-6\">\n                <h3 className=\"text-lg font-semibold text-fd-text border-b border-fd-border pb-2\">\n                  Contract Terms\n                </h3>\n                \n                <div className=\"space-y-4\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Premium Frequency:</span>\n                    <span className=\"text-fd-text\">{currentTrade.premiumFrequency.replace('_', ' ')}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Day Count Convention:</span>\n                    <span className=\"text-fd-text\">{currentTrade.dayCountConvention.replace('_', '/')}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-fd-text-muted\">Payment Calendar:</span>\n                    <span className=\"text-fd-text\">{currentTrade.paymentCalendar}</span>\n                  </div>\n                  {currentTrade.restructuringClause && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-fd-text-muted\">Restructuring Clause:</span>\n                      <span className=\"text-fd-text\">{formatRestructuringClause(currentTrade.restructuringClause)}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Additional Information */}\n              <div className=\"space-y-6\">\n                <h3 className=\"text-lg font-semibold text-fd-text border-b border-fd-border pb-2\">\n                  Additional Information\n                </h3>\n                \n                <div className=\"space-y-4\">\n                  <div className=\"bg-fd-dark rounded-lg p-4\">\n                    <div className=\"text-sm text-fd-text-muted mb-2\">Trade Identifier</div>\n                    <div className=\"font-mono text-fd-green text-lg\">CDS-{currentTrade.id}</div>\n                  </div>\n                  \n                  <div className=\"bg-fd-dark rounded-lg p-4\">\n                    <div className=\"text-sm text-fd-text-muted mb-2\">Risk Metrics</div>\n                    <div className=\"space-y-1\">\n                      <div className=\"text-sm\">\n                        <span className=\"text-fd-text-muted\">Mark-to-Market:</span>\n                        <span className=\"text-fd-text ml-2\">TBD</span>\n                      </div>\n                      <div className=\"text-sm\">\n                        <span className=\"text-fd-text-muted\">Credit Duration:</span>\n                        <span className=\"text-fd-text ml-2\">TBD</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </>\n        )}\n        {activeTab === 'lifecycle' && currentTrade && (\n          <LifecycleTimeline trade={currentTrade} onTradeUpdated={handleTradeUpdated} />\n        )}\n        {activeTab === 'cashflow' && currentTrade && (\n          <CashflowPanel trade={currentTrade} />\n        )}\n        {activeTab === 'events' && (\n          <div className=\"mt-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-fd-text border-b border-fd-border pb-2\">Credit Events</h3>\n              {currentTrade?.tradeStatus === 'ACTIVE' && (\n                <button\n                  onClick={() => setShowCreditEventModal(true)}\n                  className=\"px-4 py-2 bg-fd-green text-fd-dark font-medium rounded hover:bg-fd-green-hover transition-colors flex items-center gap-2\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"></path>\n                  </svg>\n                  Record Credit Event\n                </button>\n              )}\n            </div>\n            {loadingEvents ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-fd-green\"></div>\n                <span className=\"ml-3 text-fd-text-muted\">Loading credit events...</span>\n              </div>\n            ) : creditEvents.length === 0 ? (\n              <div className=\"bg-fd-dark rounded-lg p-6 text-center\">\n                <div className=\"w-12 h-12 bg-fd-border rounded-full flex items-center justify-center mx-auto mb-3\">\n                  <svg className=\"w-6 h-6 text-fd-text-muted\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n                  </svg>\n                </div>\n                <p className=\"text-fd-text-muted\">No credit events recorded for this trade</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {creditEvents.map((event) => (\n                  <div key={event.id} className={`bg-fd-dark rounded-lg p-4 border ${\n                    event.eventType === 'PAYOUT' ? 'border-fd-green' : 'border-fd-border'\n                  }`}>\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className={`w-10 h-10 rounded-full flex items-center justify-center ${\n                          event.eventType === 'PAYOUT' \n                            ? 'bg-fd-green/20' \n                            : 'bg-red-500/20'\n                        }`}>\n                          {event.eventType === 'PAYOUT' ? (\n                            <svg className=\"w-5 h-5 text-fd-green\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                            </svg>\n                          ) : (\n                            <svg className=\"w-5 h-5 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"></path>\n                            </svg>\n                          )}\n                        </div>\n                        <div>\n                          <h4 className={`font-medium ${\n                            event.eventType === 'PAYOUT' ? 'text-fd-green' : 'text-fd-text'\n                          }`}>{event.eventType.replace(/_/g, ' ')}</h4>\n                          <p className=\"text-fd-text-muted text-sm\">Event ID: {event.id}</p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-fd-text text-sm\">{formatDate(event.eventDate)}</div>\n                        <div className=\"text-fd-text-muted text-xs\">{formatDateTime(event.createdAt)}</div>\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3\">\n                      <div>\n                        <span className=\"text-fd-text-muted text-sm\">Notice Date:</span>\n                        <div className=\"text-fd-text\">{formatDate(event.noticeDate)}</div>\n                      </div>\n                      <div>\n                        <span className=\"text-fd-text-muted text-sm\">Settlement Method:</span>\n                        <div className=\"text-fd-text font-medium\">\n                          <span className={`inline-flex px-2 py-1 rounded text-xs font-medium ${\n                            event.settlementMethod === 'CASH' \n                              ? 'bg-green-500/20 text-green-400' \n                              : 'bg-blue-500/20 text-blue-400'\n                          }`}>\n                            {event.settlementMethod}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n\n                    {event.comments && (\n                      <div className=\"bg-fd-darker rounded p-3\">\n                        <span className=\"text-fd-text-muted text-sm\">Comments:</span>\n                        <p className=\"text-fd-text text-sm mt-1\">{event.comments}</p>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n        {activeTab === 'risk' && currentTrade && (\n          <div className=\"mt-4 space-y-6\" aria-labelledby=\"risk-panel-heading\">\n            <div className=\"flex items-center justify-between\">\n              <h3 id=\"risk-panel-heading\" className=\"text-lg font-semibold text-fd-text\">Risk Analytics</h3>\n              <div className=\"flex items-center gap-3\">\n                <RegressionStatusBadge status=\"UNKNOWN\" />\n                <button\n                  onClick={() => setShowScenarioModal(true)}\n                  className=\"px-3 py-1.5 bg-fd-green text-fd-dark rounded text-sm font-medium hover:bg-fd-green-hover\"\n                >Run Scenarios</button>\n              </div>\n            </div>\n            <RiskMeasuresPanel tradeId={currentTrade.id} trade={currentTrade} />\n          </div>\n        )}\n        {activeTab === 'marketdata' && currentTrade && (() => {\n          console.log(' Market Data tab active:', { \n            tradeId: currentTrade.id, \n            loadingRisk, \n            hasRiskMeasures: !!riskMeasures,\n            hasMarketSnapshot: !!riskMeasures?.marketDataSnapshot \n          });\n          return (\n            <div className=\"mt-4 space-y-6\">\n              {loadingRisk ? (\n                <div className=\"flex items-center justify-center py-8\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-fd-green\"></div>\n                  <span className=\"ml-3 text-fd-text-muted\">Loading market data snapshot...</span>\n                </div>\n              ) : (\n                <MarketDataPanel marketDataSnapshot={riskMeasures?.marketDataSnapshot} />\n              )}\n            </div>\n          );\n        })()}\n        <div className=\"flex justify-end space-x-4 mt-8 pt-4 border-t border-fd-border\">\n          <button onClick={onClose} className=\"px-6 py-2 bg-fd-green text-fd-dark font-medium rounded hover:bg-fd-green-hover transition-colors\">Close</button>\n        </div>\n      </div>\n      {currentTrade && (\n        <ScenarioRunModal\n          tradeId={currentTrade.id}\n          isOpen={showScenarioModal}\n          onClose={() => setShowScenarioModal(false)}\n        />\n      )}\n      {currentTrade && (\n        <CreditEventModal\n          isOpen={showCreditEventModal}\n          onClose={() => setShowCreditEventModal(false)}\n          onSubmit={handleRecordCreditEvent}\n          tradeId={currentTrade.id}\n          referenceEntity={currentTrade.referenceEntity}\n          isLoading={recordingEvent}\n        />\n      )}\n      \n      {/* Success Notification */}\n      {showSuccessNotification && (\n        <div className=\"fixed top-4 right-4 z-[60] animate-fade-in\">\n          <div className=\"bg-fd-dark border-2 border-fd-green rounded-lg shadow-lg p-4 flex items-start gap-3 min-w-[320px] max-w-[480px]\">\n            <div className=\"flex-shrink-0 mt-0.5\">\n              <svg className=\"w-6 h-6 text-fd-green\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n              </svg>\n            </div>\n            <div className=\"flex-1\">\n              <h4 className=\"text-fd-text font-semibold mb-1\">Success!</h4>\n              <p className=\"text-fd-text-muted text-sm leading-relaxed\">{successMessage}</p>\n            </div>\n            <button\n              onClick={() => setShowSuccessNotification(false)}\n              className=\"flex-shrink-0 text-fd-text-muted hover:text-fd-text transition-colors\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n              </svg>\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TradeDetailModal;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\config\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\data\\referenceData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\data\\simulationGlossary.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\hooks\\useSimulationPolling.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\basketService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\bondService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\cdsTradeService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\creditEventService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\lifecycleService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\novationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\portfolioService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\risk\\riskService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\risk\\riskTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\services\\simulationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\setupTests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\types\\basket.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\types\\lifecycle.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\AyodeleOladeji\\Documents\\dev\\credit-default-swap\\frontend\\src\\utils\\formatters.ts","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":183,"column":64,"nodeType":"MemberExpression","endLine":183,"endColumn":72}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Utility functions for formatting numbers, currencies, and other data types\n */\n\n/**\n * Format a number as currency (USD by default)\n */\nexport const formatCurrency = (\n  value: number | string | null | undefined,\n  currency: string = 'USD',\n  locale: string = 'en-US'\n): string => {\n  if (value === null || value === undefined || value === '') {\n    return '$0.00';\n  }\n\n  const numValue = typeof value === 'string' ? parseFloat(value) : value;\n  \n  if (isNaN(numValue)) {\n    return '$0.00';\n  }\n\n  return new Intl.NumberFormat(locale, {\n    style: 'currency',\n    currency: currency,\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  }).format(numValue);\n};\n\n/**\n * Format a number with specified decimal places\n */\nexport const formatNumber = (\n  value: number | string | null | undefined,\n  decimals: number = 2,\n  locale: string = 'en-US'\n): string => {\n  if (value === null || value === undefined || value === '') {\n    return '0';\n  }\n\n  const numValue = typeof value === 'string' ? parseFloat(value) : value;\n  \n  if (isNaN(numValue)) {\n    return '0';\n  }\n\n  return new Intl.NumberFormat(locale, {\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals\n  }).format(numValue);\n};\n\n/**\n * Format a number as percentage\n */\nexport const formatPercentage = (\n  value: number | string | null | undefined,\n  decimals: number = 2\n): string => {\n  if (value === null || value === undefined || value === '') {\n    return '0.00%';\n  }\n\n  const numValue = typeof value === 'string' ? parseFloat(value) : value;\n  \n  if (isNaN(numValue)) {\n    return '0.00%';\n  }\n\n  return `${formatNumber(numValue, decimals)}%`;\n};\n\n/**\n * Format large numbers with K, M, B suffixes\n */\nexport const formatCompactNumber = (\n  value: number | string | null | undefined,\n  decimals: number = 1\n): string => {\n  if (value === null || value === undefined || value === '') {\n    return '0';\n  }\n\n  const numValue = typeof value === 'string' ? parseFloat(value) : value;\n  \n  if (isNaN(numValue)) {\n    return '0';\n  }\n\n  const abs = Math.abs(numValue);\n  const sign = numValue < 0 ? '-' : '';\n  \n  if (abs >= 1e9) {\n    return `${sign}${formatNumber(abs / 1e9, decimals)}B`;\n  } else if (abs >= 1e6) {\n    return `${sign}${formatNumber(abs / 1e6, decimals)}M`;\n  } else if (abs >= 1e3) {\n    return `${sign}${formatNumber(abs / 1e3, decimals)}K`;\n  } else {\n    return `${sign}${formatNumber(abs, decimals)}`;\n  }\n};\n\n/**\n * Format a date to a readable string\n */\nexport const formatDate = (\n  date: Date | string | null | undefined,\n  format: 'short' | 'medium' | 'long' = 'medium'\n): string => {\n  if (!date) {\n    return '-';\n  }\n\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n  \n  if (isNaN(dateObj.getTime())) {\n    return '-';\n  }\n\n  const options: Intl.DateTimeFormatOptions = {\n    year: 'numeric',\n    month: format === 'short' ? 'numeric' : format === 'medium' ? 'short' : 'long',\n    day: 'numeric'\n  };\n\n  if (format === 'long') {\n    options.weekday = 'long';\n  }\n\n  return dateObj.toLocaleDateString('en-US', options);\n};\n\n/**\n * Format a date and time to a readable string\n */\nexport const formatDateTime = (\n  date: Date | string | null | undefined,\n  includeSeconds: boolean = false\n): string => {\n  if (!date) {\n    return '-';\n  }\n\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n  \n  if (isNaN(dateObj.getTime())) {\n    return '-';\n  }\n\n  const dateOptions: Intl.DateTimeFormatOptions = {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  };\n\n  const timeOptions: Intl.DateTimeFormatOptions = {\n    hour: '2-digit',\n    minute: '2-digit',\n    ...(includeSeconds && { second: '2-digit' })\n  };\n\n  const datePart = dateObj.toLocaleDateString('en-US', dateOptions);\n  const timePart = dateObj.toLocaleTimeString('en-US', timeOptions);\n\n  return `${datePart} ${timePart}`;\n};\n\n/**\n * Format file size in bytes to human readable format\n */\nexport const formatFileSize = (bytes: number | null | undefined): string => {\n  if (!bytes || bytes === 0) {\n    return '0 Bytes';\n  }\n\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(2))} ${sizes[i]}`;\n};\n\n/**\n * Format basis points to percentage\n */\nexport const formatBasisPoints = (\n  bps: number | string | null | undefined,\n  decimals: number = 2\n): string => {\n  if (bps === null || bps === undefined || bps === '') {\n    return '0.00%';\n  }\n\n  const numValue = typeof bps === 'string' ? parseFloat(bps) : bps;\n  \n  if (isNaN(numValue)) {\n    return '0.00%';\n  }\n\n  const percentage = numValue / 10000; // Convert basis points to percentage\n  return formatPercentage(percentage * 100, decimals);\n};\n\n/**\n * Truncate text with ellipsis\n */\nexport const truncateText = (\n  text: string | null | undefined,\n  maxLength: number\n): string => {\n  if (!text) {\n    return '';\n  }\n\n  if (text.length <= maxLength) {\n    return text;\n  }\n\n  return `${text.substring(0, maxLength)}...`;\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]}]