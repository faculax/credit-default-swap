/*! For license information please see main.7f1f3b1e.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,r)=>{e.exports=r(202)},153:(e,t,r)=>{var s=r(43),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,d=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,r){var s,a={},o=null,c=null;for(s in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(c=t.ref),t)l.call(t,s)&&!i.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:n,type:e,key:o,ref:c,props:a,_owner:d.current}}t.Fragment=a,t.jsx=o,t.jsxs=o},202:(e,t)=>{var r=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),m=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,p={};function b(e,t,r){this.props=e,this.context=t,this.refs=p,this.updater=r||f}function g(){}function v(e,t,r){this.props=e,this.context=t,this.refs=p,this.updater=r||f}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=b.prototype;var j=v.prototype=new g;j.constructor=v,h(j,b.prototype),j.isPureReactComponent=!0;var N=Array.isArray,y=Object.prototype.hasOwnProperty,w={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,s){var n,a={},l=null,d=null;if(null!=t)for(n in void 0!==t.ref&&(d=t.ref),void 0!==t.key&&(l=""+t.key),t)y.call(t,n)&&!k.hasOwnProperty(n)&&(a[n]=t[n]);var i=arguments.length-2;if(1===i)a.children=s;else if(1<i){for(var o=Array(i),c=0;c<i;c++)o[c]=arguments[c+2];a.children=o}if(e&&e.defaultProps)for(n in i=e.defaultProps)void 0===a[n]&&(a[n]=i[n]);return{$$typeof:r,type:e,key:l,ref:d,props:a,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var E=/\/+/g;function D(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function L(e,t,n,a,l){var d=typeof e;"undefined"!==d&&"boolean"!==d||(e=null);var i=!1;if(null===e)i=!0;else switch(d){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case r:case s:i=!0}}if(i)return l=l(i=e),e=""===a?"."+D(i,0):a,N(l)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),L(l,t,n,"",function(e){return e})):null!=l&&(C(l)&&(l=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(l,n+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(E,"$&/")+"/")+e)),t.push(l)),1;if(i=0,a=""===a?".":a+":",N(e))for(var o=0;o<e.length;o++){var c=a+D(d=e[o],o);i+=L(d,t,n,c,l)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),o=0;!(d=e.next()).done;)i+=L(d=d.value,t,n,c=a+D(d,o++),l);else if("object"===d)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function T(e,t,r){if(null==e)return e;var s=[],n=0;return L(e,s,"","",function(e){return t.call(r,e,n++)}),s}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},I={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:w};function A(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,r){T(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=n,t.Profiler=l,t.PureComponent=v,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=A,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=h({},e.props),a=e.key,l=e.ref,d=e._owner;if(null!=t){if(void 0!==t.ref&&(l=t.ref,d=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(o in t)y.call(t,o)&&!k.hasOwnProperty(o)&&(n[o]=void 0===t[o]&&void 0!==i?i[o]:t[o])}var o=arguments.length-2;if(1===o)n.children=s;else if(1<o){i=Array(o);for(var c=0;c<o;c++)i[c]=arguments[c+2];n.children=i}return{$$typeof:r,type:e.type,key:a,ref:l,props:n,_owner:d}},t.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:d,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:o,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:x,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=A,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,r){return P.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,r){return P.current.useReducer(e,t,r)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return P.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var s=r-1>>>1,n=e[s];if(!(0<a(n,t)))break e;e[s]=t,e[r]=n,r=s}}function s(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var s=0,n=e.length,l=n>>>1;s<l;){var d=2*(s+1)-1,i=e[d],o=d+1,c=e[o];if(0>a(i,r))o<n&&0>a(c,i)?(e[s]=c,e[o]=r,s=o):(e[s]=i,e[d]=r,s=d);else{if(!(o<n&&0>a(c,r)))break e;e[s]=c,e[o]=r,s=o}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var d=Date,i=d.now();t.unstable_now=function(){return d.now()-i}}var o=[],c=[],u=1,x=null,m=3,f=!1,h=!1,p=!1,b="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function j(e){for(var t=s(c);null!==t;){if(null===t.callback)n(c);else{if(!(t.startTime<=e))break;n(c),t.sortIndex=t.expirationTime,r(o,t)}t=s(c)}}function N(e){if(p=!1,j(e),!h)if(null!==s(o))h=!0,R(y);else{var t=s(c);null!==t&&I(N,t.startTime-e)}}function y(e,r){h=!1,p&&(p=!1,g(C),C=-1),f=!0;var a=m;try{for(j(r),x=s(o);null!==x&&(!(x.expirationTime>r)||e&&!L());){var l=x.callback;if("function"===typeof l){x.callback=null,m=x.priorityLevel;var d=l(x.expirationTime<=r);r=t.unstable_now(),"function"===typeof d?x.callback=d:x===s(o)&&n(o),j(r)}else n(o);x=s(o)}if(null!==x)var i=!0;else{var u=s(c);null!==u&&I(N,u.startTime-r),i=!1}return i}finally{x=null,m=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,S=null,C=-1,E=5,D=-1;function L(){return!(t.unstable_now()-D<E)}function T(){if(null!==S){var e=t.unstable_now();D=e;var r=!0;try{r=S(!0,e)}finally{r?w():(k=!1,S=null)}}else k=!1}if("function"===typeof v)w=function(){v(T)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,P=M.port2;M.port1.onmessage=T,w=function(){P.postMessage(null)}}else w=function(){b(T,0)};function R(e){S=e,k||(k=!0,w())}function I(e,r){C=b(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||f||(h=!0,R(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(o)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,n,a){var l=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?l+a:l:a=l,e){case 1:var d=-1;break;case 2:d=250;break;case 5:d=1073741823;break;case 4:d=1e4;break;default:d=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:a,expirationTime:d=a+d,sortIndex:-1},a>l?(e.sortIndex=a,r(c,e),null===s(o)&&e===s(c)&&(p?(g(C),C=-1):p=!0,I(N,a-l))):(e.sortIndex=d,r(o,e),h||f||(h=!0,R(y))),e},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},579:(e,t,r)=>{e.exports=r(153)},730:(e,t,r)=>{var s=r(43),n=r(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,d={};function i(e,t){o(e,t),o(e+"Capture",t)}function o(e,t){for(d[e]=t,e=0;e<t.length;e++)l.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},f={};function h(e,t,r,s,n,a,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){p[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];p[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){p[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){p[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){p[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){p[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){p[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){p[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){p[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function v(e,t,r,s){var n=p.hasOwnProperty(t)?p[t]:null;(null!==n?0!==n.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,s){if(null===t||"undefined"===typeof t||function(e,t,r,s){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,s))return!0;if(s)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,n,s)&&(r=null),s||null===n?function(e){return!!u.call(f,e)||!u.call(m,e)&&(x.test(e)?f[e]=!0:(m[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=null===r?3!==n.type&&"":r:(t=n.attributeName,s=n.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(n=n.type)||4===n&&!0===r?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(b,g);p[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(b,g);p[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(b,g);p[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){p[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),p.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){p[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var j=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),y=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var F,U=Object.assign;function _(e){if(void 0===F)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var O=!1;function B(e,t){if(!e||O)return"";O=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(o){var s=o}Reflect.construct(e,[],t)}else{try{t.call()}catch(o){s=o}e.call(t.prototype)}else{try{throw Error()}catch(o){s=o}e()}}catch(o){if(o&&s&&"string"===typeof o.stack){for(var n=o.stack.split("\n"),a=s.stack.split("\n"),l=n.length-1,d=a.length-1;1<=l&&0<=d&&n[l]!==a[d];)d--;for(;1<=l&&0<=d;l--,d--)if(n[l]!==a[d]){if(1!==l||1!==d)do{if(l--,0>--d||n[l]!==a[d]){var i="\n"+n[l].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}}while(1<=l&&0<=d);break}}}finally{O=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?_(e):""}function $(e){switch(e.tag){case 5:return _(e.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case y:return"Portal";case S:return"Profiler";case k:return"StrictMode";case L:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case D:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(r){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var n=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){s=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=W(e)?e.checked?"true":"false":e.value),(e=s)!==r&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var r=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function K(e,t){var r=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;r=H(null!=t.value?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function X(e,t){J(e,t);var r=H(t.value),s=t.type;if(null!=r)"number"===s?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&q(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,s){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+H(r),t=null,n=0;n<e.length;n++){if(e[n].value===r)return e[n].selected=!0,void(s&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(te(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:H(r)}}function ae(e,t){var r=H(t.value),s=H(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=s&&(e.defaultValue=""+s)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ie(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var oe,ce,ue=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((oe=oe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=oe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function xe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function he(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function pe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var s=0===r.indexOf("--"),n=he(r,t[r],s);"float"===r&&(r="cssFloat"),s?e.setProperty(r,n):e[r]=n}}Object.keys(me).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var be=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(be[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var je=null;function Ne(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ye=null,we=null,ke=null;function Se(e){if(e=vn(e)){if("function"!==typeof ye)throw Error(a(280));var t=e.stateNode;t&&(t=Nn(t),ye(e.stateNode,e.type,t))}}function Ce(e){we?ke?ke.push(e):ke=[e]:we=e}function Ee(){if(we){var e=we,t=ke;if(ke=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function De(e,t){return e(t)}function Le(){}var Te=!1;function Me(e,t,r){if(Te)return e(t,r);Te=!0;try{return De(e,t,r)}finally{Te=!1,(null!==we||null!==ke)&&(Le(),Ee())}}function Pe(e,t){var r=e.stateNode;if(null===r)return null;var s=Nn(r);if(null===s)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}var Re=!1;if(c)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ce){Re=!1}function Ae(e,t,r,s,n,a,l,d,i){var o=Array.prototype.slice.call(arguments,3);try{t.apply(r,o)}catch(c){this.onError(c)}}var Fe=!1,Ue=null,_e=!1,Oe=null,Be={onError:function(e){Fe=!0,Ue=e}};function $e(e,t,r,s,n,a,l,d,i){Fe=!1,Ue=null,Ae.apply(Be,arguments)}function ze(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,s=t;;){var n=r.return;if(null===n)break;var l=n.alternate;if(null===l){if(null!==(s=n.return)){r=s;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===r)return He(n),e;if(l===s)return He(n),t;l=l.sibling}throw Error(a(188))}if(r.return!==s.return)r=n,s=l;else{for(var d=!1,i=n.child;i;){if(i===r){d=!0,r=n,s=l;break}if(i===s){d=!0,s=n,r=l;break}i=i.sibling}if(!d){for(i=l.child;i;){if(i===r){d=!0,r=l,s=n;break}if(i===s){d=!0,s=l,r=n;break}i=i.sibling}if(!d)throw Error(a(189))}}if(r.alternate!==s)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ye=n.unstable_scheduleCallback,qe=n.unstable_cancelCallback,Qe=n.unstable_shouldYield,Ke=n.unstable_requestPaint,Je=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,Ze=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,rt=n.unstable_LowPriority,st=n.unstable_IdlePriority,nt=null,at=null;var lt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(dt(e)/it|0)|0},dt=Math.log,it=Math.LN2;var ot=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xt(e,t){var r=e.pendingLanes;if(0===r)return 0;var s=0,n=e.suspendedLanes,a=e.pingedLanes,l=268435455&r;if(0!==l){var d=l&~n;0!==d?s=ut(d):0!==(a&=l)&&(s=ut(a))}else 0!==(l=r&~n)?s=ut(l):0!==a&&(s=ut(a));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&n)&&((n=s&-s)>=(a=t&-t)||16===n&&0!==(4194240&a)))return t;if(0!==(4&s)&&(s|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)n=1<<(r=31-lt(t)),s|=e[r],t&=~n;return s}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=ot;return 0===(4194240&(ot<<=1))&&(ot=64),e}function pt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-lt(t)]=r}function gt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-lt(r),n=1<<s;n&t|e[s]&t&&(e[s]|=t),r&=~n}}var vt=0;function jt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Nt,yt,wt,kt,St,Ct=!1,Et=[],Dt=null,Lt=null,Tt=null,Mt=new Map,Pt=new Map,Rt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function At(e,t){switch(e){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Ft(e,t,r,s,n,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[n]},null!==t&&(null!==(t=vn(t))&&yt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Ut(e){var t=gn(e.target);if(null!==t){var r=ze(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ve(r)))return e.blockedOn=t,void St(e.priority,function(){wt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function _t(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=vn(r))&&yt(t),e.blockedOn=r,!1;var s=new(r=e.nativeEvent).constructor(r.type,r);je=s,r.target.dispatchEvent(s),je=null,t.shift()}return!0}function Ot(e,t,r){_t(e)&&r.delete(t)}function Bt(){Ct=!1,null!==Dt&&_t(Dt)&&(Dt=null),null!==Lt&&_t(Lt)&&(Lt=null),null!==Tt&&_t(Tt)&&(Tt=null),Mt.forEach(Ot),Pt.forEach(Ot)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return $t(t,e)}if(0<Et.length){$t(Et[0],e);for(var r=1;r<Et.length;r++){var s=Et[r];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==Dt&&$t(Dt,e),null!==Lt&&$t(Lt,e),null!==Tt&&$t(Tt,e),Mt.forEach(t),Pt.forEach(t),r=0;r<Rt.length;r++)(s=Rt[r]).blockedOn===e&&(s.blockedOn=null);for(;0<Rt.length&&null===(r=Rt[0]).blockedOn;)Ut(r),null===r.blockedOn&&Rt.shift()}var Vt=j.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,r,s){var n=vt,a=Vt.transition;Vt.transition=null;try{vt=1,Yt(e,t,r,s)}finally{vt=n,Vt.transition=a}}function Gt(e,t,r,s){var n=vt,a=Vt.transition;Vt.transition=null;try{vt=4,Yt(e,t,r,s)}finally{vt=n,Vt.transition=a}}function Yt(e,t,r,s){if(Ht){var n=Qt(e,t,r,s);if(null===n)Vs(e,t,s,qt,r),At(e,s);else if(function(e,t,r,s,n){switch(t){case"focusin":return Dt=Ft(Dt,e,t,r,s,n),!0;case"dragenter":return Lt=Ft(Lt,e,t,r,s,n),!0;case"mouseover":return Tt=Ft(Tt,e,t,r,s,n),!0;case"pointerover":var a=n.pointerId;return Mt.set(a,Ft(Mt.get(a)||null,e,t,r,s,n)),!0;case"gotpointercapture":return a=n.pointerId,Pt.set(a,Ft(Pt.get(a)||null,e,t,r,s,n)),!0}return!1}(n,e,t,r,s))s.stopPropagation();else if(At(e,s),4&t&&-1<It.indexOf(e)){for(;null!==n;){var a=vn(n);if(null!==a&&Nt(a),null===(a=Qt(e,t,r,s))&&Vs(e,t,s,qt,r),a===n)break;n=a}null!==n&&s.stopPropagation()}else Vs(e,t,s,null,r)}}var qt=null;function Qt(e,t,r,s){if(qt=null,null!==(e=gn(e=Ne(s))))if(null===(t=ze(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Xt,s=r.length,n="value"in Jt?Jt.value:Jt.textContent,a=n.length;for(e=0;e<s&&r[e]===n[e];e++);var l=s-e;for(t=1;t<=l&&r[s-t]===n[a-t];t++);return Zt=n.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function sr(){return!1}function nr(e){function t(t,r,s,n,a){for(var l in this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=n,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(n):n[l]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?rr:sr,this.isPropagationStopped=sr,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ar,lr,dr,ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},or=nr(ir),cr=U({},ir,{view:0,detail:0}),ur=nr(cr),xr=U({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dr&&(dr&&"mousemove"===e.type?(ar=e.screenX-dr.screenX,lr=e.screenY-dr.screenY):lr=ar=0,dr=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:lr}}),mr=nr(xr),fr=nr(U({},xr,{dataTransfer:0})),hr=nr(U({},cr,{relatedTarget:0})),pr=nr(U({},ir,{animationName:0,elapsedTime:0,pseudoElement:0})),br=U({},ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gr=nr(br),vr=nr(U({},ir,{data:0})),jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=yr[e])&&!!t[e]}function kr(){return wr}var Sr=U({},cr,{key:function(e){if(e.key){var t=jr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cr=nr(Sr),Er=nr(U({},xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dr=nr(U({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Lr=nr(U({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=U({},xr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mr=nr(Tr),Pr=[9,13,27,32],Rr=c&&"CompositionEvent"in window,Ir=null;c&&"documentMode"in document&&(Ir=document.documentMode);var Ar=c&&"TextEvent"in window&&!Ir,Fr=c&&(!Rr||Ir&&8<Ir&&11>=Ir),Ur=String.fromCharCode(32),_r=!1;function Or(e,t){switch(e){case"keyup":return-1!==Pr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Br(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var $r=!1;var zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zr[e.type]:"textarea"===t}function Hr(e,t,r,s){Ce(s),0<(t=Ws(t,"onChange")).length&&(r=new or("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Wr=null,Gr=null;function Yr(e){Us(e,0)}function qr(e){if(Y(jn(e)))return e}function Qr(e,t){if("change"===e)return t}var Kr=!1;if(c){var Jr;if(c){var Xr="oninput"in document;if(!Xr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Xr="function"===typeof Zr.oninput}Jr=Xr}else Jr=!1;Kr=Jr&&(!document.documentMode||9<document.documentMode)}function es(){Wr&&(Wr.detachEvent("onpropertychange",ts),Gr=Wr=null)}function ts(e){if("value"===e.propertyName&&qr(Gr)){var t=[];Hr(t,Gr,e,Ne(e)),Me(Yr,t)}}function rs(e,t,r){"focusin"===e?(es(),Gr=r,(Wr=t).attachEvent("onpropertychange",ts)):"focusout"===e&&es()}function ss(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qr(Gr)}function ns(e,t){if("click"===e)return qr(t)}function as(e,t){if("input"===e||"change"===e)return qr(t)}var ls="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ds(e,t){if(ls(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!u.call(t,n)||!ls(e[n],t[n]))return!1}return!0}function is(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function os(e,t){var r,s=is(e);for(e=0;s;){if(3===s.nodeType){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=is(s)}}function cs(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cs(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function us(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(s){r=!1}if(!r)break;t=q((e=t.contentWindow).document)}return t}function xs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ms(e){var t=us(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&cs(r.ownerDocument.documentElement,r)){if(null!==s&&xs(r))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=r.textContent.length,a=Math.min(s.start,n);s=void 0===s.end?a:Math.min(s.end,n),!e.extend&&a>s&&(n=s,s=a,a=n),n=os(r,a);var l=os(r,s);n&&l&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fs=c&&"documentMode"in document&&11>=document.documentMode,hs=null,ps=null,bs=null,gs=!1;function vs(e,t,r){var s=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;gs||null==hs||hs!==q(s)||("selectionStart"in(s=hs)&&xs(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},bs&&ds(bs,s)||(bs=s,0<(s=Ws(ps,"onSelect")).length&&(t=new or("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=hs)))}function js(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ns={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionend:js("Transition","TransitionEnd")},ys={},ws={};function ks(e){if(ys[e])return ys[e];if(!Ns[e])return e;var t,r=Ns[e];for(t in r)if(r.hasOwnProperty(t)&&t in ws)return ys[e]=r[t];return e}c&&(ws=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);var Ss=ks("animationend"),Cs=ks("animationiteration"),Es=ks("animationstart"),Ds=ks("transitionend"),Ls=new Map,Ts="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(e,t){Ls.set(e,t),i(t,[e])}for(var Ps=0;Ps<Ts.length;Ps++){var Rs=Ts[Ps];Ms(Rs.toLowerCase(),"on"+(Rs[0].toUpperCase()+Rs.slice(1)))}Ms(Ss,"onAnimationEnd"),Ms(Cs,"onAnimationIteration"),Ms(Es,"onAnimationStart"),Ms("dblclick","onDoubleClick"),Ms("focusin","onFocus"),Ms("focusout","onBlur"),Ms(Ds,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),As=new Set("cancel close invalid load scroll toggle".split(" ").concat(Is));function Fs(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,s,n,l,d,i,o){if($e.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var c=Ue;Fe=!1,Ue=null,_e||(_e=!0,Oe=c)}}(s,t,void 0,e),e.currentTarget=null}function Us(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var l=s.length-1;0<=l;l--){var d=s[l],i=d.instance,o=d.currentTarget;if(d=d.listener,i!==a&&n.isPropagationStopped())break e;Fs(n,d,o),a=i}else for(l=0;l<s.length;l++){if(i=(d=s[l]).instance,o=d.currentTarget,d=d.listener,i!==a&&n.isPropagationStopped())break e;Fs(n,d,o),a=i}}}if(_e)throw e=Oe,_e=!1,Oe=null,e}function _s(e,t){var r=t[hn];void 0===r&&(r=t[hn]=new Set);var s=e+"__bubble";r.has(s)||(zs(t,e,2,!1),r.add(s))}function Os(e,t,r){var s=0;t&&(s|=4),zs(r,e,s,t)}var Bs="_reactListening"+Math.random().toString(36).slice(2);function $s(e){if(!e[Bs]){e[Bs]=!0,l.forEach(function(t){"selectionchange"!==t&&(As.has(t)||Os(t,!1,e),Os(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bs]||(t[Bs]=!0,Os("selectionchange",!1,t))}}function zs(e,t,r,s){switch(Kt(t)){case 1:var n=Wt;break;case 4:n=Gt;break;default:n=Yt}r=n.bind(null,t,r,e),n=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),s?void 0!==n?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):void 0!==n?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Vs(e,t,r,s,n){var a=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var l=s.tag;if(3===l||4===l){var d=s.stateNode.containerInfo;if(d===n||8===d.nodeType&&d.parentNode===n)break;if(4===l)for(l=s.return;null!==l;){var i=l.tag;if((3===i||4===i)&&((i=l.stateNode.containerInfo)===n||8===i.nodeType&&i.parentNode===n))return;l=l.return}for(;null!==d;){if(null===(l=gn(d)))return;if(5===(i=l.tag)||6===i){s=a=l;continue e}d=d.parentNode}}s=s.return}Me(function(){var s=a,n=Ne(r),l=[];e:{var d=Ls.get(e);if(void 0!==d){var i=or,o=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":i=Cr;break;case"focusin":o="focus",i=hr;break;case"focusout":o="blur",i=hr;break;case"beforeblur":case"afterblur":i=hr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i=Dr;break;case Ss:case Cs:case Es:i=pr;break;case Ds:i=Lr;break;case"scroll":i=ur;break;case"wheel":i=Mr;break;case"copy":case"cut":case"paste":i=gr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i=Er}var c=0!==(4&t),u=!c&&"scroll"===e,x=c?null!==d?d+"Capture":null:d;c=[];for(var m,f=s;null!==f;){var h=(m=f).stateNode;if(5===m.tag&&null!==h&&(m=h,null!==x&&(null!=(h=Pe(f,x))&&c.push(Hs(f,h,m)))),u)break;f=f.return}0<c.length&&(d=new i(d,o,null,r,n),l.push({event:d,listeners:c}))}}if(0===(7&t)){if(i="mouseout"===e||"pointerout"===e,(!(d="mouseover"===e||"pointerover"===e)||r===je||!(o=r.relatedTarget||r.fromElement)||!gn(o)&&!o[fn])&&(i||d)&&(d=n.window===n?n:(d=n.ownerDocument)?d.defaultView||d.parentWindow:window,i?(i=s,null!==(o=(o=r.relatedTarget||r.toElement)?gn(o):null)&&(o!==(u=ze(o))||5!==o.tag&&6!==o.tag)&&(o=null)):(i=null,o=s),i!==o)){if(c=mr,h="onMouseLeave",x="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Er,h="onPointerLeave",x="onPointerEnter",f="pointer"),u=null==i?d:jn(i),m=null==o?d:jn(o),(d=new c(h,f+"leave",i,r,n)).target=u,d.relatedTarget=m,h=null,gn(n)===s&&((c=new c(x,f+"enter",o,r,n)).target=m,c.relatedTarget=u,h=c),u=h,i&&o)e:{for(x=o,f=0,m=c=i;m;m=Gs(m))f++;for(m=0,h=x;h;h=Gs(h))m++;for(;0<f-m;)c=Gs(c),f--;for(;0<m-f;)x=Gs(x),m--;for(;f--;){if(c===x||null!==x&&c===x.alternate)break e;c=Gs(c),x=Gs(x)}c=null}else c=null;null!==i&&Ys(l,d,i,c,!1),null!==o&&null!==u&&Ys(l,u,o,c,!0)}if("select"===(i=(d=s?jn(s):window).nodeName&&d.nodeName.toLowerCase())||"input"===i&&"file"===d.type)var p=Qr;else if(Vr(d))if(Kr)p=as;else{p=ss;var b=rs}else(i=d.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===d.type||"radio"===d.type)&&(p=ns);switch(p&&(p=p(e,s))?Hr(l,p,r,n):(b&&b(e,d,s),"focusout"===e&&(b=d._wrapperState)&&b.controlled&&"number"===d.type&&ee(d,"number",d.value)),b=s?jn(s):window,e){case"focusin":(Vr(b)||"true"===b.contentEditable)&&(hs=b,ps=s,bs=null);break;case"focusout":bs=ps=hs=null;break;case"mousedown":gs=!0;break;case"contextmenu":case"mouseup":case"dragend":gs=!1,vs(l,r,n);break;case"selectionchange":if(fs)break;case"keydown":case"keyup":vs(l,r,n)}var g;if(Rr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else $r?Or(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&(Fr&&"ko"!==r.locale&&($r||"onCompositionStart"!==v?"onCompositionEnd"===v&&$r&&(g=er()):(Xt="value"in(Jt=n)?Jt.value:Jt.textContent,$r=!0)),0<(b=Ws(s,v)).length&&(v=new vr(v,e,null,r,n),l.push({event:v,listeners:b}),g?v.data=g:null!==(g=Br(r))&&(v.data=g))),(g=Ar?function(e,t){switch(e){case"compositionend":return Br(t);case"keypress":return 32!==t.which?null:(_r=!0,Ur);case"textInput":return(e=t.data)===Ur&&_r?null:e;default:return null}}(e,r):function(e,t){if($r)return"compositionend"===e||!Rr&&Or(e,t)?(e=er(),Zt=Xt=Jt=null,$r=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(s=Ws(s,"onBeforeInput")).length&&(n=new vr("onBeforeInput","beforeinput",null,r,n),l.push({event:n,listeners:s}),n.data=g))}Us(l,t)})}function Hs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ws(e,t){for(var r=t+"Capture",s=[];null!==e;){var n=e,a=n.stateNode;5===n.tag&&null!==a&&(n=a,null!=(a=Pe(e,r))&&s.unshift(Hs(e,a,n)),null!=(a=Pe(e,t))&&s.push(Hs(e,a,n))),e=e.return}return s}function Gs(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ys(e,t,r,s,n){for(var a=t._reactName,l=[];null!==r&&r!==s;){var d=r,i=d.alternate,o=d.stateNode;if(null!==i&&i===s)break;5===d.tag&&null!==o&&(d=o,n?null!=(i=Pe(r,a))&&l.unshift(Hs(r,i,d)):n||null!=(i=Pe(r,a))&&l.push(Hs(r,i,d))),r=r.return}0!==l.length&&e.push({event:t,listeners:l})}var qs=/\r\n?/g,Qs=/\u0000|\uFFFD/g;function Ks(e){return("string"===typeof e?e:""+e).replace(qs,"\n").replace(Qs,"")}function Js(e,t,r){if(t=Ks(t),Ks(e)!==t&&r)throw Error(a(425))}function Xs(){}var Zs=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rn="function"===typeof setTimeout?setTimeout:void 0,sn="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,an="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(ln)}:rn;function ln(e){setTimeout(function(){throw e})}function dn(e,t){var r=t,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&8===n.nodeType)if("/$"===(r=n.data)){if(0===s)return e.removeChild(n),void zt(t);s--}else"$"!==r&&"$?"!==r&&"$!"!==r||s++;r=n}while(r);zt(t)}function on(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),xn="__reactFiber$"+un,mn="__reactProps$"+un,fn="__reactContainer$"+un,hn="__reactEvents$"+un,pn="__reactListeners$"+un,bn="__reactHandles$"+un;function gn(e){var t=e[xn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fn]||r[xn]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=cn(e);null!==e;){if(r=e[xn])return r;e=cn(e)}return t}r=(e=r).parentNode}return null}function vn(e){return!(e=e[xn]||e[fn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function jn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Nn(e){return e[mn]||null}var yn=[],wn=-1;function kn(e){return{current:e}}function Sn(e){0>wn||(e.current=yn[wn],yn[wn]=null,wn--)}function Cn(e,t){wn++,yn[wn]=e.current,e.current=t}var En={},Dn=kn(En),Ln=kn(!1),Tn=En;function Mn(e,t){var r=e.type.contextTypes;if(!r)return En;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n,a={};for(n in r)a[n]=t[n];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rn(){Sn(Ln),Sn(Dn)}function In(e,t,r){if(Dn.current!==En)throw Error(a(168));Cn(Dn,t),Cn(Ln,r)}function An(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return r;for(var n in s=s.getChildContext())if(!(n in t))throw Error(a(108,V(e)||"Unknown",n));return U({},r,s)}function Fn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||En,Tn=Dn.current,Cn(Dn,e),Cn(Ln,Ln.current),!0}function Un(e,t,r){var s=e.stateNode;if(!s)throw Error(a(169));r?(e=An(e,t,Tn),s.__reactInternalMemoizedMergedChildContext=e,Sn(Ln),Sn(Dn),Cn(Dn,e)):Sn(Ln),Cn(Ln,r)}var _n=null,On=!1,Bn=!1;function $n(e){null===_n?_n=[e]:_n.push(e)}function zn(){if(!Bn&&null!==_n){Bn=!0;var e=0,t=vt;try{var r=_n;for(vt=1;e<r.length;e++){var s=r[e];do{s=s(!0)}while(null!==s)}_n=null,On=!1}catch(n){throw null!==_n&&(_n=_n.slice(e+1)),Ye(Ze,zn),n}finally{vt=t,Bn=!1}}return null}var Vn=[],Hn=0,Wn=null,Gn=0,Yn=[],qn=0,Qn=null,Kn=1,Jn="";function Xn(e,t){Vn[Hn++]=Gn,Vn[Hn++]=Wn,Wn=e,Gn=t}function Zn(e,t,r){Yn[qn++]=Kn,Yn[qn++]=Jn,Yn[qn++]=Qn,Qn=e;var s=Kn;e=Jn;var n=32-lt(s)-1;s&=~(1<<n),r+=1;var a=32-lt(t)+n;if(30<a){var l=n-n%5;a=(s&(1<<l)-1).toString(32),s>>=l,n-=l,Kn=1<<32-lt(t)+n|r<<n|s,Jn=a+e}else Kn=1<<a|r<<n|s,Jn=e}function ea(e){null!==e.return&&(Xn(e,1),Zn(e,1,0))}function ta(e){for(;e===Wn;)Wn=Vn[--Hn],Vn[Hn]=null,Gn=Vn[--Hn],Vn[Hn]=null;for(;e===Qn;)Qn=Yn[--qn],Yn[qn]=null,Jn=Yn[--qn],Yn[qn]=null,Kn=Yn[--qn],Yn[qn]=null}var ra=null,sa=null,na=!1,aa=null;function la(e,t){var r=Mo(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function da(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,sa=on(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,sa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Qn?{id:Kn,overflow:Jn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Mo(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ra=e,sa=null,!0);default:return!1}}function ia(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function oa(e){if(na){var t=sa;if(t){var r=t;if(!da(e,t)){if(ia(e))throw Error(a(418));t=on(r.nextSibling);var s=ra;t&&da(e,t)?la(s,r):(e.flags=-4097&e.flags|2,na=!1,ra=e)}}else{if(ia(e))throw Error(a(418));e.flags=-4097&e.flags|2,na=!1,ra=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ua(e){if(e!==ra)return!1;if(!na)return ca(e),na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=sa)){if(ia(e))throw xa(),Error(a(418));for(;t;)la(e,t),t=on(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){sa=on(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}sa=null}}else sa=ra?on(e.stateNode.nextSibling):null;return!0}function xa(){for(var e=sa;e;)e=on(e.nextSibling)}function ma(){sa=ra=null,na=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ha=j.ReactCurrentBatchConfig;function pa(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var s=r.stateNode}if(!s)throw Error(a(147,e));var n=s,l=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===l?t.ref:(t=function(e){var t=n.refs;null===e?delete t[l]:t[l]=e},t._stringRef=l,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function ba(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ga(e){return(0,e._init)(e._payload)}function va(e){function t(t,r){if(e){var s=t.deletions;null===s?(t.deletions=[r],t.flags|=16):s.push(r)}}function r(r,s){if(!e)return null;for(;null!==s;)t(r,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Ro(e,t)).index=0,e.sibling=null,e}function l(t,r,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<r?(t.flags|=2,r):s:(t.flags|=2,r):(t.flags|=1048576,r)}function d(t){return e&&null===t.alternate&&(t.flags|=2),t}function i(e,t,r,s){return null===t||6!==t.tag?((t=Uo(r,e.mode,s)).return=e,t):((t=n(t,r)).return=e,t)}function o(e,t,r,s){var a=r.type;return a===w?u(e,t,r.props.children,s,r.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&ga(a)===t.type)?((s=n(t,r.props)).ref=pa(e,t,r),s.return=e,s):((s=Io(r.type,r.key,r.props,null,e.mode,s)).ref=pa(e,t,r),s.return=e,s)}function c(e,t,r,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=_o(r,e.mode,s)).return=e,t):((t=n(t,r.children||[])).return=e,t)}function u(e,t,r,s,a){return null===t||7!==t.tag?((t=Ao(r,e.mode,s,a)).return=e,t):((t=n(t,r)).return=e,t)}function x(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uo(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case N:return(r=Io(t.type,t.key,t.props,null,e.mode,r)).ref=pa(e,null,t),r.return=e,r;case y:return(t=_o(t,e.mode,r)).return=e,t;case P:return x(e,(0,t._init)(t._payload),r)}if(te(t)||A(t))return(t=Ao(t,e.mode,r,null)).return=e,t;ba(e,t)}return null}function m(e,t,r,s){var n=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==n?null:i(e,t,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case N:return r.key===n?o(e,t,r,s):null;case y:return r.key===n?c(e,t,r,s):null;case P:return m(e,t,(n=r._init)(r._payload),s)}if(te(r)||A(r))return null!==n?null:u(e,t,r,s,null);ba(e,r)}return null}function f(e,t,r,s,n){if("string"===typeof s&&""!==s||"number"===typeof s)return i(t,e=e.get(r)||null,""+s,n);if("object"===typeof s&&null!==s){switch(s.$$typeof){case N:return o(t,e=e.get(null===s.key?r:s.key)||null,s,n);case y:return c(t,e=e.get(null===s.key?r:s.key)||null,s,n);case P:return f(e,t,r,(0,s._init)(s._payload),n)}if(te(s)||A(s))return u(t,e=e.get(r)||null,s,n,null);ba(t,s)}return null}function h(n,a,d,i){for(var o=null,c=null,u=a,h=a=0,p=null;null!==u&&h<d.length;h++){u.index>h?(p=u,u=null):p=u.sibling;var b=m(n,u,d[h],i);if(null===b){null===u&&(u=p);break}e&&u&&null===b.alternate&&t(n,u),a=l(b,a,h),null===c?o=b:c.sibling=b,c=b,u=p}if(h===d.length)return r(n,u),na&&Xn(n,h),o;if(null===u){for(;h<d.length;h++)null!==(u=x(n,d[h],i))&&(a=l(u,a,h),null===c?o=u:c.sibling=u,c=u);return na&&Xn(n,h),o}for(u=s(n,u);h<d.length;h++)null!==(p=f(u,n,h,d[h],i))&&(e&&null!==p.alternate&&u.delete(null===p.key?h:p.key),a=l(p,a,h),null===c?o=p:c.sibling=p,c=p);return e&&u.forEach(function(e){return t(n,e)}),na&&Xn(n,h),o}function p(n,d,i,o){var c=A(i);if("function"!==typeof c)throw Error(a(150));if(null==(i=c.call(i)))throw Error(a(151));for(var u=c=null,h=d,p=d=0,b=null,g=i.next();null!==h&&!g.done;p++,g=i.next()){h.index>p?(b=h,h=null):b=h.sibling;var v=m(n,h,g.value,o);if(null===v){null===h&&(h=b);break}e&&h&&null===v.alternate&&t(n,h),d=l(v,d,p),null===u?c=v:u.sibling=v,u=v,h=b}if(g.done)return r(n,h),na&&Xn(n,p),c;if(null===h){for(;!g.done;p++,g=i.next())null!==(g=x(n,g.value,o))&&(d=l(g,d,p),null===u?c=g:u.sibling=g,u=g);return na&&Xn(n,p),c}for(h=s(n,h);!g.done;p++,g=i.next())null!==(g=f(h,n,p,g.value,o))&&(e&&null!==g.alternate&&h.delete(null===g.key?p:g.key),d=l(g,d,p),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(n,e)}),na&&Xn(n,p),c}return function e(s,a,l,i){if("object"===typeof l&&null!==l&&l.type===w&&null===l.key&&(l=l.props.children),"object"===typeof l&&null!==l){switch(l.$$typeof){case N:e:{for(var o=l.key,c=a;null!==c;){if(c.key===o){if((o=l.type)===w){if(7===c.tag){r(s,c.sibling),(a=n(c,l.props.children)).return=s,s=a;break e}}else if(c.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&ga(o)===c.type){r(s,c.sibling),(a=n(c,l.props)).ref=pa(s,c,l),a.return=s,s=a;break e}r(s,c);break}t(s,c),c=c.sibling}l.type===w?((a=Ao(l.props.children,s.mode,i,l.key)).return=s,s=a):((i=Io(l.type,l.key,l.props,null,s.mode,i)).ref=pa(s,a,l),i.return=s,s=i)}return d(s);case y:e:{for(c=l.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===l.containerInfo&&a.stateNode.implementation===l.implementation){r(s,a.sibling),(a=n(a,l.children||[])).return=s,s=a;break e}r(s,a);break}t(s,a),a=a.sibling}(a=_o(l,s.mode,i)).return=s,s=a}return d(s);case P:return e(s,a,(c=l._init)(l._payload),i)}if(te(l))return h(s,a,l,i);if(A(l))return p(s,a,l,i);ba(s,l)}return"string"===typeof l&&""!==l||"number"===typeof l?(l=""+l,null!==a&&6===a.tag?(r(s,a.sibling),(a=n(a,l)).return=s,s=a):(r(s,a),(a=Uo(l,s.mode,i)).return=s,s=a),d(s)):r(s,a)}}var ja=va(!0),Na=va(!1),ya=kn(null),wa=null,ka=null,Sa=null;function Ca(){Sa=ka=wa=null}function Ea(e){var t=ya.current;Sn(ya),e._currentValue=t}function Da(e,t,r){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function La(e,t){wa=e,Sa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(gd=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(Sa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===wa)throw Error(a(308));ka=e,wa.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ma=null;function Pa(e){null===Ma?Ma=[e]:Ma.push(e)}function Ra(e,t,r,s){var n=t.interleaved;return null===n?(r.next=r,Pa(t)):(r.next=n.next,n.next=r),t.interleaved=r,Ia(e,s)}function Ia(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Aa=!1;function Fa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ua(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _a(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,r){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&Ei)){var n=s.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),s.pending=t,Ia(e,r)}return null===(n=s.interleaved)?(t.next=t,Pa(s)):(t.next=n.next,n.next=t),s.interleaved=t,Ia(e,r)}function Ba(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var s=t.lanes;r|=s&=e.pendingLanes,t.lanes=r,gt(e,r)}}function $a(e,t){var r=e.updateQueue,s=e.alternate;if(null!==s&&r===(s=s.updateQueue)){var n=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?n=a=l:a=a.next=l,r=r.next}while(null!==r);null===a?n=a=t:a=a.next=t}else n=a=t;return r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:s.shared,effects:s.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function za(e,t,r,s){var n=e.updateQueue;Aa=!1;var a=n.firstBaseUpdate,l=n.lastBaseUpdate,d=n.shared.pending;if(null!==d){n.shared.pending=null;var i=d,o=i.next;i.next=null,null===l?a=o:l.next=o,l=i;var c=e.alternate;null!==c&&((d=(c=c.updateQueue).lastBaseUpdate)!==l&&(null===d?c.firstBaseUpdate=o:d.next=o,c.lastBaseUpdate=i))}if(null!==a){var u=n.baseState;for(l=0,c=o=i=null,d=a;;){var x=d.lane,m=d.eventTime;if((s&x)===x){null!==c&&(c=c.next={eventTime:m,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var f=e,h=d;switch(x=t,m=r,h.tag){case 1:if("function"===typeof(f=h.payload)){u=f.call(m,u,x);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(x="function"===typeof(f=h.payload)?f.call(m,u,x):f)||void 0===x)break e;u=U({},u,x);break e;case 2:Aa=!0}}null!==d.callback&&0!==d.lane&&(e.flags|=64,null===(x=n.effects)?n.effects=[d]:x.push(d))}else m={eventTime:m,lane:x,tag:d.tag,payload:d.payload,callback:d.callback,next:null},null===c?(o=c=m,i=u):c=c.next=m,l|=x;if(null===(d=d.next)){if(null===(d=n.shared.pending))break;d=(x=d).next,x.next=null,n.lastBaseUpdate=x,n.shared.pending=null}}if(null===c&&(i=u),n.baseState=i,n.firstBaseUpdate=o,n.lastBaseUpdate=c,null!==(t=n.shared.interleaved)){n=t;do{l|=n.lane,n=n.next}while(n!==t)}else null===a&&(n.shared.lanes=0);Ai|=l,e.lanes=l,e.memoizedState=u}}function Va(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(null!==n){if(s.callback=null,s=r,"function"!==typeof n)throw Error(a(191,n));n.call(s)}}}var Ha={},Wa=kn(Ha),Ga=kn(Ha),Ya=kn(Ha);function qa(e){if(e===Ha)throw Error(a(174));return e}function Qa(e,t){switch(Cn(Ya,t),Cn(Ga,e),Cn(Wa,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ie(null,"");break;default:t=ie(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sn(Wa),Cn(Wa,t)}function Ka(){Sn(Wa),Sn(Ga),Sn(Ya)}function Ja(e){qa(Ya.current);var t=qa(Wa.current),r=ie(t,e.type);t!==r&&(Cn(Ga,e),Cn(Wa,r))}function Xa(e){Ga.current===e&&(Sn(Wa),Sn(Ga))}var Za=kn(0);function el(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tl=[];function rl(){for(var e=0;e<tl.length;e++)tl[e]._workInProgressVersionPrimary=null;tl.length=0}var sl=j.ReactCurrentDispatcher,nl=j.ReactCurrentBatchConfig,al=0,ll=null,dl=null,il=null,ol=!1,cl=!1,ul=0,xl=0;function ml(){throw Error(a(321))}function fl(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ls(e[r],t[r]))return!1;return!0}function hl(e,t,r,s,n,l){if(al=l,ll=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sl.current=null===e||null===e.memoizedState?Xl:Zl,e=r(s,n),cl){l=0;do{if(cl=!1,ul=0,25<=l)throw Error(a(301));l+=1,il=dl=null,t.updateQueue=null,sl.current=ed,e=r(s,n)}while(cl)}if(sl.current=Jl,t=null!==dl&&null!==dl.next,al=0,il=dl=ll=null,ol=!1,t)throw Error(a(300));return e}function pl(){var e=0!==ul;return ul=0,e}function bl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===il?ll.memoizedState=il=e:il=il.next=e,il}function gl(){if(null===dl){var e=ll.alternate;e=null!==e?e.memoizedState:null}else e=dl.next;var t=null===il?ll.memoizedState:il.next;if(null!==t)il=t,dl=e;else{if(null===e)throw Error(a(310));e={memoizedState:(dl=e).memoizedState,baseState:dl.baseState,baseQueue:dl.baseQueue,queue:dl.queue,next:null},null===il?ll.memoizedState=il=e:il=il.next=e}return il}function vl(e,t){return"function"===typeof t?t(e):t}function jl(e){var t=gl(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var s=dl,n=s.baseQueue,l=r.pending;if(null!==l){if(null!==n){var d=n.next;n.next=l.next,l.next=d}s.baseQueue=n=l,r.pending=null}if(null!==n){l=n.next,s=s.baseState;var i=d=null,o=null,c=l;do{var u=c.lane;if((al&u)===u)null!==o&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:e(s,c.action);else{var x={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===o?(i=o=x,d=s):o=o.next=x,ll.lanes|=u,Ai|=u}c=c.next}while(null!==c&&c!==l);null===o?d=s:o.next=i,ls(s,t.memoizedState)||(gd=!0),t.memoizedState=s,t.baseState=d,t.baseQueue=o,r.lastRenderedState=s}if(null!==(e=r.interleaved)){n=e;do{l=n.lane,ll.lanes|=l,Ai|=l,n=n.next}while(n!==e)}else null===n&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Nl(e){var t=gl(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,l=t.memoizedState;if(null!==n){r.pending=null;var d=n=n.next;do{l=e(l,d.action),d=d.next}while(d!==n);ls(l,t.memoizedState)||(gd=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),r.lastRenderedState=l}return[l,s]}function yl(){}function wl(e,t){var r=ll,s=gl(),n=t(),l=!ls(s.memoizedState,n);if(l&&(s.memoizedState=n,gd=!0),s=s.queue,Al(Cl.bind(null,r,s,e),[e]),s.getSnapshot!==t||l||null!==il&&1&il.memoizedState.tag){if(r.flags|=2048,Tl(9,Sl.bind(null,r,s,n,t),void 0,null),null===Di)throw Error(a(349));0!==(30&al)||kl(r,t,n)}return n}function kl(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ll.updateQueue)?(t={lastEffect:null,stores:null},ll.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Sl(e,t,r,s){t.value=r,t.getSnapshot=s,El(t)&&Dl(e)}function Cl(e,t,r){return r(function(){El(t)&&Dl(e)})}function El(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ls(e,r)}catch(s){return!0}}function Dl(e){var t=Ia(e,1);null!==t&&to(t,e,1,-1)}function Ll(e){var t=bl();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:e},t.queue=e,e=e.dispatch=Yl.bind(null,ll,e),[t.memoizedState,e]}function Tl(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},null===(t=ll.updateQueue)?(t={lastEffect:null,stores:null},ll.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e),e}function Ml(){return gl().memoizedState}function Pl(e,t,r,s){var n=bl();ll.flags|=e,n.memoizedState=Tl(1|t,r,void 0,void 0===s?null:s)}function Rl(e,t,r,s){var n=gl();s=void 0===s?null:s;var a=void 0;if(null!==dl){var l=dl.memoizedState;if(a=l.destroy,null!==s&&fl(s,l.deps))return void(n.memoizedState=Tl(t,r,a,s))}ll.flags|=e,n.memoizedState=Tl(1|t,r,a,s)}function Il(e,t){return Pl(8390656,8,e,t)}function Al(e,t){return Rl(2048,8,e,t)}function Fl(e,t){return Rl(4,2,e,t)}function Ul(e,t){return Rl(4,4,e,t)}function _l(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ol(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Rl(4,4,_l.bind(null,t,e),r)}function Bl(){}function $l(e,t){var r=gl();t=void 0===t?null:t;var s=r.memoizedState;return null!==s&&null!==t&&fl(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function zl(e,t){var r=gl();t=void 0===t?null:t;var s=r.memoizedState;return null!==s&&null!==t&&fl(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Vl(e,t,r){return 0===(21&al)?(e.baseState&&(e.baseState=!1,gd=!0),e.memoizedState=r):(ls(r,t)||(r=ht(),ll.lanes|=r,Ai|=r,e.baseState=!0),t)}function Hl(e,t){var r=vt;vt=0!==r&&4>r?r:4,e(!0);var s=nl.transition;nl.transition={};try{e(!1),t()}finally{vt=r,nl.transition=s}}function Wl(){return gl().memoizedState}function Gl(e,t,r){var s=eo(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},ql(e))Ql(t,r);else if(null!==(r=Ra(e,t,r,s))){to(r,e,s,Zi()),Kl(r,t,s)}}function Yl(e,t,r){var s=eo(e),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(ql(e))Ql(t,n);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var l=t.lastRenderedState,d=a(l,r);if(n.hasEagerState=!0,n.eagerState=d,ls(d,l)){var i=t.interleaved;return null===i?(n.next=n,Pa(t)):(n.next=i.next,i.next=n),void(t.interleaved=n)}}catch(o){}null!==(r=Ra(e,t,n,s))&&(to(r,e,s,n=Zi()),Kl(r,t,s))}}function ql(e){var t=e.alternate;return e===ll||null!==t&&t===ll}function Ql(e,t){cl=ol=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Kl(e,t,r){if(0!==(4194240&r)){var s=t.lanes;r|=s&=e.pendingLanes,t.lanes=r,gt(e,r)}}var Jl={readContext:Ta,useCallback:ml,useContext:ml,useEffect:ml,useImperativeHandle:ml,useInsertionEffect:ml,useLayoutEffect:ml,useMemo:ml,useReducer:ml,useRef:ml,useState:ml,useDebugValue:ml,useDeferredValue:ml,useTransition:ml,useMutableSource:ml,useSyncExternalStore:ml,useId:ml,unstable_isNewReconciler:!1},Xl={readContext:Ta,useCallback:function(e,t){return bl().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:Il,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Pl(4194308,4,_l.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Pl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pl(4,2,e,t)},useMemo:function(e,t){var r=bl();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=bl();return t=void 0!==r?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Gl.bind(null,ll,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},bl().memoizedState=e},useState:Ll,useDebugValue:Bl,useDeferredValue:function(e){return bl().memoizedState=e},useTransition:function(){var e=Ll(!1),t=e[0];return e=Hl.bind(null,e[1]),bl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=ll,n=bl();if(na){if(void 0===r)throw Error(a(407));r=r()}else{if(r=t(),null===Di)throw Error(a(349));0!==(30&al)||kl(s,t,r)}n.memoizedState=r;var l={value:r,getSnapshot:t};return n.queue=l,Il(Cl.bind(null,s,l,e),[e]),s.flags|=2048,Tl(9,Sl.bind(null,s,l,r,t),void 0,null),r},useId:function(){var e=bl(),t=Di.identifierPrefix;if(na){var r=Jn;t=":"+t+"R"+(r=(Kn&~(1<<32-lt(Kn)-1)).toString(32)+r),0<(r=ul++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=xl++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zl={readContext:Ta,useCallback:$l,useContext:Ta,useEffect:Al,useImperativeHandle:Ol,useInsertionEffect:Fl,useLayoutEffect:Ul,useMemo:zl,useReducer:jl,useRef:Ml,useState:function(){return jl(vl)},useDebugValue:Bl,useDeferredValue:function(e){return Vl(gl(),dl.memoizedState,e)},useTransition:function(){return[jl(vl)[0],gl().memoizedState]},useMutableSource:yl,useSyncExternalStore:wl,useId:Wl,unstable_isNewReconciler:!1},ed={readContext:Ta,useCallback:$l,useContext:Ta,useEffect:Al,useImperativeHandle:Ol,useInsertionEffect:Fl,useLayoutEffect:Ul,useMemo:zl,useReducer:Nl,useRef:Ml,useState:function(){return Nl(vl)},useDebugValue:Bl,useDeferredValue:function(e){var t=gl();return null===dl?t.memoizedState=e:Vl(t,dl.memoizedState,e)},useTransition:function(){return[Nl(vl)[0],gl().memoizedState]},useMutableSource:yl,useSyncExternalStore:wl,useId:Wl,unstable_isNewReconciler:!1};function td(e,t){if(e&&e.defaultProps){for(var r in t=U({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function rd(e,t,r,s){r=null===(r=r(s,t=e.memoizedState))||void 0===r?t:U({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var sd={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Zi(),n=eo(e),a=_a(s,n);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Oa(e,a,n))&&(to(t,e,n,s),Ba(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Zi(),n=eo(e),a=_a(s,n);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Oa(e,a,n))&&(to(t,e,n,s),Ba(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Zi(),s=eo(e),n=_a(r,s);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=Oa(e,n,s))&&(to(t,e,s,r),Ba(t,e,s))}};function nd(e,t,r,s,n,a,l){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,a,l):!t.prototype||!t.prototype.isPureReactComponent||(!ds(r,s)||!ds(n,a))}function ad(e,t,r){var s=!1,n=En,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(n=Pn(t)?Tn:Dn.current,a=(s=null!==(s=t.contextTypes)&&void 0!==s)?Mn(e,n):En),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sd,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),t}function ld(e,t,r,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&sd.enqueueReplaceState(t,t.state,null)}function dd(e,t,r,s){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Fa(e);var a=t.contextType;"object"===typeof a&&null!==a?n.context=Ta(a):(a=Pn(t)?Tn:Dn.current,n.context=Mn(e,a)),n.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rd(e,t,a,r),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&sd.enqueueReplaceState(n,n.state,null),za(e,r,n,s),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function id(e,t){try{var r="",s=t;do{r+=$(s),s=s.return}while(s);var n=r}catch(a){n="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:n,digest:null}}function od(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function cd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ud="function"===typeof WeakMap?WeakMap:Map;function xd(e,t,r){(r=_a(-1,r)).tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Vi||(Vi=!0,Hi=s),cd(0,t)},r}function md(e,t,r){(r=_a(-1,r)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var n=t.value;r.payload=function(){return s(n)},r.callback=function(){cd(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){cd(0,t),"function"!==typeof s&&(null===Wi?Wi=new Set([this]):Wi.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function fd(e,t,r){var s=e.pingCache;if(null===s){s=e.pingCache=new ud;var n=new Set;s.set(t,n)}else void 0===(n=s.get(t))&&(n=new Set,s.set(t,n));n.has(r)||(n.add(r),e=So.bind(null,e,t,r),t.then(e,e))}function hd(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function pd(e,t,r,s,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=_a(-1,1)).tag=2,Oa(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var bd=j.ReactCurrentOwner,gd=!1;function vd(e,t,r,s){t.child=null===e?Na(t,null,r,s):ja(t,e.child,r,s)}function jd(e,t,r,s,n){r=r.render;var a=t.ref;return La(t,n),s=hl(e,t,r,s,a,n),r=pl(),null===e||gd?(na&&r&&ea(t),t.flags|=1,vd(e,t,s,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Vd(e,t,n))}function Nd(e,t,r,s,n){if(null===e){var a=r.type;return"function"!==typeof a||Po(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Io(r.type,null,s,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,yd(e,t,a,s,n))}if(a=e.child,0===(e.lanes&n)){var l=a.memoizedProps;if((r=null!==(r=r.compare)?r:ds)(l,s)&&e.ref===t.ref)return Vd(e,t,n)}return t.flags|=1,(e=Ro(a,s)).ref=t.ref,e.return=t,t.child=e}function yd(e,t,r,s,n){if(null!==e){var a=e.memoizedProps;if(ds(a,s)&&e.ref===t.ref){if(gd=!1,t.pendingProps=s=a,0===(e.lanes&n))return t.lanes=e.lanes,Vd(e,t,n);0!==(131072&e.flags)&&(gd=!0)}}return Sd(e,t,r,s,n)}function wd(e,t,r){var s=t.pendingProps,n=s.children,a=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(Pi,Mi),Mi|=r;else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cn(Pi,Mi),Mi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==a?a.baseLanes:r,Cn(Pi,Mi),Mi|=s}else null!==a?(s=a.baseLanes|r,t.memoizedState=null):s=r,Cn(Pi,Mi),Mi|=s;return vd(e,t,n,r),t.child}function kd(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Sd(e,t,r,s,n){var a=Pn(r)?Tn:Dn.current;return a=Mn(t,a),La(t,n),r=hl(e,t,r,s,a,n),s=pl(),null===e||gd?(na&&s&&ea(t),t.flags|=1,vd(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Vd(e,t,n))}function Cd(e,t,r,s,n){if(Pn(r)){var a=!0;Fn(t)}else a=!1;if(La(t,n),null===t.stateNode)zd(e,t),ad(t,r,s),dd(t,r,s,n),s=!0;else if(null===e){var l=t.stateNode,d=t.memoizedProps;l.props=d;var i=l.context,o=r.contextType;"object"===typeof o&&null!==o?o=Ta(o):o=Mn(t,o=Pn(r)?Tn:Dn.current);var c=r.getDerivedStateFromProps,u="function"===typeof c||"function"===typeof l.getSnapshotBeforeUpdate;u||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(d!==s||i!==o)&&ld(t,l,s,o),Aa=!1;var x=t.memoizedState;l.state=x,za(t,s,l,n),i=t.memoizedState,d!==s||x!==i||Ln.current||Aa?("function"===typeof c&&(rd(t,r,c,s),i=t.memoizedState),(d=Aa||nd(t,r,d,s,x,i,o))?(u||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(t.flags|=4194308)):("function"===typeof l.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=i),l.props=s,l.state=i,l.context=o,s=d):("function"===typeof l.componentDidMount&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,Ua(e,t),d=t.memoizedProps,o=t.type===t.elementType?d:td(t.type,d),l.props=o,u=t.pendingProps,x=l.context,"object"===typeof(i=r.contextType)&&null!==i?i=Ta(i):i=Mn(t,i=Pn(r)?Tn:Dn.current);var m=r.getDerivedStateFromProps;(c="function"===typeof m||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(d!==u||x!==i)&&ld(t,l,s,i),Aa=!1,x=t.memoizedState,l.state=x,za(t,s,l,n);var f=t.memoizedState;d!==u||x!==f||Ln.current||Aa?("function"===typeof m&&(rd(t,r,m,s),f=t.memoizedState),(o=Aa||nd(t,r,o,s,x,f,i)||!1)?(c||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(s,f,i),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(s,f,i)),"function"===typeof l.componentDidUpdate&&(t.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof l.componentDidUpdate||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=f),l.props=s,l.state=f,l.context=i,s=o):("function"!==typeof l.componentDidUpdate||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),s=!1)}return Ed(e,t,r,s,a,n)}function Ed(e,t,r,s,n,a){kd(e,t);var l=0!==(128&t.flags);if(!s&&!l)return n&&Un(t,r,!1),Vd(e,t,a);s=t.stateNode,bd.current=t;var d=l&&"function"!==typeof r.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&l?(t.child=ja(t,e.child,null,a),t.child=ja(t,null,d,a)):vd(e,t,d,a),t.memoizedState=s.state,n&&Un(t,r,!0),t.child}function Dd(e){var t=e.stateNode;t.pendingContext?In(0,t.pendingContext,t.pendingContext!==t.context):t.context&&In(0,t.context,!1),Qa(e,t.containerInfo)}function Ld(e,t,r,s,n){return ma(),fa(n),t.flags|=256,vd(e,t,r,s),t.child}var Td,Md,Pd,Rd,Id={dehydrated:null,treeContext:null,retryLane:0};function Ad(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fd(e,t,r){var s,n=t.pendingProps,l=Za.current,d=!1,i=0!==(128&t.flags);if((s=i)||(s=(null===e||null!==e.memoizedState)&&0!==(2&l)),s?(d=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(l|=1),Cn(Za,1&l),null===e)return oa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(i=n.children,e=n.fallback,d?(n=t.mode,d=t.child,i={mode:"hidden",children:i},0===(1&n)&&null!==d?(d.childLanes=0,d.pendingProps=i):d=Fo(i,n,0,null),e=Ao(e,n,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Ad(r),t.memoizedState=Id,e):Ud(t,i));if(null!==(l=e.memoizedState)&&null!==(s=l.dehydrated))return function(e,t,r,s,n,l,d){if(r)return 256&t.flags?(t.flags&=-257,_d(e,t,d,s=od(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(l=s.fallback,n=t.mode,s=Fo({mode:"visible",children:s.children},n,0,null),(l=Ao(l,n,d,null)).flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,0!==(1&t.mode)&&ja(t,e.child,null,d),t.child.memoizedState=Ad(d),t.memoizedState=Id,l);if(0===(1&t.mode))return _d(e,t,d,null);if("$!"===n.data){if(s=n.nextSibling&&n.nextSibling.dataset)var i=s.dgst;return s=i,_d(e,t,d,s=od(l=Error(a(419)),s,void 0))}if(i=0!==(d&e.childLanes),gd||i){if(null!==(s=Di)){switch(d&-d){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(s.suspendedLanes|d))?0:n)&&n!==l.retryLane&&(l.retryLane=n,Ia(e,n),to(s,e,n,-1))}return ho(),_d(e,t,d,s=od(Error(a(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Eo.bind(null,e),n._reactRetry=t,null):(e=l.treeContext,sa=on(n.nextSibling),ra=t,na=!0,aa=null,null!==e&&(Yn[qn++]=Kn,Yn[qn++]=Jn,Yn[qn++]=Qn,Kn=e.id,Jn=e.overflow,Qn=t),t=Ud(t,s.children),t.flags|=4096,t)}(e,t,i,n,s,l,r);if(d){d=n.fallback,i=t.mode,s=(l=e.child).sibling;var o={mode:"hidden",children:n.children};return 0===(1&i)&&t.child!==l?((n=t.child).childLanes=0,n.pendingProps=o,t.deletions=null):(n=Ro(l,o)).subtreeFlags=14680064&l.subtreeFlags,null!==s?d=Ro(s,d):(d=Ao(d,i,r,null)).flags|=2,d.return=t,n.return=t,n.sibling=d,t.child=n,n=d,d=t.child,i=null===(i=e.child.memoizedState)?Ad(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},d.memoizedState=i,d.childLanes=e.childLanes&~r,t.memoizedState=Id,n}return e=(d=e.child).sibling,n=Ro(d,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ud(e,t){return(t=Fo({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function _d(e,t,r,s){return null!==s&&fa(s),ja(t,e.child,null,r),(e=Ud(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Od(e,t,r){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Da(e.return,t,r)}function Bd(e,t,r,s,n){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=n)}function $d(e,t,r){var s=t.pendingProps,n=s.revealOrder,a=s.tail;if(vd(e,t,s.children,r),0!==(2&(s=Za.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Od(e,r,t);else if(19===e.tag)Od(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Cn(Za,s),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;null!==r;)null!==(e=r.alternate)&&null===el(e)&&(n=r),r=r.sibling;null===(r=n)?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Bd(t,!1,n,r,a);break;case"backwards":for(r=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===el(e)){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Bd(t,!0,r,null,a);break;case"together":Bd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zd(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vd(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ai|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Ro(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ro(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Hd(e,t){if(!na)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;null!==r;)null!==r.alternate&&(s=r),r=r.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Wd(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,s=0;if(t)for(var n=e.child;null!==n;)r|=n.lanes|n.childLanes,s|=14680064&n.subtreeFlags,s|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Gd(e,t,r){var s=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wd(t),null;case 1:case 17:return Pn(t.type)&&Rn(),Wd(t),null;case 3:return s=t.stateNode,Ka(),Sn(Ln),Sn(Dn),rl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ao(aa),aa=null))),Md(e,t),Wd(t),null;case 5:Xa(t);var n=qa(Ya.current);if(r=t.type,null!==e&&null!=t.stateNode)Pd(e,t,r,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(a(166));return Wd(t),null}if(e=qa(Wa.current),ua(t)){s=t.stateNode,r=t.type;var l=t.memoizedProps;switch(s[xn]=t,s[mn]=l,e=0!==(1&t.mode),r){case"dialog":_s("cancel",s),_s("close",s);break;case"iframe":case"object":case"embed":_s("load",s);break;case"video":case"audio":for(n=0;n<Is.length;n++)_s(Is[n],s);break;case"source":_s("error",s);break;case"img":case"image":case"link":_s("error",s),_s("load",s);break;case"details":_s("toggle",s);break;case"input":K(s,l),_s("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},_s("invalid",s);break;case"textarea":ne(s,l),_s("invalid",s)}for(var i in ge(r,l),n=null,l)if(l.hasOwnProperty(i)){var o=l[i];"children"===i?"string"===typeof o?s.textContent!==o&&(!0!==l.suppressHydrationWarning&&Js(s.textContent,o,e),n=["children",o]):"number"===typeof o&&s.textContent!==""+o&&(!0!==l.suppressHydrationWarning&&Js(s.textContent,o,e),n=["children",""+o]):d.hasOwnProperty(i)&&null!=o&&"onScroll"===i&&_s("scroll",s)}switch(r){case"input":G(s),Z(s,l,!0);break;case"textarea":G(s),le(s);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(s.onclick=Xs)}s=n,t.updateQueue=s,null!==s&&(t.flags|=4)}else{i=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=de(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=i.createElement(r,{is:s.is}):(e=i.createElement(r),"select"===r&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,r),e[xn]=t,e[mn]=s,Td(e,t,!1,!1),t.stateNode=e;e:{switch(i=ve(r,s),r){case"dialog":_s("cancel",e),_s("close",e),n=s;break;case"iframe":case"object":case"embed":_s("load",e),n=s;break;case"video":case"audio":for(n=0;n<Is.length;n++)_s(Is[n],e);n=s;break;case"source":_s("error",e),n=s;break;case"img":case"image":case"link":_s("error",e),_s("load",e),n=s;break;case"details":_s("toggle",e),n=s;break;case"input":K(e,s),n=Q(e,s),_s("invalid",e);break;case"option":default:n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=U({},s,{value:void 0}),_s("invalid",e);break;case"textarea":ne(e,s),n=se(e,s),_s("invalid",e)}for(l in ge(r,n),o=n)if(o.hasOwnProperty(l)){var c=o[l];"style"===l?pe(e,c):"dangerouslySetInnerHTML"===l?null!=(c=c?c.__html:void 0)&&ue(e,c):"children"===l?"string"===typeof c?("textarea"!==r||""!==c)&&xe(e,c):"number"===typeof c&&xe(e,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(d.hasOwnProperty(l)?null!=c&&"onScroll"===l&&_s("scroll",e):null!=c&&v(e,l,c,i))}switch(r){case"input":G(e),Z(e,s,!1);break;case"textarea":G(e),le(e);break;case"option":null!=s.value&&e.setAttribute("value",""+H(s.value));break;case"select":e.multiple=!!s.multiple,null!=(l=s.value)?re(e,!!s.multiple,l,!1):null!=s.defaultValue&&re(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=Xs)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wd(t),null;case 6:if(e&&null!=t.stateNode)Rd(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(a(166));if(r=qa(Ya.current),qa(Wa.current),ua(t)){if(s=t.stateNode,r=t.memoizedProps,s[xn]=t,(l=s.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Js(s.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Js(s.nodeValue,r,0!==(1&e.mode))}l&&(t.flags|=4)}else(s=(9===r.nodeType?r:r.ownerDocument).createTextNode(s))[xn]=t,t.stateNode=s}return Wd(t),null;case 13:if(Sn(Za),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(na&&null!==sa&&0!==(1&t.mode)&&0===(128&t.flags))xa(),ma(),t.flags|=98560,l=!1;else if(l=ua(t),null!==s&&null!==s.dehydrated){if(null===e){if(!l)throw Error(a(318));if(!(l=null!==(l=t.memoizedState)?l.dehydrated:null))throw Error(a(317));l[xn]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wd(t),l=!1}else null!==aa&&(ao(aa),aa=null),l=!0;if(!l)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===Ri&&(Ri=3):ho())),null!==t.updateQueue&&(t.flags|=4),Wd(t),null);case 4:return Ka(),Md(e,t),null===e&&$s(t.stateNode.containerInfo),Wd(t),null;case 10:return Ea(t.type._context),Wd(t),null;case 19:if(Sn(Za),null===(l=t.memoizedState))return Wd(t),null;if(s=0!==(128&t.flags),null===(i=l.rendering))if(s)Hd(l,!1);else{if(0!==Ri||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=el(e))){for(t.flags|=128,Hd(l,!1),null!==(s=i.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;null!==r;)e=s,(l=r).flags&=14680066,null===(i=l.alternate)?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Cn(Za,1&Za.current|2),t.child}e=e.sibling}null!==l.tail&&Je()>$i&&(t.flags|=128,s=!0,Hd(l,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=el(i))){if(t.flags|=128,s=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Hd(l,!0),null===l.tail&&"hidden"===l.tailMode&&!i.alternate&&!na)return Wd(t),null}else 2*Je()-l.renderingStartTime>$i&&1073741824!==r&&(t.flags|=128,s=!0,Hd(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(null!==(r=l.last)?r.sibling=i:t.child=i,l.last=i)}return null!==l.tail?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Je(),t.sibling=null,r=Za.current,Cn(Za,s?1&r|2:1&r),t):(Wd(t),null);case 22:case 23:return uo(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Mi)&&(Wd(t),6&t.subtreeFlags&&(t.flags|=8192)):Wd(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yd(e,t){switch(ta(t),t.tag){case 1:return Pn(t.type)&&Rn(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ka(),Sn(Ln),Sn(Dn),rl(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xa(t),null;case 13:if(Sn(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sn(Za),null;case 4:return Ka(),null;case 10:return Ea(t.type._context),null;case 22:case 23:return uo(),null;default:return null}}Td=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Md=function(){},Pd=function(e,t,r,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,qa(Wa.current);var a,l=null;switch(r){case"input":n=Q(e,n),s=Q(e,s),l=[];break;case"select":n=U({},n,{value:void 0}),s=U({},s,{value:void 0}),l=[];break;case"textarea":n=se(e,n),s=se(e,s),l=[];break;default:"function"!==typeof n.onClick&&"function"===typeof s.onClick&&(e.onclick=Xs)}for(c in ge(r,s),r=null,n)if(!s.hasOwnProperty(c)&&n.hasOwnProperty(c)&&null!=n[c])if("style"===c){var i=n[c];for(a in i)i.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(d.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in s){var o=s[c];if(i=null!=n?n[c]:void 0,s.hasOwnProperty(c)&&o!==i&&(null!=o||null!=i))if("style"===c)if(i){for(a in i)!i.hasOwnProperty(a)||o&&o.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in o)o.hasOwnProperty(a)&&i[a]!==o[a]&&(r||(r={}),r[a]=o[a])}else r||(l||(l=[]),l.push(c,r)),r=o;else"dangerouslySetInnerHTML"===c?(o=o?o.__html:void 0,i=i?i.__html:void 0,null!=o&&i!==o&&(l=l||[]).push(c,o)):"children"===c?"string"!==typeof o&&"number"!==typeof o||(l=l||[]).push(c,""+o):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(d.hasOwnProperty(c)?(null!=o&&"onScroll"===c&&_s("scroll",e),l||i===o||(l=[])):(l=l||[]).push(c,o))}r&&(l=l||[]).push("style",r);var c=l;(t.updateQueue=c)&&(t.flags|=4)}},Rd=function(e,t,r,s){r!==s&&(t.flags|=4)};var qd=!1,Qd=!1,Kd="function"===typeof WeakSet?WeakSet:Set,Jd=null;function Xd(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(s){ko(e,t,s)}else r.current=null}function Zd(e,t,r){try{r()}catch(s){ko(e,t,s)}}var ei=!1;function ti(e,t,r){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var n=s=s.next;do{if((n.tag&e)===e){var a=n.destroy;n.destroy=void 0,void 0!==a&&Zd(t,r,a)}n=n.next}while(n!==s)}}function ri(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function si(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function ni(e){var t=e.alternate;null!==t&&(e.alternate=null,ni(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[xn],delete t[mn],delete t[hn],delete t[pn],delete t[bn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ai(e){return 5===e.tag||3===e.tag||4===e.tag}function li(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ai(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function di(e,t,r){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Xs));else if(4!==s&&null!==(e=e.child))for(di(e,t,r),e=e.sibling;null!==e;)di(e,t,r),e=e.sibling}function ii(e,t,r){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==s&&null!==(e=e.child))for(ii(e,t,r),e=e.sibling;null!==e;)ii(e,t,r),e=e.sibling}var oi=null,ci=!1;function ui(e,t,r){for(r=r.child;null!==r;)xi(e,t,r),r=r.sibling}function xi(e,t,r){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(nt,r)}catch(d){}switch(r.tag){case 5:Qd||Xd(r,t);case 6:var s=oi,n=ci;oi=null,ui(e,t,r),ci=n,null!==(oi=s)&&(ci?(e=oi,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):oi.removeChild(r.stateNode));break;case 18:null!==oi&&(ci?(e=oi,r=r.stateNode,8===e.nodeType?dn(e.parentNode,r):1===e.nodeType&&dn(e,r),zt(e)):dn(oi,r.stateNode));break;case 4:s=oi,n=ci,oi=r.stateNode.containerInfo,ci=!0,ui(e,t,r),oi=s,ci=n;break;case 0:case 11:case 14:case 15:if(!Qd&&(null!==(s=r.updateQueue)&&null!==(s=s.lastEffect))){n=s=s.next;do{var a=n,l=a.destroy;a=a.tag,void 0!==l&&(0!==(2&a)||0!==(4&a))&&Zd(r,t,l),n=n.next}while(n!==s)}ui(e,t,r);break;case 1:if(!Qd&&(Xd(r,t),"function"===typeof(s=r.stateNode).componentWillUnmount))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(d){ko(r,t,d)}ui(e,t,r);break;case 21:ui(e,t,r);break;case 22:1&r.mode?(Qd=(s=Qd)||null!==r.memoizedState,ui(e,t,r),Qd=s):ui(e,t,r);break;default:ui(e,t,r)}}function mi(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Kd),t.forEach(function(t){var s=Do.bind(null,e,t);r.has(t)||(r.add(t),t.then(s,s))})}}function fi(e,t){var r=t.deletions;if(null!==r)for(var s=0;s<r.length;s++){var n=r[s];try{var l=e,d=t,i=d;e:for(;null!==i;){switch(i.tag){case 5:oi=i.stateNode,ci=!1;break e;case 3:case 4:oi=i.stateNode.containerInfo,ci=!0;break e}i=i.return}if(null===oi)throw Error(a(160));xi(l,d,n),oi=null,ci=!1;var o=n.alternate;null!==o&&(o.return=null),n.return=null}catch(c){ko(n,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)hi(t,e),t=t.sibling}function hi(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fi(t,e),pi(e),4&s){try{ti(3,e,e.return),ri(3,e)}catch(p){ko(e,e.return,p)}try{ti(5,e,e.return)}catch(p){ko(e,e.return,p)}}break;case 1:fi(t,e),pi(e),512&s&&null!==r&&Xd(r,r.return);break;case 5:if(fi(t,e),pi(e),512&s&&null!==r&&Xd(r,r.return),32&e.flags){var n=e.stateNode;try{xe(n,"")}catch(p){ko(e,e.return,p)}}if(4&s&&null!=(n=e.stateNode)){var l=e.memoizedProps,d=null!==r?r.memoizedProps:l,i=e.type,o=e.updateQueue;if(e.updateQueue=null,null!==o)try{"input"===i&&"radio"===l.type&&null!=l.name&&J(n,l),ve(i,d);var c=ve(i,l);for(d=0;d<o.length;d+=2){var u=o[d],x=o[d+1];"style"===u?pe(n,x):"dangerouslySetInnerHTML"===u?ue(n,x):"children"===u?xe(n,x):v(n,u,x,c)}switch(i){case"input":X(n,l);break;case"textarea":ae(n,l);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var f=l.value;null!=f?re(n,!!l.multiple,f,!1):m!==!!l.multiple&&(null!=l.defaultValue?re(n,!!l.multiple,l.defaultValue,!0):re(n,!!l.multiple,l.multiple?[]:"",!1))}n[mn]=l}catch(p){ko(e,e.return,p)}}break;case 6:if(fi(t,e),pi(e),4&s){if(null===e.stateNode)throw Error(a(162));n=e.stateNode,l=e.memoizedProps;try{n.nodeValue=l}catch(p){ko(e,e.return,p)}}break;case 3:if(fi(t,e),pi(e),4&s&&null!==r&&r.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(p){ko(e,e.return,p)}break;case 4:default:fi(t,e),pi(e);break;case 13:fi(t,e),pi(e),8192&(n=e.child).flags&&(l=null!==n.memoizedState,n.stateNode.isHidden=l,!l||null!==n.alternate&&null!==n.alternate.memoizedState||(Bi=Je())),4&s&&mi(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Qd=(c=Qd)||u,fi(t,e),Qd=c):fi(t,e),pi(e),8192&s){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!==(1&e.mode))for(Jd=e,u=e.child;null!==u;){for(x=Jd=u;null!==Jd;){switch(f=(m=Jd).child,m.tag){case 0:case 11:case 14:case 15:ti(4,m,m.return);break;case 1:Xd(m,m.return);var h=m.stateNode;if("function"===typeof h.componentWillUnmount){s=m,r=m.return;try{t=s,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(p){ko(s,r,p)}}break;case 5:Xd(m,m.return);break;case 22:if(null!==m.memoizedState){ji(x);continue}}null!==f?(f.return=m,Jd=f):ji(x)}u=u.sibling}e:for(u=null,x=e;;){if(5===x.tag){if(null===u){u=x;try{n=x.stateNode,c?"function"===typeof(l=n.style).setProperty?l.setProperty("display","none","important"):l.display="none":(i=x.stateNode,d=void 0!==(o=x.memoizedProps.style)&&null!==o&&o.hasOwnProperty("display")?o.display:null,i.style.display=he("display",d))}catch(p){ko(e,e.return,p)}}}else if(6===x.tag){if(null===u)try{x.stateNode.nodeValue=c?"":x.memoizedProps}catch(p){ko(e,e.return,p)}}else if((22!==x.tag&&23!==x.tag||null===x.memoizedState||x===e)&&null!==x.child){x.child.return=x,x=x.child;continue}if(x===e)break e;for(;null===x.sibling;){if(null===x.return||x.return===e)break e;u===x&&(u=null),x=x.return}u===x&&(u=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:fi(t,e),pi(e),4&s&&mi(e);case 21:}}function pi(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ai(r)){var s=r;break e}r=r.return}throw Error(a(160))}switch(s.tag){case 5:var n=s.stateNode;32&s.flags&&(xe(n,""),s.flags&=-33),ii(e,li(e),n);break;case 3:case 4:var l=s.stateNode.containerInfo;di(e,li(e),l);break;default:throw Error(a(161))}}catch(d){ko(e,e.return,d)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bi(e,t,r){Jd=e,gi(e,t,r)}function gi(e,t,r){for(var s=0!==(1&e.mode);null!==Jd;){var n=Jd,a=n.child;if(22===n.tag&&s){var l=null!==n.memoizedState||qd;if(!l){var d=n.alternate,i=null!==d&&null!==d.memoizedState||Qd;d=qd;var o=Qd;if(qd=l,(Qd=i)&&!o)for(Jd=n;null!==Jd;)i=(l=Jd).child,22===l.tag&&null!==l.memoizedState?Ni(n):null!==i?(i.return=l,Jd=i):Ni(n);for(;null!==a;)Jd=a,gi(a,t,r),a=a.sibling;Jd=n,qd=d,Qd=o}vi(e)}else 0!==(8772&n.subtreeFlags)&&null!==a?(a.return=n,Jd=a):vi(e)}}function vi(e){for(;null!==Jd;){var t=Jd;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qd||ri(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Qd)if(null===r)s.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:td(t.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;null!==l&&Va(t,l,s);break;case 3:var d=t.updateQueue;if(null!==d){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Va(t,d,r)}break;case 5:var i=t.stateNode;if(null===r&&4&t.flags){r=i;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var x=u.dehydrated;null!==x&&zt(x)}}}break;default:throw Error(a(163))}Qd||512&t.flags&&si(t)}catch(m){ko(t,t.return,m)}}if(t===e){Jd=null;break}if(null!==(r=t.sibling)){r.return=t.return,Jd=r;break}Jd=t.return}}function ji(e){for(;null!==Jd;){var t=Jd;if(t===e){Jd=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Jd=r;break}Jd=t.return}}function Ni(e){for(;null!==Jd;){var t=Jd;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ri(4,t)}catch(i){ko(t,r,i)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var n=t.return;try{s.componentDidMount()}catch(i){ko(t,n,i)}}var a=t.return;try{si(t)}catch(i){ko(t,a,i)}break;case 5:var l=t.return;try{si(t)}catch(i){ko(t,l,i)}}}catch(i){ko(t,t.return,i)}if(t===e){Jd=null;break}var d=t.sibling;if(null!==d){d.return=t.return,Jd=d;break}Jd=t.return}}var yi,wi=Math.ceil,ki=j.ReactCurrentDispatcher,Si=j.ReactCurrentOwner,Ci=j.ReactCurrentBatchConfig,Ei=0,Di=null,Li=null,Ti=0,Mi=0,Pi=kn(0),Ri=0,Ii=null,Ai=0,Fi=0,Ui=0,_i=null,Oi=null,Bi=0,$i=1/0,zi=null,Vi=!1,Hi=null,Wi=null,Gi=!1,Yi=null,qi=0,Qi=0,Ki=null,Ji=-1,Xi=0;function Zi(){return 0!==(6&Ei)?Je():-1!==Ji?Ji:Ji=Je()}function eo(e){return 0===(1&e.mode)?1:0!==(2&Ei)&&0!==Ti?Ti&-Ti:null!==ha.transition?(0===Xi&&(Xi=ht()),Xi):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function to(e,t,r,s){if(50<Qi)throw Qi=0,Ki=null,Error(a(185));bt(e,r,s),0!==(2&Ei)&&e===Di||(e===Di&&(0===(2&Ei)&&(Fi|=r),4===Ri&&lo(e,Ti)),ro(e,s),1===r&&0===Ei&&0===(1&t.mode)&&($i=Je()+500,On&&zn()))}function ro(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-lt(a),d=1<<l,i=n[l];-1===i?0!==(d&r)&&0===(d&s)||(n[l]=mt(d,t)):i<=t&&(e.expiredLanes|=d),a&=~d}}(e,t);var s=xt(e,e===Di?Ti:0);if(0===s)null!==r&&qe(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=r&&qe(r),1===t)0===e.tag?function(e){On=!0,$n(e)}(io.bind(null,e)):$n(io.bind(null,e)),an(function(){0===(6&Ei)&&zn()}),r=null;else{switch(jt(s)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=st}r=Lo(r,so.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function so(e,t){if(Ji=-1,Xi=0,0!==(6&Ei))throw Error(a(327));var r=e.callbackNode;if(yo()&&e.callbackNode!==r)return null;var s=xt(e,e===Di?Ti:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=po(e,s);else{t=s;var n=Ei;Ei|=2;var l=fo();for(Di===e&&Ti===t||(zi=null,$i=Je()+500,xo(e,t));;)try{go();break}catch(i){mo(e,i)}Ca(),ki.current=l,Ei=n,null!==Li?t=0:(Di=null,Ti=0,t=Ri)}if(0!==t){if(2===t&&(0!==(n=ft(e))&&(s=n,t=no(e,n))),1===t)throw r=Ii,xo(e,0),lo(e,s),ro(e,Je()),r;if(6===t)lo(e,s);else{if(n=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var s=0;s<r.length;s++){var n=r[s],a=n.getSnapshot;n=n.value;try{if(!ls(a(),n))return!1}catch(d){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=po(e,s))&&(0!==(l=ft(e))&&(s=l,t=no(e,l))),1===t))throw r=Ii,xo(e,0),lo(e,s),ro(e,Je()),r;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(a(345));case 2:case 5:No(e,Oi,zi);break;case 3:if(lo(e,s),(130023424&s)===s&&10<(t=Bi+500-Je())){if(0!==xt(e,0))break;if(((n=e.suspendedLanes)&s)!==s){Zi(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=rn(No.bind(null,e,Oi,zi),t);break}No(e,Oi,zi);break;case 4:if(lo(e,s),(4194240&s)===s)break;for(t=e.eventTimes,n=-1;0<s;){var d=31-lt(s);l=1<<d,(d=t[d])>n&&(n=d),s&=~l}if(s=n,10<(s=(120>(s=Je()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*wi(s/1960))-s)){e.timeoutHandle=rn(No.bind(null,e,Oi,zi),s);break}No(e,Oi,zi);break;default:throw Error(a(329))}}}return ro(e,Je()),e.callbackNode===r?so.bind(null,e):null}function no(e,t){var r=_i;return e.current.memoizedState.isDehydrated&&(xo(e,t).flags|=256),2!==(e=po(e,t))&&(t=Oi,Oi=r,null!==t&&ao(t)),e}function ao(e){null===Oi?Oi=e:Oi.push.apply(Oi,e)}function lo(e,t){for(t&=~Ui,t&=~Fi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-lt(t),s=1<<r;e[r]=-1,t&=~s}}function io(e){if(0!==(6&Ei))throw Error(a(327));yo();var t=xt(e,0);if(0===(1&t))return ro(e,Je()),null;var r=po(e,t);if(0!==e.tag&&2===r){var s=ft(e);0!==s&&(t=s,r=no(e,s))}if(1===r)throw r=Ii,xo(e,0),lo(e,t),ro(e,Je()),r;if(6===r)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,No(e,Oi,zi),ro(e,Je()),null}function oo(e,t){var r=Ei;Ei|=1;try{return e(t)}finally{0===(Ei=r)&&($i=Je()+500,On&&zn())}}function co(e){null!==Yi&&0===Yi.tag&&0===(6&Ei)&&yo();var t=Ei;Ei|=1;var r=Ci.transition,s=vt;try{if(Ci.transition=null,vt=1,e)return e()}finally{vt=s,Ci.transition=r,0===(6&(Ei=t))&&zn()}}function uo(){Mi=Pi.current,Sn(Pi)}function xo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,sn(r)),null!==Li)for(r=Li.return;null!==r;){var s=r;switch(ta(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Rn();break;case 3:Ka(),Sn(Ln),Sn(Dn),rl();break;case 5:Xa(s);break;case 4:Ka();break;case 13:case 19:Sn(Za);break;case 10:Ea(s.type._context);break;case 22:case 23:uo()}r=r.return}if(Di=e,Li=e=Ro(e.current,null),Ti=Mi=t,Ri=0,Ii=null,Ui=Fi=Ai=0,Oi=_i=null,null!==Ma){for(t=0;t<Ma.length;t++)if(null!==(s=(r=Ma[t]).interleaved)){r.interleaved=null;var n=s.next,a=r.pending;if(null!==a){var l=a.next;a.next=n,s.next=l}r.pending=s}Ma=null}return e}function mo(e,t){for(;;){var r=Li;try{if(Ca(),sl.current=Jl,ol){for(var s=ll.memoizedState;null!==s;){var n=s.queue;null!==n&&(n.pending=null),s=s.next}ol=!1}if(al=0,il=dl=ll=null,cl=!1,ul=0,Si.current=null,null===r||null===r.return){Ri=1,Ii=t,Li=null;break}e:{var l=e,d=r.return,i=r,o=t;if(t=Ti,i.flags|=32768,null!==o&&"object"===typeof o&&"function"===typeof o.then){var c=o,u=i,x=u.tag;if(0===(1&u.mode)&&(0===x||11===x||15===x)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=hd(d);if(null!==f){f.flags&=-257,pd(f,d,i,0,t),1&f.mode&&fd(l,c,t),o=c;var h=(t=f).updateQueue;if(null===h){var p=new Set;p.add(o),t.updateQueue=p}else h.add(o);break e}if(0===(1&t)){fd(l,c,t),ho();break e}o=Error(a(426))}else if(na&&1&i.mode){var b=hd(d);if(null!==b){0===(65536&b.flags)&&(b.flags|=256),pd(b,d,i,0,t),fa(id(o,i));break e}}l=o=id(o,i),4!==Ri&&(Ri=2),null===_i?_i=[l]:_i.push(l),l=d;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,$a(l,xd(0,o,t));break e;case 1:i=o;var g=l.type,v=l.stateNode;if(0===(128&l.flags)&&("function"===typeof g.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Wi||!Wi.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t,$a(l,md(l,i,t));break e}}l=l.return}while(null!==l)}jo(r)}catch(j){t=j,Li===r&&null!==r&&(Li=r=r.return);continue}break}}function fo(){var e=ki.current;return ki.current=Jl,null===e?Jl:e}function ho(){0!==Ri&&3!==Ri&&2!==Ri||(Ri=4),null===Di||0===(268435455&Ai)&&0===(268435455&Fi)||lo(Di,Ti)}function po(e,t){var r=Ei;Ei|=2;var s=fo();for(Di===e&&Ti===t||(zi=null,xo(e,t));;)try{bo();break}catch(n){mo(e,n)}if(Ca(),Ei=r,ki.current=s,null!==Li)throw Error(a(261));return Di=null,Ti=0,Ri}function bo(){for(;null!==Li;)vo(Li)}function go(){for(;null!==Li&&!Qe();)vo(Li)}function vo(e){var t=yi(e.alternate,e,Mi);e.memoizedProps=e.pendingProps,null===t?jo(e):Li=t,Si.current=null}function jo(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Gd(r,t,Mi)))return void(Li=r)}else{if(null!==(r=Yd(r,t)))return r.flags&=32767,void(Li=r);if(null===e)return Ri=6,void(Li=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Li=t);Li=t=e}while(null!==t);0===Ri&&(Ri=5)}function No(e,t,r){var s=vt,n=Ci.transition;try{Ci.transition=null,vt=1,function(e,t,r,s){do{yo()}while(null!==Yi);if(0!==(6&Ei))throw Error(a(327));r=e.finishedWork;var n=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-lt(r),a=1<<n;t[n]=0,s[n]=-1,e[n]=-1,r&=~a}}(e,l),e===Di&&(Li=Di=null,Ti=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Gi||(Gi=!0,Lo(tt,function(){return yo(),null})),l=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||l){l=Ci.transition,Ci.transition=null;var d=vt;vt=1;var i=Ei;Ei|=4,Si.current=null,function(e,t){if(Zs=Ht,xs(e=us())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(s&&0!==s.rangeCount){r=s.anchorNode;var n=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{r.nodeType,l.nodeType}catch(N){r=null;break e}var d=0,i=-1,o=-1,c=0,u=0,x=e,m=null;t:for(;;){for(var f;x!==r||0!==n&&3!==x.nodeType||(i=d+n),x!==l||0!==s&&3!==x.nodeType||(o=d+s),3===x.nodeType&&(d+=x.nodeValue.length),null!==(f=x.firstChild);)m=x,x=f;for(;;){if(x===e)break t;if(m===r&&++c===n&&(i=d),m===l&&++u===s&&(o=d),null!==(f=x.nextSibling))break;m=(x=m).parentNode}x=f}r=-1===i||-1===o?null:{start:i,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(en={focusedElem:e,selectionRange:r},Ht=!1,Jd=t;null!==Jd;)if(e=(t=Jd).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jd=e;else for(;null!==Jd;){t=Jd;try{var h=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var p=h.memoizedProps,b=h.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?p:td(t.type,p),b);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var j=t.stateNode.containerInfo;1===j.nodeType?j.textContent="":9===j.nodeType&&j.documentElement&&j.removeChild(j.documentElement);break;default:throw Error(a(163))}}catch(N){ko(t,t.return,N)}if(null!==(e=t.sibling)){e.return=t.return,Jd=e;break}Jd=t.return}h=ei,ei=!1}(e,r),hi(r,e),ms(en),Ht=!!Zs,en=Zs=null,e.current=r,bi(r,e,n),Ke(),Ei=i,vt=d,Ci.transition=l}else e.current=r;if(Gi&&(Gi=!1,Yi=e,qi=n),l=e.pendingLanes,0===l&&(Wi=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),ro(e,Je()),null!==t)for(s=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(Vi)throw Vi=!1,e=Hi,Hi=null,e;0!==(1&qi)&&0!==e.tag&&yo(),l=e.pendingLanes,0!==(1&l)?e===Ki?Qi++:(Qi=0,Ki=e):Qi=0,zn()}(e,t,r,s)}finally{Ci.transition=n,vt=s}return null}function yo(){if(null!==Yi){var e=jt(qi),t=Ci.transition,r=vt;try{if(Ci.transition=null,vt=16>e?16:e,null===Yi)var s=!1;else{if(e=Yi,Yi=null,qi=0,0!==(6&Ei))throw Error(a(331));var n=Ei;for(Ei|=4,Jd=e.current;null!==Jd;){var l=Jd,d=l.child;if(0!==(16&Jd.flags)){var i=l.deletions;if(null!==i){for(var o=0;o<i.length;o++){var c=i[o];for(Jd=c;null!==Jd;){var u=Jd;switch(u.tag){case 0:case 11:case 15:ti(8,u,l)}var x=u.child;if(null!==x)x.return=u,Jd=x;else for(;null!==Jd;){var m=(u=Jd).sibling,f=u.return;if(ni(u),u===c){Jd=null;break}if(null!==m){m.return=f,Jd=m;break}Jd=f}}}var h=l.alternate;if(null!==h){var p=h.child;if(null!==p){h.child=null;do{var b=p.sibling;p.sibling=null,p=b}while(null!==p)}}Jd=l}}if(0!==(2064&l.subtreeFlags)&&null!==d)d.return=l,Jd=d;else e:for(;null!==Jd;){if(0!==(2048&(l=Jd).flags))switch(l.tag){case 0:case 11:case 15:ti(9,l,l.return)}var g=l.sibling;if(null!==g){g.return=l.return,Jd=g;break e}Jd=l.return}}var v=e.current;for(Jd=v;null!==Jd;){var j=(d=Jd).child;if(0!==(2064&d.subtreeFlags)&&null!==j)j.return=d,Jd=j;else e:for(d=v;null!==Jd;){if(0!==(2048&(i=Jd).flags))try{switch(i.tag){case 0:case 11:case 15:ri(9,i)}}catch(y){ko(i,i.return,y)}if(i===d){Jd=null;break e}var N=i.sibling;if(null!==N){N.return=i.return,Jd=N;break e}Jd=i.return}}if(Ei=n,zn(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(nt,e)}catch(y){}s=!0}return s}finally{vt=r,Ci.transition=t}}return!1}function wo(e,t,r){e=Oa(e,t=xd(0,t=id(r,t),1),1),t=Zi(),null!==e&&(bt(e,1,t),ro(e,t))}function ko(e,t,r){if(3===e.tag)wo(e,e,r);else for(;null!==t;){if(3===t.tag){wo(t,e,r);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Wi||!Wi.has(s))){t=Oa(t,e=md(t,e=id(r,e),1),1),e=Zi(),null!==t&&(bt(t,1,e),ro(t,e));break}}t=t.return}}function So(e,t,r){var s=e.pingCache;null!==s&&s.delete(t),t=Zi(),e.pingedLanes|=e.suspendedLanes&r,Di===e&&(Ti&r)===r&&(4===Ri||3===Ri&&(130023424&Ti)===Ti&&500>Je()-Bi?xo(e,0):Ui|=r),ro(e,t)}function Co(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var r=Zi();null!==(e=Ia(e,t))&&(bt(e,t,r),ro(e,r))}function Eo(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Co(e,r)}function Do(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;null!==n&&(r=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(a(314))}null!==s&&s.delete(t),Co(e,r)}function Lo(e,t){return Ye(e,t)}function To(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mo(e,t,r,s){return new To(e,t,r,s)}function Po(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ro(e,t){var r=e.alternate;return null===r?((r=Mo(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Io(e,t,r,s,n,l){var d=2;if(s=e,"function"===typeof e)Po(e)&&(d=1);else if("string"===typeof e)d=5;else e:switch(e){case w:return Ao(r.children,n,l,t);case k:d=8,n|=8;break;case S:return(e=Mo(12,r,t,2|n)).elementType=S,e.lanes=l,e;case L:return(e=Mo(13,r,t,n)).elementType=L,e.lanes=l,e;case T:return(e=Mo(19,r,t,n)).elementType=T,e.lanes=l,e;case R:return Fo(r,n,l,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:d=10;break e;case E:d=9;break e;case D:d=11;break e;case M:d=14;break e;case P:d=16,s=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Mo(d,r,t,n)).elementType=e,t.type=s,t.lanes=l,t}function Ao(e,t,r,s){return(e=Mo(7,e,s,t)).lanes=r,e}function Fo(e,t,r,s){return(e=Mo(22,e,s,t)).elementType=R,e.lanes=r,e.stateNode={isHidden:!1},e}function Uo(e,t,r){return(e=Mo(6,e,null,t)).lanes=r,e}function _o(e,t,r){return(t=Mo(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oo(e,t,r,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pt(0),this.expirationTimes=pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Bo(e,t,r,s,n,a,l,d,i){return e=new Oo(e,t,r,d,i),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Mo(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fa(a),e}function $o(e){if(!e)return En;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var r=e.type;if(Pn(r))return An(e,r,t)}return t}function zo(e,t,r,s,n,a,l,d,i){return(e=Bo(r,s,!0,e,0,a,0,d,i)).context=$o(null),r=e.current,(a=_a(s=Zi(),n=eo(r))).callback=void 0!==t&&null!==t?t:null,Oa(r,a,n),e.current.lanes=n,bt(e,n,s),ro(e,s),e}function Vo(e,t,r,s){var n=t.current,a=Zi(),l=eo(n);return r=$o(r),null===t.context?t.context=r:t.pendingContext=r,(t=_a(a,l)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=Oa(n,t,l))&&(to(e,n,l,a),Ba(e,n,l)),l}function Ho(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wo(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Go(e,t){Wo(e,t),(e=e.alternate)&&Wo(e,t)}yi=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ln.current)gd=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return gd=!1,function(e,t,r){switch(t.tag){case 3:Dd(t),ma();break;case 5:Ja(t);break;case 1:Pn(t.type)&&Fn(t);break;case 4:Qa(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;Cn(ya,s._currentValue),s._currentValue=n;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Cn(Za,1&Za.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Fd(e,t,r):(Cn(Za,1&Za.current),null!==(e=Vd(e,t,r))?e.sibling:null);Cn(Za,1&Za.current);break;case 19:if(s=0!==(r&t.childLanes),0!==(128&e.flags)){if(s)return $d(e,t,r);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Cn(Za,Za.current),s)break;return null;case 22:case 23:return t.lanes=0,wd(e,t,r)}return Vd(e,t,r)}(e,t,r);gd=0!==(131072&e.flags)}else gd=!1,na&&0!==(1048576&t.flags)&&Zn(t,Gn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;zd(e,t),e=t.pendingProps;var n=Mn(t,Dn.current);La(t,r),n=hl(null,t,s,e,n,r);var l=pl();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pn(s)?(l=!0,Fn(t)):l=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Fa(t),n.updater=sd,t.stateNode=n,n._reactInternals=t,dd(t,s,e,r),t=Ed(null,t,s,!0,l,r)):(t.tag=0,na&&l&&ea(t),vd(null,t,n,r),t=t.child),t;case 16:s=t.elementType;e:{switch(zd(e,t),e=t.pendingProps,s=(n=s._init)(s._payload),t.type=s,n=t.tag=function(e){if("function"===typeof e)return Po(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===D)return 11;if(e===M)return 14}return 2}(s),e=td(s,e),n){case 0:t=Sd(null,t,s,e,r);break e;case 1:t=Cd(null,t,s,e,r);break e;case 11:t=jd(null,t,s,e,r);break e;case 14:t=Nd(null,t,s,td(s.type,e),r);break e}throw Error(a(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,Sd(e,t,s,n=t.elementType===s?n:td(s,n),r);case 1:return s=t.type,n=t.pendingProps,Cd(e,t,s,n=t.elementType===s?n:td(s,n),r);case 3:e:{if(Dd(t),null===e)throw Error(a(387));s=t.pendingProps,n=(l=t.memoizedState).element,Ua(e,t),za(t,s,null,r);var d=t.memoizedState;if(s=d.element,l.isDehydrated){if(l={element:s,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=Ld(e,t,s,r,n=id(Error(a(423)),t));break e}if(s!==n){t=Ld(e,t,s,r,n=id(Error(a(424)),t));break e}for(sa=on(t.stateNode.containerInfo.firstChild),ra=t,na=!0,aa=null,r=Na(t,null,s,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ma(),s===n){t=Vd(e,t,r);break e}vd(e,t,s,r)}t=t.child}return t;case 5:return Ja(t),null===e&&oa(t),s=t.type,n=t.pendingProps,l=null!==e?e.memoizedProps:null,d=n.children,tn(s,n)?d=null:null!==l&&tn(s,l)&&(t.flags|=32),kd(e,t),vd(e,t,d,r),t.child;case 6:return null===e&&oa(t),null;case 13:return Fd(e,t,r);case 4:return Qa(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=ja(t,null,s,r):vd(e,t,s,r),t.child;case 11:return s=t.type,n=t.pendingProps,jd(e,t,s,n=t.elementType===s?n:td(s,n),r);case 7:return vd(e,t,t.pendingProps,r),t.child;case 8:case 12:return vd(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,l=t.memoizedProps,d=n.value,Cn(ya,s._currentValue),s._currentValue=d,null!==l)if(ls(l.value,d)){if(l.children===n.children&&!Ln.current){t=Vd(e,t,r);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var i=l.dependencies;if(null!==i){d=l.child;for(var o=i.firstContext;null!==o;){if(o.context===s){if(1===l.tag){(o=_a(-1,r&-r)).tag=2;var c=l.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?o.next=o:(o.next=u.next,u.next=o),c.pending=o}}l.lanes|=r,null!==(o=l.alternate)&&(o.lanes|=r),Da(l.return,r,t),i.lanes|=r;break}o=o.next}}else if(10===l.tag)d=l.type===t.type?null:l.child;else if(18===l.tag){if(null===(d=l.return))throw Error(a(341));d.lanes|=r,null!==(i=d.alternate)&&(i.lanes|=r),Da(d,r,t),d=l.sibling}else d=l.child;if(null!==d)d.return=l;else for(d=l;null!==d;){if(d===t){d=null;break}if(null!==(l=d.sibling)){l.return=d.return,d=l;break}d=d.return}l=d}vd(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,La(t,r),s=s(n=Ta(n)),t.flags|=1,vd(e,t,s,r),t.child;case 14:return n=td(s=t.type,t.pendingProps),Nd(e,t,s,n=td(s.type,n),r);case 15:return yd(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:td(s,n),zd(e,t),t.tag=1,Pn(s)?(e=!0,Fn(t)):e=!1,La(t,r),ad(t,s,n),dd(t,s,n,r),Ed(null,t,s,!0,e,r);case 19:return $d(e,t,r);case 22:return wd(e,t,r)}throw Error(a(156,t.tag))};var Yo="function"===typeof reportError?reportError:function(e){console.error(e)};function qo(e){this._internalRoot=e}function Qo(e){this._internalRoot=e}function Ko(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jo(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xo(){}function Zo(e,t,r,s,n){var a=r._reactRootContainer;if(a){var l=a;if("function"===typeof n){var d=n;n=function(){var e=Ho(l);d.call(e)}}Vo(t,l,e,n)}else l=function(e,t,r,s,n){if(n){if("function"===typeof s){var a=s;s=function(){var e=Ho(l);a.call(e)}}var l=zo(t,s,e,0,null,!1,0,"",Xo);return e._reactRootContainer=l,e[fn]=l.current,$s(8===e.nodeType?e.parentNode:e),co(),l}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof s){var d=s;s=function(){var e=Ho(i);d.call(e)}}var i=Bo(e,0,!1,null,0,!1,0,"",Xo);return e._reactRootContainer=i,e[fn]=i.current,$s(8===e.nodeType?e.parentNode:e),co(function(){Vo(t,i,r,s)}),i}(r,t,e,n,s);return Ho(l)}Qo.prototype.render=qo.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vo(e,t,null,null)},Qo.prototype.unmount=qo.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;co(function(){Vo(null,e,null,null)}),t[fn]=null}},Qo.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Rt.length&&0!==t&&t<Rt[r].priority;r++);Rt.splice(r,0,e),0===r&&Ut(e)}},Nt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(gt(t,1|r),ro(t,Je()),0===(6&Ei)&&($i=Je()+500,zn()))}break;case 13:co(function(){var t=Ia(e,1);if(null!==t){var r=Zi();to(t,e,1,r)}}),Go(e,1)}},yt=function(e){if(13===e.tag){var t=Ia(e,134217728);if(null!==t)to(t,e,134217728,Zi());Go(e,134217728)}},wt=function(e){if(13===e.tag){var t=eo(e),r=Ia(e,t);if(null!==r)to(r,e,t,Zi());Go(e,t)}},kt=function(){return vt},St=function(e,t){var r=vt;try{return vt=e,t()}finally{vt=r}},ye=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var n=Nn(s);if(!n)throw Error(a(90));Y(s),X(s,n)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},De=oo,Le=co;var ec={usingClientEntryPoint:!1,Events:[vn,jn,Nn,Ce,Ee,oo]},tc={findFiberByHostInstance:gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{nt=sc.inject(rc),at=sc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ko(t))throw Error(a(200));return function(e,t,r){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==s?null:""+s,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Ko(e))throw Error(a(299));var r=!1,s="",n=Yo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=Bo(e,1,!1,null,0,r,0,s,n),e[fn]=t.current,$s(8===e.nodeType?e.parentNode:e),new qo(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return co(e)},t.hydrate=function(e,t,r){if(!Jo(t))throw Error(a(200));return Zo(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Ko(e))throw Error(a(405));var s=null!=r&&r.hydratedSources||null,n=!1,l="",d=Yo;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(l=r.identifierPrefix),void 0!==r.onRecoverableError&&(d=r.onRecoverableError)),t=zo(t,null,e,1,null!=r?r:null,n,0,l,d),e[fn]=t.current,$s(e),s)for(e=0;e<s.length;e++)n=(n=(r=s[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new Qo(t)},t.render=function(e,t,r){if(!Jo(t))throw Error(a(200));return Zo(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Jo(e))throw Error(a(40));return!!e._reactRootContainer&&(co(function(){Zo(null,null,e,!1,function(){e._reactRootContainer=null,e[fn]=null})}),!0)},t.unstable_batchedUpdates=oo,t.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Jo(r))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zo(e,t,r,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},772:(e,t,r)=>{var s=r(950);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},853:(e,t,r)=>{e.exports=r(234)},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,r),a.exports}var s,n=r(43),a=r(772);const l=null===(s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===s?void 0:s.REACT_APP_API_BASE,d=({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||l||"/api").replace(/\/$/,"");function i(e){return e.startsWith("/")||(e="/"+e),d+e}var o=r(579);const c=e=>{let{isOpen:t,onClose:r}=e;const[s,a]=(0,n.useState)([{name:"PostgreSQL Database",status:"UNKNOWN"},{name:"API Gateway",status:"UNKNOWN"},{name:"Backend Service",status:"UNKNOWN"},{name:"CDS Risk Engine",status:"UNKNOWN"},{name:"Open Source Risk Engine (ORE)",status:"UNKNOWN"},{name:"React Frontend",status:"UNKNOWN"}]),[l,i]=(0,n.useState)(null),[c,u]=(0,n.useState)(!0),[x,m]=(0,n.useState)(!1),f=async()=>{m(!0);try{var e,t,r,s,n,l,o,c;const u=await fetch(`${d}/health/status`),x=await u.json(),m=()=>Math.floor(15*Math.random())+5,f=[{name:"PostgreSQL Database",status:"UP"===(null===(e=x.backendStatus)||void 0===e?void 0:e.status)?"ONLINE":"OFFLINE",responseTime:null===(t=x.backendStatus)||void 0===t?void 0:t.responseTime,lastChecked:(new Date).toLocaleTimeString(),error:"UP"!==(null===(r=x.backendStatus)||void 0===r?void 0:r.status)?"Database connection issues":void 0},{name:"API Gateway",status:"UP"===x.status?"ONLINE":"OFFLINE",responseTime:15,lastChecked:(new Date).toLocaleTimeString(),url:d.replace("/api",""),error:"UP"!==x.status?"Gateway unavailable":void 0},{name:"Backend Service",status:"UP"===(null===(s=x.backendStatus)||void 0===s?void 0:s.status)?"ONLINE":"OFFLINE",responseTime:null===(n=x.backendStatus)||void 0===n?void 0:n.responseTime,lastChecked:(new Date).toLocaleTimeString(),url:null!==(l=x.backendStatus)&&void 0!==l&&l.healthEndpoint?`${d.replace("/api","")}${x.backendStatus.healthEndpoint}`:"Backend Service",error:(null===(o=x.backendStatus)||void 0===o?void 0:o.error)||("UP"!==(null===(c=x.backendStatus)||void 0===c?void 0:c.status)?"Service unavailable":void 0)},{name:"CDS Risk Engine",status:"ONLINE",responseTime:m(),lastChecked:(new Date).toLocaleTimeString(),url:"http://localhost:8082"},{name:"Open Source Risk Engine (ORE)",status:"ONLINE",responseTime:m(),lastChecked:(new Date).toLocaleTimeString(),url:"ore-engine"},{name:"React Frontend",status:"ONLINE",responseTime:m(),lastChecked:(new Date).toLocaleTimeString(),url:"http://localhost:3000"}];a(f),i(new Date)}catch(u){console.error("Failed to check services health:",u),a([{name:"PostgreSQL Database",status:"UNKNOWN",error:"Cannot reach gateway"},{name:"API Gateway",status:"OFFLINE",error:"Connection failed",url:"http://localhost:8081"},{name:"Backend Service",status:"UNKNOWN",error:"Cannot reach gateway"},{name:"CDS Risk Engine",status:"UNKNOWN",error:"Cannot reach gateway",url:"http://localhost:8082"},{name:"Open Source Risk Engine (ORE)",status:"UNKNOWN",error:"Cannot reach gateway",url:"ore-engine"},{name:"React Frontend",status:"UNKNOWN",error:"Cannot reach gateway",url:"http://localhost:3000"}])}finally{m(!1)}};if((0,n.useEffect)(()=>{t&&f()},[t]),(0,n.useEffect)(()=>{if(c&&t){const e=setInterval(f,5e3);return()=>clearInterval(e)}},[c,t]),!t)return null;const h=e=>{switch(e){case"ONLINE":return"bg-fd-green text-fd-dark";case"OFFLINE":return"bg-red-500 text-white";default:return"bg-fd-text-muted text-fd-dark"}},p=s.filter(e=>"ONLINE"===e.status).length,b=s.length,g=Math.round(p/b*100),v=s.filter(e=>e.responseTime).reduce((e,t)=>e+(t.responseTime||0),0)/s.filter(e=>e.responseTime).length||0;return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-fd-darker border border-fd-border rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-fd-border",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-fd-text",children:"Services Status"}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"text-fd-text-muted text-sm",children:"Auto Refresh (5 seconds)"}),(0,o.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,o.jsx)("input",{type:"checkbox",checked:c,onChange:e=>u(e.target.checked),className:"sr-only peer"}),(0,o.jsx)("div",{className:"w-11 h-6 bg-fd-input peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-fd-green"})]})]}),(0,o.jsx)("button",{onClick:f,disabled:x,className:"px-3 py-1 bg-fd-green text-fd-dark rounded hover:bg-fd-green-hover disabled:opacity-50 transition-colors",children:x?"Refreshing...":"Refresh Now"}),(0,o.jsx)("button",{onClick:r,className:"text-fd-text-muted hover:text-fd-text",children:"\u2715"})]})]}),(0,o.jsxs)("div",{className:"p-6 border-b border-fd-border",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-4",children:"Services Overview"}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsxs)("div",{className:"text-left",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,o.jsx)("div",{className:"w-3 h-3 bg-fd-green rounded-full"}),(0,o.jsx)("span",{className:"text-fd-text-muted",children:"System Health"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsxs)("span",{className:"text-2xl font-bold text-fd-text",children:[g,"%"]}),(0,o.jsx)("span",{className:"text-sm px-2 py-1 rounded "+(100===g?"bg-fd-green text-fd-dark":"bg-red-500 text-white"),children:100===g?"Good":"Issues"})]})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,o.jsx)("div",{className:"w-3 h-3 bg-fd-green rounded-full"}),(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Services Online"})]}),(0,o.jsxs)("span",{className:"text-2xl font-bold text-fd-green",children:[p,"/",b]})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,o.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Issues"})]}),(0,o.jsx)("span",{className:"text-2xl font-bold text-red-500",children:b-p})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,o.jsx)("div",{className:"w-3 h-3 bg-fd-cyan rounded-full"}),(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Avg Response"})]}),(0,o.jsx)("span",{className:"text-2xl font-bold text-fd-cyan",children:v>0?`${Math.round(v)}ms`:"--"})]})]}),l&&(0,o.jsxs)("p",{className:"text-fd-text-muted text-sm mt-4",children:["Last updated: ",l.toLocaleTimeString(),(0,o.jsx)("span",{className:"text-fd-green ml-2",children:"(Auto-refreshing every 5 seconds)"})]})]}),(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-4",children:"Service Details"}),(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((e,t)=>(0,o.jsxs)("div",{className:"bg-fd-dark border border-fd-border rounded-lg p-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,o.jsx)("h4",{className:"font-semibold text-fd-text",children:e.name}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:`text-xs px-2 py-1 rounded font-medium ${h(e.status)}`,children:e.status}),"ONLINE"===e.status&&(0,o.jsx)("div",{className:"w-2 h-2 bg-fd-green rounded-full animate-pulse"}),"OFFLINE"===e.status&&(0,o.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"})]})]}),(0,o.jsxs)("div",{className:"space-y-2 text-sm",children:[e.url&&(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"URL: "}),(0,o.jsx)("span",{className:"text-fd-text font-mono text-xs",children:e.url})]}),e.responseTime&&(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Response Time: "}),(0,o.jsxs)("span",{className:"text-fd-cyan font-medium",children:[e.responseTime,"ms"]})]}),e.lastChecked&&(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Last Checked: "}),(0,o.jsx)("span",{className:"text-fd-text",children:e.lastChecked})]}),e.error&&(0,o.jsx)("div",{className:"mt-2 p-2 bg-red-900/20 border border-red-500/30 rounded",children:(0,o.jsxs)("span",{className:"text-red-400 text-xs",children:["Error: ",e.error]})})]})]},t))})]})]})})},u=()=>{const[e,t]=(0,n.useState)(new Date),[r,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{const e=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(e)},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("nav",{className:"bg-fd-darker border-b border-fd-border py-3 px-6",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("div",{className:"flex items-center space-x-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-3 h-3 bg-fd-green rounded-full animate-pulse"}),(0,o.jsx)("button",{onClick:()=>s(!0),className:"text-fd-green font-medium hover:text-fd-green-hover transition-colors cursor-pointer",children:"CREDIT DEFAULT SWAP PLATFORM"})]})}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("span",{className:"text-fd-text-muted text-sm",children:e.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),(0,o.jsx)("span",{className:"text-fd-green font-mono text-lg",children:e.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})}),(0,o.jsx)(c,{isOpen:r,onClose:()=>s(!1)})]})},x=[{code:"TECH",name:"Technology"},{code:"FINANCIALS",name:"Financials"},{code:"ENERGY",name:"Energy"},{code:"HEALTHCARE",name:"Healthcare"},{code:"CONSUMER",name:"Consumer Discretionary"},{code:"INDUSTRIALS",name:"Industrials"},{code:"UTILITIES",name:"Utilities"},{code:"MATERIALS",name:"Materials"}],m=[{code:"AAPL",name:"Apple Inc.",sector:"TECH"},{code:"MSFT",name:"Microsoft Corporation",sector:"TECH"},{code:"JPM",name:"JPMorgan Chase & Co.",sector:"FINANCIALS"},{code:"BAC",name:"Bank of America Corp.",sector:"FINANCIALS"},{code:"WFC",name:"Wells Fargo & Company",sector:"FINANCIALS"},{code:"GS",name:"Goldman Sachs Group Inc.",sector:"FINANCIALS"},{code:"MS",name:"Morgan Stanley",sector:"FINANCIALS"},{code:"C",name:"Citigroup Inc.",sector:"FINANCIALS"},{code:"AMZN",name:"Amazon.com Inc.",sector:"TECH"},{code:"GOOGL",name:"Alphabet Inc.",sector:"TECH"},{code:"TSLA",name:"Tesla Inc.",sector:"TECH"},{code:"NFLX",name:"Netflix Inc.",sector:"TECH"},{code:"META",name:"Meta Platforms Inc.",sector:"TECH"},{code:"NVDA",name:"NVIDIA Corporation",sector:"TECH"},{code:"AMD",name:"Advanced Micro Devices Inc.",sector:"TECH"}],f=[{code:"BARCLAYS",name:"Barclays Capital Inc."},{code:"DEUTSCHE",name:"Deutsche Bank AG"},{code:"CITI",name:"Citibank N.A."},{code:"JPMORGAN",name:"J.P. Morgan Securities LLC"},{code:"GOLDMAN",name:"Goldman Sachs & Co. LLC"},{code:"MORGAN_STANLEY",name:"Morgan Stanley & Co. LLC"},{code:"UBS",name:"UBS Securities LLC"},{code:"CREDIT_SUISSE",name:"Credit Suisse Securities (USA) LLC"},{code:"BOA",name:"BofA Securities Inc."},{code:"WELLS_FARGO",name:"Wells Fargo Securities LLC"}],h=[{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"JPY",name:"Japanese Yen"},{code:"CHF",name:"Swiss Franc"},{code:"CAD",name:"Canadian Dollar"},{code:"AUD",name:"Australian Dollar"}],p=[{value:"QUARTERLY",label:"Quarterly"},{value:"SEMI_ANNUAL",label:"Semi-Annual"},{value:"ANNUAL",label:"Annual"}],b=[{value:"ACT_360",label:"Actual/360"},{value:"ACT_365",label:"Actual/365"},{value:"30_360",label:"30/360"},{value:"ACT_ACT",label:"Actual/Actual"}],g=[{value:"NO_RESTRUCTURING",label:"No Restructuring (No R)"},{value:"MODIFIED_RESTRUCTURING",label:"Modified Restructuring (Mod R)"},{value:"MODIFIED_MODIFIED_RESTRUCTURING",label:"Modified Modified Restructuring (Mod Mod R)"},{value:"FULL_RESTRUCTURING",label:"Full Restructuring (Full R)"}],v=[{value:"NYC",label:"New York"},{value:"LON",label:"London"},{value:"TARGET",label:"TARGET (Europe)"},{value:"TOK",label:"Tokyo"},{value:"SYD",label:"Sydney"}],j=[{value:"PENDING",label:"Pending"},{value:"ACTIVE",label:"Active"},{value:"PARTIALLY_TERMINATED",label:"Partially Terminated"},{value:"TERMINATED",label:"Terminated"},{value:"CANCELLED",label:"Cancelled"}],N=[{value:"CASH",label:"Cash Settlement"},{value:"PHYSICAL",label:"Physical Settlement"}];const y=new class{constructor(){this.baseUrl=`${d}/bonds`}async createBond(e){const t=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.text();throw new Error(e||"Failed to create bond")}return t.json()}async getAllBonds(){const e=await fetch(this.baseUrl);if(!e.ok)throw new Error("Failed to fetch bonds");return e.json()}async getBondById(e){const t=await fetch(`${this.baseUrl}/${e}`);if(!t.ok)throw new Error("Bond not found");return t.json()}async updateBond(e,t){const r=await fetch(`${this.baseUrl}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const e=await r.text();throw new Error(e||"Failed to update bond")}return r.json()}async priceBond(e,t,r,s){const n=new URLSearchParams;t&&n.append("valuationDate",t),void 0!==r&&n.append("discountRate",r.toString()),void 0!==s&&n.append("hazardRate",s.toString());const a=await fetch(`${this.baseUrl}/${e}/price?${n.toString()}`,{method:"POST"});if(!a.ok){const e=await a.text();throw new Error(e||"Failed to price bond")}return a.json()}async getBondsByIssuer(e){const t=await fetch(`${this.baseUrl}/issuer/${e}`);if(!t.ok)throw new Error("Failed to fetch bonds by issuer");return t.json()}},w=e=>{var t;let{onSubmit:r}=e;const[s,a]=(0,n.useState)({tradeDate:(new Date).toISOString().split("T")[0],currency:"USD",premiumFrequency:"QUARTERLY",dayCountConvention:"ACT_360",buySellProtection:"BUY",paymentCalendar:"NYC",tradeStatus:"PENDING",recoveryRate:40,settlementType:"CASH"}),[l,d]=(0,n.useState)({}),[i,c]=(0,n.useState)(!1),[u,x]=(0,n.useState)([]),[w,k]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{if(s.referenceEntity){k(!0);try{const e=await y.getBondsByIssuer(s.referenceEntity);x(e)}catch(e){console.error("Error fetching bonds:",e),x([])}finally{k(!1)}}else x([])})()},[s.referenceEntity]);const S=(e,t)=>{a(r=>{const s={};return"obligation"===e?s.obligation=t?{id:t}:void 0:s[e]=t,"referenceEntity"===e&&r.referenceEntity!==t&&(s.obligation=void 0),{...r,...s}}),l[e]&&d(t=>({...t,[e]:""}))},C=e=>"w-full px-3 py-2 bg-fd-input border rounded-md text-fd-text placeholder-fd-text-muted focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-fd-green "+(l[e]?"border-red-500":"border-fd-border"),E=e=>"w-full px-3 py-2 bg-fd-input border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-fd-green "+(l[e]?"border-red-500":"border-fd-border");return(0,o.jsxs)("div",{className:"max-w-4xl mx-auto bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6",children:[(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsx)("h2",{className:"text-2xl font-bold text-fd-text",children:"New CDS Trade Entry"})}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{var e;const t={};return s.referenceEntity||(t.referenceEntity="Reference Entity is required"),!s.referenceEntity||null!==(e=s.obligation)&&void 0!==e&&e.id||(t.obligation="Obligation is required"),(!s.notionalAmount||s.notionalAmount<=0)&&(t.notionalAmount="Notional Amount must be greater than 0"),(!s.spread||s.spread<0)&&(t.spread="Spread must be 0 or greater"),(!s.recoveryRate||s.recoveryRate<0||s.recoveryRate>100)&&(t.recoveryRate="Recovery Rate must be between 0 and 100"),s.maturityDate||(t.maturityDate="Maturity Date is required"),s.effectiveDate||(t.effectiveDate="Effective Date is required"),s.counterparty||(t.counterparty="Counterparty is required"),s.tradeDate||(t.tradeDate="Trade Date is required"),s.accrualStartDate||(t.accrualStartDate="Accrual Start Date is required"),s.effectiveDate&&s.maturityDate&&new Date(s.effectiveDate)>=new Date(s.maturityDate)&&(t.maturityDate="Maturity Date must be after Effective Date"),s.tradeDate&&s.effectiveDate&&new Date(s.tradeDate)>new Date(s.effectiveDate)&&(t.effectiveDate="Effective Date must be on or after Trade Date"),d(t),0===Object.keys(t).length})()&&(c(!0),"SETTLED"!==s.tradeStatus&&"CONFIRMED"!==s.tradeStatus||(s.tradeStatus="ACTIVE"),setTimeout(()=>{r(s),c(!1),a({tradeDate:(new Date).toISOString().split("T")[0],currency:"USD",premiumFrequency:"QUARTERLY",dayCountConvention:"ACT_360",buySellProtection:"BUY",paymentCalendar:"NYC",tradeStatus:"PENDING",recoveryRate:40,settlementType:"CASH"})},1e3))},className:"space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Reference Entity ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsxs)("select",{value:s.referenceEntity||"",onChange:e=>S("referenceEntity",e.target.value),className:E("referenceEntity"),children:[(0,o.jsx)("option",{value:"",children:"Select Reference Entity"}),m.map(e=>(0,o.jsxs)("option",{value:e.code,children:[e.code," - ",e.name]},e.code))]}),l.referenceEntity&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.referenceEntity})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Counterparty ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsxs)("select",{value:s.counterparty||"",onChange:e=>S("counterparty",e.target.value),className:E("counterparty"),children:[(0,o.jsx)("option",{value:"",children:"Select Counterparty"}),f.map(e=>(0,o.jsx)("option",{value:e.code,children:e.name},e.code))]}),l.counterparty&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.counterparty})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Currency ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("select",{value:s.currency||"USD",onChange:e=>S("currency",e.target.value),className:E("currency"),children:h.map(e=>(0,o.jsxs)("option",{value:e.code,children:[e.code," - ",e.name]},e.code))})]})]}),s.referenceEntity&&(0,o.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Obligation (Bond) ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsxs)("select",{value:(null===(t=s.obligation)||void 0===t?void 0:t.id)||"",onChange:e=>S("obligation",e.target.value?Number(e.target.value):void 0),className:E("obligation"),disabled:w,children:[(0,o.jsx)("option",{value:"",children:"Select Obligation"}),w&&(0,o.jsx)("option",{value:"",children:"Loading bonds..."}),!w&&0===u.length&&(0,o.jsxs)("option",{value:"",children:["No bonds available for ",s.referenceEntity]}),!w&&u.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.isin?`${e.isin} - `:"",e.issuer," ",e.seniority," - Coupon: ",e.couponRate,"% - Maturity: ",new Date(e.maturityDate).toLocaleDateString()]},e.id))]}),(0,o.jsxs)("p",{className:"text-xs text-fd-text-muted mt-1",children:["Select a specific bond from ",s.referenceEntity]})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Notional Amount ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"text",value:(D=s.notionalAmount,D||0===D?D.toLocaleString("en-US"):""),onChange:e=>{const t=e.target.value.replace(/,/g,""),r=parseFloat(t);isNaN(r)&&""!==t||S("notionalAmount",""===t?void 0:r)},className:C("notionalAmount"),placeholder:"e.g., 10,000,000"}),l.notionalAmount&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.notionalAmount})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Spread (bps) ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"number",step:"0.01",min:"0",value:s.spread||"",onChange:e=>S("spread",parseFloat(e.target.value)),className:C("spread"),placeholder:"e.g., 100"}),l.spread&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.spread})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Recovery Rate (%) ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"number",step:"1",min:"0",max:"100",value:s.recoveryRate||40,onChange:e=>S("recoveryRate",parseFloat(e.target.value)),className:C("recoveryRate"),placeholder:"e.g., 40"}),l.recoveryRate&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.recoveryRate})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Buy/Sell Protection ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsxs)("select",{value:s.buySellProtection||"BUY",onChange:e=>S("buySellProtection",e.target.value),className:E("buySellProtection"),children:[(0,o.jsx)("option",{value:"BUY",children:"Buy Protection"}),(0,o.jsx)("option",{value:"SELL",children:"Sell Protection"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Settlement Type ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("select",{value:s.settlementType||"CASH",onChange:e=>S("settlementType",e.target.value),className:E("settlementType"),children:N.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Trade Date ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"date",value:s.tradeDate||"",onChange:e=>S("tradeDate",e.target.value),className:C("tradeDate")}),l.tradeDate&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.tradeDate})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Effective Date ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"date",value:s.effectiveDate||"",onChange:e=>S("effectiveDate",e.target.value),className:C("effectiveDate")}),l.effectiveDate&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.effectiveDate})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Maturity Date ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"date",value:s.maturityDate||"",onChange:e=>S("maturityDate",e.target.value),className:C("maturityDate")}),l.maturityDate&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.maturityDate})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Premium Frequency ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("select",{value:s.premiumFrequency||"QUARTERLY",onChange:e=>S("premiumFrequency",e.target.value),className:E("premiumFrequency"),children:p.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Day Count Convention ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("select",{value:s.dayCountConvention||"ACT_360",onChange:e=>S("dayCountConvention",e.target.value),className:E("dayCountConvention"),children:b.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Accrual Start Date ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"date",value:s.accrualStartDate||"",onChange:e=>S("accrualStartDate",e.target.value),className:C("accrualStartDate")}),l.accrualStartDate&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.accrualStartDate})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Payment Calendar ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("select",{value:s.paymentCalendar||"NYC",onChange:e=>S("paymentCalendar",e.target.value),className:E("paymentCalendar"),children:v.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-fd-text font-medium mb-2",children:"Restructuring Clause"}),(0,o.jsxs)("select",{value:s.restructuringClause||"",onChange:e=>S("restructuringClause",e.target.value),className:E("restructuringClause"),children:[(0,o.jsx)("option",{value:"",children:"None"}),g.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text font-medium mb-2",children:["Trade Status ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("select",{value:s.tradeStatus||"PENDING",onChange:e=>S("tradeStatus",e.target.value),className:E("tradeStatus"),children:j.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-fd-border",children:[(0,o.jsx)("button",{type:"button",onClick:()=>{const e=e=>e[Math.floor(Math.random()*e.length)],t=(e,t)=>{const r=new Date;r.setDate(r.getDate()+e);const s=new Date;s.setDate(s.getDate()+t);const n=r.getTime()+Math.random()*(s.getTime()-r.getTime());return new Date(n).toISOString().split("T")[0]},r=t(-1460,-730),s=new Date(r),n=Math.floor(7*Math.random())+1,l=new Date(s);l.setDate(l.getDate()+n);const i=l.toISOString().split("T")[0],o=t(730,1825),c=i,u=e([5e6,1e7,2e7,5e7,1e8,2e8,5e8]),x={referenceEntity:e(m).code,counterparty:e(f).code,currency:e(h).code,notionalAmount:u,spread:Math.floor(500*Math.random())+50,buySellProtection:Math.random()>.5?"BUY":"SELL",tradeDate:r,effectiveDate:i,maturityDate:o,accrualStartDate:c,premiumFrequency:e(p).value,dayCountConvention:e(b).value,restructuringClause:Math.random()>.3?e(g).value:"",paymentCalendar:e(v).value,tradeStatus:"ACTIVE",recoveryRate:40,settlementType:e(N).value};a(x),d({})},className:"px-6 py-2 bg-transparent border border-fd-border text-fd-text rounded hover:bg-fd-dark transition-colors",children:"Fill Random Data"}),(0,o.jsx)("button",{type:"button",onClick:()=>{a({tradeDate:(new Date).toISOString().split("T")[0],currency:"USD",premiumFrequency:"QUARTERLY",dayCountConvention:"ACT_360",buySellProtection:"BUY",paymentCalendar:"NYC",tradeStatus:"PENDING",recoveryRate:40}),d({})},className:"px-6 py-2 bg-transparent border border-fd-border text-fd-text rounded hover:bg-fd-dark transition-colors",children:"Clear Form"}),(0,o.jsx)("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-fd-green text-fd-dark font-medium rounded hover:bg-fd-green-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Booking Trade...":"Book Trade"})]})]})]});var D},k=e=>{let{isOpen:t,trade:r,onClose:s}=e;if(!t||!r)return null;const n=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-fd-green rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-5 h-5 text-fd-dark",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,o.jsx)("h2",{className:"text-2xl font-bold text-fd-text",children:"Trade Booked Successfully"})]}),(0,o.jsx)("button",{onClick:s,className:"text-fd-text-muted hover:text-fd-text transition-colors",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Trade ID:"}),(0,o.jsxs)("span",{className:"text-fd-green font-mono",children:["CDS-",r.id]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Booking Time:"}),(0,o.jsx)("span",{className:"text-fd-text",children:new Date(r.createdAt).toLocaleString()})]})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text border-b border-fd-border pb-2",children:"Trade Details"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Reference Entity:"}),(0,o.jsx)("span",{className:"text-fd-text",children:r.referenceEntity})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Counterparty:"}),(0,o.jsx)("span",{className:"text-fd-text",children:r.counterparty})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Direction:"}),(0,o.jsx)("span",{className:""+("BUY"===r.buySellProtection?"text-blue-400":"text-orange-400"),children:"BUY"===r.buySellProtection?"Buy Protection":"Sell Protection"})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Settlement Type:"}),(0,o.jsx)("span",{className:""+("CASH"===r.settlementType?"text-fd-cyan":"text-fd-teal"),children:"CASH"===r.settlementType?"Cash Settlement":"Physical Settlement"})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Notional:"}),(0,o.jsx)("span",{className:"text-fd-text font-medium",children:(l=r.notionalAmount,d=r.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:d||"USD"}).format(l))})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Spread:"}),(0,o.jsxs)("span",{className:"text-fd-text",children:[r.spread," bps"]})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Trade Date:"}),(0,o.jsx)("span",{className:"text-fd-text",children:n(r.tradeDate)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Effective Date:"}),(0,o.jsx)("span",{className:"text-fd-text",children:n(r.effectiveDate)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Maturity Date:"}),(0,o.jsx)("span",{className:"text-fd-text",children:n(r.maturityDate)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Premium Frequency:"}),(0,o.jsx)("span",{className:"text-fd-text",children:r.premiumFrequency.replace("_"," ")})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Status:"}),(0,o.jsx)("span",{className:"text-fd-green",children:r.tradeStatus})]})]})]}),r.restructuringClause&&(0,o.jsx)("div",{className:"pt-2 border-t border-fd-border",children:(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Restructuring Clause:"}),(0,o.jsx)("span",{className:"text-fd-text",children:(a=r.restructuringClause,{NO_RESTRUCTURING:"No R",MODIFIED_RESTRUCTURING:"Mod R",MODIFIED_MODIFIED_RESTRUCTURING:"Mod Mod R",FULL_RESTRUCTURING:"Full R"}[a]||a.replace(/_/g," "))})]})})]}),(0,o.jsx)("div",{className:"flex justify-end space-x-4 mt-8 pt-4 border-t border-fd-border",children:(0,o.jsx)("button",{onClick:s,className:"px-6 py-2 bg-fd-green text-fd-dark font-medium rounded hover:bg-fd-green-hover transition-colors",children:"Close"})})]})});var a,l,d};const S=new class{async createTrade(e){const t=await fetch(`${d}/cds-trades`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.text();throw new Error(`Failed to create trade: ${t.status} ${e}`)}return t.json()}async getAllTrades(){const e=await fetch(`${d}/cds-trades`);if(!e.ok)throw new Error(`Failed to fetch trades: ${e.status}`);return e.json()}async getTradeById(e){const t=await fetch(`${d}/cds-trades/${e}`);if(!t.ok)throw new Error(`Failed to fetch trade: ${t.status}`);return t.json()}async updateTrade(e,t){const r=await fetch(`${d}/cds-trades/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error(`Failed to update trade: ${r.status}`);return r.json()}async deleteTrade(e){const t=await fetch(`${d}/cds-trades/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete trade: ${t.status}`)}async getTradeCount(){const e=await fetch(`${d}/cds-trades/count`);if(!e.ok)throw new Error(`Failed to fetch trade count: ${e.status}`);return e.json()}async getTradesByReferenceEntity(e){const t=await fetch(`${d}/cds-trades/by-reference-entity/${e}`);if(!t.ok)throw new Error(`Failed to fetch trades by reference entity: ${t.status}`);return t.json()}async getTradesByCounterparty(e){const t=await fetch(`${d}/cds-trades/by-counterparty/${e}`);if(!t.ok)throw new Error(`Failed to fetch trades by counterparty: ${t.status}`);return t.json()}async getTradesByStatus(e){const t=await fetch(`${d}/cds-trades/by-status/${e}`);if(!t.ok)throw new Error(`Failed to fetch trades by status: ${t.status}`);return t.json()}};const C=new class{constructor(){this.baseUrl=i("")}async recordCreditEvent(e,t){const r=await fetch(`${this.baseUrl}/cds-trades/${e}/credit-events`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const e=await r.json().catch(()=>({}));throw new Error(e.detail||`Failed to record credit event: ${r.status}`)}return r.json()}async getCashSettlement(e,t){const r=await fetch(`${this.baseUrl}/cds-trades/${e}/credit-events/${t}/cash-settlement`);if(!r.ok){if(404===r.status)throw new Error("Cash settlement not found");throw new Error(`Failed to get cash settlement: ${r.status}`)}return r.json()}async getPhysicalSettlement(e,t){const r=await fetch(`${this.baseUrl}/cds-trades/${e}/credit-events/${t}/physical-instruction`);if(!r.ok){if(404===r.status)throw new Error("Physical settlement instruction not found");throw new Error(`Failed to get physical settlement: ${r.status}`)}return r.json()}async getCreditEventsForTrade(e){const t=await fetch(`${this.baseUrl}/cds-trades/${e}/credit-events`);if(!t.ok){if(404===t.status)return[];throw new Error(`Failed to get credit events: ${t.status}`)}return t.json()}async generateDemoCreditEvents(e){const t=await fetch(`${this.baseUrl}/cds-trades/${e}/demo-credit-events`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok){if(404===t.status)throw new Error("Trade not found");if(400===t.status)throw new Error("Cannot generate demo events for this trade (must be ACTIVE status)");throw new Error(`Failed to generate demo credit events: ${t.status}`)}return t.json()}async getSettlement(e,t){const r=await fetch(`${this.baseUrl}/cds-trades/${e}/credit-events/${t}/settlement`);if(!r.ok){if(404===r.status)throw new Error("Settlement not found");throw new Error(`Failed to get settlement: ${r.status}`)}return r.json()}handleApiError(e){return e.response&&e.response.data?e.response.data.detail||e.response.data.message||"An error occurred":e.message||"An unexpected error occurred"}};class E{constructor(){this.baseUrl="/api/novation"}static getInstance(){return E.instance||(E.instance=new E),E.instance}async executeNovation(e){try{const t=await fetch(`${this.baseUrl}/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw new Error(r.error||r.message||"Novation failed");return r}catch(t){throw console.error("Novation execution failed:",t),new Error(t.message||"Failed to execute novation")}}async checkNovationEligibility(e){try{const t=await fetch(`${this.baseUrl}/eligible/${e}`),r=await t.json();if(!t.ok)throw new Error(r.error||"Failed to check novation eligibility");return r}catch(t){throw console.error("Eligibility check failed:",t),new Error(t.message||"Failed to check novation eligibility")}}async getNovationHistory(e){try{const t=await fetch(`${this.baseUrl}/history/${e}`),r=await t.json();if(!t.ok)throw new Error(r.error||"Failed to get novation history");return r}catch(t){throw console.error("Novation history fetch failed:",t),new Error(t.message||"Failed to get novation history")}}async getCcpAccounts(e,t){try{const r=new URLSearchParams;e&&r.append("ccpName",e),t&&r.append("memberFirm",t);const s=`${this.baseUrl}/ccp-accounts${r.toString()?"?"+r.toString():""}`,n=await fetch(s);if(!n.ok)throw new Error("Failed to fetch CCP accounts");return await n.json()}catch(r){throw console.error("CCP accounts fetch failed:",r),new Error(r.message||"Failed to fetch CCP accounts")}}async createCcpAccount(e){try{const t=await fetch(`${this.baseUrl}/ccp-accounts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw new Error(r.error||"Failed to create CCP account");return r}catch(t){throw console.error("CCP account creation failed:",t),new Error(t.message||"Failed to create CCP account")}}}E.instance=void 0;const D=E.getInstance(),L=e=>{let{isOpen:t,trade:r,onClose:s,onConfirm:a}=e;const[l,d]=(0,n.useState)([]),[i,c]=(0,n.useState)(null),[u,x]=(0,n.useState)(!1),[m,f]=(0,n.useState)(!1),[h,p]=(0,n.useState)(null);(0,n.useEffect)(()=>{t&&b()},[t]);const b=async()=>{x(!0),p(null);try{const e=await fetch("/api/novation/ccp-accounts");if(!e.ok)throw new Error("Failed to load CCP accounts");const t=(await e.json()).filter(e=>"ACTIVE"===e.status&&e.eligibleProductTypes.includes("CDS"));d(t)}catch(h){console.error("Error loading CCP accounts:",h),p("Failed to load CCP accounts"),d([])}finally{x(!1)}};return t&&r?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-orange-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-5 h-5 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),(0,o.jsx)("h2",{className:"text-2xl font-bold text-fd-text",children:"Novate Trade to CCP"})]}),(0,o.jsx)("button",{onClick:s,className:"text-fd-text-muted hover:text-fd-text transition-colors",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 mb-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-3",children:"Trade Summary"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Trade ID:"}),(0,o.jsxs)("span",{className:"text-fd-green font-mono ml-2",children:["CDS-",r.id]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Reference Entity:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:r.referenceEntity})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Current Counterparty:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:r.counterparty})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Notional:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:(g=r.notionalAmount,v=r.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:v||"USD"}).format(g))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Spread:"}),(0,o.jsxs)("span",{className:"text-fd-text ml-2",children:[r.spread," bps"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Maturity:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:new Date(r.maturityDate).toLocaleDateString()})]})]})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-3",children:"Select CCP Account"}),u?(0,o.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-fd-green"}),(0,o.jsx)("span",{className:"ml-3 text-fd-text-muted",children:"Loading CCP accounts..."})]}):0===l.length?(0,o.jsx)("div",{className:"bg-fd-dark rounded-lg p-4 text-center",children:(0,o.jsx)("p",{className:"text-fd-text-muted",children:"No eligible CCP accounts found"})}):(0,o.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:l.map(e=>(0,o.jsxs)("div",{onClick:()=>c(e),className:"p-4 rounded-lg border cursor-pointer transition-colors "+((null===i||void 0===i?void 0:i.id)===e.id?"border-fd-green bg-fd-green/10":"border-fd-border bg-fd-dark hover:border-fd-green/50"),children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-4 h-4 rounded-full border-2 "+((null===i||void 0===i?void 0:i.id)===e.id?"border-fd-green bg-fd-green":"border-fd-border"),children:(null===i||void 0===i?void 0:i.id)===e.id&&(0,o.jsx)("div",{className:"w-full h-full rounded-full bg-fd-green flex items-center justify-center",children:(0,o.jsx)("div",{className:"w-2 h-2 rounded-full bg-fd-dark"})})}),(0,o.jsx)("span",{className:"text-fd-text font-medium",children:e.ccpName}),(0,o.jsxs)("span",{className:"text-fd-text-muted text-sm",children:["(",e.accountType,")"]})]})}),(0,o.jsxs)("div",{className:"ml-7 text-sm text-fd-text-muted",children:[(0,o.jsxs)("div",{children:["Member: ",e.memberFirm]}),(0,o.jsxs)("div",{children:["Account: ",e.accountNumber]}),e.accountName&&(0,o.jsxs)("div",{children:["Name: ",e.accountName]})]})]},e.id))})]}),i&&(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 mb-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-3",children:"Novation Impact"}),(0,o.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Original Trade:"}),(0,o.jsx)("span",{className:"text-fd-text",children:"Will be terminated"})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"New Counterparty:"}),(0,o.jsx)("span",{className:"text-fd-text font-medium",children:i.ccpName})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Clearing Account:"}),(0,o.jsx)("span",{className:"text-fd-text",children:i.accountNumber})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Economic Terms:"}),(0,o.jsx)("span",{className:"text-fd-text",children:"Preserved exactly"})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Risk Transfer:"}),(0,o.jsx)("span",{className:"text-fd-text",children:"Seamless (no gap)"})]})]})]}),h&&(0,o.jsx)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-3 mb-4",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5 text-red-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,o.jsx)("span",{className:"text-red-400 text-sm",children:h})]})}),(0,o.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-fd-border",children:[(0,o.jsx)("button",{onClick:s,disabled:m,className:"px-6 py-2 bg-fd-border text-fd-text rounded hover:bg-fd-border/80 transition-colors disabled:opacity-50",children:"Cancel"}),(0,o.jsxs)("button",{onClick:async()=>{if(r&&i){f(!0),p(null);try{await a(r.id,i.ccpName,i.memberFirm),s()}catch(h){p(h.message||"Novation failed")}finally{f(!1)}}},disabled:!i||m,className:"px-6 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[m&&(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,o.jsx)("span",{children:m?"Processing...":"Confirm Novation"})]})]})]})}):null;var g,v},T=(0,n.forwardRef)((e,t)=>{let{onTradeSelect:r}=e;const[s,a]=(0,n.useState)([]),[l,d]=(0,n.useState)(!0),[i,c]=(0,n.useState)(null),[u,x]=(0,n.useState)(null),[m,f]=(0,n.useState)(null),[h,p]=(0,n.useState)(!1),[b,g]=(0,n.useState)(null),[v,j]=(0,n.useState)(!1),[N,y]=(0,n.useState)("Novation completed successfully");(0,n.useEffect)(()=>{w()},[]),(0,n.useImperativeHandle)(t,()=>({refreshTrades:w}));const w=async()=>{try{d(!0),c(null);const e=await S.getAllTrades();a(e)}catch(e){const t=e instanceof Error?e.message:"Failed to load trades";c(t),console.error("Error loading trades:",e)}finally{d(!1)}},k=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),E=e=>{switch(e){case"PENDING":return"bg-yellow-100 text-yellow-800";case"ACTIVE":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";case"CREDIT_EVENT_RECORDED":return"bg-orange-100 text-orange-800";case"SETTLED_CASH":case"SETTLED_PHYSICAL":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return l?(0,o.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-fd-green"})}):i?(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Trades"}),(0,o.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,o.jsx)("p",{children:i})}),(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)("button",{onClick:w,className:"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200",children:"Retry"})})]})]})}):0===s.length?(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("svg",{className:"mx-auto h-12 w-12 text-fd-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("h3",{className:"mt-2 text-sm font-medium text-fd-text",children:"No trades found"}),(0,o.jsx)("p",{className:"mt-1 text-sm text-fd-text-muted",children:"Get started by creating your first CDS trade."})]}):(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-fd border border-fd-border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text",children:"CDS Trade Blotter"}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("span",{className:"text-sm text-fd-text-muted",children:[s.length," trade",1!==s.length?"s":""]}),(0,o.jsx)("button",{onClick:w,className:"px-3 py-1 bg-fd-green text-fd-dark rounded hover:bg-fd-green-hover text-sm font-medium",children:"Refresh"})]})]})}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{className:"bg-fd-dark",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Trade ID"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Reference Entity"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Counterparty"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Direction"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Notional"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Spread (bps)"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Trade Date"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Maturity"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Status"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-fd-darker divide-y divide-fd-border",children:s.map(e=>{return(0,o.jsxs)("tr",{onClick:()=>(e=>{x(e.id),r&&r(e)})(e),className:"cursor-pointer hover:bg-fd-dark transition-colors "+(u===e.id?"bg-fd-dark ring-2 ring-fd-green":""),children:[(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text",children:["CDS-",e.id]}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.referenceEntity}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.counterparty}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,o.jsx)("span",{className:""+("BUY"===e.buySellProtection?"text-blue-400":"text-orange-400"),children:"BUY"===e.buySellProtection?"Buy Protection":"Sell Protection"})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text font-medium",children:(t=e.notionalAmount,s=e.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:s||"USD"}).format(t))}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.spread}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:k(e.tradeDate)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:k(e.maturityDate)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E(e.tradeStatus)}`,children:e.tradeStatus.replace(/_/g," ")})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",onClick:e=>e.stopPropagation(),children:[(0,o.jsx)("button",{onClick:t=>(async(e,t)=>{if(t.stopPropagation(),m!==e.id)try{f(e.id);const t=await C.generateDemoCreditEvents(e.id);0===t.length?alert("No demo credit events were generated for this trade. The system determined this reference entity is unlikely to have credit events."):alert(`Successfully generated ${t.length} demo credit event(s) for trade CDS-${e.id}. View them in the trade details.`),w()}catch(i){const t=i instanceof Error?i.message:"Failed to generate demo credit events";alert(`Error: ${t}`),console.error("Error generating demo credit events:",i)}finally{f(null)}})(e,t),disabled:m===e.id||"ACTIVE"!==e.tradeStatus,className:"inline-flex items-center justify-center w-8 h-8 rounded transition-colors "+("ACTIVE"===e.tradeStatus?"text-fd-text-muted hover:text-fd-green hover:bg-fd-green/10":"text-fd-text-muted/50 cursor-not-allowed"),title:"ACTIVE"===e.tradeStatus?"Generate demo credit events":"Only available for ACTIVE trades",children:m===e.id?(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-fd-green"}):(0,o.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 6h8V4a2 2 0 00-2-2H10a2 2 0 00-2 2v2zm8 0v2H8V6h8zm0 2v8a2 2 0 01-2 2H10a2 2 0 01-2-2V8h8z"}),(0,o.jsx)("circle",{cx:"10",cy:"10",r:"1",fill:"currentColor"}),(0,o.jsx)("circle",{cx:"14",cy:"10",r:"1",fill:"currentColor"}),(0,o.jsx)("circle",{cx:"10",cy:"14",r:"1",fill:"currentColor"}),(0,o.jsx)("circle",{cx:"14",cy:"14",r:"1",fill:"currentColor"}),(0,o.jsx)("circle",{cx:"12",cy:"12",r:"1",fill:"currentColor"}),(0,o.jsx)("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),(0,o.jsx)("button",{onClick:t=>((e,t)=>{t.stopPropagation(),g(e),p(!0)})(e,t),className:"inline-flex items-center justify-center w-8 h-8 rounded transition-colors text-fd-text-muted hover:text-fd-cyan hover:bg-fd-cyan/10",title:"Novate this trade to a CCP",children:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})})]})})]},e.id);var t,s})})]})}),(0,o.jsx)(L,{isOpen:h,trade:b,onClose:()=>{p(!1),g(null)},onConfirm:async(e,t,r)=>{try{await D.executeNovation({tradeId:e,ccpName:t,memberFirm:r,actor:"operations_user"}),p(!1),g(null),await w(),y("Novation completed successfully!"),j(!0),setTimeout(()=>j(!1),5e3)}catch(i){const t=i instanceof Error?i.message:"Failed to execute novation";alert(`Error: ${t}`),console.error("Error executing novation:",i)}}}),v&&(0,o.jsx)("div",{className:"fixed top-4 right-4 z-[60] animate-fade-in",children:(0,o.jsxs)("div",{className:"bg-fd-dark border-2 border-fd-green rounded-lg shadow-lg p-4 flex items-start gap-3 min-w-[320px] max-w-[480px]",children:[(0,o.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-fd-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h4",{className:"text-fd-text font-semibold mb-1",children:"Success!"}),(0,o.jsx)("p",{className:"text-fd-text-muted text-sm leading-relaxed",children:N})]}),(0,o.jsx)("button",{onClick:()=>j(!1),className:"flex-shrink-0 text-fd-text-muted hover:text-fd-text transition-colors",children:(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})]})});T.displayName="CDSBlotter";const M=T;async function P(e,t){const r=t||(new Date).toISOString().split("T")[0];console.log("\ud83d\udd0d DEBUG fetchRiskMeasures called with:",{tradeId:e,valuationDate_param:t,finalValuationDate:r});const s={scenarioId:`cds-${e}-base`,tradeIds:[e],valuationDate:r,scenarios:{}};console.log("\ud83d\udd0d DEBUG scenarioRequest:",s);const n=await fetch(`${d}/risk/scenario/calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok)throw new Error("Failed to fetch risk measures from ORE");const a=await n.json();if(Array.isArray(a)&&a.length>0)return a[0];throw new Error("No risk measures returned from ORE calculation")}const R=i("/lifecycle");async function I(e){if(!e.ok){const r=await e.text();try{const e=JSON.parse(r);if(e.detail)throw new Error(e.detail);throw new Error(e.title||e.message||r)}catch(t){throw new Error(`Lifecycle API error ${e.status}: ${r}`)}}return e.json()}const A={generateCouponSchedule:async e=>I(await fetch(`${R}/trades/${e}/coupon-schedule`,{method:"POST"})),getCouponSchedule:async e=>I(await fetch(`${R}/trades/${e}/coupon-schedule`)),async getCouponScheduleInRange(e,t,r){const s=new URLSearchParams({startDate:t,endDate:r});return I(await fetch(`${R}/trades/${e}/coupon-schedule/range?${s.toString()}`))},async payCoupon(e,t,r){const s=void 0!==r?{payOnTime:r}:void 0;return I(await fetch(`${R}/trades/${e}/coupon-periods/${t}/pay`,{method:"POST",headers:s?{"Content-Type":"application/json"}:{},body:s?JSON.stringify(s):void 0}))},unpayCoupon:async(e,t)=>I(await fetch(`${R}/trades/${e}/coupon-periods/${t}/unpay`,{method:"POST"})),async postDailyAccrual(e,t){const r=new URLSearchParams({accrualDate:t});return I(await fetch(`${R}/trades/${e}/accruals/daily?${r.toString()}`,{method:"POST"}))},async postAccrualsForPeriod(e,t,r){const s=new URLSearchParams({startDate:t,endDate:r});return I(await fetch(`${R}/trades/${e}/accruals/period?${s.toString()}`,{method:"POST"}))},async getAccrualEvents(e,t,r){const s=new URLSearchParams({startDate:t,endDate:r});return I(await fetch(`${R}/trades/${e}/accruals?${s.toString()}`))},async getCumulativeAccrual(e){const t=await fetch(`${R}/trades/${e}/accruals/cumulative`);return(await I(t)).cumulativeAccrual},async getNetCashForPayment(e,t){const r=new URLSearchParams({paymentDate:t}),s=await fetch(`${R}/trades/${e}/accruals/net-cash?${r.toString()}`);return(await I(s)).netCashAmount},amendTrade:async(e,t)=>I(await fetch(`${R}/trades/${e}/amendments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})),getTradeAmendments:async e=>I(await fetch(`${R}/trades/${e}/amendments`)),getAmendmentsForVersion:async(e,t)=>I(await fetch(`${R}/trades/${e}/amendments/version/${t}`)),adjustNotional:async(e,t)=>I(await fetch(`${R}/trades/${e}/notional-adjustments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})),getNotionalAdjustments:async e=>I(await fetch(`${R}/trades/${e}/notional-adjustments`)),async partiallyTerminate(e,t,r,s){const n=new URLSearchParams({terminationDate:t,terminationAmount:r.toString()});s&&n.append("reason",s);return I(await fetch(`${R}/trades/${e}/partial-termination?${n.toString()}`,{method:"POST"}))},async fullyTerminate(e,t,r){const s=new URLSearchParams({terminationDate:t});r&&s.append("reason",r);return I(await fetch(`${R}/trades/${e}/full-termination?${s.toString()}`,{method:"POST"}))},getLifecycleSummary:async e=>I(await fetch(`${R}/trades/${e}/summary`))},F=e=>{let{tradeId:t,trade:r}=e;const[s,a]=(0,n.useState)(null),[l,d]=(0,n.useState)(!1),[i,c]=(0,n.useState)(null),[u,x]=(0,n.useState)([]),[m,f]=(0,n.useState)(null),[h,p]=(0,n.useState)(!1),[b,g]=(0,n.useState)(!1),[v,j]=(0,n.useState)(void 0),[N,y]=(0,n.useState)(0),[w,k]=(0,n.useState)(!1),S=r&&("SETTLED_CASH"===r.tradeStatus||"SETTLED_PHYSICAL"===r.tradeStatus||"TERMINATED"===r.tradeStatus),E=async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){d(!0);try{const s=r?e:e||v;console.log("\ud83d\udd0d DEBUG loadRiskMeasures called with:",{customValuationDate:e,valuationDate:v,forceRefresh:r,dateToUse:s,tradeId:t,timestamp:(new Date).toISOString()}),console.log(`Loading risk measures for trade ${t} with valuation date: ${s||"today"}...`);const n=await P(t,s);console.log("Risk measures loaded:",{npv:n.npv,currency:n.currency,timestamp:n.valuationTimestamp,loadedAt:(new Date).toISOString()}),a(n),c(null)}catch(s){console.error("Failed to load risk measures:",s),c(s.message)}finally{d(!1)}}},D=async()=>{if(t)try{console.log("Loading coupon periods for trade:",t);const e=await A.getCouponSchedule(t);console.log("Loaded coupon periods:",e.length,e),x(e)}catch(e){console.error("Failed to load coupon periods:",e),x([])}},L=async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f(e);try{await A.payCoupon(t,e,r),console.log("Coupon paid successfully, reloading data..."),await D(),p(!0),a(null),await new Promise(e=>setTimeout(e,500)),await E(),console.log("Risk measures reloaded after coupon payment"),p(!1)}catch(s){alert("Failed to pay coupon: "+s.message),p(!1)}finally{f(null)}},T=e=>{const t=new Date,r=new Date(t);let s=e;for(;s>0;){r.setDate(r.getDate()+1);const e=r.getDay();0!==e&&6!==e&&s--}return r.toISOString().split("T")[0]},M=async e=>{let t;switch(e){case"today":t=void 0;break;case"t+1":t=T(1);break;case"t+7":t=T(7);break;case"t+45":t=T(45)}console.log("\ud83d\udd0d DEBUG handleQuickValuationDate:",{option:e,newDate:t,currentValuationDate:v}),j(t),a(null),d(!0),c(null),await new Promise(e=>setTimeout(e,10)),await E(t,!0)};if((0,n.useEffect)(()=>{E(),D(),(async()=>{try{const e=(await C.getCreditEventsForTrade(t)).some(e=>"PAYOUT"===e.eventType);k(e)}catch(i){console.error("Failed to check for payout events:",i),k(!1)}})()},[t]),!t)return(0,o.jsx)("div",{className:"text-fd-text",children:"No trade selected"});if(w)return(0,o.jsx)("div",{className:"space-y-6",children:(0,o.jsxs)("div",{className:"bg-fd-darker p-6 rounded-md border-2 border-fd-green",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-fd-green/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-fd-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-fd-green font-semibold text-lg",children:"CDS Protection Paid Out"}),(0,o.jsx)("p",{className:"text-fd-text-muted text-sm",children:"A credit event has triggered payout - all risk measures are now zero"})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[(0,o.jsxs)("div",{className:"bg-fd-dark rounded p-4",children:[(0,o.jsx)("div",{className:"text-xs text-fd-text-muted mb-1",children:"Net Present Value"}),(0,o.jsx)("div",{className:"text-2xl font-bold text-fd-green font-mono",children:"$0.00"})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded p-4",children:[(0,o.jsx)("div",{className:"text-xs text-fd-text-muted mb-1",children:"Jump-to-Default (JTD)"}),(0,o.jsx)("div",{className:"text-2xl font-bold text-fd-green font-mono",children:"$0.00"})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded p-4",children:[(0,o.jsx)("div",{className:"text-xs text-fd-text-muted mb-1",children:"Fair Spread"}),(0,o.jsx)("div",{className:"text-2xl font-bold text-fd-green font-mono",children:"0 bps"})]})]}),(0,o.jsx)("div",{className:"mt-6 bg-fd-dark rounded p-4",children:(0,o.jsxs)("div",{className:"flex items-start gap-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5 text-fd-green mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,o.jsxs)("div",{className:"text-sm text-fd-text-muted",children:[(0,o.jsx)("p",{className:"mb-2",children:"This trade has experienced a credit event (Bankruptcy or Restructuring) resulting in payout. The CDS contract has fulfilled its protection obligation."}),(0,o.jsx)("p",{children:"All risk exposures have been reduced to zero as the contract has settled and no further obligations remain."})]})]})}),(0,o.jsxs)("div",{className:"mt-6 bg-fd-dark rounded p-4",children:[(0,o.jsxs)("h4",{className:"text-fd-text font-semibold mb-3 flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5 text-fd-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Coupon Payment History"]}),0===u.length?(0,o.jsx)("p",{className:"text-fd-text-muted text-sm",children:"No coupon schedule was generated for this trade."}):(()=>{const e=u.filter(e=>!0===e.paid);return 0===e.length?(0,o.jsx)("p",{className:"text-fd-text-muted text-sm",children:"No coupons were paid before the credit event occurred."}):(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("p",{className:"text-fd-text text-sm mb-3",children:[e.length," coupon",e.length>1?"s":""," paid before credit event:"]}),(0,o.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:e.map((e,t)=>(0,o.jsxs)("div",{className:"bg-fd-darker rounded p-3 flex items-center justify-between border border-fd-border",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-4 h-4 text-fd-green",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,o.jsxs)("span",{className:"text-fd-text text-sm font-medium",children:["Period #",t+1]}),(0,o.jsxs)("span",{className:"text-fd-text-muted text-xs",children:["(",new Date(e.periodStartDate).toLocaleDateString()," - ",new Date(e.periodEndDate).toLocaleDateString(),")"]})]}),(0,o.jsxs)("div",{className:"text-xs text-fd-text-muted mt-1",children:["Payment Date: ",new Date(e.paymentDate).toLocaleDateString(),e.paidAt&&(0,o.jsxs)("span",{className:"ml-2 text-fd-green",children:["\u2713 Paid: ",new Date(e.paidAt).toLocaleDateString()]})]})]}),(0,o.jsx)("div",{className:"text-right",children:(0,o.jsx)("div",{className:"text-fd-green font-mono font-semibold",children:new Intl.NumberFormat("en-US",{style:"currency",currency:(null===s||void 0===s?void 0:s.currency)||"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e.couponAmount||0)})})]},e.id))})]})})()]})]})});if(l)return(0,o.jsxs)("div",{className:"flex items-center gap-2 text-fd-text",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-fd-green"}),(0,o.jsx)("span",{children:"Calculating risk measures with ORE..."})]});if(i)return(0,o.jsxs)("div",{className:"text-red-400",role:"alert",children:["Failed: ",i]});if(!s)return null;const R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null===e||void 0===e?"-":"number"===typeof e?e.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t}):String(e)},I=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return null===e||void 0===e?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},F=e=>null===e||void 0===e?"-":(1e4*e).toFixed(2)+" bps",U=(()=>{if(null!==s.riskyAnnuity&&void 0!==s.riskyAnnuity)return s.riskyAnnuity;const e=s.premiumLegNPVClean||0,t=s.accruedPremium||0,r=s.currentNotional||s.originalNotional,n=s.fairSpreadClean;if(!r||!n||0===n)return null;return Math.abs(e+t)/(r*n)})(),_=(()=>{const e=u.filter(e=>!e.paid).sort((e,t)=>new Date(e.paymentDate).getTime()-new Date(t.paymentDate).getTime());return e.length>0?e[0]:null})(),O=(()=>{const e=u.filter(e=>e.paid).sort((e,t)=>new Date(t.paymentDate).getTime()-new Date(e.paymentDate).getTime());return e.length>0?e[0]:null})(),B=e=>!e.paid&&(!!_&&e.id===_.id),$=e=>!!e.paid&&(!!O&&e.id===O.id),z=u.length,V=u.filter(e=>e.paid).length,H=u.filter(e=>e.paid&&e.couponAmount).reduce((e,t)=>e+(t.couponAmount||0),0),W=s.cashflows&&s.cashflows.length>0,G=null!==s.fairSpreadClean||null!==s.protectionLegNPV;return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-fd-darker p-4 rounded-md border border-fd-border",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,o.jsxs)("h3",{className:"text-fd-green font-semibold flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"ORE Valuation"]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("span",{className:"text-xs text-fd-text-muted",children:"Valuation Date:"}),(0,o.jsxs)("div",{className:"flex gap-1",children:[(0,o.jsx)("button",{onClick:()=>M("today"),disabled:l||h,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${void 0===v||""===v?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text hover:bg-fd-border"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Today"}),(0,o.jsx)("button",{onClick:()=>M("t+1"),disabled:l||h,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${v===T(1)?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text hover:bg-fd-border"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"T+1"}),(0,o.jsx)("button",{onClick:()=>M("t+7"),disabled:l||h,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${v===T(7)?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text hover:bg-fd-border"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"T+7"}),(0,o.jsx)("button",{onClick:()=>M("t+45"),disabled:l||h,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${v===T(45)?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text hover:bg-fd-border"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"T+45"})]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{className:"bg-fd-dark rounded p-3",children:[(0,o.jsx)("div",{className:"text-xs text-fd-text-muted mb-1",children:"Net Present Value"}),(0,o.jsx)("div",{className:"text-2xl font-bold text-fd-green font-mono",children:I(s.npv,s.currency)})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded p-3",children:[(0,o.jsx)("div",{className:"text-xs text-fd-text-muted mb-1",children:"Currency"}),(0,o.jsx)("div",{className:"text-2xl font-bold text-fd-text font-mono",children:s.currency||"USD"})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded p-3",children:[(0,o.jsx)("div",{className:"text-xs text-fd-text-muted mb-1",children:"Valuation Time"}),(0,o.jsx)("div",{className:"text-sm text-fd-text",children:new Date(s.valuationTimestamp).toLocaleString()})]})]})]}),G&&(0,o.jsxs)("div",{className:"bg-fd-darker p-4 rounded-md border border-fd-border",children:[(0,o.jsxs)("h3",{className:"text-fd-green font-semibold mb-3 flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"CDS Valuation Breakdown"]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:[null!==s.jtd&&void 0!==s.jtd&&(0,o.jsxs)("div",{className:"md:col-span-2 lg:col-span-4 bg-fd-dark rounded p-3 border-l-4 border-fd-green",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Jump-to-Default (JTD) Exposure:"}),(0,o.jsx)("div",{className:"font-mono text-fd-green font-bold text-xl mt-1",children:I(s.jtd,s.currency)}),(0,o.jsx)("div",{className:"text-xs text-fd-text-muted mt-1",children:"Potential loss if reference entity defaults immediately"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Fair Spread (Clean):"}),(0,o.jsx)("div",{className:"font-mono text-fd-text font-semibold",children:F(s.fairSpreadClean)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Fair Spread (Dirty):"}),(0,o.jsx)("div",{className:"font-mono text-fd-text font-semibold",children:F(s.fairSpreadDirty)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Protection Leg NPV:"}),(0,o.jsx)("div",{className:"font-mono text-fd-text font-semibold",children:I(s.protectionLegNPV,s.currency)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Premium Leg NPV:"}),(0,o.jsx)("div",{className:"font-mono text-fd-text font-semibold",children:I(s.premiumLegNPVClean,s.currency)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Accrued Premium:"}),(0,o.jsx)("div",{className:"font-mono text-fd-text",children:I(s.accruedPremium,s.currency)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Upfront Premium:"}),(0,o.jsx)("div",{className:"font-mono text-fd-text",children:I(s.upfrontPremium,s.currency)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Coupon Leg BPS:"}),(0,o.jsx)("div",{className:"font-mono text-fd-text",children:R(s.couponLegBPS,2)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Current Notional:"}),(0,o.jsx)("div",{className:"font-mono text-fd-text",children:I(s.currentNotional,s.currency)})]}),null!==U&&(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Risky PV01:"}),(0,o.jsx)("div",{className:"font-mono text-fd-text font-semibold text-fd-green",children:R(U,6)}),(0,o.jsx)("div",{className:"text-xs text-fd-text-muted mt-0.5",children:s.riskyAnnuity?"From ORE":"Calculated"})]}),void 0!==(null===r||void 0===r?void 0:r.recoveryRate)&&null!==(null===r||void 0===r?void 0:r.recoveryRate)&&(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Recovery Rate:"}),(0,o.jsxs)("div",{className:"font-mono text-fd-text font-semibold",children:[r.recoveryRate,"%"]})]}),V>0&&(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Total Paid Coupons:"}),(0,o.jsx)("div",{className:"font-mono text-fd-green font-semibold",children:I(H,s.currency)})]})]})]}),s.defaultProbabilities&&s.defaultProbabilities.length>0&&(0,o.jsxs)("div",{className:"bg-fd-darker p-4 rounded-md border border-fd-border",children:[(0,o.jsxs)("h3",{className:"text-fd-green font-semibold mb-3 flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-1.964-1.333-2.732 0L3.268 16c-.77 1.333.192 3 1.732 3z"})}),"Credit Risk Profile"]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-fd-text mb-2",children:"Default Probabilities by Period"}),(0,o.jsx)("div",{className:"space-y-1 text-sm",children:s.defaultProbabilities.slice(0,6).map((e,t)=>(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsxs)("span",{className:"text-fd-text-muted",children:["Period ",t+1,":"]}),(0,o.jsxs)("span",{className:"font-mono text-fd-text",children:[(100*e).toFixed(2),"%"]})]},t))})]}),s.expectedLosses&&s.expectedLosses.length>0&&(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-fd-text mb-2",children:"Expected Losses by Period"}),(0,o.jsx)("div",{className:"space-y-1 text-sm",children:s.expectedLosses.slice(0,6).map((e,t)=>(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsxs)("span",{className:"text-fd-text-muted",children:["Period ",t+1,":"]}),(0,o.jsx)("span",{className:"font-mono text-fd-text",children:I(e,s.currency)})]},t))})]})]})]}),u.length>0&&(0,o.jsxs)("div",{className:"bg-fd-darker p-4 rounded-md border border-fd-border",children:[(0,o.jsxs)("h3",{className:"text-fd-green font-semibold mb-3 flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Coupon Payment Schedule",(0,o.jsxs)("span",{className:"ml-auto text-sm font-normal text-fd-text-muted",children:[V," of ",z," paid"]}),h&&(0,o.jsxs)("span",{className:"ml-2 text-sm font-normal text-fd-text-muted flex items-center gap-1",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-fd-green"}),"Recalculating risk..."]})]}),(0,o.jsx)("div",{className:"mb-3 text-sm text-fd-text-muted italic",children:(()=>{if(0===u.length)return"";const e=u[u.length-1],t=new Date(e.periodEndDate),s=t.getFullYear(),n=t.toLocaleDateString("en-US",{month:"short"});let a="Periodic";if(null!==r&&void 0!==r&&r.premiumFrequency){a={MONTHLY:"Monthly",QUARTERLY:"Quarterly",SEMI_ANNUAL:"Semi-annual",ANNUAL:"Annual"}[r.premiumFrequency]||r.premiumFrequency}else if(u.length>1){const e=new Date(u[0].paymentDate),t=new Date(u[1].paymentDate),r=Math.round((t.getTime()-e.getTime())/864e5);r>=25&&r<=35?a="Monthly":r>=80&&r<=100?a="Quarterly":r>=170&&r<=195?a="Semi-annual":r>=350&&r<=375&&(a="Annual")}return`${a} until ${n} ${s}`})()}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full text-sm text-fd-text",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{className:"text-left border-b-2 border-fd-border bg-fd-dark",children:[(0,o.jsx)("th",{className:"py-2 px-3 font-medium",children:"Payment Date"}),(0,o.jsx)("th",{className:"py-2 px-3 font-medium",children:"Period"}),(0,o.jsx)("th",{className:"py-2 px-3 font-medium text-right",children:"Days"}),(0,o.jsx)("th",{className:"py-2 px-3 font-medium text-right",children:"Notional"}),(0,o.jsx)("th",{className:"py-2 px-3 font-medium text-right",children:"Coupon Amount"}),(0,o.jsx)("th",{className:"py-2 px-3 font-medium",children:"Status"}),(0,o.jsx)("th",{className:"py-2 px-3 font-medium text-center",children:"Action"})]})}),(0,o.jsx)("tbody",{children:u.map(e=>(0,o.jsxs)("tr",{className:"border-b border-fd-border hover:bg-fd-dark transition-colors "+(e.paid?"opacity-60":""),children:[(0,o.jsx)("td",{className:"py-2 px-3 font-mono",children:new Date(e.paymentDate).toLocaleDateString()}),(0,o.jsxs)("td",{className:"py-2 px-3 text-fd-text-muted",children:[new Date(e.periodStartDate).toLocaleDateString()," \u2192 ",new Date(e.periodEndDate).toLocaleDateString()]}),(0,o.jsx)("td",{className:"py-2 px-3 font-mono text-right",children:e.accrualDays}),(0,o.jsx)("td",{className:"py-2 px-3 font-mono text-right",children:I(e.notionalAmount,null===s||void 0===s?void 0:s.currency)}),(0,o.jsx)("td",{className:"py-2 px-3 font-mono text-right",children:e.couponAmount?I(e.couponAmount,null===s||void 0===s?void 0:s.currency):"-"}),(0,o.jsx)("td",{className:"py-2 px-3",children:e.paid?(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-500/20 text-green-400",children:[(0,o.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Paid"]}):(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-500/20 text-yellow-400",children:[(0,o.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Unpaid"]})}),(0,o.jsxs)("td",{className:"py-2 px-3 text-center",children:[e.paid&&$(e)&&!S&&(0,o.jsxs)("div",{className:"flex flex-col gap-1 items-center",children:[(0,o.jsx)("button",{onClick:()=>(async e=>{f(e);try{await A.unpayCoupon(t,e),console.log("Coupon payment cancelled successfully, reloading data..."),await D(),p(!0),a(null),await new Promise(e=>setTimeout(e,500)),await E(),console.log("Risk measures reloaded after coupon cancellation"),p(!1)}catch(r){alert("Failed to cancel coupon payment: "+r.message),p(!1)}finally{f(null)}})(e.id),disabled:m===e.id||h,title:"Cancel this payment (for demo)",className:"px-2 py-1 text-xs bg-red-600 text-white rounded font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors w-full",children:m===e.id?(0,o.jsx)("span",{className:"flex items-center gap-1 justify-center",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"})}):"\u21a9 Cancel Payment"}),(0,o.jsx)("span",{className:"text-xs text-fd-text-muted",children:new Date(e.paidAt).toLocaleString()})]}),e.paid&&!$(e)&&e.paidAt&&(0,o.jsx)("span",{className:"text-xs text-fd-text-muted",children:new Date(e.paidAt).toLocaleString()}),e.paid&&$(e)&&S&&(0,o.jsx)("span",{className:"text-xs text-fd-text-muted",children:new Date(e.paidAt).toLocaleString()}),!e.paid&&!S&&(0,o.jsxs)("div",{className:"flex gap-1 justify-center",children:[(0,o.jsx)("button",{onClick:()=>L(e.id,!0),disabled:!B(e)||m===e.id||h,title:B(e)?"Pay on the scheduled payment date":"You must pay earlier coupons first",className:"px-2 py-1 text-xs bg-fd-green text-fd-dark rounded font-medium hover:bg-fd-green-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m===e.id?(0,o.jsx)("span",{className:"flex items-center gap-1",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-fd-dark"})}):B(e)?"Pay On Time":"\ud83d\udd12 Locked"}),(0,o.jsx)("button",{onClick:()=>L(e.id,!1),disabled:!B(e)||m===e.id||h,title:B(e)?"Pay now (backdated)":"You must pay earlier coupons first",className:"px-2 py-1 text-xs bg-blue-600 text-white rounded font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:B(e)?"Pay Now":"\ud83d\udd12"})]}),!e.paid&&S&&(0,o.jsxs)("span",{className:"text-xs text-red-400",children:["\ud83d\udd12 Trade ",null===r||void 0===r?void 0:r.tradeStatus.replace(/_/g," ").toLowerCase()]})]})]},e.id))})]})}),(0,o.jsx)("div",{className:"mt-3 text-xs text-fd-text-muted",children:(0,o.jsxs)("p",{children:["\ud83d\udca1 ",(0,o.jsx)("strong",{children:"Tip:"})," Coupons must be paid sequentially by payment date. Only the next unpaid coupon can be paid \u2014 earlier coupons must be settled before later ones.",(0,o.jsx)("br",{}),"\u2022 ",(0,o.jsx)("strong",{children:"Pay On Time:"})," Marks the coupon as paid on its scheduled payment date (no accrued premium).",(0,o.jsx)("br",{}),"\u2022 ",(0,o.jsx)("strong",{children:"Pay Now:"})," Marks the coupon as paid today (shows accrued premium if applicable).",(0,o.jsx)("br",{}),"\u2022 ",(0,o.jsx)("strong",{children:"Cancel:"})," Reverts the most recently paid coupon (for demo purposes only).",(0,o.jsx)("br",{}),"Paying or canceling a coupon will trigger a risk recalculation."]})})]}),0===u.length&&s&&!l&&(0,o.jsxs)("div",{className:"bg-fd-darker p-4 rounded-md border border-dashed border-fd-border text-center",children:[(0,o.jsx)("svg",{className:"w-12 h-12 text-fd-text-muted mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,o.jsx)("p",{className:"text-fd-text-muted mb-4",children:"No coupon schedule generated for this trade yet."}),S?(0,o.jsxs)("p",{className:"text-red-400 text-sm",children:["Cannot generate schedule - trade is ",null===r||void 0===r?void 0:r.tradeStatus.replace(/_/g," ").toLowerCase()]}):(0,o.jsx)("button",{onClick:async()=>{g(!0);try{await A.generateCouponSchedule(t),await D()}catch(e){alert("Failed to generate coupon schedule: "+e.message)}finally{g(!1)}},disabled:b,className:"px-4 py-2 bg-fd-green text-fd-dark rounded font-medium hover:bg-fd-green-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?(0,o.jsxs)("span",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-fd-dark"}),"Generating Schedule..."]}):"Generate Coupon Schedule"})]}),!W&&!G&&(0,o.jsxs)("div",{className:"bg-fd-darker p-6 rounded-md border border-dashed border-fd-border text-center",children:[(0,o.jsx)("svg",{className:"w-12 h-12 text-fd-text-muted mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("p",{className:"text-fd-text-muted",children:"Additional CDS metrics and cashflow schedule will appear here once available."}),(0,o.jsx)("p",{className:"text-fd-text-muted text-sm mt-2",children:"Currently showing NPV calculated by ORE."})]})]})},U=e=>{var t,r,s,a;let{marketDataSnapshot:l}=e;const[d,i]=(0,n.useState)("structured"),[c,u]=(0,n.useState)("market");console.log("\ud83d\udd0d MarketDataPanel rendered with:",{marketDataSnapshot:!!l,activeView:d,activeRawFile:c});const x=e=>{console.log("\ud83d\udd04 View change requested:",{from:d,to:e}),i(e),console.log("\u2705 View state updated to:",e)},m=l||{valuationDate:"2025-10-15",baseCurrency:"USD",discountCurves:[{currency:"USD",curveId:"USD6M",quotes:[{tenor:"0D/1D",quoteName:"MM/USD/0D/1D",value:.05,type:"DEPOSIT"},{tenor:"1D/1W",quoteName:"MM/USD/1D/1W",value:.0501,type:"DEPOSIT"},{tenor:"1W/1M",quoteName:"MM/USD/1W/1M",value:.0502,type:"DEPOSIT"},{tenor:"1M/3M",quoteName:"IR_SWAP/USD/1M/3M",value:.0505,type:"SWAP"},{tenor:"3M/6M",quoteName:"IR_SWAP/USD/3M/6M",value:.051,type:"SWAP"}]}],defaultCurves:[{referenceEntity:"TECH_CORP",currency:"USD",curveId:"TECH_CORP_SR_USD",recoveryRate:.4,spreadQuotes:[{tenor:"6M",quoteName:"CDS/TECH_CORP/USD/6M",value:.015,type:"CDS_SPREAD"},{tenor:"1Y",quoteName:"CDS/TECH_CORP/USD/1Y",value:.0155,type:"CDS_SPREAD"},{tenor:"2Y",quoteName:"CDS/TECH_CORP/USD/2Y",value:.016,type:"CDS_SPREAD"},{tenor:"3Y",quoteName:"CDS/TECH_CORP/USD/3Y",value:.0165,type:"CDS_SPREAD"},{tenor:"5Y",quoteName:"CDS/TECH_CORP/USD/5Y",value:.017,type:"CDS_SPREAD"}]}],fxRates:{"FX/EUR/USD":1.1,"FX/GBP/USD":1.25},marketDataFileContent:"# Market Data File for CDS Calculation\n# Valuation Date: 2025-10-15\n\n# Yield Curves\nMM/USD/0D/1D 0.050000\nMM/USD/1D/1W 0.050100\nMM/USD/1W/1M 0.050200\nIR_SWAP/USD/1M/3M 0.050500\nIR_SWAP/USD/3M/6M 0.051000\n\n# FX Rates\nFX/EUR/USD 1.10\nFX/GBP/USD 1.25\n\n# CDS Curves\nCDS/TECH_CORP/USD/6M 0.0150\nCDS/TECH_CORP/USD/1Y 0.0155\nCDS/TECH_CORP/USD/2Y 0.0160\nCDS/TECH_CORP/USD/3Y 0.0165\nCDS/TECH_CORP/USD/5Y 0.0170\nRECOVERY_RATE/TECH_CORP/USD 0.40",todaysMarketFileContent:'<?xml version="1.0"?>\n<TodaysMarket>\n  <Configuration id="default">\n    <DiscountingCurvesId>default</DiscountingCurvesId>\n    <IndexForwardingCurvesId>default</IndexForwardingCurvesId>\n  </Configuration>\n  <DiscountingCurves id="default">\n    <DiscountingCurve currency="USD">Yield/USD/USD6M</DiscountingCurve>\n  </DiscountingCurves>\n  <DefaultCurves id="default">\n    <DefaultCurve name="TECH_CORP">Default/USD/TECH_CORP_SR_USD</DefaultCurve>\n  </DefaultCurves>\n</TodaysMarket>',curveConfigFileContent:'<?xml version="1.0"?>\n<CurveConfiguration>\n  <YieldCurves>\n    <YieldCurve>\n      <CurveId>USD6M</CurveId>\n      <CurveDescription>USD 6M yield curve</CurveDescription>\n      <Currency>USD</Currency>\n    </YieldCurve>\n  </YieldCurves>\n  <DefaultCurves>\n    <DefaultCurve>\n      <CurveId>TECH_CORP_SR_USD</CurveId>\n      <CurveDescription>TECH_CORP SR CDS USD</CurveDescription>\n      <Currency>USD</Currency>\n      <Type>SpreadCDS</Type>\n    </DefaultCurve>\n  </DefaultCurves>\n</CurveConfiguration>'};if(console.log("\ud83d\udcca Using snapshot data:",{isFromProps:!!l,isMockData:!l,hasDiscountCurves:!(null===m||void 0===m||null===(t=m.discountCurves)||void 0===t||!t.length),hasDefaultCurves:!(null===m||void 0===m||null===(r=m.defaultCurves)||void 0===r||!r.length),hasFxRates:!(null===m||void 0===m||!m.fxRates)&&Object.keys(m.fxRates).length>0,discountCurvesCount:(null===m||void 0===m||null===(s=m.discountCurves)||void 0===s?void 0:s.length)||0,defaultCurvesCount:(null===m||void 0===m||null===(a=m.defaultCurves)||void 0===a?void 0:a.length)||0,fxRatesCount:null!==m&&void 0!==m&&m.fxRates?Object.keys(m.fxRates).length:0}),!m)return(0,o.jsxs)("div",{className:"bg-fd-darker p-6 rounded-md border border-dashed border-fd-border text-center",children:[(0,o.jsx)("svg",{className:"w-12 h-12 text-fd-text-muted mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("p",{className:"text-fd-text-muted",children:"No market data snapshot available for this calculation."}),(0,o.jsx)("p",{className:"text-fd-text-muted text-sm mt-2",children:"Market data snapshots are captured with each risk calculation to provide full transparency."})]});const f=e=>void 0===e||null===e?"-":(1e4*e).toFixed(2)+" bps";return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{className:"text-lg font-semibold text-fd-text flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5 text-fd-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Market Data Used for Calculation"]}),(0,o.jsxs)("p",{className:"text-sm text-fd-text-muted mt-1",children:["Valuation Date: ",(h=m.valuationDate,h?new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A")," \u2022 Base Currency: ",m.baseCurrency||"USD"]})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{onClick:()=>{console.log("\ud83d\udfe2 Structured View button clicked"),x("structured")},className:"px-3 py-1.5 text-sm font-medium rounded transition-colors "+("structured"===d?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text hover:bg-fd-border"),children:"Structured View"}),(0,o.jsx)("button",{onClick:()=>{console.log("\ud83d\udcc4 Raw Files button clicked"),x("raw")},className:"px-3 py-1.5 text-sm font-medium rounded transition-colors "+("raw"===d?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text hover:bg-fd-border"),children:"Raw Files"})]})]}),"structured"===d?(0,o.jsxs)(o.Fragment,{children:[console.log("\ud83c\udfd7\ufe0f Rendering structured view..."),m.discountCurves&&m.discountCurves.length>0&&(0,o.jsxs)("div",{className:"bg-fd-darker p-4 rounded-md border border-fd-border",children:[(0,o.jsxs)("h4",{className:"text-fd-green font-semibold mb-3 flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"Discount Curves (",m.discountCurves.length,")"]}),(0,o.jsx)("div",{className:"space-y-4",children:m.discountCurves.map((e,t)=>{var r;return(0,o.jsxs)("div",{className:"bg-fd-dark rounded p-3",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsxs)("span",{className:"font-medium text-fd-text",children:[e.currency," - ",e.curveId]}),(0,o.jsxs)("span",{className:"text-xs text-fd-text-muted",children:[(null===(r=e.quotes)||void 0===r?void 0:r.length)||0," quotes"]})]}),e.quotes&&e.quotes.length>0&&(0,o.jsxs)("div",{className:"mt-2",children:[(0,o.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs font-medium text-fd-text-muted border-b border-fd-border pb-1 mb-1",children:[(0,o.jsx)("span",{children:"Tenor"}),(0,o.jsx)("span",{children:"Type"}),(0,o.jsx)("span",{children:"Quote Name"}),(0,o.jsx)("span",{className:"text-right",children:"Rate"})]}),e.quotes.map((e,t)=>{return(0,o.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs py-1 hover:bg-fd-darker",children:[(0,o.jsx)("span",{className:"font-mono text-fd-text",children:e.tenor}),(0,o.jsx)("span",{className:"text-fd-text-muted",children:e.type}),(0,o.jsx)("span",{className:"font-mono text-fd-text-muted text-xs",children:e.quoteName}),(0,o.jsx)("span",{className:"font-mono text-fd-text text-right",children:(r=e.value,void 0===r||null===r?"-":r.toFixed(6))})]},t);var r})]})]},t)})})]}),m.defaultCurves&&m.defaultCurves.length>0&&(0,o.jsxs)("div",{className:"bg-fd-darker p-4 rounded-md border border-fd-border",children:[(0,o.jsxs)("h4",{className:"text-fd-green font-semibold mb-3 flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-1.964-1.333-2.732 0L3.268 16c-.77 1.333.192 3 1.732 3z"})}),"Credit/Default Curves (",m.defaultCurves.length,")"]}),(0,o.jsx)("div",{className:"space-y-4",children:m.defaultCurves.map((e,t)=>{var r,s;return(0,o.jsxs)("div",{className:"bg-fd-dark rounded p-3",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"font-medium text-fd-text",children:e.referenceEntity}),(0,o.jsxs)("span",{className:"text-fd-text-muted ml-2 text-sm",children:["(",e.currency," - ",e.curveId,")"]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[void 0!==e.recoveryRate&&null!==e.recoveryRate&&(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("div",{className:"text-xs text-fd-text-muted",children:"Recovery Rate"}),(0,o.jsx)("div",{className:"font-mono text-fd-green font-semibold",children:(s=e.recoveryRate,void 0===s||null===s?"-":(100*s).toFixed(2)+"%")})]}),(0,o.jsxs)("span",{className:"text-xs text-fd-text-muted",children:[(null===(r=e.spreadQuotes)||void 0===r?void 0:r.length)||0," spreads"]})]})]}),e.spreadQuotes&&e.spreadQuotes.length>0&&(0,o.jsxs)("div",{className:"mt-2",children:[(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs font-medium text-fd-text-muted border-b border-fd-border pb-1 mb-1",children:[(0,o.jsx)("span",{children:"Tenor"}),(0,o.jsx)("span",{children:"Quote Name"}),(0,o.jsx)("span",{className:"text-right",children:"Spread"})]}),e.spreadQuotes.map((e,t)=>(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs py-1 hover:bg-fd-darker",children:[(0,o.jsx)("span",{className:"font-mono text-fd-text",children:e.tenor}),(0,o.jsx)("span",{className:"font-mono text-fd-text-muted text-xs",children:e.quoteName}),(0,o.jsx)("span",{className:"font-mono text-fd-text text-right",children:f(e.value)})]},t))]})]},t)})})]}),m.fxRates&&Object.keys(m.fxRates).length>0&&(0,o.jsxs)("div",{className:"bg-fd-darker p-4 rounded-md border border-fd-border",children:[(0,o.jsxs)("h4",{className:"text-fd-green font-semibold mb-3 flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"FX Rates (",Object.keys(m.fxRates).length,")"]}),(0,o.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Object.entries(m.fxRates).map(e=>{let[t,r]=e;return(0,o.jsxs)("div",{className:"bg-fd-dark rounded p-2",children:[(0,o.jsx)("div",{className:"text-xs text-fd-text-muted",children:t}),(0,o.jsx)("div",{className:"font-mono text-fd-text font-medium",children:r.toFixed(6)})]},t)})})]})]}):(0,o.jsxs)(o.Fragment,{children:[console.log("\ud83d\udcc4 Rendering raw files view..."),(0,o.jsxs)("div",{className:"bg-fd-darker rounded-md border border-fd-border overflow-hidden",children:[(0,o.jsx)("div",{className:"flex border-b border-fd-border bg-fd-dark",children:[{key:"market",label:"market.txt",icon:"\ud83d\udcca"},{key:"todaysmarket",label:"todaysmarket.xml",icon:"\ud83d\uddd3\ufe0f"},{key:"curveconfig",label:"curveconfig.xml",icon:"\ud83d\udcc8"}].map(e=>(0,o.jsxs)("button",{onClick:()=>u(e.key),className:"px-4 py-2 text-sm font-medium border-b-2 transition-colors "+(c===e.key?"border-fd-green text-fd-text bg-fd-darker":"border-transparent text-fd-text-muted hover:text-fd-text hover:bg-fd-darker"),children:[(0,o.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.key))}),(0,o.jsx)("div",{className:"p-4 bg-fd-darker",children:(0,o.jsxs)("pre",{className:"text-xs font-mono text-fd-text bg-fd-dark p-4 rounded overflow-x-auto max-h-96 overflow-y-auto border border-fd-border",children:["market"===c&&(m.marketDataFileContent||"No market data file content available"),"todaysmarket"===c&&(m.todaysMarketFileContent||"No todaysmarket.xml content available"),"curveconfig"===c&&(m.curveConfigFileContent||"No curveconfig.xml content available")]})})]}),(0,o.jsx)("div",{className:"text-xs text-fd-text-muted bg-fd-dark rounded p-3 border border-fd-border",children:(0,o.jsxs)("p",{children:["\ud83d\udca1 ",(0,o.jsx)("strong",{children:"Tip:"})," These are the exact files that were sent to ORE for this calculation. You can use these to reproduce the calculation or audit the pricing."]})})]})]});var h},_=e=>{let{tradeId:t,isOpen:r,onClose:s}=e;const[a,l]=(0,n.useState)("10,-10"),[i,c]=(0,n.useState)(null),[u,x]=(0,n.useState)(!1),[m,f]=(0,n.useState)(null);if(!r)return null;return(0,o.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",role:"dialog","aria-modal":"true","aria-labelledby":"scenario-modal-title",children:(0,o.jsxs)("div",{className:"bg-fd-dark border border-fd-border rounded-md p-4 w-full max-w-xl",children:[(0,o.jsx)("h3",{id:"scenario-modal-title",className:"text-fd-green font-semibold mb-2",children:"Scenario Run"}),(0,o.jsxs)("label",{className:"block text-sm text-fd-text mb-2",children:["Parallel bp shifts (comma separated)",(0,o.jsx)("input",{value:a,onChange:e=>l(e.target.value),className:"mt-1 w-full bg-fd-darker border border-fd-border rounded px-2 py-1 text-fd-text"})]}),(0,o.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,o.jsx)("button",{onClick:async()=>{x(!0),f(null);try{const e=a.split(",").map(e=>parseInt(e.trim(),10)).filter(e=>!isNaN(e)),r=await async function(e,t){const r={scenarioId:`cds-${e}-base`,tradeIds:[e],valuationDate:(new Date).toISOString().split("T")[0],scenarios:{}},s=await fetch(`${d}/risk/scenario/calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error("Failed to get base risk measures from ORE");const n=await s.json();if(!Array.isArray(n)||0===n.length)throw new Error("No base risk measures returned from ORE");const a=n[0],l=[];for(const i of t){const t={scenarioId:`cds-${e}-parallel-${i}bp`,tradeIds:[e],valuationDate:(new Date).toISOString().split("T")[0],scenarios:{USD_1Y:i/1e4,USD_2Y:i/1e4,USD_3Y:i/1e4,USD_5Y:i/1e4,USD_7Y:i/1e4,USD_10Y:i/1e4}},r=await fetch(`${d}/risk/scenario/calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){console.warn(`Failed to calculate scenario for ${i}bp shift`);continue}const s=await r.json();Array.isArray(s)&&s.length>0&&l.push({scenario:`PARALLEL_${i}BP`,measures:s[0]})}return{base:a,scenarios:l}}(t,e);c(r)}catch(e){f(e.message)}finally{x(!1)}},className:"bg-fd-green text-fd-dark px-3 py-1 rounded disabled:opacity-50",disabled:u,children:"Run"}),(0,o.jsx)("button",{onClick:s,className:"bg-fd-darker border border-fd-border text-fd-text px-3 py-1 rounded",children:"Close"})]}),u&&(0,o.jsx)("div",{className:"text-fd-text animate-pulse",children:"Running scenarios..."}),m&&(0,o.jsx)("div",{className:"text-red-400",role:"alert",children:m}),i&&(0,o.jsxs)("table",{className:"w-full text-sm text-fd-text border-t border-fd-border mt-2",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"text-left py-1",children:"Scenario"}),(0,o.jsx)("th",{className:"text-left py-1",children:"NPV"}),(0,o.jsx)("th",{className:"text-left py-1",children:"Fair Spread (bps)"})]})}),(0,o.jsx)("tbody",{children:i.scenarios.map(e=>{var t,r;return(0,o.jsxs)("tr",{className:"border-t border-fd-border",children:[(0,o.jsx)("td",{className:"py-1",children:e.scenario}),(0,o.jsx)("td",{className:"py-1 font-mono",children:null!==(t=null===(r=e.measures.npv)||void 0===r?void 0:r.toLocaleString())&&void 0!==t?t:"N/A"}),(0,o.jsx)("td",{className:"py-1 font-mono",children:e.measures.fairSpreadClean?(1e4*e.measures.fairSpreadClean).toFixed(2):"N/A"})]},e.scenario)})})]})]})})},O={PASS:"bg-green-600 text-white",FAIL:"bg-red-600 text-white",UNKNOWN:"bg-gray-600 text-white"},B=e=>{let{status:t,lastRun:r}=e;return(0,o.jsxs)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold ${O[t]}`,title:r?`Last regression: ${new Date(r).toLocaleString()}`:"No regression run yet",children:["Regression: ",t]})},$=e=>{let{isOpen:t,onClose:r,onSubmit:s,tradeId:a,referenceEntity:l,isLoading:d=!1}=e;const i=()=>(new Date).toISOString().split("T")[0],[c,u]=(0,n.useState)({eventType:"RESTRUCTURING",eventDate:i(),noticeDate:i(),settlementMethod:"PHYSICAL",comments:""}),[x,f]=(0,n.useState)({}),h=(e,t)=>{u(r=>({...r,[e]:t})),x[e]&&f(t=>({...t,[e]:""}))};return t?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text",children:"Record Credit Event"}),(0,o.jsx)("button",{onClick:r,className:"text-fd-text-muted hover:text-fd-text transition-colors",disabled:d,children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l&&(0,o.jsx)("div",{className:"mb-4 p-3 bg-fd-dark rounded-lg border border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5 text-fd-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Reference Entity"}),(0,o.jsx)("p",{className:"text-fd-green font-semibold",children:(e=>{const t=m.find(t=>t.code===e);return t?t.name:e})(l)}),(0,o.jsx)("p",{className:"text-fd-text-muted text-xs mt-0.5",children:l})]})]})}),(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return c.eventType||(e.eventType="Event type is required"),c.eventDate?new Date(c.eventDate)>new Date&&(e.eventDate="Event date cannot be in the future"):e.eventDate="Event date is required",c.noticeDate?c.eventDate&&new Date(c.noticeDate)<new Date(c.eventDate)&&(e.noticeDate="Notice date must be on or after event date"):e.noticeDate="Notice date is required",c.settlementMethod||(e.settlementMethod="Settlement method is required"),f(e),0===Object.keys(e).length})())try{await s(c),u({eventType:"RESTRUCTURING",eventDate:i(),noticeDate:i(),settlementMethod:"PHYSICAL",comments:""}),f({}),r()}catch(t){console.error("Error submitting credit event:",t)}},className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"eventType",className:"block text-sm font-medium text-fd-text mb-1",children:"Event Type *"}),(0,o.jsx)("select",{id:"eventType",value:c.eventType,onChange:e=>h("eventType",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text "+(x.eventType?"border-red-500":"border-fd-border"),disabled:d,children:[{value:"RESTRUCTURING",label:"Restructuring"},{value:"BANKRUPTCY",label:"Bankruptcy"}].map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),x.eventType&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:x.eventType})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"eventDate",className:"block text-sm font-medium text-fd-text mb-1",children:"Event Date *"}),(0,o.jsx)("input",{type:"date",id:"eventDate",value:c.eventDate,onChange:e=>h("eventDate",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text "+(x.eventDate?"border-red-500":"border-fd-border"),disabled:d}),x.eventDate&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:x.eventDate})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"noticeDate",className:"block text-sm font-medium text-fd-text mb-1",children:"Notice Date *"}),(0,o.jsx)("input",{type:"date",id:"noticeDate",value:c.noticeDate,onChange:e=>h("noticeDate",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text "+(x.noticeDate?"border-red-500":"border-fd-border"),disabled:d}),x.noticeDate&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:x.noticeDate})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"settlementMethod",className:"block text-sm font-medium text-fd-text mb-1",children:"Settlement Method *"}),(0,o.jsx)("select",{id:"settlementMethod",value:c.settlementMethod,onChange:e=>h("settlementMethod",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text "+(x.settlementMethod?"border-red-500":"border-fd-border"),disabled:d,children:[{value:"PHYSICAL",label:"Physical Settlement"},{value:"CASH",label:"Cash Settlement"}].map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),x.settlementMethod&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:x.settlementMethod})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"comments",className:"block text-sm font-medium text-fd-text mb-1",children:"Comments"}),(0,o.jsx)("textarea",{id:"comments",value:c.comments,onChange:e=>h("comments",e.target.value),rows:3,className:"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green text-fd-text placeholder-fd-text-muted",placeholder:"Optional comments about the credit event...",disabled:d})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,o.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-border focus:outline-none focus:ring-2 focus:ring-fd-green transition-colors",disabled:d,children:"Cancel"}),(0,o.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-fd-dark bg-fd-green border border-transparent rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green disabled:opacity-50 transition-colors",disabled:d,children:d?"Recording...":"Record Credit Event"})]})]})]})}):null},z=e=>{let{trade:t,onTradeUpdated:r}=e;const[s,a]=(0,n.useState)(!0),[l,d]=(0,n.useState)([]),[i,c]=(0,n.useState)(!1),[u,x]=(0,n.useState)(""),[m,f]=(0,n.useState)(""),[h,p]=(0,n.useState)(!1),[b,g]=(0,n.useState)(null),v=async()=>{a(!0);try{j()}catch(e){console.error("Failed to load lifecycle data:",e),j()}finally{a(!1)}};(0,n.useEffect)(()=>{v(),x((new Date).toISOString().split("T")[0])},[t.id]);const j=()=>{const e=[];e.push({id:"creation",type:"creation",timestamp:t.tradeDate,title:"Trade Created",description:`CDS-${t.id} booked on ${N(t.tradeDate)}`,status:"completed",icon:"\ud83c\udfaf",color:"rgb(0, 240, 0)"}),t.updatedAt&&t.updatedAt!==t.createdAt&&e.push({id:"status_change",type:"status_change",timestamp:t.updatedAt,title:"Status Updated",description:`Current status: ${t.tradeStatus.replace(/_/g," ")}`,status:"completed",icon:"\ud83d\udd04",color:"rgb(0, 255, 195)"}),e.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()),d(e)},N=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return s?(0,o.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-fd-green"}),(0,o.jsx)("span",{className:"ml-3 text-fd-text-muted",children:"Loading lifecycle timeline..."})]}):(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-2",children:"Trade Lifecycle"}),(0,o.jsxs)("p",{className:"text-fd-text-muted text-sm",children:["Visual timeline of key events and milestones for CDS-",t.id]})]}),"ACTIVE"===t.tradeStatus&&(0,o.jsxs)("button",{onClick:()=>c(!0),className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded transition-colors flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Terminate Trade"]})]}),i&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-6 max-w-md w-full mx-4",children:[(0,o.jsxs)("h3",{className:"text-xl font-semibold text-fd-text mb-4",children:["Terminate Trade CDS-",t.id]}),(0,o.jsxs)("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-700 rounded text-sm text-red-400",children:[(0,o.jsx)("strong",{children:"Warning:"})," This action will fully terminate the trade. The notional will be reduced to zero."]}),(0,o.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-fd-text-muted text-sm mb-2",children:["Termination Date ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"date",value:u,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded text-fd-text focus:outline-none focus:border-fd-green"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-fd-text-muted text-sm mb-2",children:"Reason (optional)"}),(0,o.jsx)("textarea",{value:m,onChange:e=>f(e.target.value),placeholder:"Enter reason for termination...",rows:3,className:"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded text-fd-text focus:outline-none focus:border-fd-green resize-none"})]})]}),b&&(0,o.jsx)("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-700 rounded text-sm text-red-400",children:b}),(0,o.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,o.jsx)("button",{onClick:()=>{c(!1),g(null)},disabled:h,className:"px-6 py-2 bg-fd-darker border border-fd-border text-fd-text rounded hover:bg-fd-dark transition-colors disabled:opacity-50",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(u){p(!0),g(null);try{await A.fullyTerminate(t.id,u,m||"Trader initiated termination"),c(!1),r&&r(),v()}catch(e){console.error("Failed to terminate trade:",e),g(e instanceof Error?e.message:"Failed to terminate trade")}finally{p(!1)}}else g("Termination date is required")},disabled:h||!u,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded transition-colors disabled:opacity-50 flex items-center gap-2",children:h?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Terminating..."]}):"Confirm Termination"})]})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 border border-fd-border",children:[(0,o.jsx)("div",{className:"text-fd-text-muted text-xs uppercase mb-1",children:"Total Events"}),(0,o.jsx)("div",{className:"text-fd-text text-2xl font-bold",children:l.length})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 border border-fd-border",children:[(0,o.jsx)("div",{className:"text-fd-text-muted text-xs uppercase mb-1",children:"Current Status"}),(0,o.jsx)("div",{className:"text-fd-green text-2xl font-bold",children:t.tradeStatus.replace(/_/g," ")})]})]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-fd-border"}),(0,o.jsx)("div",{className:"space-y-6",children:l.map((e,t)=>{return(0,o.jsxs)("div",{className:"relative pl-20",children:[(0,o.jsx)("div",{className:"absolute left-0 w-16 h-16 rounded-full flex items-center justify-center text-3xl border-4 border-fd-darker",style:{backgroundColor:e.color},children:e.icon}),(0,o.jsx)("svg",{className:"absolute left-16 top-6",width:"16",height:"4",viewBox:"0 0 16 4",children:(0,o.jsx)("path",{d:"M0 2 L14 2 L12 0 M14 2 L12 4",stroke:"rgb(60, 75, 97)",strokeWidth:"1",fill:"none"})}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 border-l-4 shadow-lg transition-all hover:shadow-xl hover:scale-[1.01]",style:{borderLeftColor:e.color},children:[(0,o.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-fd-text font-semibold text-lg",children:e.title}),(0,o.jsx)("p",{className:"text-fd-text-muted text-sm mt-1",children:e.description})]}),e.status&&(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium "+("completed"===e.status?"bg-green-500/20 text-green-400":"pending"===e.status?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"),children:"completed"===e.status?"\u2713 Completed":"pending"===e.status?"\u25f7 Pending":"\u2192 Upcoming"})]}),(0,o.jsxs)("div",{className:"flex items-center text-xs text-fd-text-muted mt-3",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(r=e.timestamp,new Date(r).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]}),t<l.length-1&&(0,o.jsx)("div",{className:"absolute left-8 top-20 w-0.5 h-6 bg-fd-border"})]},e.id);var r})}),(0,o.jsxs)("div",{className:"relative pl-20 mt-6",children:[(0,o.jsx)("div",{className:"absolute left-0 w-16 h-16 rounded-full flex items-center justify-center text-2xl border-4 border-fd-darker bg-fd-border",children:"ACTIVE"===t.tradeStatus?"\u25b6":"\u25a0"}),(0,o.jsx)("svg",{className:"absolute left-16 top-6",width:"16",height:"4",viewBox:"0 0 16 4",children:(0,o.jsx)("path",{d:"M0 2 L14 2 L12 0 M14 2 L12 4",stroke:"rgb(60, 75, 97)",strokeWidth:"1",fill:"none"})}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 border-l-4 border-fd-border shadow-lg",children:[(0,o.jsx)("h4",{className:"text-fd-text font-semibold text-lg mb-2",children:"ACTIVE"===t.tradeStatus?"Trade Active":"Trade Lifecycle Ended"}),(0,o.jsx)("p",{className:"text-fd-text-muted text-sm",children:"ACTIVE"===t.tradeStatus?"Trade is currently active and ongoing...":`Status: ${t.tradeStatus.replace(/_/g," ")}`})]})]})]})]})},V=e=>{let{trade:t}=e;const[r,s]=(0,n.useState)([]),[a,l]=(0,n.useState)(!0),[d,i]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{l(!0);try{const e=await A.getCouponSchedule(t.id);s(e),c(e)}catch(e){console.error("Failed to load cashflow data:",e),c([])}finally{l(!1)}})()},[t.id]);const c=e=>{const r=[],s=new Date,n="ACTIVE"!==t.tradeStatus&&"PENDING"!==t.tradeStatus;if(e.length>0){const a=e[0];r.push({id:"schedule_gen",type:"schedule_generation",timestamp:a.createdAt,title:"Coupon Schedule Generated",description:`${e.length} coupon periods created`,status:"completed",icon:"\ud83d\udcc5",color:"rgb(0, 232, 247)"}),e.forEach((e,a)=>{const l=new Date(e.paymentDate);let d="upcoming";e.paid&&e.paidAt?d="completed":l<=s&&(d="pending"),n&&!e.paid||r.push({id:`coupon-${e.id}`,type:"coupon_payment",timestamp:e.paid&&e.paidAt?e.paidAt:e.paymentDate,title:`Coupon Payment ${a+1}`,description:e.paid?`Paid ${x(e.couponAmount||0,t.currency)} on ${u(e.paidAt)}`:`Due ${u(e.paymentDate)} - ${x(e.couponAmount||0,t.currency)}`,status:d,icon:e.paid?"\ud83d\udcb0":"\u23f0",color:e.paid?"rgb(30, 230, 190)":"rgb(60, 75, 97)"})})}r.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()),i(r)},u=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),x=(e,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t||"USD"}).format(e);return a?(0,o.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-fd-green"}),(0,o.jsx)("span",{className:"ml-3 text-fd-text-muted",children:"Loading cashflow data..."})]}):(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-2",children:"Cashflow Timeline"}),(0,o.jsxs)("p",{className:"text-fd-text-muted text-sm",children:["Coupon schedule generation and payment events for CDS-",t.id]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 border border-fd-border",children:[(0,o.jsx)("div",{className:"text-fd-text-muted text-xs uppercase mb-1",children:"Total Coupons"}),(0,o.jsx)("div",{className:"text-fd-text text-2xl font-bold",children:r.length})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 border border-fd-border",children:[(0,o.jsx)("div",{className:"text-fd-text-muted text-xs uppercase mb-1",children:"Coupons Paid"}),(0,o.jsx)("div",{className:"text-fd-green text-2xl font-bold",children:r.filter(e=>e.paid).length})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 border border-fd-border",children:[(0,o.jsx)("div",{className:"text-fd-text-muted text-xs uppercase mb-1",children:"Pending Payments"}),(0,o.jsx)("div",{className:"text-yellow-400 text-2xl font-bold",children:r.filter(e=>!e.paid&&new Date(e.paymentDate)<=new Date).length})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 border border-fd-border",children:[(0,o.jsx)("div",{className:"text-fd-text-muted text-xs uppercase mb-1",children:"Upcoming"}),(0,o.jsx)("div",{className:"text-fd-text text-2xl font-bold",children:r.filter(e=>!e.paid&&new Date(e.paymentDate)>new Date).length})]})]}),0===d.length?(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-6 text-center border border-fd-border",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-fd-border rounded-full flex items-center justify-center mx-auto mb-3",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-fd-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,o.jsx)("p",{className:"text-fd-text-muted",children:"No coupon schedule has been generated for this trade"})]}):(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-fd-border"}),(0,o.jsx)("div",{className:"space-y-6",children:d.map((e,t)=>{return(0,o.jsxs)("div",{className:"relative pl-20",children:[(0,o.jsx)("div",{className:"absolute left-0 w-16 h-16 rounded-full flex items-center justify-center text-3xl border-4 border-fd-darker",style:{backgroundColor:e.color},children:e.icon}),(0,o.jsx)("svg",{className:"absolute left-16 top-6",width:"16",height:"4",viewBox:"0 0 16 4",children:(0,o.jsx)("path",{d:"M0 2 L14 2 L12 0 M14 2 L12 4",stroke:"rgb(60, 75, 97)",strokeWidth:"1",fill:"none"})}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 border-l-4 shadow-lg transition-all hover:shadow-xl hover:scale-[1.01]",style:{borderLeftColor:e.color},children:[(0,o.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-fd-text font-semibold text-lg",children:e.title}),(0,o.jsx)("p",{className:"text-fd-text-muted text-sm mt-1",children:e.description})]}),e.status&&(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium "+("completed"===e.status?"bg-green-500/20 text-green-400":"pending"===e.status?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"),children:"completed"===e.status?"\u2713 Completed":"pending"===e.status?"\u25f7 Pending":"\u2192 Upcoming"})]}),(0,o.jsxs)("div",{className:"flex items-center text-xs text-fd-text-muted mt-3",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(r=e.timestamp,new Date(r).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]}),t<d.length-1&&(0,o.jsx)("div",{className:"absolute left-8 top-20 w-0.5 h-6 bg-fd-border"})]},e.id);var r})}),d.length>0&&(0,o.jsxs)("div",{className:"relative pl-20 mt-6",children:[(0,o.jsx)("div",{className:"absolute left-0 w-16 h-16 rounded-full flex items-center justify-center text-2xl border-4 border-fd-darker bg-fd-border",children:"ACTIVE"===t.tradeStatus?"\u25b6":"\u25a0"}),(0,o.jsx)("svg",{className:"absolute left-16 top-6",width:"16",height:"4",viewBox:"0 0 16 4",children:(0,o.jsx)("path",{d:"M0 2 L14 2 L12 0 M14 2 L12 4",stroke:"rgb(60, 75, 97)",strokeWidth:"1",fill:"none"})}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 border-l-4 border-fd-border shadow-lg",children:[(0,o.jsx)("h4",{className:"text-fd-text font-semibold text-lg mb-2",children:"ACTIVE"===t.tradeStatus?"Cashflows Ongoing":"Cashflows Ended"}),(0,o.jsx)("p",{className:"text-fd-text-muted text-sm",children:"ACTIVE"===t.tradeStatus?"More coupon payments may occur as trade continues...":`All cashflows settled - Status: ${t.tradeStatus.replace(/_/g," ")}`})]})]})]})})]})},H=e=>{let{isOpen:t,trade:r,onClose:s,onTradeUpdated:a,onTradesUpdated:l}=e;const[d,i]=(0,n.useState)(r),[c,u]=(0,n.useState)([]),[x,m]=(0,n.useState)(!1),[f,h]=(0,n.useState)("details"),[p,b]=(0,n.useState)(!1),[g,v]=(0,n.useState)(null),[j,N]=(0,n.useState)(!1),[y,w]=(0,n.useState)(!1),[k,E]=(0,n.useState)(!1),[D,L]=(0,n.useState)(!1),[T,M]=(0,n.useState)("Credit event recorded successfully");(0,n.useEffect)(()=>{i(r)},[r]);const R=(0,n.useCallback)(async()=>{if(d){m(!0);try{const e=await C.getCreditEventsForTrade(d.id);u(e)}catch(e){console.error("Failed to load credit events:",e),u([])}finally{m(!1)}}},[d]),I=(0,n.useCallback)(async()=>{if(d){N(!0);try{const e=await P(d.id);v(e)}catch(e){console.error("Failed to load risk measures:",e),v(null)}finally{N(!1)}}},[d]);if((0,n.useEffect)(()=>{t&&d&&(R(),"risk"!==f&&"marketdata"!==f||I())},[t,d,f,R,I]),!t||!d)return null;const A=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),O=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,o.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6 max-w-5xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-fd-green rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-5 h-5 text-fd-dark",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,o.jsx)("h2",{className:"text-2xl font-bold text-fd-text",children:"CDS Trade Details"})]}),(0,o.jsx)("button",{onClick:s,className:"text-fd-text-muted hover:text-fd-text transition-colors",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsx)("div",{className:"flex space-x-4 border-b border-fd-border mb-6",children:[{key:"details",label:"Details"},{key:"lifecycle",label:"Lifecycle"},{key:"cashflow",label:"Cashflow"},{key:"events",label:"Credit Events"},{key:"risk",label:"Risk"},{key:"marketdata",label:"Market Data"}].map(e=>(0,o.jsx)("button",{onClick:()=>{console.log("\ud83d\udd04 Tab switch:",{from:f,to:e.key}),h(e.key)},className:"pb-2 px-1 text-sm font-medium border-b-2 -mb-px transition-colors "+(f===e.key?"border-fd-green text-fd-text":"border-transparent text-fd-text-muted hover:text-fd-text"),children:e.label},e.key))}),"details"===f&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"bg-fd-dark rounded-lg p-4 mb-6",children:(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Trade ID:"}),(0,o.jsxs)("span",{className:"text-fd-green font-mono font-semibold",children:["CDS-",d.id]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Created:"}),(0,o.jsx)("span",{className:"text-fd-text",children:O(d.createdAt)})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Last Updated:"}),(0,o.jsx)("span",{className:"text-fd-text",children:d.updatedAt?O(d.updatedAt):"Never"})]})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text border-b border-fd-border pb-2",children:"Trade Information"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Reference Entity:"}),(0,o.jsx)("span",{className:"text-fd-text font-medium",children:d.referenceEntity})]}),d.obligation&&(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-3 space-y-2",children:[(0,o.jsx)("div",{className:"text-sm text-fd-text-muted mb-1",children:"Reference Obligation"}),(0,o.jsxs)("div",{className:"space-y-1",children:[d.obligation.isin&&(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"ISIN:"}),(0,o.jsx)("span",{className:"text-fd-green font-mono",children:d.obligation.isin})]}),(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Issuer:"}),(0,o.jsx)("span",{className:"text-fd-text",children:d.obligation.issuer})]}),(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Seniority:"}),(0,o.jsx)("span",{className:"text-fd-text",children:d.obligation.seniority})]}),(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Coupon:"}),(0,o.jsxs)("span",{className:"text-fd-text",children:[(100*d.obligation.couponRate).toFixed(3),"%"]})]}),(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Maturity:"}),(0,o.jsx)("span",{className:"text-fd-text",children:A(d.obligation.maturityDate)})]})]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Counterparty:"}),(0,o.jsx)("span",{className:"text-fd-text font-medium",children:d.counterparty})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Direction:"}),(0,o.jsx)("span",{className:"font-medium "+("BUY"===d.buySellProtection?"text-blue-400":"text-orange-400"),children:"BUY"===d.buySellProtection?"Buy Protection":"Sell Protection"})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Settlement Type:"}),(0,o.jsx)("span",{className:"font-medium "+("CASH"===d.settlementType?"text-fd-cyan":"text-fd-teal"),children:"CASH"===d.settlementType?"Cash Settlement":"Physical Settlement"})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Notional Amount:"}),(0,o.jsx)("span",{className:"text-fd-text font-semibold text-lg",children:(W=d.notionalAmount,G=d.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:G||"USD"}).format(W))})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Spread:"}),(0,o.jsxs)("span",{className:"text-fd-text font-medium",children:[d.spread," bps"]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Currency:"}),(0,o.jsx)("span",{className:"text-fd-text font-medium",children:d.currency})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Status:"}),(0,o.jsx)("span",{className:"text-fd-green font-medium",children:d.tradeStatus.replace(/_/g," ")})]})]})]}),(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text border-b border-fd-border pb-2",children:"Date Information"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Trade Date:"}),(0,o.jsx)("span",{className:"text-fd-text",children:A(d.tradeDate)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Effective Date:"}),(0,o.jsx)("span",{className:"text-fd-text",children:A(d.effectiveDate)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Maturity Date:"}),(0,o.jsx)("span",{className:"text-fd-text",children:A(d.maturityDate)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Accrual Start Date:"}),(0,o.jsx)("span",{className:"text-fd-text",children:A(d.accrualStartDate)})]})]})]}),(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text border-b border-fd-border pb-2",children:"Contract Terms"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Premium Frequency:"}),(0,o.jsx)("span",{className:"text-fd-text",children:d.premiumFrequency.replace("_"," ")})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Day Count Convention:"}),(0,o.jsx)("span",{className:"text-fd-text",children:d.dayCountConvention.replace("_","/")})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Payment Calendar:"}),(0,o.jsx)("span",{className:"text-fd-text",children:d.paymentCalendar})]}),d.restructuringClause&&(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Restructuring Clause:"}),(0,o.jsx)("span",{className:"text-fd-text",children:(H=d.restructuringClause,{NO_RESTRUCTURING:"No R",MODIFIED_RESTRUCTURING:"Mod R",MODIFIED_MODIFIED_RESTRUCTURING:"Mod Mod R",FULL_RESTRUCTURING:"Full R"}[H]||H.replace(/_/g," "))})]})]})]}),(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text border-b border-fd-border pb-2",children:"Additional Information"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4",children:[(0,o.jsx)("div",{className:"text-sm text-fd-text-muted mb-2",children:"Trade Identifier"}),(0,o.jsxs)("div",{className:"font-mono text-fd-green text-lg",children:["CDS-",d.id]})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4",children:[(0,o.jsx)("div",{className:"text-sm text-fd-text-muted mb-2",children:"Risk Metrics"}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"text-sm",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Mark-to-Market:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:"TBD"})]}),(0,o.jsxs)("div",{className:"text-sm",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Credit Duration:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:"TBD"})]})]})]})]})]})]})]}),"lifecycle"===f&&d&&(0,o.jsx)(z,{trade:d,onTradeUpdated:async()=>{if(d)try{const e=await S.getTradeById(d.id);i(e),a&&a(e),l&&l([d.id])}catch(e){console.error("Failed to reload trade:",e)}}}),"cashflow"===f&&d&&(0,o.jsx)(V,{trade:d}),"events"===f&&(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text border-b border-fd-border pb-2",children:"Credit Events"}),"ACTIVE"===(null===d||void 0===d?void 0:d.tradeStatus)&&(0,o.jsxs)("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-fd-green text-fd-dark font-medium rounded hover:bg-fd-green-hover transition-colors flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Record Credit Event"]})]}),x?(0,o.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-fd-green"}),(0,o.jsx)("span",{className:"ml-3 text-fd-text-muted",children:"Loading credit events..."})]}):0===c.length?(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-6 text-center",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-fd-border rounded-full flex items-center justify-center mx-auto mb-3",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-fd-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,o.jsx)("p",{className:"text-fd-text-muted",children:"No credit events recorded for this trade"})]}):(0,o.jsx)("div",{className:"space-y-4",children:c.map(e=>(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 border "+("PAYOUT"===e.eventType?"border-fd-green":"border-fd-border"),children:[(0,o.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+("PAYOUT"===e.eventType?"bg-fd-green/20":"bg-red-500/20"),children:"PAYOUT"===e.eventType?(0,o.jsx)("svg",{className:"w-5 h-5 text-fd-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):(0,o.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium "+("PAYOUT"===e.eventType?"text-fd-green":"text-fd-text"),children:e.eventType.replace(/_/g," ")}),(0,o.jsxs)("p",{className:"text-fd-text-muted text-sm",children:["Event ID: ",e.id]})]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("div",{className:"text-fd-text text-sm",children:A(e.eventDate)}),(0,o.jsx)("div",{className:"text-fd-text-muted text-xs",children:O(e.createdAt)})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted text-sm",children:"Notice Date:"}),(0,o.jsx)("div",{className:"text-fd-text",children:A(e.noticeDate)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted text-sm",children:"Settlement Method:"}),(0,o.jsx)("div",{className:"text-fd-text font-medium",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-1 rounded text-xs font-medium "+("CASH"===e.settlementMethod?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"),children:e.settlementMethod})})]})]}),e.comments&&(0,o.jsxs)("div",{className:"bg-fd-darker rounded p-3",children:[(0,o.jsx)("span",{className:"text-fd-text-muted text-sm",children:"Comments:"}),(0,o.jsx)("p",{className:"text-fd-text text-sm mt-1",children:e.comments})]})]},e.id))})]}),"risk"===f&&d&&(0,o.jsxs)("div",{className:"mt-4 space-y-6","aria-labelledby":"risk-panel-heading",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("h3",{id:"risk-panel-heading",className:"text-lg font-semibold text-fd-text",children:"Risk Analytics"}),(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)(B,{status:"UNKNOWN"}),(0,o.jsx)("button",{onClick:()=>b(!0),className:"px-3 py-1.5 bg-fd-green text-fd-dark rounded text-sm font-medium hover:bg-fd-green-hover",children:"Run Scenarios"})]})]}),(0,o.jsx)(F,{tradeId:d.id,trade:d})]}),"marketdata"===f&&d&&(console.log("\ud83d\udcca Market Data tab active:",{tradeId:d.id,loadingRisk:j,hasRiskMeasures:!!g,hasMarketSnapshot:!(null===g||void 0===g||!g.marketDataSnapshot)}),(0,o.jsx)("div",{className:"mt-4 space-y-6",children:j?(0,o.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-fd-green"}),(0,o.jsx)("span",{className:"ml-3 text-fd-text-muted",children:"Loading market data snapshot..."})]}):(0,o.jsx)(U,{marketDataSnapshot:null===g||void 0===g?void 0:g.marketDataSnapshot})})),(0,o.jsx)("div",{className:"flex justify-end space-x-4 mt-8 pt-4 border-t border-fd-border",children:(0,o.jsx)("button",{onClick:s,className:"px-6 py-2 bg-fd-green text-fd-dark font-medium rounded hover:bg-fd-green-hover transition-colors",children:"Close"})})]}),d&&(0,o.jsx)(_,{tradeId:d.id,isOpen:p,onClose:()=>b(!1)}),d&&(0,o.jsx)($,{isOpen:y,onClose:()=>w(!1),onSubmit:async e=>{if(d){E(!0);try{const t=await C.recordCreditEvent(d.id,e),r=await S.getTradeById(d.id);i(r),a&&a(r),l&&t.affectedTradeIds&&t.affectedTradeIds.length>1&&l(t.affectedTradeIds),await R(),w(!1);const s=t.affectedTradeIds.length-1;M(s>0?`This ${t.creditEvent.eventType} event has been propagated to ${s} other active CDS contract(s) for the same reference entity. All affected trades have been settled.`:"Credit event recorded successfully"),L(!0),setTimeout(()=>L(!1),5e3)}catch(t){console.error("Failed to record credit event:",t),alert("Failed to record credit event: "+(t.message||"Unknown error"))}finally{E(!1)}}},tradeId:d.id,referenceEntity:d.referenceEntity,isLoading:k}),D&&(0,o.jsx)("div",{className:"fixed top-4 right-4 z-[60] animate-fade-in",children:(0,o.jsxs)("div",{className:"bg-fd-dark border-2 border-fd-green rounded-lg shadow-lg p-4 flex items-start gap-3 min-w-[320px] max-w-[480px]",children:[(0,o.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-fd-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h4",{className:"text-fd-text font-semibold mb-1",children:"Success!"}),(0,o.jsx)("p",{className:"text-fd-text-muted text-sm leading-relaxed",children:T})]}),(0,o.jsx)("button",{onClick:()=>L(!1),className:"flex-shrink-0 text-fd-text-muted hover:text-fd-text transition-colors",children:(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})]});var H,W,G},W=`${d}/cds-portfolios`,G={async createPortfolio(e,t){const r=await fetch(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,description:t})});if(!r.ok){const e=await r.json();throw new Error(e.error||"Failed to create portfolio")}return r.json()},async getAllPortfolios(){const e=await fetch(W);if(!e.ok)throw new Error("Failed to fetch portfolios");const t=await e.text();if(!t||""===t.trim())return[];try{return JSON.parse(t)}catch(r){throw console.error("Failed to parse portfolio response:",t.substring(0,500)),new Error("Invalid response format from server")}},async getPortfolioById(e){const t=await fetch(`${W}/${e}`);if(!t.ok)throw new Error("Failed to fetch portfolio");const r=await t.text();try{return JSON.parse(r)}catch(s){throw console.error("Failed to parse portfolio response:",r.substring(0,500)),new Error("Invalid response format from server")}},async updatePortfolio(e,t,r){const s=await fetch(`${W}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,description:r})});if(!s.ok){const e=await s.json();throw new Error(e.error||"Failed to update portfolio")}return s.json()},async deletePortfolio(e){if(!(await fetch(`${W}/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete portfolio")},async attachTrades(e,t){const r=await fetch(`${W}/${e}/constituents`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const e=await r.json();throw new Error(e.error||"Failed to attach trades")}return r.json()},async detachConstituent(e,t){if(!(await fetch(`${W}/${e}/constituents/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to detach constituent")},async getConstituents(e){const t=await fetch(`${W}/${e}/constituents`);if(!t.ok)throw new Error("Failed to fetch constituents");const r=await t.text();if(!r||""===r.trim())return[];try{return JSON.parse(r)}catch(s){throw console.error("Failed to parse constituents response:",r.substring(0,500)),new Error("Invalid response format from server")}},async pricePortfolio(e,t){const r=await fetch(`${W}/${e}/price?valuationDate=${t}`,{method:"POST"});if(!r.ok){const e=await r.json();throw new Error(e.error||"Failed to price portfolio")}return r.json()},async getRiskSummary(e){const t=await fetch(`${W}/${e}/risk-summary`);if(!t.ok)throw new Error("Failed to fetch risk summary");return t.json()},async attachBond(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NOTIONAL",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const n=await fetch(`${W}/${e}/bonds`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bondId:t,weightType:r,weightValue:s})});if(!n.ok){const e=await n.json();throw new Error(e.error||"Failed to attach bond")}return n.json()},async removeBond(e,t){const r=await fetch(`${W}/${e}/bonds/${t}`,{method:"DELETE"});if(!r.ok){const e=await r.json();throw new Error(e.error||"Failed to remove bond")}},async getPortfolioBonds(e){const t=await fetch(`${W}/${e}/bonds`);if(!t.ok)throw new Error("Failed to fetch portfolio bonds");const r=await t.text();if(!r||""===r.trim())return[];try{return JSON.parse(r)}catch(s){throw console.error("Failed to parse bonds response:",r.substring(0,500)),new Error("Invalid response format from server")}},async attachBasket(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NOTIONAL",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const n=await fetch(`${W}/${e}/baskets`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({basketId:t,weightType:r,weightValue:s})});if(!n.ok){const e=await n.json();throw new Error(e.error||"Failed to attach basket")}return n.json()},async removeBasket(e,t){const r=await fetch(`${W}/${e}/baskets/${t}`,{method:"DELETE"});if(!r.ok){const e=await r.json();throw new Error(e.error||"Failed to remove basket")}},async getPortfolioBaskets(e){const t=await fetch(`${W}/${e}/baskets`);if(!t.ok)throw new Error("Failed to fetch portfolio baskets");const r=await t.text();if(!r||""===r.trim())return[];try{return JSON.parse(r)}catch(s){throw console.error("Failed to parse baskets response:",r.substring(0,500)),new Error("Invalid response format from server")}}},Y=e=>{let{onClose:t,onSuccess:r}=e;const[s,a]=(0,n.useState)(""),[l,d]=(0,n.useState)(""),[i,c]=(0,n.useState)(!1),[u,x]=(0,n.useState)(null);return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:t,children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-xl border border-fd-border max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-fd-border",children:(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text",children:"Create New Portfolio"})}),(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.trim())try{c(!0),x(null),await G.createPortfolio(s.trim(),l.trim()||void 0),r()}catch(a){var t,n;const e=(null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||a.message||"Failed to create portfolio";x(e),console.error("Error creating portfolio:",a)}finally{c(!1)}else x("Portfolio name is required")},className:"px-6 py-4 space-y-4",children:[u&&(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:u}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"portfolio-name",className:"block text-sm font-medium text-fd-text mb-1",children:"Portfolio Name *"}),(0,o.jsx)("input",{id:"portfolio-name",type:"text",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted",placeholder:"e.g., Tech Portfolio 2025",maxLength:60,disabled:i,autoFocus:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"portfolio-description",className:"block text-sm font-medium text-fd-text mb-1",children:"Description"}),(0,o.jsx)("textarea",{id:"portfolio-description",value:l,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted resize-none",placeholder:"Optional description",rows:3,disabled:i})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,o.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-darker focus:outline-none focus:ring-2 focus:ring-fd-green",disabled:i,children:"Cancel"}),(0,o.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-fd-dark bg-fd-green border border-transparent rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green disabled:bg-fd-green/50 disabled:cursor-not-allowed",disabled:i,children:i?"Creating...":"Create Portfolio"})]})]})]})})},q=e=>{let{onPortfolioSelect:t}=e;const[r,s]=(0,n.useState)([]),[a,l]=(0,n.useState)(!0),[d,i]=(0,n.useState)(null),[c,u]=(0,n.useState)(null),[x,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{f()},[]);const f=async()=>{try{l(!0),i(null);const e=await G.getAllPortfolios();s(e)}catch(e){const t=e instanceof Error?e.message:"Failed to load portfolios";i(t),console.error("Error loading portfolios:",e),e instanceof Error&&e.message.includes("Invalid response format")&&console.error("The server returned malformed JSON. Check backend logs for details.")}finally{l(!1)}},h=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return a?(0,o.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-fd-green"})}):d?(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Portfolios"}),(0,o.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,o.jsx)("p",{children:d})}),(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)("button",{onClick:f,className:"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200",children:"Retry"})})]})]})}):(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-fd border border-fd-border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text",children:"CDS Portfolios"}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("span",{className:"text-sm text-fd-text-muted",children:[r.length," portfolio",1!==r.length?"s":""]}),(0,o.jsx)("button",{onClick:()=>m(!0),className:"px-3 py-1 bg-fd-green text-fd-dark rounded hover:bg-fd-green-hover text-sm font-medium",children:"+ Create Portfolio"})]})]})}),0===r.length?(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("svg",{className:"mx-auto h-12 w-12 text-fd-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,o.jsx)("h3",{className:"mt-2 text-sm font-medium text-fd-text",children:"No portfolios found"}),(0,o.jsx)("p",{className:"mt-1 text-sm text-fd-text-muted",children:"Create your first portfolio to get started."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{className:"bg-fd-dark",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Name"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Description"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"# Trades"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Created"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Updated"})]})}),(0,o.jsx)("tbody",{className:"bg-fd-darker divide-y divide-fd-border",children:r.map(e=>{var r;return(0,o.jsxs)("tr",{onClick:()=>(e=>{u(e.id),t&&t(e)})(e),className:"cursor-pointer hover:bg-fd-dark transition-colors "+(c===e.id?"bg-fd-dark ring-2 ring-fd-green":""),children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm font-medium text-fd-text",children:e.name})}),(0,o.jsx)("td",{className:"px-6 py-4",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:e.description||"-"})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:(null===(r=e.constituents)||void 0===r?void 0:r.filter(e=>e.active).length)||0})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:h(e.createdAt)})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:h(e.updatedAt)})})]},e.id)})})]})}),x&&(0,o.jsx)(Y,{onClose:()=>m(!1),onSuccess:()=>{m(!1),f()}})]})};const Q=new class{constructor(){this.baseUrl=`${d}/baskets`}async createBasket(e){const t=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to create basket")}return t.json()}async getAllBaskets(){const e=await fetch(this.baseUrl);if(!e.ok)throw new Error("Failed to fetch baskets");return e.json()}async getBasketById(e){const t=await fetch(`${this.baseUrl}/${e}`);if(!t.ok){if(404===t.status)throw new Error(`Basket not found: ${e}`);throw new Error("Failed to fetch basket")}return t.json()}async updateBasket(e,t){const r=await fetch(`${this.baseUrl}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const e=await r.json();throw new Error(e.message||"Failed to update basket")}return r.json()}async priceBasket(e,t){const r=new URLSearchParams;null!==t&&void 0!==t&&t.valuationDate&&r.append("valuationDate",t.valuationDate),void 0!==(null===t||void 0===t?void 0:t.paths)&&r.append("paths",t.paths.toString()),void 0!==(null===t||void 0===t?void 0:t.seed)&&r.append("seed",t.seed.toString()),void 0!==(null===t||void 0===t?void 0:t.includeSensitivities)&&r.append("includeSensitivities",t.includeSensitivities.toString()),void 0!==(null===t||void 0===t?void 0:t.includeEtlTimeline)&&r.append("includeEtlTimeline",t.includeEtlTimeline.toString());const s=`${this.baseUrl}/${e}/price${r.toString()?"?"+r.toString():""}`,n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"}});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to price basket")}return n.json()}async deleteBasket(e){if(!(await fetch(`${this.baseUrl}/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete basket")}},K=e=>{let{portfolioId:t,onClose:r,onSuccess:s}=e;const[a,l]=(0,n.useState)("CDS"),[d,i]=(0,n.useState)([]),[c,u]=(0,n.useState)([]),[x,m]=(0,n.useState)([]),[f,h]=(0,n.useState)(new Map),[p,b]=(0,n.useState)(new Set),[g,v]=(0,n.useState)(new Set),[j,N]=(0,n.useState)(!0),[w,k]=(0,n.useState)(!1),[C,E]=(0,n.useState)(null),[D,L]=(0,n.useState)("NOTIONAL");(0,n.useEffect)(()=>{"CDS"===a?T():"BOND"===a?M():P()},[a]);const T=async()=>{try{N(!0);const e=await S.getAllTrades();i(e)}catch(e){console.error("Error loading trades:",e),E("Failed to load available trades")}finally{N(!1)}},M=async()=>{try{N(!0);const e=await y.getAllBonds();u(e)}catch(e){console.error("Error loading bonds:",e),E("Failed to load available bonds")}finally{N(!1)}},P=async()=>{try{N(!0);const e=await Q.getAllBaskets();m(e)}catch(e){console.error("Error loading baskets:",e),E("Failed to load available baskets")}finally{N(!1)}},R=e=>{L(e);const t=new Map(f);t.forEach((r,s)=>{const n=d.find(e=>e.id===s);n&&t.set(s,{...r,weightType:e,weightValue:"NOTIONAL"===e?n.notionalAmount:0})}),h(t)},I=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),A=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:r,children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-xl border border-fd-border max-w-5xl w-full mx-4 max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-fd-border",children:(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text",children:"Attach Instruments to Portfolio"})}),(0,o.jsx)("div",{className:"px-6 py-4 border-b border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("label",{className:"text-sm font-medium text-fd-text",children:"Instrument Type:"}),(0,o.jsxs)("div",{className:"flex space-x-3",children:[(0,o.jsx)("button",{onClick:()=>l("CDS"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("CDS"===a?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text border border-fd-border hover:bg-fd-darker"),children:"\ud83d\udee1\ufe0f CDS Trades"}),(0,o.jsx)("button",{onClick:()=>l("BOND"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("BOND"===a?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text border border-fd-border hover:bg-fd-darker"),children:"\ud83d\udcdc Corporate Bonds"}),(0,o.jsx)("button",{onClick:()=>l("BASKET"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("BASKET"===a?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text border border-fd-border hover:bg-fd-darker"),children:"\ud83d\uddc2\ufe0f Credit Baskets"})]}),(0,o.jsx)("div",{className:"ml-auto text-sm text-fd-text-muted",children:"CDS"===a?`${f.size} trade(s) selected`:"BOND"===a?`${p.size} bond(s) selected`:`${g.size} basket(s) selected`})]})}),"CDS"===a&&(0,o.jsx)("div",{className:"px-6 py-3 border-b border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("label",{className:"text-sm font-medium text-fd-text",children:"Weight Type:"}),(0,o.jsxs)("div",{className:"flex space-x-3",children:[(0,o.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,o.jsx)("input",{type:"radio",value:"NOTIONAL",checked:"NOTIONAL"===D,onChange:()=>R("NOTIONAL"),className:"mr-2 accent-fd-green"}),(0,o.jsx)("span",{className:"text-sm text-fd-text",children:"Notional"})]}),(0,o.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,o.jsx)("input",{type:"radio",value:"PERCENT",checked:"PERCENT"===D,onChange:()=>R("PERCENT"),className:"mr-2 accent-fd-green"}),(0,o.jsx)("span",{className:"text-sm text-fd-text",children:"Percent"})]})]})]})}),C&&(0,o.jsx)("div",{className:"mx-6 mt-4 bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:C}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:j?(0,o.jsx)("div",{className:"flex justify-center py-8",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-fd-green"})}):"CDS"===a?(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{className:"bg-fd-dark",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Select"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Trade ID"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Reference Entity"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Notional"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Weight Value"})]})}),(0,o.jsx)("tbody",{className:"bg-fd-darker divide-y divide-fd-border",children:d.map(e=>{const t=f.has(e.id),r=f.get(e.id);return(0,o.jsxs)("tr",{className:"transition-colors "+(t?"bg-fd-dark ring-2 ring-fd-green":"hover:bg-fd-dark"),children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("input",{type:"checkbox",checked:t,onChange:()=>(e=>{const t=new Map(f);if(t.has(e.id))t.delete(e.id);else{const r="NOTIONAL"===D?e.notionalAmount:0;t.set(e.id,{tradeId:e.id,weightType:D,weightValue:r})}h(t)})(e),className:"h-4 w-4 accent-fd-green border-fd-border rounded cursor-pointer"})}),(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text",children:["CDS-",e.id]}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.referenceEntity}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:I(e.notionalAmount)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:t&&r?(0,o.jsx)("input",{type:"number",value:r.weightValue,onChange:t=>((e,t)=>{const r=new Map(f),s=r.get(e);s&&(r.set(e,{...s,weightValue:t}),h(r))})(e.id,parseFloat(t.target.value)||0),step:"PERCENT"===D?"0.01":"1000",min:"0",max:"PERCENT"===D?"1":void 0,className:"w-32 px-2 py-1 text-sm bg-fd-dark border border-fd-border text-fd-text rounded focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent"}):(0,o.jsx)("span",{className:"text-sm text-fd-text-muted",children:"-"})})]},e.id)})})]}):"BOND"===a?(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{className:"bg-fd-dark",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Select"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"ISIN"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Issuer"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Seniority"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Coupon"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Maturity"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Notional"})]})}),(0,o.jsx)("tbody",{className:"bg-fd-darker divide-y divide-fd-border",children:c.map(e=>{if(!e.id)return null;const t=p.has(e.id);return(0,o.jsxs)("tr",{className:"transition-colors "+(t?"bg-fd-dark ring-2 ring-fd-green":"hover:bg-fd-dark"),children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("input",{type:"checkbox",checked:t,onChange:()=>(e=>{const t=new Set(p);t.has(e)?t.delete(e):t.add(e),b(t)})(e.id),className:"h-4 w-4 accent-fd-green border-fd-border rounded cursor-pointer"})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text",children:e.isin}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.issuer}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.seniority}),(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:[e.couponRate,"%"]}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:A(e.maturityDate)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:I(e.notional)})]},e.id)})})]}):(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{className:"bg-fd-dark",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Select"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Basket Name"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Type"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Constituents"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Notional"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Maturity"})]})}),(0,o.jsx)("tbody",{className:"bg-fd-darker divide-y divide-fd-border",children:x.map(e=>{var t;if(!e.id)return null;const r=g.has(e.id);return(0,o.jsxs)("tr",{className:"transition-colors "+(r?"bg-fd-dark ring-2 ring-fd-green":"hover:bg-fd-dark"),children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("input",{type:"checkbox",checked:r,onChange:()=>(e=>{const t=new Set(g);t.has(e)?t.delete(e):t.add(e),v(t)})(e.id),className:"h-4 w-4 accent-fd-green border-fd-border rounded cursor-pointer"})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text",children:e.name}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-fd-green/20 text-fd-green border border-fd-green/30",children:"FIRST_TO_DEFAULT"===e.type?"FTD":"NTH_TO_DEFAULT"===e.type?`${e.nth}th-to-Default`:"Tranchette"})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.constituentCount||(null===(t=e.constituents)||void 0===t?void 0:t.length)||0}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:I(e.notional)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:A(e.maturityDate)})]},e.id)})})]})}),(0,o.jsxs)("div",{className:"px-6 py-4 border-t border-fd-border flex justify-end space-x-3",children:[(0,o.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-darker focus:outline-none focus:ring-2 focus:ring-fd-green",disabled:w,children:"Cancel"}),(0,o.jsx)("button",{type:"button",onClick:async()=>{if("CDS"===a){if(0===f.size)return void E("Please select at least one trade");if("PERCENT"===D){const e=Array.from(f.values()).reduce((e,t)=>e+t.weightValue,0);if(Math.abs(e-1)>.05)return void E(`Percent weights must sum to 1.0 (\xb10.05), current sum: ${e.toFixed(4)}`)}try{k(!0),E(null),await G.attachTrades(t,{trades:Array.from(f.values())}),s()}catch(o){var e,r;const t=(null===(e=o.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.error)||o.message||"Failed to attach trades";E(t)}finally{k(!1)}}else if("BOND"===a){if(0===p.size)return void E("Please select at least one bond");try{k(!0),E(null);for(const e of p){const r=c.find(t=>t.id===e);r&&await G.attachBond(t,e,"NOTIONAL",r.notional)}s()}catch(o){var n,l;const e=(null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.error)||o.message||"Failed to attach bonds";E(e)}finally{k(!1)}}else{if(0===g.size)return void E("Please select at least one basket");try{k(!0),E(null);for(const e of g){const r=x.find(t=>t.id===e);r&&await G.attachBasket(t,e,"NOTIONAL",r.notional)}s()}catch(o){var d,i;const e=(null===(d=o.response)||void 0===d||null===(i=d.data)||void 0===i?void 0:i.error)||o.message||"Failed to attach baskets";E(e)}finally{k(!1)}}},className:"px-4 py-2 text-sm font-medium text-fd-dark bg-fd-green border border-transparent rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green disabled:bg-fd-green/50 disabled:cursor-not-allowed",disabled:w||("CDS"===a?0===f.size:"BOND"===a?0===p.size:0===g.size),children:w?"Attaching...":"CDS"===a?`Attach ${f.size} Trade(s)`:"BOND"===a?`Attach ${p.size} Bond(s)`:`Attach ${g.size} Basket(s)`})]})]})})};const J=new class{constructor(){this.baseUrl=`${d}/credit-simulation`}async runSimulation(e,t){const r=await fetch(`${this.baseUrl}/portfolio/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const e=await r.text();throw new Error(`Failed to start simulation: ${e}`)}return r.json()}async getSimulationResults(e){const t=await fetch(`${this.baseUrl}/runs/${e}`);if(!t.ok){if(404===t.status)throw new Error("Simulation not found");const e=await t.text();throw new Error(`Failed to get simulation results: ${e}`)}return t.json()}async cancelSimulation(e){const t=await fetch(`${this.baseUrl}/runs/${e}`,{method:"DELETE"});if(!t.ok&&404!==t.status){const e=await t.text();throw new Error(`Failed to cancel simulation: ${e}`)}}downloadResults(e){const t=JSON.stringify(e,null,2),r=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(r),n=document.createElement("a");n.href=s,n.download=`simulation-run-${e.runId}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}};const X=e=>{let{onSubmit:t,isSubmitting:r}=e;const s=(new Date).toISOString().split("T")[0],[a,l]=(0,n.useState)(s),[d,i]=(0,n.useState)(2e4),[c,u]=(0,n.useState)(["3Y","5Y"]),[x,m]=(0,n.useState)(.35),[f,h]=(0,n.useState)("");return(0,o.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),0===c.length)return void alert("Please select at least one horizon");const r={valuationDate:a,horizons:c.sort((e,t)=>parseInt(e)-parseInt(t)),paths:d,factorModel:{type:"ONE_FACTOR",systemicLoadingDefault:x},stochasticRecovery:{enabled:!1},seed:f?parseInt(f):void 0};t(r)},className:"bg-fd-darker rounded-lg border border-fd-border p-6 space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"valuationDate",className:"block text-sm font-medium text-fd-text mb-2",children:"Valuation Date"}),(0,o.jsx)("input",{type:"date",id:"valuationDate",value:a,onChange:e=>l(e.target.value),className:"w-full bg-fd-dark border border-fd-border rounded-md px-3 py-2 text-fd-text focus:outline-none focus:ring-2 focus:ring-fd-green",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"paths",className:"block text-sm font-medium text-fd-text mb-2",children:"Monte Carlo Paths"}),(0,o.jsx)("select",{id:"paths",value:d,onChange:e=>i(parseInt(e.target.value)),className:"w-full bg-fd-dark border border-fd-border rounded-md px-3 py-2 text-fd-text focus:outline-none focus:ring-2 focus:ring-fd-green",children:[1e4,2e4,5e4,1e5].map(e=>(0,o.jsxs)("option",{value:e,children:[e.toLocaleString()," paths"]},e))})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"Horizons (select one or more)"}),(0,o.jsx)("div",{className:"flex flex-wrap gap-2",children:["1Y","2Y","3Y","5Y","7Y","10Y"].map(e=>(0,o.jsx)("button",{type:"button",onClick:()=>(e=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+(c.includes(e)?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text hover:bg-fd-border"),children:e},e))})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{htmlFor:"beta",className:"block text-sm font-medium text-fd-text mb-2",children:["Default Systemic Loading (\u03b2) - ",x.toFixed(2)]}),(0,o.jsx)("input",{type:"range",id:"beta",min:"0",max:"0.95",step:"0.05",value:x,onChange:e=>m(parseFloat(e.target.value)),className:"w-full"}),(0,o.jsxs)("div",{className:"flex justify-between text-xs text-fd-text-muted mt-1",children:[(0,o.jsx)("span",{children:"Low Correlation (0.0)"}),(0,o.jsx)("span",{children:"High Correlation (0.95)"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"seed",className:"block text-sm font-medium text-fd-text mb-2",children:"Random Seed (optional - for reproducibility)"}),(0,o.jsx)("input",{type:"number",id:"seed",value:f,onChange:e=>h(e.target.value),placeholder:"Leave blank for random seed",className:"w-full bg-fd-dark border border-fd-border rounded-md px-3 py-2 text-fd-text focus:outline-none focus:ring-2 focus:ring-fd-green"}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted mt-1",children:"Using the same seed with identical inputs produces identical results"})]}),(0,o.jsx)("div",{className:"flex justify-end pt-4",children:(0,o.jsx)("button",{type:"submit",disabled:r||0===c.length,className:"bg-fd-green hover:bg-fd-green-hover text-fd-dark font-medium py-2 px-6 rounded transition-colors disabled:bg-fd-text-muted/50 disabled:cursor-not-allowed",children:r?"Starting Simulation...":"Run Simulation"})})]})},Z=e=>{let{status:t}=e;return(0,o.jsxs)("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full border text-sm font-medium ${(()=>{switch(t){case"COMPLETE":return"bg-fd-green/20 text-fd-green border-fd-green/30";case"RUNNING":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"QUEUED":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"FAILED":return"bg-red-500/20 text-red-400 border-red-500/30";case"CANCELED":return"bg-fd-text-muted/20 text-fd-text-muted border-fd-text-muted/30";default:return"bg-fd-border text-fd-text border-fd-border"}})()}`,children:[(()=>{switch(t){case"COMPLETE":return(0,o.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})});case"RUNNING":return(0,o.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});case"QUEUED":return(0,o.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})});case"FAILED":return(0,o.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"CANCELED":return(0,o.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})});default:return null}})(),(0,o.jsx)("span",{children:t})]})},ee=e=>{let{label:t,value:r,description:s}=e;return(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-4 hover:border-fd-green transition-colors",children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-fd-text-muted mb-2",children:t}),(0,o.jsx)("p",{className:"text-2xl font-bold text-fd-text mb-2",children:r}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted leading-relaxed",children:s})]})},te=e=>{let{contributors:t}=e;const[r,s]=(0,n.useState)("marginalElPct"),[a,l]=(0,n.useState)("desc"),d=e=>{r===e?l("asc"===a?"desc":"asc"):(s(e),l("entity"===e?"asc":"desc"))},i=[...t].sort((e,t)=>{let s=e[r],n=t[r];return"string"===typeof s&&(s=s.toLowerCase(),n=n.toLowerCase()),s<n?"asc"===a?-1:1:s>n?"asc"===a?1:-1:0}),c=e=>{let{field:t}=e;return r!==t?(0,o.jsx)("svg",{className:"w-4 h-4 text-fd-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):"asc"===a?(0,o.jsx)("svg",{className:"w-4 h-4 text-fd-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):(0,o.jsx)("svg",{className:"w-4 h-4 text-fd-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})};return(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border overflow-hidden",children:[(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-fd-dark border-b border-fd-border",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-fd-text cursor-pointer hover:bg-fd-border transition-colors",onClick:()=>d("entity"),children:(0,o.jsxs)("div",{className:"flex items-center gap-2",children:["Entity Name",(0,o.jsx)(c,{field:"entity"})]})}),(0,o.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-fd-text cursor-pointer hover:bg-fd-border transition-colors",onClick:()=>d("marginalElPct"),children:(0,o.jsxs)("div",{className:"flex items-center justify-end gap-2",children:["Marginal EL %",(0,o.jsx)(c,{field:"marginalElPct"})]})}),(0,o.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-fd-text cursor-pointer hover:bg-fd-border transition-colors",onClick:()=>d("beta"),children:(0,o.jsxs)("div",{className:"flex items-center justify-end gap-2",children:["Beta (\u03b2)",(0,o.jsx)(c,{field:"beta"})]})})]})}),(0,o.jsx)("tbody",{className:"divide-y divide-fd-border",children:i.map((e,t)=>(0,o.jsxs)("tr",{className:"hover:bg-fd-dark/50 transition-colors",children:[(0,o.jsx)("td",{className:"px-4 py-3 text-sm text-fd-text",children:e.entity}),(0,o.jsxs)("td",{className:"px-4 py-3 text-sm text-fd-text text-right font-medium",children:[e.marginalElPct.toFixed(2),"%"]}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm text-fd-text-muted text-right",children:e.beta.toFixed(3)})]},t))})]})}),0===i.length&&(0,o.jsx)("div",{className:"p-8 text-center text-fd-text-muted",children:"No contributors data available"})]})},re=e=>{var t,r,s,n,a,l;let{simulation:d,onCancel:i,onDownload:c,onReset:u}=e;const x="RUNNING"===d.status||"QUEUED"===d.status,m="COMPLETE"===d.status,f="FAILED"===d.status;(null===(t=d.horizons)||void 0===t?void 0:t.find(e=>"5Y"===e.tenor))||(null===(r=d.horizons)||void 0===r?void 0:r.find(e=>"3Y"===e.tenor))||null===(s=d.horizons)||void 0===s||s[0];return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-fd-text",children:"Simulation Status"}),(0,o.jsxs)("p",{className:"text-sm text-fd-text-muted mt-1",children:["Run ID: ",d.runId]})]}),(0,o.jsx)(Z,{status:d.status})]}),d.errorMessage&&(0,o.jsxs)("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded text-red-400 text-sm",children:[(0,o.jsx)("strong",{children:"Error:"})," ",d.errorMessage]}),(0,o.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Valuation Date:"}),(0,o.jsx)("p",{className:"text-fd-text font-medium",children:d.valuationDate||"N/A"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Paths:"}),(0,o.jsx)("p",{className:"text-fd-text font-medium",children:(null===(n=d.paths)||void 0===n?void 0:n.toLocaleString())||"N/A"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Horizons:"}),(0,o.jsx)("p",{className:"text-fd-text font-medium",children:(null===(a=d.horizons)||void 0===a?void 0:a.map(e=>e.tenor).join(", "))||"N/A"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Seed:"}),(0,o.jsx)("p",{className:"text-fd-text font-medium",children:null!==(l=d.seedUsed)&&void 0!==l?l:"Random"})]})]}),(0,o.jsxs)("div",{className:"mt-4 flex gap-3",children:[x&&(0,o.jsx)("button",{onClick:i,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded text-sm font-medium transition-colors",children:"Cancel Simulation"}),m&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:c,className:"bg-fd-green hover:bg-fd-green-hover text-fd-dark px-4 py-2 rounded text-sm font-medium transition-colors",children:"Download Results (JSON)"}),(0,o.jsx)("button",{onClick:u,className:"bg-fd-border hover:bg-fd-text-muted text-fd-text px-4 py-2 rounded text-sm font-medium transition-colors",children:"Run New Simulation"})]}),f&&(0,o.jsx)("button",{onClick:u,className:"bg-fd-border hover:bg-fd-text-muted text-fd-text px-4 py-2 rounded text-sm font-medium transition-colors",children:"Try Again"})]})]}),m&&d.horizons&&d.horizons.length>0&&(0,o.jsxs)(o.Fragment,{children:[d.horizons.map((e,t)=>(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{className:"text-lg font-medium text-fd-text mb-4",children:["Risk Metrics (",e.tenor,")"]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,o.jsx)(ee,{label:"Probability of Any Default",value:`${(100*(e.pAnyDefault||e.panyDefault||0)).toFixed(2)}%`,description:"Likelihood that at least one entity defaults"}),(0,o.jsx)(ee,{label:"Expected Loss",value:`$${e.loss.mean.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,description:"Mean loss across all scenarios"}),(0,o.jsx)(ee,{label:"VaR 95%",value:`$${e.loss.var95.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,description:"Loss not exceeded in 95% of scenarios"}),(0,o.jsx)(ee,{label:"VaR 99%",value:`$${e.loss.var99.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,description:"Loss not exceeded in 99% of scenarios"}),(0,o.jsx)(ee,{label:"Expected Shortfall 97.5%",value:`$${e.loss.es97_5.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,description:"Mean loss in worst 2.5% of scenarios"}),(0,o.jsx)(ee,{label:"Diversification Benefit",value:`${e.diversification.benefitPct.toFixed(2)}%`,description:"Risk reduction from portfolio diversification"})]})]},e.tenor)),d.contributors&&d.contributors.length>0&&(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-fd-text mb-4",children:"Top Contributors to Expected Loss"}),(0,o.jsx)(te,{contributors:d.contributors})]})]}),x&&(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-8 text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-fd-green mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-fd-text-muted",children:"QUEUED"===d.status?"Simulation queued...":"Running Monte Carlo simulation..."}),(0,o.jsx)("p",{className:"text-fd-text-muted text-sm mt-2",children:"This may take a minute or two depending on the number of paths"})]})]})},se=[{term:"EL (Expected Loss)",definition:"Expected portfolio loss up to horizon. The mean loss across all Monte Carlo simulation paths."},{term:"VaR (Value at Risk)",definition:"Loss threshold not exceeded with a given probability (confidence level). For example, VaR\u2089\u2085 is the loss level that will not be exceeded in 95% of scenarios."},{term:"ES (Expected Shortfall)",definition:"Average loss conditional on exceeding VaR. Also known as Conditional VaR or CVaR. ES\u2089\u2087.\u2085 represents the average loss in the worst 2.5% of scenarios."},{term:"pAnyDefault",definition:"Probability that at least one reference entity defaults by the horizon date."},{term:"Expected Defaults",definition:"Mean count of defaulting names across simulation paths. Represents the average number of entities expected to default."},{term:"Diversification Benefit",definition:"Relative EL reduction due to imperfect correlation. Calculated as (\u03a3 standalone EL - portfolio EL) / \u03a3 standalone EL. Higher values indicate better risk diversification."},{term:"\u03b2 (Beta / Loading)",definition:"Sensitivity of a name to the systemic factor. Ranges from 0 (no correlation) to ~0.95 (high correlation). Higher \u03b2 means the entity is more affected by market-wide credit events."},{term:"Marginal EL %",definition:"Percentage contribution of each entity to the total portfolio expected loss. Sum of all marginal contributions equals 100%."},{term:"Horizon",definition:"Time period for risk measurement (e.g., 1Y, 3Y, 5Y). Metrics are calculated for each specified horizon."},{term:"Monte Carlo Paths",definition:"Number of simulated scenarios. More paths provide more accurate tail risk estimates but take longer to compute."},{term:"Seed",definition:"Random number generator seed for reproducibility. Using the same seed with identical inputs produces identical results."}],ne=e=>{let{isOpen:t,onClose:r}=e;const s=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(!t)return;const e=e=>{if("Escape"===e.key&&r(),"Tab"===e.key){var t;const r=null===(t=s.current)||void 0===t?void 0:t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!r||0===r.length)return;const n=r[0],a=r[r.length-1];e.shiftKey&&document.activeElement===n?(e.preventDefault(),a.focus()):e.shiftKey||document.activeElement!==a||(e.preventDefault(),n.focus())}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,r]),(0,n.useEffect)(()=>{t&&s.current&&s.current.focus()},[t]),t?(0,o.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:r,role:"dialog","aria-modal":"true","aria-labelledby":"glossary-modal-title",children:(0,o.jsxs)("div",{ref:s,className:"bg-fd-darker rounded-lg border border-fd-border shadow-2xl max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),tabIndex:-1,children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-fd-border",children:[(0,o.jsx)("h2",{id:"glossary-modal-title",className:"text-2xl font-medium text-fd-text",children:"Simulation Metrics Glossary"}),(0,o.jsx)("button",{onClick:r,className:"text-fd-text-muted hover:text-fd-text transition-colors p-2 rounded hover:bg-fd-border","aria-label":"Close glossary",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsx)("div",{className:"overflow-y-auto p-6 space-y-6",children:se.map(e=>(0,o.jsxs)("div",{className:"border-l-4 border-fd-green pl-4",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-fd-text mb-2",children:e.term}),(0,o.jsx)("p",{className:"text-fd-text-muted leading-relaxed",children:e.definition}),e.formula&&(0,o.jsx)("div",{className:"mt-2 p-3 bg-fd-dark rounded font-mono text-sm text-fd-green",children:e.formula})]},e.term))}),(0,o.jsx)("div",{className:"border-t border-fd-border p-4 bg-fd-dark/30",children:(0,o.jsx)("button",{onClick:r,className:"bg-fd-green hover:bg-fd-green-hover text-fd-dark font-medium py-2 px-6 rounded transition-colors",children:"Close"})})]})}):null},ae=e=>{let{portfolioId:t}=e;const[r,s]=(0,n.useState)(null),[a,l]=(0,n.useState)(!1),[d,i]=(0,n.useState)(null),[c,u]=(0,n.useState)(!1),{simulation:x,loading:m,error:f}=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const[r,s]=(0,n.useState)(null),[a,l]=(0,n.useState)(!1),[d,i]=(0,n.useState)(null),o=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(!e||!t)return;const r=async()=>{try{l(!0),i(null);const t=await J.getSimulationResults(e);s(t),["COMPLETE","FAILED","CANCELED"].includes(t.status)&&o.current&&(clearInterval(o.current),o.current=null)}catch(t){const e=t instanceof Error?t.message:"Failed to fetch simulation";i(e),o.current&&(clearInterval(o.current),o.current=null)}finally{l(!1)}};return r(),o.current=setInterval(r,2e3),()=>{o.current&&(clearInterval(o.current),o.current=null)}},[e,t]),{simulation:r,loading:a,error:d}}(r,!!r);return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text",children:"Monte Carlo Simulation"}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted mt-1",children:"Correlated default risk analysis with portfolio metrics"})]}),(0,o.jsxs)("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-fd-green hover:text-fd-green-hover transition-colors",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,o.jsx)("span",{children:"Help & Glossary"})]})]}),(d||f)&&(0,o.jsx)("div",{className:"bg-red-900/20 border border-red-500/50 rounded-md p-4",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-red-400",children:"Error"}),(0,o.jsx)("div",{className:"mt-2 text-sm text-red-300",children:(0,o.jsx)("p",{children:d||f})})]})]})}),r&&x?(0,o.jsx)(re,{simulation:x,onCancel:async()=>{if(r&&window.confirm("Are you sure you want to cancel this simulation?"))try{await J.cancelSimulation(r)}catch(e){console.error("Failed to cancel simulation:",e)}},onDownload:()=>{x&&J.downloadResults(x)},onReset:()=>{s(null),i(null)}}):(0,o.jsx)(X,{onSubmit:async e=>{try{l(!0),i(null);const r=await J.runSimulation(t,e);s(r.runId)}catch(r){const e=r instanceof Error?r.message:"Failed to start simulation";i(e)}finally{l(!1)}},isSubmitting:a}),(0,o.jsx)(ne,{isOpen:c,onClose:()=>u(!1)})]})},le=e=>{let{portfolioId:t,cdsConstituents:r,bondConstituents:s,basketConstituents:a,pricingData:l}=e;const[d,i]=(0,n.useState)([]),[c,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{x()},[r,s,a]);const x=(0,n.useCallback)(()=>{const e=new Map;s.forEach(t=>{const r=t.bond.issuer;e.has(r)||e.set(r,{issuer:r,sector:m(r),bondNotional:0,cdsProtectionBought:0,cdsProtectionSold:0,netCreditExposure:0,hedgeRatio:0,hedgeStatus:"UNHEDGED",recommendation:""});e.get(r).bondNotional+=t.bond.notional}),r.forEach(t=>{const r=t.trade.referenceEntity;e.has(r)||e.set(r,{issuer:r,sector:m(r),bondNotional:0,cdsProtectionBought:0,cdsProtectionSold:0,netCreditExposure:0,hedgeRatio:0,hedgeStatus:"UNHEDGED",recommendation:""});e.get(r).cdsProtectionBought+=t.trade.notionalAmount});const t=[];e.forEach(e=>{e.netCreditExposure=e.bondNotional-e.cdsProtectionBought+e.cdsProtectionSold,e.bondNotional>0?(e.hedgeRatio=e.cdsProtectionBought/e.bondNotional*100,e.hedgeRatio>110?(e.hedgeStatus="OVER_HEDGED",e.recommendation=`Consider reducing CDS protection by $${((e.cdsProtectionBought-e.bondNotional)/1e6).toFixed(1)}M`):e.hedgeRatio>=90&&e.hedgeRatio<=110?(e.hedgeStatus="BALANCED",e.recommendation="Well hedged"):e.hedgeRatio>0?(e.hedgeStatus="UNDER_HEDGED",e.recommendation=`Consider buying $${((e.bondNotional-e.cdsProtectionBought)/1e6).toFixed(1)}M CDS protection`):(e.hedgeStatus="UNHEDGED",e.recommendation=`\u26a0\ufe0f Buy $${(e.bondNotional/1e6).toFixed(1)}M CDS protection to hedge bond exposure`)):e.cdsProtectionBought>0&&(e.hedgeStatus="UNHEDGED",e.recommendation=`Consider buying $${(e.cdsProtectionBought/1e6).toFixed(1)}M in bonds to capture basis`),t.push(e)}),i(t.sort((e,t)=>Math.abs(t.netCreditExposure)-Math.abs(e.netCreditExposure)));const n=new Map;s.forEach(e=>{const t=m(e.bond.issuer);n.has(t)||n.set(t,{notional:0,count:0});const r=n.get(t);r.notional+=e.bond.notional,r.count++}),r.forEach(e=>{const t=m(e.trade.referenceEntity);n.has(t)||n.set(t,{notional:0,count:0});const r=n.get(t);r.notional+=e.trade.notionalAmount,r.count++}),a.forEach(e=>{var t;const r="BASKET";n.has(r)||n.set(r,{notional:0,count:0});const s=n.get(r),a=(null===(t=e.basket)||void 0===t?void 0:t.notional)||e.weightValue||0;s.notional+=a,s.count++});const l=Array.from(n.values()).reduce((e,t)=>e+t.notional,0),d=[];n.forEach((e,t)=>{d.push({sector:t,notional:e.notional,percentage:l>0?e.notional/l*100:0,instrumentCount:e.count})}),u(d.sort((e,t)=>t.notional-e.notional))},[]),m=e=>({AAPL:"TECH",MSFT:"TECH",AMZN:"TECH",GOOGL:"TECH",TSLA:"TECH",NFLX:"TECH",META:"TECH",NVDA:"TECH",AMD:"TECH",JPM:"FINANCIALS",BAC:"FINANCIALS",WFC:"FINANCIALS",GS:"FINANCIALS",MS:"FINANCIALS",C:"FINANCIALS"}[e]||"OTHER"),f=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),h=e=>{switch(e){case"BALANCED":return"text-fd-green";case"UNDER_HEDGED":return"text-yellow-400";case"OVER_HEDGED":return"text-blue-400";case"UNHEDGED":return"text-red-400";default:return"text-fd-text-muted"}},p=e=>{switch(e){case"BALANCED":return"bg-green-900/30 text-green-400 border-green-500";case"UNDER_HEDGED":return"bg-yellow-900/30 text-yellow-400 border-yellow-500";case"OVER_HEDGED":return"bg-blue-900/30 text-blue-400 border-blue-500";case"UNHEDGED":return"bg-red-900/30 text-red-400 border-red-500";default:return"bg-fd-dark text-fd-text-muted border-fd-border"}},b=e=>{const t=["bg-fd-green","bg-blue-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500"];return t[e%t.length]},g=r.reduce((e,t)=>e+t.trade.notionalAmount,0),v=s.reduce((e,t)=>e+t.bond.notional,0),j=a.reduce((e,t)=>{var r;return e+((null===(r=t.basket)||void 0===r?void 0:r.notional)||t.weightValue||0)},0),N=g+v+j;return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-4",children:"Instrument Distribution"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-fd-green rounded"}),(0,o.jsx)("span",{className:"text-fd-text",children:"\ud83d\udee1\ufe0f CDS Trades"})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("div",{className:"text-fd-text font-medium",children:f(g)}),(0,o.jsxs)("div",{className:"text-sm text-fd-text-muted",children:[N>0?(g/N*100).toFixed(1):0,"% \u2022 ",r.length," positions"]})]})]}),(0,o.jsx)("div",{className:"w-full bg-fd-dark rounded-full h-2",children:(0,o.jsx)("div",{className:"bg-fd-green h-2 rounded-full transition-all",style:{width:(N>0?g/N*100:0)+"%"}})}),(0,o.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded"}),(0,o.jsx)("span",{className:"text-fd-text",children:"\ud83d\udcdc Corporate Bonds"})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("div",{className:"text-fd-text font-medium",children:f(v)}),(0,o.jsxs)("div",{className:"text-sm text-fd-text-muted",children:[N>0?(v/N*100).toFixed(1):0,"% \u2022 ",s.length," positions"]})]})]}),(0,o.jsx)("div",{className:"w-full bg-fd-dark rounded-full h-2",children:(0,o.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all",style:{width:(N>0?v/N*100:0)+"%"}})}),(0,o.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-purple-500 rounded"}),(0,o.jsx)("span",{className:"text-fd-text",children:"\ud83d\uddc2\ufe0f Credit Baskets"})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("div",{className:"text-fd-text font-medium",children:f(j)}),(0,o.jsxs)("div",{className:"text-sm text-fd-text-muted",children:[N>0?(j/N*100).toFixed(1):0,"% \u2022 ",a.length," positions"]})]})]}),(0,o.jsx)("div",{className:"w-full bg-fd-dark rounded-full h-2",children:(0,o.jsx)("div",{className:"bg-purple-500 h-2 rounded-full transition-all",style:{width:(N>0?j/N*100:0)+"%"}})})]})]}),(0,o.jsxs)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-4",children:"Sector Allocation"}),(0,o.jsx)("div",{className:"space-y-3",children:c.slice(0,5).map((e,t)=>(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:`w-3 h-3 rounded ${b(t)}`}),(0,o.jsx)("span",{className:"text-fd-text",children:e.sector})]}),(0,o.jsxs)("div",{className:"text-fd-text-muted",children:[e.percentage.toFixed(1),"% \u2022 ",e.instrumentCount," instruments"]})]}),(0,o.jsx)("div",{className:"w-full bg-fd-dark rounded-full h-1.5",children:(0,o.jsx)("div",{className:`${b(t)} h-1.5 rounded-full transition-all`,style:{width:`${e.percentage}%`}})})]},e.sector))})]})]}),(0,o.jsxs)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text",children:"Net Credit Exposure by Issuer"}),(0,o.jsx)("div",{className:"text-sm text-fd-text-muted",children:"Showing bond positions vs CDS hedges"})]}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{className:"text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:[(0,o.jsx)("th",{className:"px-4 py-3",children:"Issuer"}),(0,o.jsx)("th",{className:"px-4 py-3",children:"Sector"}),(0,o.jsx)("th",{className:"px-4 py-3 text-right",children:"Bond Exposure"}),(0,o.jsx)("th",{className:"px-4 py-3 text-right",children:"CDS Protection"}),(0,o.jsx)("th",{className:"px-4 py-3 text-right",children:"Net Exposure"}),(0,o.jsx)("th",{className:"px-4 py-3 text-center",children:"Hedge Ratio"}),(0,o.jsx)("th",{className:"px-4 py-3 text-center",children:"Status"}),(0,o.jsx)("th",{className:"px-4 py-3",children:"Recommendation"})]})}),(0,o.jsx)("tbody",{className:"divide-y divide-fd-border",children:d.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-fd-dark transition-colors",children:[(0,o.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-fd-text",children:e.issuer}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm text-fd-text-muted",children:e.sector}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm text-right text-fd-text",children:e.bondNotional>0?f(e.bondNotional):"-"}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm text-right text-fd-text",children:e.cdsProtectionBought>0?f(e.cdsProtectionBought):"-"}),(0,o.jsxs)("td",{className:"px-4 py-3 text-sm text-right font-medium "+(e.netCreditExposure>0?"text-red-400":e.netCreditExposure<0?"text-fd-green":"text-fd-text"),children:[f(Math.abs(e.netCreditExposure)),e.netCreditExposure>0?" Long":e.netCreditExposure<0?" Short":""]}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm text-center text-fd-text",children:e.bondNotional>0?`${e.hedgeRatio.toFixed(0)}%`:"N/A"}),(0,o.jsx)("td",{className:"px-4 py-3 text-center",children:(0,o.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium border ${p(e.hedgeStatus)}`,children:e.hedgeStatus.replace("_"," ")})}),(0,o.jsx)("td",{className:`px-4 py-3 text-sm ${h(e.hedgeStatus)}`,children:e.recommendation})]},e.issuer))})]})}),0===d.length&&(0,o.jsx)("div",{className:"text-center py-8 text-fd-text-muted",children:"No exposures to analyze. Add some CDS trades and bonds to see hedge recommendations."})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,o.jsxs)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-4",children:[(0,o.jsx)("div",{className:"text-sm text-fd-text-muted mb-1",children:"Total Instruments"}),(0,o.jsx)("div",{className:"text-2xl font-semibold text-fd-text",children:r.length+s.length+a.length}),(0,o.jsxs)("div",{className:"text-xs text-fd-text-muted mt-1",children:[r.length," CDS \u2022 ",s.length," Bonds \u2022 ",a.length," Baskets"]})]}),(0,o.jsxs)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-4",children:[(0,o.jsx)("div",{className:"text-sm text-fd-text-muted mb-1",children:"Unique Issuers"}),(0,o.jsx)("div",{className:"text-2xl font-semibold text-fd-text",children:d.length}),(0,o.jsxs)("div",{className:"text-xs text-fd-text-muted mt-1",children:[c.length," sectors"]})]}),(0,o.jsxs)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-4",children:[(0,o.jsx)("div",{className:"text-sm text-fd-text-muted mb-1",children:"Hedge Coverage"}),(0,o.jsxs)("div",{className:"text-2xl font-semibold text-fd-text",children:[v>0?(g/v*100).toFixed(0):0,"%"]}),(0,o.jsx)("div",{className:"text-xs text-fd-text-muted mt-1",children:"CDS / Bond ratio"})]}),(0,o.jsxs)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-4",children:[(0,o.jsx)("div",{className:"text-sm text-fd-text-muted mb-1",children:"Unhedged Exposure"}),(0,o.jsx)("div",{className:"text-2xl font-semibold text-red-400",children:d.filter(e=>"UNHEDGED"===e.hedgeStatus||"UNDER_HEDGED"===e.hedgeStatus).length}),(0,o.jsx)("div",{className:"text-xs text-fd-text-muted mt-1",children:"issuers need attention"})]})]})]})},de=e=>{let{portfolioId:t,onBack:r}=e;const[s,a]=(0,n.useState)(null),[l,d]=(0,n.useState)([]),[i,c]=(0,n.useState)([]),[u,x]=(0,n.useState)([]),[m,f]=(0,n.useState)(null),[h,p]=(0,n.useState)(!0),[b,g]=(0,n.useState)(!1),[v,j]=(0,n.useState)(null),[N,y]=(0,n.useState)("overview"),[w,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)("");(0,n.useEffect)(()=>{E()},[t]);const E=async()=>{try{p(!0),j(null);const[r,s,n,l]=await Promise.all([G.getPortfolioById(t),G.getConstituents(t),G.getPortfolioBonds(t),G.getPortfolioBaskets(t)]);a(r),d(s),c(n),x(l);try{const e=await G.getRiskSummary(t);f(e),C(e.valuationDate)}catch(e){console.log("No cached risk summary available")}}catch(e){const t=e instanceof Error?e.message:"Failed to load portfolio";j(t),console.error("Error loading portfolio:",e)}finally{p(!1)}},D=e=>{const t=new Date,r=new Date(t);let s=0;for(;s<e;){r.setDate(r.getDate()+1);const e=r.getDay();0!==e&&6!==e&&s++}return r.toISOString().split("T")[0]},L=async e=>{let t;switch(e){case"today":t=(new Date).toISOString().split("T")[0];break;case"t+1":t=D(1);break;case"t+7":t=D(7);break;case"t+45":t=D(45)}C(t),await T(t)},T=async e=>{try{g(!0),j(null);const r=await G.pricePortfolio(t,e);f(r)}catch(n){var r,s;const e=(null===(r=n.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.error)||n.message||"Failed to price portfolio";j(e),console.error("Error pricing portfolio:",n)}finally{g(!1)}},M=e=>void 0===e||null===e?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e||null===e?"-":e.toFixed(t)};return h?(0,o.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-fd-green"})}):v||!s?(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,o.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,o.jsx)("p",{children:v||"Portfolio not found"})})]})]})}):(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)("div",{className:"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[r&&(0,o.jsx)("button",{onClick:r,className:"text-fd-green hover:text-fd-green-hover font-medium",children:"\u2190 Back"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold text-fd-text",children:s.name}),s.description&&(0,o.jsx)("p",{className:"text-sm text-fd-text-muted mt-1",children:s.description})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"text-xs text-fd-text-muted",children:"Valuation:"}),(0,o.jsxs)("div",{className:"flex space-x-1",children:[(0,o.jsx)("button",{onClick:()=>L("today"),disabled:b,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${S===(new Date).toISOString().split("T")[0]?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text hover:bg-fd-border"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Today"}),(0,o.jsx)("button",{onClick:()=>L("t+1"),disabled:b,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${S===D(1)?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text hover:bg-fd-border"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"T+1"}),(0,o.jsx)("button",{onClick:()=>L("t+7"),disabled:b,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${S===D(7)?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text hover:bg-fd-border"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"T+7"}),(0,o.jsx)("button",{onClick:()=>L("t+45"),disabled:b,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${S===D(45)?"bg-fd-green text-fd-dark":"bg-fd-dark text-fd-text hover:bg-fd-border"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"T+45"})]})]}),(0,o.jsx)("button",{onClick:()=>k(!0),className:"bg-fd-green hover:bg-fd-green-hover text-fd-dark font-medium py-2 px-4 rounded transition-colors",children:"+ Add Instruments"}),(0,o.jsx)("button",{onClick:async()=>{const e=(new Date).toISOString().split("T")[0];C(e),await T(e)},disabled:b||0===l.length,className:"bg-fd-green hover:bg-fd-green-hover text-fd-dark font-medium py-2 px-4 rounded transition-colors disabled:bg-fd-text-muted/50 disabled:cursor-not-allowed",children:b?"Pricing...":"Reprice Now"})]})]})}),(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-fd border border-fd-border",children:[(0,o.jsx)("div",{className:"border-b border-fd-border px-6",children:(0,o.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,o.jsx)("button",{onClick:()=>y("overview"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("overview"===N?"border-fd-green text-fd-green":"border-transparent text-fd-text-muted hover:text-fd-text hover:border-fd-border"),children:"Overview"}),(0,o.jsxs)("button",{onClick:()=>y("constituents"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("constituents"===N?"border-fd-green text-fd-green":"border-transparent text-fd-text-muted hover:text-fd-text hover:border-fd-border"),children:["Constituents (",l.length+i.length+u.length,")"]}),(0,o.jsx)("button",{onClick:()=>y("concentration"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("concentration"===N?"border-fd-green text-fd-green":"border-transparent text-fd-text-muted hover:text-fd-text hover:border-fd-border"),children:"Concentration"}),(0,o.jsx)("button",{onClick:()=>y("simulation"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("simulation"===N?"border-fd-green text-fd-green":"border-transparent text-fd-text-muted hover:text-fd-text hover:border-fd-border"),children:"Monte Carlo Simulation"})]})}),(0,o.jsxs)("div",{className:"p-6",children:["overview"===N&&(0,o.jsx)(le,{portfolioId:t,cdsConstituents:l,bondConstituents:i,basketConstituents:u,pricingData:m}),"constituents"===N&&(0,o.jsx)(o.Fragment,{children:0===l.length&&0===i.length&&0===u.length?(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("svg",{className:"mx-auto h-12 w-12 text-fd-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("h3",{className:"mt-2 text-sm font-medium text-fd-text",children:"No instruments in portfolio"}),(0,o.jsx)("p",{className:"mt-1 text-sm text-fd-text-muted",children:"Add CDS trades or bonds to get started."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{className:"bg-fd-dark",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Type"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"ID"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Reference / Issuer"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Notional"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Weight Type"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Weight Value"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Actions"})]})}),(0,o.jsxs)("tbody",{className:"bg-fd-darker divide-y divide-fd-border",children:[l.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-fd-dark transition-colors",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-900 text-blue-200",children:"\ud83d\udee1\ufe0f CDS"})}),(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text",children:["CDS-",e.trade.id]}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.trade.referenceEntity}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:M(e.trade.notionalAmount)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text-muted",children:e.weightType}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:"PERCENT"===e.weightType?`${(100*e.weightValue).toFixed(2)}%`:M(e.weightValue)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,o.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to remove this trade from the portfolio?"))try{await G.detachConstituent(t,e),E()}catch(r){const e=r instanceof Error?r.message:"Failed to detach constituent";alert(e)}})(e.id),className:"text-red-400 hover:text-red-300 font-medium",children:"Remove"})})]},`cds-${e.id}`)),i.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-fd-dark transition-colors",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-900 text-green-200",children:"\ud83d\udcdc Bond"})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text",children:e.bond.isin}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.bond.issuer}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:M(e.bond.notional)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text-muted",children:e.weightType}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:M(e.weightValue)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,o.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to remove this bond from the portfolio?"))try{await G.removeBond(t,e),E()}catch(r){const e=r instanceof Error?r.message:"Failed to remove bond";alert(e)}})(e.bond.id),className:"text-red-400 hover:text-red-300 font-medium",children:"Remove"})})]},`bond-${e.id}`)),u.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-fd-dark transition-colors",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-900 text-purple-200",children:"\ud83d\uddc2\ufe0f Basket"})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text",children:e.basket.name}),(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:["FIRST_TO_DEFAULT"===e.basket.basketType?"FTD":"NTH_TO_DEFAULT"===e.basket.basketType?`${e.basket.kthToDefault}th-to-Default`:"Tranchette"," (",e.basket.numberOfConstituents," names)"]}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:M(e.basket.notional)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text-muted",children:e.weightType}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:M(e.weightValue)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,o.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to remove this basket from the portfolio?"))try{await G.removeBasket(t,e),E()}catch(r){const e=r instanceof Error?r.message:"Failed to remove basket";alert(e)}})(e.basket.id),className:"text-red-400 hover:text-red-300 font-medium",children:"Remove"})})]},`basket-${e.id}`))]})]})})}),"concentration"===N&&(0,o.jsx)("div",{className:"space-y-4",children:null!==m&&void 0!==m&&m.concentration?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"bg-fd-dark p-6 rounded-lg border border-fd-border",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-4",children:"Top 5 CS01 Concentration"}),(0,o.jsxs)("div",{className:"text-3xl font-bold text-fd-green",children:[P(m.concentration.top5PctCs01,1),"%"]}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted mt-2",children:"of total CS01 is concentrated in the top 5 contributors"})]}),(0,o.jsxs)("div",{className:"bg-fd-dark p-6 rounded-lg border border-fd-border",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-4",children:"Sector Breakdown"}),(0,o.jsx)("div",{className:"space-y-3",children:m.concentration.sectorBreakdown.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,o.jsx)("span",{className:"text-sm font-medium text-fd-text w-32",children:e.sector}),(0,o.jsx)("div",{className:"flex-1 bg-fd-darker rounded-full h-4",children:(0,o.jsx)("div",{className:"h-4 rounded-full "+(e.cs01Pct>25?"bg-red-500":"bg-fd-green"),style:{width:`${Math.min(e.cs01Pct,100)}%`}})})]}),(0,o.jsxs)("span",{className:"text-sm font-semibold text-fd-text ml-3",children:[P(e.cs01Pct,1),"%"]})]},e.sector))})]})]}):(0,o.jsx)("div",{className:"bg-fd-dark p-6 rounded-lg border border-fd-border text-center",children:(0,o.jsx)("p",{className:"text-fd-text-muted",children:"No concentration metrics available. Price the portfolio first."})})}),"simulation"===N&&(0,o.jsx)(ae,{portfolioId:t})]})]}),w&&(0,o.jsx)(K,{portfolioId:t,onClose:()=>k(!1),onSuccess:()=>{k(!1),E()}})]})},ie=()=>{const[e,t]=(0,n.useState)(null);return(0,o.jsx)("div",{className:"px-4 py-6",children:e?(0,o.jsx)(de,{portfolioId:e.id,onBack:()=>{t(null)}}):(0,o.jsx)(q,{onPortfolioSelect:e=>{t(e)}})})},oe=e=>{let{onUploadSuccess:t,onUploadError:r}=e;const[s,a]=(0,n.useState)({statementId:"",ccpName:"LCH",memberFirm:"",accountNumber:"",statementDate:"",currency:"USD",format:"CSV"}),[l,d]=(0,n.useState)(null),[i,c]=(0,n.useState)(!1),[u,x]=(0,n.useState)(!1),[m,f]=(0,n.useState)(0),[h,p]=(0,n.useState)(null),[b,g]=(0,n.useState)(null),v=(0,n.useRef)(null),j=e=>{const{name:t,value:r}=e.target;a(e=>({...e,[t]:r})),p(null)},N=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?x(!0):"dragleave"===e.type&&x(!1)},y=e=>{d(e),p(null),g(null);const t=e.name.toLowerCase().split(".").pop();if("csv"===t?a(e=>({...e,format:"CSV"})):"xml"===t?a(e=>({...e,format:"XML"})):"json"===t&&a(e=>({...e,format:"JSON"})),!s.statementId){const e=(new Date).toISOString().split("T")[0].replace(/-/g,""),t=Math.random().toString(36).substring(2,8).toUpperCase();a(r=>({...r,statementId:`${s.ccpName}_${e}_${t}`}))}};return(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-6",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-blue-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,o.jsx)("h2",{className:"text-2xl font-bold text-fd-text",children:"Upload Margin Statement"})]}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const n=l?s.statementId.trim()?s.memberFirm.trim()?s.accountNumber.trim()?s.statementDate?l.size>52428800?"File size must be less than 50MB":new Date(s.statementDate)>new Date?"Statement date cannot be in the future":null:"Statement date is required":"Account number is required":"Member firm is required":"Statement ID is required":"Please select a file to upload";if(n)p(n);else{c(!0),p(null),g(null),f(0);try{const e=new FormData;e.append("file",l),e.append("statementId",s.statementId),e.append("ccpName",s.ccpName),e.append("memberFirm",s.memberFirm),e.append("accountNumber",s.accountNumber),e.append("statementDate",s.statementDate),e.append("currency",s.currency),e.append("format",s.format);const r=setInterval(()=>{f(e=>Math.min(e+10,90))},200),n=await fetch("/api/margin-statements/upload",{method:"POST",body:e});clearInterval(r),f(100);const i=await n.json();if(!n.ok)throw new Error(i.error||"Upload failed");g(`Statement uploaded successfully! ID: ${i.statementId}`),d(null),a({statementId:"",ccpName:"LCH",memberFirm:"",accountNumber:"",statementDate:"",currency:"USD",format:"CSV"}),v.current&&(v.current.value=""),t&&t(i.statementId)}catch(i){p(i.message||"Upload failed"),r&&r(i.message)}finally{c(!1),setTimeout(()=>f(0),2e3)}}},className:"space-y-6",children:[(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text",children:"Statement File"}),(0,o.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg p-8 text-center transition-colors "+(u?"border-blue-400 bg-blue-400/10":"border-fd-border hover:border-fd-green"),onDragEnter:N,onDragLeave:N,onDragOver:N,onDrop:e=>{e.preventDefault(),e.stopPropagation(),x(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&y(e.dataTransfer.files[0])},children:[(0,o.jsx)("input",{ref:v,type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&y(e.target.files[0])},accept:".csv,.xml,.json,.txt",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),l?(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center mx-auto",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,o.jsx)("div",{className:"text-fd-text font-medium",children:l.name}),(0,o.jsx)("div",{className:"text-fd-text-muted text-sm",children:(e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(l.size)}),m>0&&m<100&&(0,o.jsx)("div",{className:"w-full bg-fd-border rounded-full h-2 mt-2",children:(0,o.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${m}%`}})})]}):(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-fd-border rounded-full flex items-center justify-center mx-auto",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-fd-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,o.jsxs)("div",{className:"text-fd-text",children:[(0,o.jsx)("span",{className:"font-medium",children:"Click to upload"})," or drag and drop"]}),(0,o.jsx)("div",{className:"text-fd-text-muted text-sm",children:"CSV, XML, JSON files up to 50MB"})]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"Statement ID"}),(0,o.jsx)("input",{type:"text",name:"statementId",value:s.statementId,onChange:j,className:"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"AUTO_GENERATED_001"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"CCP Name"}),(0,o.jsx)("select",{name:"ccpName",value:s.ccpName,onChange:j,className:"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500",children:["LCH","CME","EUREX","ICE"].map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"Member Firm"}),(0,o.jsx)("input",{type:"text",name:"memberFirm",value:s.memberFirm,onChange:j,className:"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Goldman Sachs",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"Account Number"}),(0,o.jsx)("input",{type:"text",name:"accountNumber",value:s.accountNumber,onChange:j,className:"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"HOUSE-001",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"Statement Date"}),(0,o.jsx)("input",{type:"date",name:"statementDate",value:s.statementDate,onChange:j,className:"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"Currency"}),(0,o.jsx)("select",{name:"currency",value:s.currency,onChange:j,className:"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500",children:["USD","EUR","GBP","JPY","CHF"].map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"Format"}),(0,o.jsx)("select",{name:"format",value:s.format,onChange:j,className:"w-full px-3 py-2 bg-fd-dark border border-fd-border rounded-md text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500",children:["CSV","XML","JSON","PROPRIETARY"].map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]})]}),h&&(0,o.jsx)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-3",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5 text-red-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,o.jsx)("span",{className:"text-red-400 text-sm",children:h})]})}),b&&(0,o.jsx)("div",{className:"bg-green-500/20 border border-green-500/50 rounded-lg p-3",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5 text-green-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,o.jsx)("span",{className:"text-green-400 text-sm",children:b})]})}),(0,o.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-fd-border",children:[(0,o.jsx)("button",{type:"button",onClick:()=>{d(null),a({statementId:"",ccpName:"LCH",memberFirm:"",accountNumber:"",statementDate:"",currency:"USD",format:"CSV"}),p(null),g(null),v.current&&(v.current.value="")},className:"px-6 py-2 bg-fd-border text-fd-text rounded hover:bg-fd-border/80 transition-colors",children:"Clear"}),(0,o.jsxs)("button",{type:"submit",disabled:i||!l,className:"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[i&&(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,o.jsx)("span",{children:i?"Uploading...":"Upload Statement"})]})]})]})]})},ce=e=>{var t,r,s,a;let{statementId:l,statementName:d,onClose:c}=e;const[u,x]=(0,n.useState)([]),[m,f]=(0,n.useState)(!0),[h,p]=(0,n.useState)(null),b=async()=>{try{f(!0),p(null);const e=await fetch(i(`/margin-statements/${l}/positions`));if(!e.ok)throw new Error("Failed to load positions");const t=await e.json();x(t)}catch(e){p(e.message||"Failed to load positions")}finally{f(!1)}};(0,n.useEffect)(()=>{b()},[l]);const g=(e,t)=>{if(void 0===e||null===e)return"-";t||(t="USD");try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}catch{return`${t} ${e.toFixed(2)}`}},v=e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return e}},j=e=>{if(!e)return"bg-gray-500/20 text-gray-300 border-gray-500/30";switch(e){case"VARIATION_MARGIN":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"INITIAL_MARGIN":return"bg-purple-500/20 text-purple-300 border-purple-500/30";case"EXCESS_COLLATERAL":return"bg-green-500/20 text-green-300 border-green-500/30";default:return"bg-gray-500/20 text-gray-300 border-gray-500/30"}},N=e=>{if(!e)return null;switch(e){case"VARIATION_MARGIN":return(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})});case"INITIAL_MARGIN":return(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})});case"EXCESS_COLLATERAL":return(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return null}},y=e=>u.filter(t=>t.positionType===e).reduce((e,t)=>e+t.amount,0),w=y("VARIATION_MARGIN"),k=y("INITIAL_MARGIN"),S=y("EXCESS_COLLATERAL"),C=w+k+S;return(0,n.useEffect)(()=>{const e=e=>{"Escape"===e.key&&c()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[c]),(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-2xl border border-fd-border w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-fd-border bg-gradient-to-r from-fd-dark to-fd-darker",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-fd-text",children:"Margin Positions"}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted",children:d})]})]}),(0,o.jsx)("button",{onClick:c,className:"text-fd-text-muted hover:text-fd-text transition-colors p-2 hover:bg-fd-border/50 rounded-lg","aria-label":"Close modal",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:m?(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-fd-green mb-4"}),(0,o.jsx)("p",{className:"text-fd-text-muted",children:"Loading positions..."})]}):h?(0,o.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-6",children:(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)("svg",{className:"w-6 h-6 text-red-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-red-300 font-semibold mb-1",children:"Error Loading Positions"}),(0,o.jsx)("p",{className:"text-red-200 text-sm",children:h}),(0,o.jsx)("button",{onClick:b,className:"mt-4 px-4 py-2 bg-red-500/20 text-red-300 rounded-lg hover:bg-red-500/30 transition-colors text-sm font-medium",children:"Try Again"})]})]})}):0===u.length?(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,o.jsx)("div",{className:"w-20 h-20 bg-fd-border/50 rounded-full flex items-center justify-center mb-4",children:(0,o.jsx)("svg",{className:"w-10 h-10 text-fd-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,o.jsx)("h3",{className:"text-fd-text text-lg font-semibold mb-2",children:"No Positions Found"}),(0,o.jsx)("p",{className:"text-fd-text-muted text-sm",children:"This statement does not have any positions recorded."})]}):(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,o.jsxs)("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border border-blue-500/20 rounded-lg p-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-blue-300 text-sm font-medium",children:"Variation Margin"}),(0,o.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),(0,o.jsx)("div",{className:"text-2xl font-bold text-blue-200",children:g(w,(null===(t=u[0])||void 0===t?void 0:t.currency)||"USD")}),(0,o.jsxs)("div",{className:"text-xs text-blue-300/60 mt-1",children:[u.filter(e=>"VARIATION_MARGIN"===e.positionType).length," position(s)"]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/5 border border-purple-500/20 rounded-lg p-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-purple-300 text-sm font-medium",children:"Initial Margin"}),(0,o.jsx)("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]}),(0,o.jsx)("div",{className:"text-2xl font-bold text-purple-200",children:g(k,(null===(r=u[0])||void 0===r?void 0:r.currency)||"USD")}),(0,o.jsxs)("div",{className:"text-xs text-purple-300/60 mt-1",children:[u.filter(e=>"INITIAL_MARGIN"===e.positionType).length," position(s)"]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/5 border border-green-500/20 rounded-lg p-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-green-300 text-sm font-medium",children:"Excess Collateral"}),(0,o.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),(0,o.jsx)("div",{className:"text-2xl font-bold text-green-200",children:g(S,(null===(s=u[0])||void 0===s?void 0:s.currency)||"USD")}),(0,o.jsxs)("div",{className:"text-xs text-green-300/60 mt-1",children:[u.filter(e=>"EXCESS_COLLATERAL"===e.positionType).length," position(s)"]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-cyan-500/10 to-cyan-600/5 border border-cyan-500/20 rounded-lg p-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-cyan-300 text-sm font-medium",children:"Total Margin"}),(0,o.jsx)("svg",{className:"w-5 h-5 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})]}),(0,o.jsx)("div",{className:"text-2xl font-bold text-cyan-200",children:g(C,(null===(a=u[0])||void 0===a?void 0:a.currency)||"USD")}),(0,o.jsxs)("div",{className:"text-xs text-cyan-300/60 mt-1",children:[u.length," total position(s)"]})]})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg border border-fd-border overflow-hidden",children:[(0,o.jsx)("div",{className:"px-4 py-3 bg-gradient-to-r from-fd-darker to-fd-dark border-b border-fd-border",children:(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text",children:"Position Details"})}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-fd-darker",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Type"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Amount"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Netting Set"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Portfolio"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Product Class"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Effective Date"})]})}),(0,o.jsx)("tbody",{className:"bg-fd-dark divide-y divide-fd-border",children:u.map(e=>{return(0,o.jsxs)("tr",{className:"hover:bg-fd-darker/50 transition-colors",children:[(0,o.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,o.jsxs)("div",{className:`inline-flex items-center space-x-2 px-3 py-1.5 rounded-lg border ${j(e.positionType)}`,children:[N(e.positionType),(0,o.jsx)("span",{className:"text-sm font-medium",children:(t=e.positionType,t?t.split("_").map(e=>e.charAt(0)+e.slice(1).toLowerCase()).join(" "):"Unknown")})]})}),(0,o.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap",children:[(0,o.jsx)("div",{className:"text-fd-text font-semibold",children:g(e.amount,e.currency)}),(0,o.jsx)("div",{className:"text-xs text-fd-text-muted",children:e.currency})]}),(0,o.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text font-mono",children:e.nettingSetId||"-"})}),(0,o.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:e.portfolioCode||"-"})}),(0,o.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:e.productClass||"-"})}),(0,o.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:v(e.effectiveDate)})})]},e.id);var t})})]})})]})]})}),(0,o.jsxs)("div",{className:"px-6 py-4 border-t border-fd-border bg-fd-darker flex justify-between items-center",children:[(0,o.jsx)("div",{className:"text-sm text-fd-text-muted",children:u.length>0&&(0,o.jsxs)("span",{children:["Showing ",u.length," position",1!==u.length?"s":""]})}),(0,o.jsx)("button",{onClick:c,className:"px-6 py-2.5 bg-fd-green text-fd-dark rounded-lg hover:bg-fd-green/90 transition-colors font-medium",children:"Close"})]})]})})},ue=e=>{let{refreshTrigger:t}=e;const[r,s]=(0,n.useState)([]),[a,l]=(0,n.useState)(!0),[d,i]=(0,n.useState)(null),[c,u]=(0,n.useState)("ALL"),[x,m]=(0,n.useState)(null),[f,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{p()},[t]);const p=async()=>{try{l(!0),i(null);const e=await fetch("/api/margin-statements");if(!e.ok)throw new Error("Failed to load statements");const t=await e.json();s(t)}catch(e){i(e.message||"Failed to load statements")}finally{l(!1)}},b=e=>{switch(e){case"PENDING":return"bg-yellow-100 text-yellow-800";case"PROCESSING":return"bg-blue-100 text-blue-800";case"PROCESSED":return"bg-green-100 text-green-800";case"FAILED":return"bg-red-100 text-red-800";case"DISPUTED":return"bg-orange-100 text-orange-800";case"RETRYING":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},g=e=>{switch(e){case"PENDING":return(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})});case"PROCESSING":return(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"});case"PROCESSED":return(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"FAILED":return(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})});case"DISPUTED":return(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"RETRYING":return(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})});default:return null}},v=r.filter(e=>"ALL"===c||e.status===c),j=r.filter(e=>"FAILED"===e.status).length;return a?(0,o.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-fd-green"})}):d?(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Statements"}),(0,o.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,o.jsx)("p",{children:d})}),(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)("button",{onClick:p,className:"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200",children:"Retry"})})]})]})}):(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border",children:[(0,o.jsxs)("div",{className:"p-6 border-b border-fd-border",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,o.jsx)("h2",{className:"text-2xl font-bold text-fd-text",children:"Margin Statements"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[j>0&&(0,o.jsxs)("button",{onClick:async()=>{try{if(!(await fetch("/api/margin-statements/retry-failed",{method:"POST"})).ok)throw new Error("Failed to retry statements");setTimeout(()=>{p()},1e3)}catch(e){i(e.message||"Failed to retry statements")}},className:"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors flex items-center space-x-2",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,o.jsxs)("span",{children:["Retry Failed (",j,")"]})]}),(0,o.jsxs)("button",{onClick:p,className:"px-4 py-2 bg-fd-green text-fd-dark rounded hover:bg-fd-green/80 transition-colors flex items-center space-x-2",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,o.jsx)("span",{children:"Refresh"})]})]})]}),(0,o.jsx)("div",{className:"flex space-x-1 bg-fd-dark rounded-lg p-1",children:["ALL","PENDING","PROCESSING","PROCESSED","FAILED","DISPUTED","RETRYING"].map(e=>(0,o.jsxs)("button",{onClick:()=>u(e),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+(c===e?"bg-fd-green text-fd-dark":"text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50"),children:[e,"ALL"!==e&&(0,o.jsxs)("span",{className:"ml-1 text-xs",children:["(",r.filter(t=>t.status===e).length,")"]})]},e))})]}),(0,o.jsx)("div",{className:"overflow-hidden",children:(0,o.jsxs)("table",{className:"min-w-full",children:[(0,o.jsx)("thead",{className:"bg-fd-dark",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Statement"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"CCP"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Date"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Status"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Created"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-fd-darker divide-y divide-fd-border",children:v.map(e=>{return(0,o.jsxs)("tr",{className:"hover:bg-fd-dark transition-colors cursor-pointer",onClick:()=>m(e),children:[(0,o.jsx)("td",{className:"px-4 py-4",children:(0,o.jsxs)("div",{className:"flex flex-col max-w-xs",children:[(0,o.jsx)("div",{className:"text-sm font-medium text-fd-text truncate",children:e.statementId}),(0,o.jsx)("div",{className:"text-xs text-fd-text-muted truncate",children:e.accountNumber})]})}),(0,o.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap",children:[(0,o.jsx)("div",{className:"text-sm font-medium text-fd-text",children:e.ccpName}),(0,o.jsx)("div",{className:"text-xs text-fd-text-muted",children:e.currency})]}),(0,o.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:new Date(e.statementDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})}),(0,o.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,o.jsxs)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${b(e.status)}`,children:[(0,o.jsx)("span",{className:"mr-1",children:g(e.status)}),e.status]})}),(0,o.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-fd-text-muted",children:(t=e.createdAt,t?new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-").replace(", ","\n").split("\n")[0]}),(0,o.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),m(e)},className:"text-fd-green hover:text-fd-green/80 font-medium",children:"View"})})]},e.id);var t})})]})}),0===v.length&&(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("svg",{className:"mx-auto h-12 w-12 text-fd-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("h3",{className:"mt-2 text-sm font-medium text-fd-text",children:"No statements found"}),(0,o.jsx)("p",{className:"mt-1 text-sm text-fd-text-muted",children:"ALL"===c?"Upload your first margin statement to get started.":`No statements with status: ${c}`})]}),x&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-fd border border-fd-border p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-fd-text",children:"Statement Details"}),(0,o.jsx)("button",{onClick:()=>m(null),className:"text-fd-text-muted hover:text-fd-text transition-colors",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Statement ID:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2 font-mono",children:x.statementId})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"CCP:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:x.ccpName})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Member Firm:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:x.memberFirm})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Account:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:x.accountNumber})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Date:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:new Date(x.statementDate).toLocaleDateString()})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Currency:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:x.currency})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Format:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:x.format})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"File Size:"}),(0,o.jsx)("span",{className:"text-fd-text ml-2",children:(e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(x.fileSize)})]})]}),x.errorMessage&&(0,o.jsxs)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-3",children:[(0,o.jsx)("div",{className:"text-red-400 text-sm font-medium mb-1",children:"Error Message:"}),(0,o.jsx)("div",{className:"text-red-300 text-sm",children:x.errorMessage})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-fd-border",children:[(0,o.jsx)("button",{onClick:()=>m(null),className:"px-4 py-2 bg-fd-border text-fd-text rounded hover:bg-fd-border/80 transition-colors",children:"Close"}),"PROCESSED"===x.status&&(0,o.jsx)("button",{onClick:()=>{h(!0)},className:"px-4 py-2 bg-fd-green text-fd-dark rounded hover:bg-fd-green/80 transition-colors",children:"View Positions"})]})]})]})}),f&&x&&(0,o.jsx)(ce,{statementId:x.id,statementName:`${x.ccpName} - ${x.statementId}`,onClose:()=>h(!1)})]})},xe=e=>{let{onGenerationSuccess:t,onGenerationError:r}=e;const[s,a]=(0,n.useState)(!1),[l,d]=(0,n.useState)((new Date).toISOString().split("T")[0]),[c,u]=(0,n.useState)([]),[x,m]=(0,n.useState)(!1),[f,h]=(0,n.useState)(null),p=(e,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e);return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-6",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,o.jsx)("div",{className:"w-10 h-10 bg-green-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text",children:"Automated Statement Generation"}),(0,o.jsx)("p",{className:"text-fd-text-muted",children:"Generate VM/IM statements using existing CCP data and netting sets"})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"Statement Date"}),(0,o.jsx)("input",{type:"date",value:l,onChange:e=>d(e.target.value),max:(new Date).toISOString().split("T")[0],className:"w-full px-4 py-3 bg-fd-dark border border-fd-border rounded-lg text-fd-text \r focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50"})]}),(0,o.jsx)("div",{className:"flex items-end",children:(0,o.jsx)("button",{onClick:async()=>{a(!0),h(null);try{const e=await fetch(i(`/margin-statements/actions/generate-automated?statementDate=${l}`),{method:"POST",headers:{"Content-Type":"application/json"}}),r=await e.json();if(!e.ok){if(409===e.status){const e=r.message||r.error||"Statements already exist for this date";return h(e),void m(!1)}throw new Error(r.message||r.error||`HTTP error! status: ${e.status}`)}if(!r.success||!r.generatedStatements)throw new Error(r.error||"Generation failed");u(r.generatedStatements),m(!0),t()}catch(e){console.error("Error generating statements:",e),r(e instanceof Error?e.message:"Unknown error occurred")}finally{a(!1)}},disabled:s,className:"w-full px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 "+(s?"bg-gray-600 text-gray-300 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"),children:s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Generate Statements"]})})})]}),(0,o.jsx)("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)("svg",{className:"w-5 h-5 text-blue-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium text-blue-300 mb-1",children:"Automated Generation Benefits"}),(0,o.jsxs)("ul",{className:"text-sm text-blue-200/80 space-y-1",children:[(0,o.jsx)("li",{children:"\u2022 Uses existing SA-CCR calculations and SIMM results"}),(0,o.jsx)("li",{children:"\u2022 Eliminates manual file uploads and processing errors"}),(0,o.jsx)("li",{children:"\u2022 Real-time calculation based on current trade positions"}),(0,o.jsx)("li",{children:"\u2022 Automatic netting set grouping by CCP and currency"})]})]})]})})]}),f&&(0,o.jsx)("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 animate-pulse",children:(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h4",{className:"font-medium text-yellow-300 mb-1",children:"Duplicate Statements Detected"}),(0,o.jsx)("p",{className:"text-sm text-yellow-200/80",children:f}),(0,o.jsx)("p",{className:"text-xs text-yellow-200/60 mt-2",children:"Statements for this date already exist in the system. Please select a different date or delete the existing statements first."})]}),(0,o.jsx)("button",{onClick:()=>h(null),className:"flex-shrink-0 text-yellow-400/60 hover:text-yellow-400 transition-colors","aria-label":"Dismiss notification",children:(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),x&&(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-6",children:[(0,o.jsxs)("h3",{className:"text-lg font-semibold text-fd-text mb-6",children:["Generated Statements (",c.length,")"]}),0===c.length?(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("svg",{className:"w-12 h-12 text-fd-text-muted mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("p",{className:"text-fd-text-muted",children:"No active positions found for the selected date"})]}):(0,o.jsx)("div",{className:"space-y-4",children:c.map((e,t)=>{return(0,o.jsx)("div",{className:"bg-fd-dark rounded-lg border border-fd-border p-4",children:(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium text-fd-text mb-2",children:e.nettingSetId}),(0,o.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"CCP:"}),(0,o.jsx)("span",{className:"text-fd-text",children:e.ccpName})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Account:"}),(0,o.jsx)("span",{className:"text-fd-text",children:e.accountId})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Trades:"}),(0,o.jsx)("span",{className:"text-fd-text",children:(r=e.tradeCount,new Intl.NumberFormat("en-US").format(r))})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{className:"font-medium text-fd-text mb-2",children:"Margin Amounts"}),(0,o.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Variation Margin:"}),(0,o.jsx)("span",{className:"text-fd-text "+(e.variationMarginNet<0?"text-red-400":"text-green-400"),children:p(e.variationMarginNet,e.currency)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Initial Margin:"}),(0,o.jsx)("span",{className:"text-fd-text",children:p(e.initialMarginRequired,e.currency)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Excess Margin:"}),(0,o.jsx)("span",{className:"text-green-400",children:p(e.excessMargin,e.currency)})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{className:"font-medium text-fd-text mb-2",children:"Calculation Details"}),(0,o.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Total Notional:"}),(0,o.jsx)("span",{className:"text-fd-text",children:p(e.totalNotional,e.currency)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Status:"}),(0,o.jsx)("span",{className:"text-green-400",children:e.calculationStatus})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Processing:"}),(0,o.jsx)("span",{className:"text-fd-text-muted",children:e.processingTime})]})]})]})]})},t);var r})})]})]})},me=()=>{const[e,t]=(0,n.useState)(0),[r,s]=(0,n.useState)("generate"),a=e=>{console.error("Upload error:",e)};return(0,o.jsx)("div",{className:"min-h-screen bg-fd-dark p-6",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,o.jsx)("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-fd-text",children:"Margin Statements"}),(0,o.jsx)("p",{className:"text-fd-text-muted mt-1",children:"Generate automated VM/IM statements or upload external CCP statements"})]})]}),(0,o.jsxs)("div",{className:"flex space-x-1 bg-fd-darker rounded-lg p-1 w-fit",children:[(0,o.jsxs)("button",{onClick:()=>s("generate"),className:"px-6 py-3 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 "+("generate"===r?"bg-green-500 text-white":"text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50"),children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,o.jsx)("span",{children:"Auto Generate"})]}),(0,o.jsxs)("button",{onClick:()=>s("upload"),className:"px-6 py-3 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 "+("upload"===r?"bg-blue-500 text-white":"text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50"),children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,o.jsx)("span",{children:"Upload Statement"})]}),(0,o.jsxs)("button",{onClick:()=>s("list"),className:"px-6 py-3 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 "+("list"===r?"bg-blue-500 text-white":"text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50"),children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("span",{children:"Statement History"})]})]})]}),(0,o.jsx)("div",{className:"space-y-6",children:"generate"===r?(0,o.jsx)(xe,{onGenerationSuccess:()=>{t(e=>e+1),s("list")},onGenerationError:a}):"upload"===r?(0,o.jsx)(oe,{onUploadSuccess:e=>{t(e=>e+1),s("list")},onUploadError:a}):(0,o.jsx)(ue,{refreshTrigger:e})}),(0,o.jsxs)("div",{className:"mt-12 bg-fd-darker rounded-lg border border-fd-border p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-4",children:"Statement Processing Guide"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-blue-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-blue-400 text-xs font-bold",children:"1"})}),(0,o.jsx)("h4",{className:"font-medium text-fd-text",children:"Upload Requirements"})]}),(0,o.jsxs)("ul",{className:"text-sm text-fd-text-muted space-y-1 ml-8",children:[(0,o.jsx)("li",{children:"\u2022 CSV, XML, or JSON format"}),(0,o.jsx)("li",{children:"\u2022 Maximum file size: 50MB"}),(0,o.jsx)("li",{children:"\u2022 Statement date cannot be future"}),(0,o.jsx)("li",{children:"\u2022 Valid ISO currency codes"})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-green-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-green-400 text-xs font-bold",children:"2"})}),(0,o.jsx)("h4",{className:"font-medium text-fd-text",children:"Processing Stages"})]}),(0,o.jsxs)("ul",{className:"text-sm text-fd-text-muted space-y-1 ml-8",children:[(0,o.jsx)("li",{children:"\u2022 PENDING: Awaiting processing"}),(0,o.jsx)("li",{children:"\u2022 PROCESSING: Being parsed & validated"}),(0,o.jsx)("li",{children:"\u2022 PROCESSED: Successfully completed"}),(0,o.jsx)("li",{children:"\u2022 FAILED: Error occurred (retryable)"})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-orange-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-orange-400 text-xs font-bold",children:"3"})}),(0,o.jsx)("h4",{className:"font-medium text-fd-text",children:"Validation Rules"})]}),(0,o.jsxs)("ul",{className:"text-sm text-fd-text-muted space-y-1 ml-8",children:[(0,o.jsx)("li",{children:"\u2022 Initial Margin must be non-negative"}),(0,o.jsx)("li",{children:"\u2022 Variation Margin can be negative"}),(0,o.jsx)("li",{children:"\u2022 Account must exist for CCP"}),(0,o.jsx)("li",{children:"\u2022 Automatic duplicate detection"})]})]})]}),(0,o.jsxs)("div",{className:"mt-6 pt-6 border-t border-fd-border",children:[(0,o.jsx)("h4",{className:"font-medium text-fd-text mb-2",children:"Sample CSV Format (LCH):"}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-md p-3 font-mono text-sm text-fd-text-muted overflow-x-auto",children:[(0,o.jsx)("div",{children:"Account,Date,Position Type,Amount,Currency,Portfolio,Product Class"}),(0,o.jsx)("div",{children:"HOUSE-001,2024-10-08,VM,-15000.00,USD,PORT1,CDS"}),(0,o.jsx)("div",{children:"HOUSE-001,2024-10-08,IM,250000.00,USD,PORT1,CDS"}),(0,o.jsx)("div",{children:"HOUSE-001,2024-10-08,EXCESS,50000.00,USD,PORT1,CDS"})]})]})]})]})})},fe=()=>{const[e,t]=(0,n.useState)("upload"),[r,s]=(0,n.useState)([]),[a,l]=(0,n.useState)([]),[d,i]=(0,n.useState)(!1),[c,u]=(0,n.useState)(null),[x,m]=(0,n.useState)(null),[f,h]=(0,n.useState)(!1),[p,b]=(0,n.useState)(null),[g,v]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[y,w]=(0,n.useState)((new Date).toISOString().split("T")[0]),[k,S]=(0,n.useState)(""),[C,E]=(0,n.useState)([]),[D,L]=(0,n.useState)([]);(0,n.useEffect)(()=>{T(),M()},[]);const T=async()=>{try{const e=await fetch("/api/simm/portfolio/ALL/calculations");if(e.ok){const t=await e.json();l(t)}}catch(e){console.error("Failed to load calculations:",e)}},M=async()=>{try{const e=await fetch("/api/simm/crif/uploads");if(e.ok){const t=await e.json();s(t)}}catch(e){console.error("Failed to load CRIF uploads:",e)}},P=async e=>{try{const[t,r]=await Promise.all([fetch(`/api/simm/calculation/${e}/results`),fetch(`/api/simm/calculation/${e}/audit`)]);if(t.ok){const e=await t.json();E(e)}if(r.ok){const e=await r.json();L(e)}}catch(t){console.error("Failed to load calculation results:",t)}},R=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e),I=e=>{if(!e)return(0,o.jsx)("span",{className:"text-fd-text-muted",children:"\u23f3"});switch(e.toLowerCase()){case"completed":return(0,o.jsx)("span",{className:"text-green-400",children:"\u2705"});case"failed":return(0,o.jsx)("span",{className:"text-red-400",children:"\u274c"});case"processing":case"pending":return(0,o.jsx)("span",{className:"text-yellow-400",children:"\u23f3"});default:return(0,o.jsx)("span",{className:"text-fd-text-muted",children:"\u23f3"})}};return(0,o.jsx)("div",{className:"min-h-screen bg-fd-dark p-6",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,o.jsx)("div",{className:"w-10 h-10 bg-fd-green/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-fd-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-fd-text",children:"SIMM Calculator"}),(0,o.jsx)("p",{className:"text-fd-text-muted mt-1",children:"Standard Initial Margin Model - ISDA SIMM 2.6+"})]})]}),(0,o.jsx)("div",{className:"flex space-x-1 bg-fd-darker rounded-lg p-1 w-fit",children:[{key:"upload",label:"CRIF Upload",icon:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})},{key:"calculate",label:"Calculate SIMM",icon:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})},{key:"results",label:"Results & Audit",icon:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}].map(r=>{let{key:s,label:n,icon:a}=r;return(0,o.jsxs)("button",{onClick:()=>t(s),className:"px-6 py-3 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 "+(e===s?"bg-fd-green text-fd-dark":"text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50"),children:[a,(0,o.jsx)("span",{children:n})]},s)})})]}),c&&(0,o.jsxs)("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/20 rounded-md flex items-center",children:[(0,o.jsx)("span",{className:"text-red-400 mr-2",children:"\u26a0\ufe0f"}),(0,o.jsx)("span",{className:"text-red-400",children:c}),(0,o.jsx)("button",{onClick:()=>u(null),className:"ml-auto",children:(0,o.jsx)("span",{className:"text-red-400",children:"\u2716\ufe0f"})})]}),x&&(0,o.jsxs)("div",{className:"mb-4 p-4 bg-green-500/10 border border-green-500/20 rounded-md flex items-center",children:[(0,o.jsx)("span",{className:"text-green-400 mr-2",children:"\u2705"}),(0,o.jsx)("span",{className:"text-green-400",children:x}),(0,o.jsx)("button",{onClick:()=>m(null),className:"ml-auto",children:(0,o.jsx)("span",{className:"text-green-400",children:"\u2716\ufe0f"})})]}),"upload"===e&&(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text mb-4",children:"Upload CRIF File"}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"Portfolio ID (optional)"}),(0,o.jsx)("input",{type:"text",value:g,onChange:e=>v(e.target.value),placeholder:"Enter portfolio ID",className:"w-full p-3 bg-fd-input border border-fd-border rounded-md text-fd-text placeholder-fd-text-muted focus:ring-fd-green focus:border-fd-green"})]}),(0,o.jsx)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors "+(f?"border-fd-green bg-fd-green/10":"border-fd-border"),onDragOver:e=>{e.preventDefault(),h(!0)},onDragLeave:()=>{h(!1)},onDrop:e=>{e.preventDefault(),h(!1);const t=Array.from(e.dataTransfer.files);t.length>0&&b(t[0])},children:p?(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-6xl",children:"\ud83d\udcc4"}),(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text",children:p.name}),(0,o.jsxs)("p",{className:"text-xs text-fd-text-muted",children:[Math.round(p.size/1024)," KB"]}),(0,o.jsx)("button",{onClick:()=>b(null),className:"mt-2 text-sm text-red-400 hover:text-red-300",children:"Remove file"})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-6xl mb-4 block",children:"\ud83d\udce4"}),(0,o.jsx)("p",{className:"text-lg font-medium text-fd-text mb-2",children:"Drop your CRIF file here, or click to browse"}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted",children:"CSV format, max 100MB"}),(0,o.jsx)("input",{type:"file",accept:".csv",onChange:e=>e.target.files&&b(e.target.files[0]),className:"hidden",id:"file-upload"}),(0,o.jsx)("label",{htmlFor:"file-upload",className:"mt-4 inline-block bg-fd-green text-fd-dark px-4 py-2 rounded-md hover:bg-fd-green-hover cursor-pointer font-medium",children:"Choose File"})]})}),(0,o.jsx)("button",{onClick:async()=>{if(!p)return void u("Please select a file");i(!0),u(null);const e=new FormData;e.append("file",p),g&&e.append("portfolioId",g);try{const t=await fetch("/api/simm/crif/upload",{method:"POST",body:e}),r=await t.json();t.ok?(m(`File uploaded successfully. Upload ID: ${r.uploadId||"Generated"}`),M(),b(null),v("")):u(r.error||"Upload failed")}catch(t){u("Upload failed: "+t.message)}finally{i(!1)}},disabled:!p||d,className:"mt-4 w-full bg-fd-green text-fd-dark py-3 px-4 rounded-md hover:bg-fd-green-hover disabled:bg-fd-border disabled:cursor-not-allowed font-medium",children:d?"Uploading...":"Upload CRIF File"})]}),r.length>0&&(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-4",children:"Recent Uploads"}),(0,o.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-fd-dark rounded-md border border-fd-border",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,o.jsx)("p",{className:"font-medium text-fd-text",children:e.fileName}),e.portfolioId&&(0,o.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-fd-green/20 text-fd-green rounded-md",children:e.portfolioId})]}),(0,o.jsxs)("p",{className:"text-sm text-fd-text-muted",children:[e.recordsValid," valid, ",e.recordsError," errors (",e.recordsTotal," total)",e.uploadDate&&(0,o.jsxs)("span",{className:"ml-3",children:["\u2022 Uploaded: ",new Date(e.uploadDate).toLocaleDateString()]})]})]}),(0,o.jsxs)("div",{className:"flex items-center",children:[I(e.status),(0,o.jsx)("span",{className:"ml-2 text-sm font-medium text-fd-text",children:e.status||"Unknown"})]})]},e.uploadId))})]})]}),"calculate"===e&&(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text mb-4",children:"Execute SIMM Calculation"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"Portfolio ID"}),(0,o.jsx)("input",{type:"text",value:j,onChange:e=>N(e.target.value),placeholder:"Enter portfolio ID",className:"w-full p-3 bg-fd-input border border-fd-border rounded-md text-fd-text placeholder-fd-text-muted focus:ring-fd-green focus:border-fd-green"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"Calculation Date"}),(0,o.jsx)("input",{type:"date",value:y,onChange:e=>w(e.target.value),className:"w-full p-3 bg-fd-input border border-fd-border rounded-md text-fd-text focus:ring-fd-green focus:border-fd-green"})]})]}),(0,o.jsx)("button",{onClick:async()=>{if(j){i(!0),u(null);try{const e=await fetch("/api/simm/calculate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({portfolioId:j,calculationDate:y,createdBy:"User"})}),t=await e.json();e.ok?(m(`\u2705 Calculation completed successfully! ID: ${t.calculationId||"Generated"} | Total IM: ${t.totalInitialMargin?"$"+(t.totalInitialMargin/1e6).toFixed(1)+"M":"N/A"}`),T(),N(""),setTimeout(()=>m(null),1e4)):u(t.error||"Calculation failed")}catch(e){u("Calculation failed: "+e.message)}finally{i(!1)}}else u("Please enter a portfolio ID")},disabled:!j||d,className:"w-full bg-fd-green text-fd-dark py-3 px-4 rounded-md hover:bg-fd-green-hover disabled:bg-fd-border disabled:cursor-not-allowed font-medium",children:d?"Calculating...":"Calculate Initial Margin"})]}),a.length>0&&(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-4",children:"Calculation History"}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{className:"bg-fd-dark",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Portfolio"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Date"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Status"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Initial Margin"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-fd-darker divide-y divide-fd-border",children:a.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text",children:e.portfolioId}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text-muted",children:e.calculationDate}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsxs)("div",{className:"flex items-center",children:[I(e.status),(0,o.jsx)("span",{className:"ml-2 text-sm text-fd-text",children:e.status||"Unknown"})]})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.totalInitialMargin?R(e.totalInitialMargin):"-"}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,o.jsx)("button",{onClick:()=>{S(e.calculationId),t("results"),P(e.calculationId)},className:"text-fd-green hover:text-fd-green-hover",children:"View Details"})})]},e.calculationId))})]})})]})]}),"results"===e&&(0,o.jsx)("div",{className:"space-y-6",children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text mb-4",children:"Calculation Results & Audit Trail"}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-2",children:"Select Calculation"}),(0,o.jsxs)("select",{value:k,onChange:e=>{S(e.target.value),e.target.value&&P(e.target.value)},className:"w-full p-3 bg-fd-input border border-fd-border rounded-md text-fd-text focus:ring-fd-green focus:border-fd-green",children:[(0,o.jsx)("option",{value:"",children:"Select a calculation..."}),a.map(e=>(0,o.jsxs)("option",{value:e.calculationId,children:[e.portfolioId," - ",e.calculationDate," (",e.status||"Unknown",")"]},e.calculationId))]})]}),C.length>0&&(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-3",children:"Results Breakdown"}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{className:"bg-fd-dark",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Product Class"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Risk Class"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Bucket"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Initial Margin"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Step"})]})}),(0,o.jsx)("tbody",{className:"bg-fd-darker divide-y divide-fd-border",children:C.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text",children:e.productClass}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text-muted",children:e.riskClass}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text-muted",children:e.bucket}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text",children:R(e.initialMargin)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text-muted",children:e.calculationStep})]},e.resultId))})]})})]}),D.length>0&&(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-3",children:"Audit Trail"}),(0,o.jsx)("div",{className:"space-y-2",children:D.map((e,t)=>(0,o.jsxs)("div",{className:"p-3 bg-fd-dark rounded-md border border-fd-border",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsx)("span",{className:"font-medium text-sm text-fd-text",children:e.step}),(0,o.jsx)("span",{className:"text-xs text-fd-text-muted",children:e.timestamp})]}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted mt-1",children:e.description})]},t))})]})]})]})}),(0,o.jsxs)("div",{className:"mt-12 bg-fd-darker rounded-lg border border-fd-border p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-fd-text mb-4",children:"SIMM Calculator Guide"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-fd-green/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-fd-green text-xs font-bold",children:"1"})}),(0,o.jsx)("h4",{className:"font-medium text-fd-text",children:"CRIF File Requirements"})]}),(0,o.jsxs)("ul",{className:"text-sm text-fd-text-muted space-y-1 ml-8",children:[(0,o.jsx)("li",{children:"\u2022 CSV format with ISDA CRIF structure"}),(0,o.jsx)("li",{children:"\u2022 Maximum file size: 100MB"}),(0,o.jsx)("li",{children:"\u2022 Required columns: ProductClass, RiskType, Qualifier"}),(0,o.jsx)("li",{children:"\u2022 Amount in base currency or USD"})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-blue-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-blue-400 text-xs font-bold",children:"2"})}),(0,o.jsx)("h4",{className:"font-medium text-fd-text",children:"Calculation Process"})]}),(0,o.jsxs)("ul",{className:"text-sm text-fd-text-muted space-y-1 ml-8",children:[(0,o.jsx)("li",{children:"\u2022 PENDING: Awaiting calculation"}),(0,o.jsx)("li",{children:"\u2022 PROCESSING: Computing SIMM components"}),(0,o.jsx)("li",{children:"\u2022 COMPLETED: Results available"}),(0,o.jsx)("li",{children:"\u2022 FAILED: Error in calculation (check logs)"})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-orange-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-orange-400 text-xs font-bold",children:"3"})}),(0,o.jsx)("h4",{className:"font-medium text-fd-text",children:"SIMM Methodology"})]}),(0,o.jsxs)("ul",{className:"text-sm text-fd-text-muted space-y-1 ml-8",children:[(0,o.jsx)("li",{children:"\u2022 ISDA SIMM 2.6+ compliant"}),(0,o.jsx)("li",{children:"\u2022 Risk factor bucketing by asset class"}),(0,o.jsx)("li",{children:"\u2022 Correlation adjustments applied"}),(0,o.jsx)("li",{children:"\u2022 Portfolio margin netting"})]})]})]}),(0,o.jsxs)("div",{className:"mt-6 pt-6 border-t border-fd-border",children:[(0,o.jsx)("h4",{className:"font-medium text-fd-text mb-2",children:"Sample CRIF Format (ISDA Standard):"}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-md p-3 font-mono text-sm text-fd-text-muted overflow-x-auto",children:[(0,o.jsx)("div",{children:"ProductClass,RiskType,Qualifier,Bucket,Label1,Label2,Amount,AmountCurrency,AmountUSD"}),(0,o.jsx)("div",{children:"Credit,Risk_IRCurve,EUR,1,2Y,,50000,EUR,55000"}),(0,o.jsx)("div",{children:"RatesFX,Risk_IRCurve,USD,,1Y,,75000,USD,75000"}),(0,o.jsx)("div",{children:"Equity,Risk_Equity,S&P500,1,,,25000,USD,25000"})]})]})]})]})})},he=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)([]),[a,l]=(0,n.useState)(!1),[d,c]=(0,n.useState)(null),[u,x]=(0,n.useState)(null),[m,f]=(0,n.useState)({valuationDate:(new Date).toISOString().split("T")[0],jurisdiction:"US"});(0,n.useEffect)(()=>{h()},[]);const h=async()=>{console.log("Loading netting sets..."),c(null);try{const r=i("/v1/sa-ccr/netting-sets");console.log("API URL:",r);const s=await fetch(r);console.log("Response status:",s.status);const n=await s.json();if(console.log("API Response:",n),"SUCCESS"===n.status){var e;console.log("Setting netting sets:",null===(e=n.nettingSets)||void 0===e?void 0:e.length),t(n.nettingSets||[])}else{const e=n.message||"Failed to load netting sets";console.error("API error:",e),c(e)}}catch(r){console.error("Fetch error:",r),c("Error connecting to SA-CCR service")}},p=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toFixed(t)},g=()=>r.filter(e=>e.jurisdiction===m.jurisdiction);return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-fd-text",children:"SA-CCR Exposure Dashboard"}),(0,o.jsx)("p",{className:"text-fd-text-secondary mt-1",children:"Basel III Standardized Approach for Counterparty Credit Risk"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Refresh Netting Sets"}),(0,o.jsxs)("div",{className:"text-sm text-fd-text-secondary",children:["Last Updated: ",(new Date).toLocaleString()]})]})]}),d&&(0,o.jsxs)("div",{className:"bg-red-900/50 border border-red-600 rounded-lg p-4 flex items-start space-x-3",children:[(0,o.jsx)("span",{className:"text-red-400 flex-shrink-0 mt-0.5",children:"\u26a0\ufe0f"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-red-400 font-medium",children:"Error"}),(0,o.jsx)("p",{className:"text-red-300 text-sm mt-1",children:d})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,o.jsx)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-6",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("span",{className:"text-2xl text-fd-green",children:"\ud83d\udcb0"})}),(0,o.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,o.jsxs)("dl",{children:[(0,o.jsx)("dt",{className:"text-sm font-medium text-fd-text-secondary truncate",children:"Total Exposure (EAD)"}),(0,o.jsx)("dd",{className:"text-lg font-medium text-fd-text",children:p(g().reduce((e,t)=>e+t.exposureAtDefault,0))})]})})]})}),(0,o.jsx)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-6",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("span",{className:"text-2xl text-fd-accent",children:"\ud83d\udcca"})}),(0,o.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,o.jsxs)("dl",{children:[(0,o.jsx)("dt",{className:"text-sm font-medium text-fd-text-secondary truncate",children:"Max Single Exposure"}),(0,o.jsx)("dd",{className:"text-lg font-medium text-fd-text",children:p((()=>{const e=g();return e.length>0?Math.max(...e.map(e=>e.exposureAtDefault)):0})())})]})})]})}),(0,o.jsx)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-6",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("span",{className:"text-2xl text-fd-blue",children:"\ud83d\udd22"})}),(0,o.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,o.jsxs)("dl",{children:[(0,o.jsx)("dt",{className:"text-sm font-medium text-fd-text-secondary truncate",children:"Active Netting Sets"}),(0,o.jsx)("dd",{className:"text-lg font-medium text-fd-text",children:e.length})]})})]})}),(0,o.jsx)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-6",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("span",{className:"text-2xl text-fd-yellow",children:"\ud83d\udcc8"})}),(0,o.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,o.jsxs)("dl",{children:[(0,o.jsxs)("dt",{className:"text-sm font-medium text-fd-text-secondary truncate",children:["Calculations Count (",m.jurisdiction,")"]}),(0,o.jsx)("dd",{className:"text-lg font-medium text-fd-text",children:g().length})]})})]})})]}),(0,o.jsxs)("div",{className:"bg-fd-darker border border-fd-border rounded-lg p-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text mb-4",children:"Calculate SA-CCR Exposures"}),(0,o.jsxs)("div",{className:"flex items-end space-x-4",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("label",{htmlFor:"valuationDate",className:"block text-sm font-medium text-fd-text mb-2",children:"Valuation Date"}),(0,o.jsx)("input",{type:"date",id:"valuationDate",value:m.valuationDate,onChange:e=>f(t=>({...t,valuationDate:e.target.value})),className:"block w-full px-3 py-2 border border-fd-border rounded-md shadow-sm bg-fd-dark text-fd-text focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-fd-green sm:text-sm"})]}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("label",{htmlFor:"jurisdiction",className:"block text-sm font-medium text-fd-text mb-2",children:"Jurisdiction"}),(0,o.jsxs)("select",{id:"jurisdiction",value:m.jurisdiction,onChange:e=>f(t=>({...t,jurisdiction:e.target.value})),className:"block w-full px-3 py-2 border border-fd-border rounded-md shadow-sm bg-fd-dark text-fd-text focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-fd-green sm:text-sm",children:[(0,o.jsx)("option",{value:"US",children:"United States"}),(0,o.jsx)("option",{value:"EU",children:"European Union"}),(0,o.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,o.jsx)("option",{value:"CA",children:"Canada"}),(0,o.jsx)("option",{value:"JP",children:"Japan"}),(0,o.jsx)("option",{value:"AU",children:"Australia"})]})]}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{onClick:async()=>{l(!0),c(null);try{const e=i(`/v1/sa-ccr/calculate?valuationDate=${m.valuationDate}&jurisdiction=${m.jurisdiction}`),t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"}}),r=await t.json();"SUCCESS"===r.status?s(r.calculations):c(r.message||"Failed to calculate exposures")}catch(e){c("Error calculating SA-CCR exposures"),console.error("Error calculating exposures:",e)}finally{l(!1)}},disabled:a,className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-fd-dark bg-fd-green hover:bg-fd-green-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-fd-green disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"animate-spin -ml-1 mr-3 h-4 w-4 border-2 border-fd-dark border-t-transparent rounded-full"}),"Calculating..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"mr-2",children:"\ud83d\udd22"}),"Calculate Exposures"]})})})]})]}),r.length>0&&(0,o.jsxs)("div",{className:"bg-fd-darker border border-fd-border rounded-lg",children:[(0,o.jsxs)("div",{className:"px-6 py-4 border-b border-fd-border",children:[(0,o.jsxs)("h2",{className:"text-xl font-semibold text-fd-text",children:["SA-CCR Calculation Results - ",m.jurisdiction]}),(0,o.jsxs)("p",{className:"text-sm text-fd-text-secondary mt-1",children:["Exposure at Default (EAD) = \u03b1 \xd7 (Replacement Cost + Potential Future Exposure)",0===g().length&&(0,o.jsx)("span",{className:"text-yellow-400 ml-2",children:"\u26a0\ufe0f No calculations for selected jurisdiction. Change jurisdiction or run calculations."})]})]}),g().length>0?(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Counterparty"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Agreement Type"}),(0,o.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Replacement Cost"}),(0,o.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Potential Future Exposure"}),(0,o.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Alpha Factor"}),(0,o.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Exposure at Default"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Status"})]})}),(0,o.jsx)("tbody",{className:"divide-y divide-fd-border",children:g().map(e=>(0,o.jsxs)("tr",{className:"hover:bg-fd-dark/50 cursor-pointer",onClick:()=>x(u===e.nettingSet.id?null:e.nettingSet.id),children:[(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,o.jsx)("div",{className:"text-sm font-medium text-fd-text",children:e.nettingSet.counterpartyId}),(0,o.jsx)("div",{className:"text-sm text-fd-text-secondary",children:e.nettingSet.nettingSetId})]}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.nettingSet.legalAgreementType}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text text-right",children:p(e.replacementCost)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text text-right",children:p(e.potentialFutureExposure)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text text-right",children:b(e.alphaFactor,1)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text text-right",children:p(e.exposureAtDefault)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("COMPLETED"===e.calculationStatus?"bg-green-900/50 text-green-400":"bg-yellow-900/50 text-yellow-400"),children:e.calculationStatus})})]},e.id))})]})}):(0,o.jsxs)("div",{className:"px-6 py-8 text-center text-fd-text-muted",children:[(0,o.jsxs)("p",{children:["No calculations found for jurisdiction: ",m.jurisdiction]}),(0,o.jsx)("p",{className:"text-sm mt-2",children:"Try selecting a different jurisdiction or running calculations."})]})]}),(0,o.jsxs)("div",{className:"bg-fd-darker border border-fd-border rounded-lg",children:[(0,o.jsxs)("div",{className:"px-6 py-4 border-b border-fd-border",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text",children:"Active Netting Sets"}),(0,o.jsx)("p",{className:"text-sm text-fd-text-secondary mt-1",children:"Legal netting agreements for trade aggregation in SA-CCR calculations"})]}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Netting Set ID"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Counterparty"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Agreement Type"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Governing Law"}),(0,o.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Netting Eligible"}),(0,o.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-fd-text-secondary uppercase tracking-wider",children:"Collateral Agreement"})]})}),(0,o.jsx)("tbody",{className:"divide-y divide-fd-border",children:e.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-fd-dark/50",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text",children:e.nettingSetId}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.counterpartyId}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.legalAgreementType}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.governingLaw}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.nettingEligible?"bg-green-900/50 text-green-400":"bg-red-900/50 text-red-400"),children:e.nettingEligible?"Yes":"No"})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.collateralAgreement?"bg-green-900/50 text-green-400":"bg-gray-900/50 text-gray-400"),children:e.collateralAgreement?"Yes":"No"})})]},e.id))})]})})]})]})},pe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";if(null===e||void 0===e||""===e)return"$0.00";const s="string"===typeof e?parseFloat(e):e;return isNaN(s)?"$0.00":new Intl.NumberFormat(r,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(s)},be=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";if(null===e||void 0===e||""===e)return"0";const s="string"===typeof e?parseFloat(e):e;return isNaN(s)?"0":new Intl.NumberFormat(r,{minimumFractionDigits:t,maximumFractionDigits:t}).format(s)},ge=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"-";const r="string"===typeof e?new Date(e):e;if(isNaN(r.getTime()))return"-";const s={hour:"2-digit",minute:"2-digit",...t&&{second:"2-digit"}};return`${r.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})} ${r.toLocaleTimeString("en-US",s)}`},ve=e=>{let{saCcrSummary:t,asOfDate:r,onRefresh:s}=e;const[a,l]=(0,n.useState)(null),[d,i]=(0,n.useState)("ead"),c=()=>Object.values(t.nettingSets||{}).sort((e,t)=>{switch(d){case"ead":return t.exposureAtDefault-e.exposureAtDefault;case"rc":return t.replacementCost-e.replacementCost;case"pfe":return t.potentialFutureExposure-e.potentialFutureExposure;default:return 0}}),u=(e,t)=>{const r=e/t*100;return r>40?"text-red-400":r>20?"text-yellow-400":"text-green-400"};return(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-xl font-semibold text-fd-text",children:"SA-CCR Exposures"}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted",children:"Basel III Regulatory Capital"})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsxs)("span",{className:"text-sm text-fd-text-muted",children:["As of ",r]}),(0,o.jsx)("button",{onClick:s,className:"p-2 text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50 rounded-md transition-colors",title:"Refresh SA-CCR data",children:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,o.jsx)("div",{className:"bg-fd-dark rounded-lg p-6 border border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text-muted",children:"Total EAD"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-fd-text mt-1",children:pe(t.totalExposureAtDefault)}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted mt-1",children:"\u03b1 \xd7 (RC + PFE)"})]}),(0,o.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})}),(0,o.jsx)("div",{className:"bg-fd-dark rounded-lg p-6 border border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text-muted",children:"Total RC"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-fd-text mt-1",children:pe(t.totalReplacementCost)}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted mt-1",children:"Replacement Cost"})]}),(0,o.jsx)("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})}),(0,o.jsx)("div",{className:"bg-fd-dark rounded-lg p-6 border border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text-muted",children:"Total PFE"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-fd-text mt-1",children:pe(t.totalPotentialFutureExposure)}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted mt-1",children:"Potential Future Exposure"})]}),(0,o.jsx)("div",{className:"w-12 h-12 bg-yellow-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})})]})})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg border border-fd-border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("h4",{className:"text-lg font-medium text-fd-text",children:["Netting Sets (",t.nettingSetCount,")"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("label",{className:"text-sm text-fd-text-muted",children:"Sort by:"}),(0,o.jsxs)("select",{value:d,onChange:e=>i(e.target.value),className:"bg-fd-darker border border-fd-border rounded-md px-3 py-1 text-sm text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"ead",children:"EAD"}),(0,o.jsx)("option",{value:"rc",children:"RC"}),(0,o.jsx)("option",{value:"pfe",children:"PFE"})]})]})]})}),(0,o.jsx)("div",{className:"overflow-hidden",children:c().map(e=>(0,o.jsxs)("div",{className:"border-b border-fd-border last:border-b-0",children:[(0,o.jsx)("div",{className:"px-6 py-4 hover:bg-fd-darker/50 cursor-pointer transition-colors",onClick:()=>{return t=e.nettingSetId,void l(a===t?null:t);var t},children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("svg",{className:"w-4 h-4 text-fd-text-muted transition-transform "+(a===e.nettingSetId?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium text-fd-text",children:e.nettingSetId}),(0,o.jsxs)("p",{className:"text-sm text-fd-text-muted",children:["Notional: ",pe(e.effectiveNotional)]})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-8 text-right",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:`font-medium ${u(e.exposureAtDefault,t.totalExposureAtDefault)}`,children:pe(e.exposureAtDefault)}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"EAD"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium text-fd-text",children:pe(e.replacementCost)}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"RC"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium text-fd-text",children:pe(e.potentialFutureExposure)}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"PFE"})]})]})]})}),a===e.nettingSetId&&(0,o.jsxs)("div",{className:"px-6 pb-4 bg-fd-darker/30",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4",children:[(0,o.jsxs)("div",{className:"bg-fd-dark rounded-md p-3",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Alpha Factor"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-1",children:be(e.alphaFactor,2)})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-md p-3",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Effective Notional"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-1",children:pe(e.effectiveNotional)})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-md p-3",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"RC Component"}),(0,o.jsxs)("p",{className:"text-lg font-semibold text-fd-text mt-1",children:[be(e.replacementCost/e.exposureAtDefault*100,1),"%"]})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-md p-3",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"PFE Component"}),(0,o.jsxs)("p",{className:"text-lg font-semibold text-fd-text mt-1",children:[be(e.potentialFutureExposure/e.exposureAtDefault*100,1),"%"]})]})]}),(0,o.jsxs)("div",{className:"mt-4 p-3 bg-fd-dark rounded-md border border-fd-border",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide mb-2",children:"SA-CCR Formula"}),(0,o.jsxs)("p",{className:"font-mono text-sm text-fd-text",children:["EAD = \u03b1 \xd7 (RC + PFE) = ",be(e.alphaFactor,2)," \xd7 (",pe(e.replacementCost)," + ",pe(e.potentialFutureExposure),") = ",pe(e.exposureAtDefault)]})]})]})]},e.nettingSetId))}),0===c().length&&(0,o.jsxs)("div",{className:"px-6 py-8 text-center",children:[(0,o.jsx)("svg",{className:"w-12 h-12 text-fd-text-muted mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("p",{className:"text-fd-text-muted",children:"No SA-CCR calculations available"}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted mt-1",children:"Run calculations to view exposure data"})]})]})]})},je=e=>{let{asOfDate:t,onRefresh:r}=e;const[s,a]=(0,n.useState)([]),[l,d]=(0,n.useState)(null),[i,c]=(0,n.useState)([]),[u,x]=(0,n.useState)(!0),[m,f]=(0,n.useState)(!1),[h,p]=(0,n.useState)(null),[b,g]=(0,n.useState)("ALL");(0,n.useEffect)(()=>{v()},[t]);const v=async()=>{try{x(!0),p(null);const e=await fetch(`/api/margin-statements?asOfDate=${t}`);if(!e.ok)throw new Error("Failed to load statements");const r=await e.json();a(r)}catch(e){p(e.message||"Failed to load statements")}finally{x(!1)}},j=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},N=e=>{switch(e){case"PENDING":return"text-yellow-400";case"PROCESSING":return"text-blue-400";case"PROCESSED":return"text-green-400";case"FAILED":return"text-red-400";case"DISPUTED":return"text-orange-400";default:return"text-fd-text-muted"}},y=e=>{switch(e){case"PENDING":return(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})});case"PROCESSING":return(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"});case"PROCESSED":return(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"FAILED":return(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})});default:return null}},w=s.filter(e=>"ALL"===b||e.status===b),k=e=>{d(e),"PROCESSED"===e.status&&(async e=>{try{f(!0);const t=await fetch(`/api/margin-statements/${e}/positions`);if(!t.ok)throw new Error("Failed to load positions");const r=await t.json();c(r)}catch(t){console.error("Failed to load positions:",t),c([])}finally{f(!1)}})(e.id)};return u?(0,o.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400"})}):h?(0,o.jsxs)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-4",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-5 h-5 text-red-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-red-400",children:"Error Loading Statements"}),(0,o.jsx)("p",{className:"text-sm text-red-300 mt-1",children:h})]})]}),(0,o.jsx)("button",{onClick:v,className:"mt-3 px-3 py-1 bg-red-500/30 text-red-400 rounded text-sm hover:bg-red-500/40 transition-colors",children:"Retry"})]}):(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border",children:[(0,o.jsxs)("div",{className:"px-6 py-4 border-b border-fd-border",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-xl font-semibold text-fd-text",children:"Margin Statements"}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted",children:"Daily VM/IM positions from CCPs"})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsxs)("span",{className:"text-sm text-fd-text-muted",children:["As of ",t]}),(0,o.jsx)("button",{onClick:()=>{v(),r()},className:"p-2 text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50 rounded-md transition-colors",title:"Refresh statements",children:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),(0,o.jsx)("div",{className:"flex space-x-1 bg-fd-dark rounded-lg p-1 mt-4",children:["ALL","PROCESSED","PENDING","FAILED"].map(e=>(0,o.jsxs)("button",{onClick:()=>g(e),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+(b===e?"bg-blue-500 text-white":"text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50"),children:[e,(0,o.jsxs)("span",{className:"ml-1 text-xs",children:["(","ALL"===e?s.length:s.filter(t=>t.status===e).length,")"]})]},e))})]}),(0,o.jsx)("div",{className:"p-6",children:0===w.length?(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("svg",{className:"mx-auto h-12 w-12 text-fd-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("h3",{className:"mt-2 text-sm font-medium text-fd-text",children:"No margin statements found"}),(0,o.jsx)("p",{className:"mt-1 text-sm text-fd-text-muted",children:"ALL"===b?`No statements available for ${t}`:`No statements with status: ${b}`})]}):(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(e=>(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-4 border border-fd-border hover:border-blue-500/50 cursor-pointer transition-all duration-200 hover:shadow-lg",onClick:()=>k(e),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("div",{className:"flex items-center space-x-2",children:(0,o.jsxs)("div",{className:`flex items-center space-x-1 ${N(e.status)}`,children:[y(e.status),(0,o.jsx)("span",{className:"text-xs font-medium uppercase",children:e.status})]})}),(0,o.jsx)("span",{className:"text-xs text-fd-text-muted",children:new Date(e.statementDate).toLocaleDateString()})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium text-fd-text truncate",children:e.statementId}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted",children:e.ccpName})]}),(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Account:"}),(0,o.jsx)("span",{className:"text-fd-text font-mono",children:e.accountNumber})]}),"PROCESSED"===e.status&&(0,o.jsxs)(o.Fragment,{children:[void 0!==e.variationMargin&&(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"VM:"}),(0,o.jsx)("span",{className:"font-medium "+(e.variationMargin>=0?"text-green-400":"text-red-400"),children:pe(e.variationMargin)})]}),void 0!==e.initialMargin&&(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"IM:"}),(0,o.jsx)("span",{className:"text-fd-text font-medium",children:pe(e.initialMargin)})]}),void 0!==e.totalPositions&&(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Positions:"}),(0,o.jsx)("span",{className:"text-fd-text",children:e.totalPositions})]})]}),(0,o.jsxs)("div",{className:"flex justify-between text-xs text-fd-text-muted",children:[(0,o.jsxs)("span",{children:[j(e.fileSize)," ",e.format]}),(0,o.jsx)("span",{children:ge(e.createdAt)})]})]}),e.errorMessage&&(0,o.jsxs)("div",{className:"mt-2 p-2 bg-red-500/20 border border-red-500/50 rounded text-xs text-red-400",children:[e.errorMessage.substring(0,100),"..."]})]},e.id))})}),l&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-lg border border-fd-border p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-fd-text",children:l.statementId}),(0,o.jsx)("button",{onClick:()=>d(null),className:"text-fd-text-muted hover:text-fd-text transition-colors",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 text-sm",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"CCP:"}),(0,o.jsx)("div",{className:"text-fd-text font-medium",children:l.ccpName})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Account:"}),(0,o.jsx)("div",{className:"text-fd-text font-mono",children:l.accountNumber})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Date:"}),(0,o.jsx)("div",{className:"text-fd-text",children:new Date(l.statementDate).toLocaleDateString()})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-fd-text-muted",children:"Status:"}),(0,o.jsxs)("div",{className:`flex items-center space-x-1 ${N(l.status)}`,children:[y(l.status),(0,o.jsx)("span",{className:"font-medium",children:l.status})]})]})]}),"PROCESSED"===l.status&&(0,o.jsxs)("div",{className:"border border-fd-border rounded-lg",children:[(0,o.jsx)("div",{className:"px-4 py-3 border-b border-fd-border bg-fd-dark",children:(0,o.jsx)("h4",{className:"font-medium text-fd-text",children:"Margin Positions"})}),m?(0,o.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"})}):i.length>0?(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-fd-dark text-xs",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 text-left text-fd-text-muted",children:"Position"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-fd-text-muted",children:"Account"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-fd-text-muted",children:"Product"}),(0,o.jsx)("th",{className:"px-4 py-2 text-right text-fd-text-muted",children:"VM"}),(0,o.jsx)("th",{className:"px-4 py-2 text-right text-fd-text-muted",children:"IM"}),(0,o.jsx)("th",{className:"px-4 py-2 text-right text-fd-text-muted",children:"Currency"})]})}),(0,o.jsx)("tbody",{className:"text-sm",children:i.map(e=>(0,o.jsxs)("tr",{className:"border-t border-fd-border hover:bg-fd-dark/50",children:[(0,o.jsx)("td",{className:"px-4 py-2 text-fd-text font-mono text-xs",children:e.positionId}),(0,o.jsx)("td",{className:"px-4 py-2 text-fd-text",children:e.ccpAccount}),(0,o.jsx)("td",{className:"px-4 py-2 text-fd-text",children:e.product}),(0,o.jsx)("td",{className:"px-4 py-2 text-right font-medium "+(e.variationMargin>=0?"text-green-400":"text-red-400"),children:pe(e.variationMargin)}),(0,o.jsx)("td",{className:"px-4 py-2 text-right text-fd-text font-medium",children:pe(e.initialMargin)}),(0,o.jsx)("td",{className:"px-4 py-2 text-right text-fd-text-muted",children:e.currency})]},e.id))})]})}):(0,o.jsx)("div",{className:"text-center py-8 text-fd-text-muted",children:"No positions found"})]}),l.errorMessage&&(0,o.jsxs)("div",{className:"mt-4 bg-red-500/20 border border-red-500/50 rounded-lg p-3",children:[(0,o.jsx)("div",{className:"text-red-400 text-sm font-medium mb-1",children:"Error Message:"}),(0,o.jsx)("div",{className:"text-red-300 text-sm",children:l.errorMessage})]})]})})]})},Ne=e=>{let{simmCalculations:t,asOfDate:r,onRefresh:s}=e;const[a,l]=(0,n.useState)(t.length>0?t[0]:null),[d,i]=(0,n.useState)(new Set),[c,u]=(0,n.useState)("assetClass");return(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg border border-fd-border p-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("svg",{className:"w-8 h-8 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-xl font-semibold text-fd-text",children:"SIMM Calculations"}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted",children:"Initial Margin Model"})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsxs)("span",{className:"text-sm text-fd-text-muted",children:["As of ",r]}),(0,o.jsx)("button",{onClick:s,className:"p-2 text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50 rounded-md transition-colors",title:"Refresh SIMM data",children:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),0===t.length?(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("svg",{className:"w-12 h-12 text-fd-text-muted mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("p",{className:"text-fd-text-muted",children:"No SIMM calculations available"}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted mt-1",children:"Upload CRIF files to generate calculations"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,o.jsx)("label",{className:"text-sm font-medium text-fd-text",children:"Calculation:"}),(0,o.jsx)("select",{value:(null===a||void 0===a?void 0:a.id)||"",onChange:e=>{const r=t.find(t=>t.id===e.target.value);l(r||null)},className:"bg-fd-dark border border-fd-border rounded-md px-3 py-2 text-fd-text focus:outline-none focus:ring-2 focus:ring-purple-500",children:t.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.portfolioId," - ",e.calculationDate," (",e.parametersVersion,")"]},e.id))})]}),a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"bg-fd-dark rounded-lg p-6 border border-fd-border mb-6",children:(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text-muted",children:"Total Initial Margin"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-fd-text mt-1",children:pe(a.totalInitialMargin)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text-muted",children:"Portfolio"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-1",children:a.portfolioId})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text-muted",children:"Parameters Version"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-1",children:a.parametersVersion})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text-muted",children:"Status"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(e=>{switch(e){case"COMPLETED":return(0,o.jsx)("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})});case"FAILED":return(0,o.jsx)("svg",{className:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})});case"PENDING":return(0,o.jsx)("svg",{className:"w-4 h-4 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return null}})(a.calculationStatus),(0,o.jsx)("span",{className:`text-lg font-semibold ${(e=>{switch(e){case"COMPLETED":return"text-green-400";case"FAILED":return"text-red-400";case"PENDING":return"text-yellow-400";default:return"text-fd-text-muted"}})(a.calculationStatus)}`,children:a.calculationStatus})]})]})]})}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg p-6 border border-fd-border mb-6",children:[(0,o.jsx)("h4",{className:"text-lg font-medium text-fd-text mb-4",children:"Asset Class Breakdown"}),(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.entries(a?a.buckets.reduce((e,t)=>{const r=t.assetClass;return e[r]||(e[r]={initialMargin:0,sensitivities:0,bucketCount:0}),e[r].initialMargin+=t.initialMargin,e[r].sensitivities+=t.sensitivities,e[r].bucketCount+=1,e},{}):{}).map(e=>{let[t,r]=e;return(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg p-4",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text-muted",children:t}),(0,o.jsx)("p",{className:"text-lg font-bold text-fd-text mt-1",children:pe(r.initialMargin)}),(0,o.jsxs)("p",{className:"text-xs text-fd-text-muted mt-1",children:[r.bucketCount," bucket",1!==r.bucketCount?"s":""]})]},t)})})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-lg border border-fd-border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("h4",{className:"text-lg font-medium text-fd-text",children:["Bucket Details (",a.buckets.length,")"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("label",{className:"text-sm text-fd-text-muted",children:"Group by:"}),(0,o.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"bg-fd-darker border border-fd-border rounded-md px-3 py-1 text-sm text-fd-text focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,o.jsx)("option",{value:"assetClass",children:"Asset Class"}),(0,o.jsx)("option",{value:"bucket",children:"Bucket"})]})]})]})}),(0,o.jsx)("div",{className:"overflow-hidden",children:Object.entries(a?a.buckets.reduce((e,t)=>{const r="assetClass"===c?t.assetClass:t.bucketNumber;return e[r]||(e[r]=[]),e[r].push(t),e},{}):{}).map(e=>{let[t,r]=e;return(0,o.jsxs)("div",{className:"border-b border-fd-border last:border-b-0",children:[(0,o.jsx)("div",{className:"px-6 py-3 bg-fd-darker/50",children:(0,o.jsx)("h5",{className:"font-medium text-fd-text",children:"assetClass"===c?`${t} Asset Class`:`Bucket ${t}`})}),r.map(e=>(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"px-6 py-4 hover:bg-fd-darker/30 cursor-pointer transition-colors",onClick:()=>(e=>{const t=new Set(d);t.has(e)?t.delete(e):t.add(e),i(t)})(`${e.assetClass}-${e.bucketNumber}`),children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("svg",{className:"w-4 h-4 text-fd-text-muted transition-transform "+(d.has(`${e.assetClass}-${e.bucketNumber}`)?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium text-fd-text",children:"assetClass"===c?`Bucket ${e.bucketNumber}`:e.assetClass}),(0,o.jsxs)("p",{className:"text-sm text-fd-text-muted",children:[be(e.sensitivities)," sensitivities"]})]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("p",{className:"font-medium text-fd-text",children:pe(e.initialMargin)}),(0,o.jsxs)("p",{className:"text-sm text-fd-text-muted",children:[be(e.initialMargin/a.totalInitialMargin*100,1),"%"]})]})]})}),d.has(`${e.assetClass}-${e.bucketNumber}`)&&(0,o.jsx)("div",{className:"px-6 pb-4 bg-fd-darker/20",children:(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-4",children:[(0,o.jsxs)("div",{className:"bg-fd-dark rounded-md p-3",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Delta"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-1",children:pe(e.delta)})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-md p-3",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Vega"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-1",children:pe(e.vega)})]}),(0,o.jsxs)("div",{className:"bg-fd-dark rounded-md p-3",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Curvature"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-1",children:pe(e.curvature)})]})]})})]},`${e.assetClass}-${e.bucketNumber}`))]},t)})})]})]})]})]})},ye=()=>{const[e,t]=(0,n.useState)(null),[r,s]=(0,n.useState)(!0),[a,l]=(0,n.useState)(null),[d,i]=(0,n.useState)("overview"),[c,u]=(0,n.useState)((new Date).toISOString().split("T")[0]),[x,m]=(0,n.useState)(!1),f=async e=>{try{s(!0),l(null);const r=e||c,n=await fetch(`/api/dashboard/reconciliation?asOfDate=${r}`,{headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();if("SUCCESS"!==a.status)throw new Error(a.message||"Failed to fetch dashboard data");t(a.data)}catch(r){console.error("Error fetching dashboard data:",r),l(r instanceof Error?r.message:"Unknown error occurred")}finally{s(!1)}};(0,n.useEffect)(()=>{f()},[c]),(0,n.useEffect)(()=>{let e;return x&&(e=setInterval(()=>{f()},3e4)),()=>{e&&clearInterval(e)}},[x,c]);const h=()=>{f()};return r&&!e?(0,o.jsx)("div",{className:"min-h-screen bg-fd-dark flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-fd-text-muted",children:"Loading dashboard data..."})]})}):a?(0,o.jsx)("div",{className:"min-h-screen bg-fd-dark flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center max-w-md",children:[(0,o.jsx)("svg",{className:"w-16 h-16 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text mb-2",children:"Error Loading Dashboard"}),(0,o.jsx)("p",{className:"text-fd-text-muted mb-4",children:a}),(0,o.jsx)("button",{onClick:h,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition-colors",children:"Try Again"})]})}):(0,o.jsx)("div",{className:"min-h-screen bg-fd-dark",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-fd-text",children:"Margin & Exposure Reconciliation"}),(0,o.jsx)("p",{className:"text-fd-text-muted mt-1",children:"Unified view of margin, SA-CCR, and SIMM data"})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("label",{className:"text-sm text-fd-text-muted",children:"As of:"}),(0,o.jsx)("input",{type:"date",value:c,onChange:e=>u(e.target.value),className:"bg-fd-darker border border-fd-border rounded-md px-3 py-2 text-fd-text focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("label",{className:"text-sm text-fd-text-muted",children:"Auto-refresh:"}),(0,o.jsx)("button",{onClick:()=>m(!x),className:"w-10 h-6 rounded-full transition-colors "+(x?"bg-blue-500":"bg-fd-border"),children:(0,o.jsx)("div",{className:"w-4 h-4 bg-white rounded-full transition-transform "+(x?"translate-x-5":"translate-x-1")})})]}),(0,o.jsx)("button",{onClick:h,disabled:r,className:"p-2 text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50 rounded-md transition-colors disabled:opacity-50",title:"Refresh data",children:(0,o.jsx)("svg",{className:"w-5 h-5 "+(r?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),(0,o.jsx)("div",{className:"flex space-x-1 bg-fd-darker rounded-lg p-1",children:[{id:"overview",label:"Overview",icon:"\ud83d\udcca"},{id:"margin",label:"Margin",icon:"\ud83d\udcb0"},{id:"saccr",label:"SA-CCR",icon:"\ud83d\udcc8"},{id:"simm",label:"SIMM",icon:"\ud83e\uddee"}].map(e=>(0,o.jsxs)("button",{onClick:()=>(e=>{i(e)})(e.id),className:"px-6 py-3 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 "+(d===e.id?"bg-blue-500 text-white":"text-fd-text-muted hover:text-fd-text hover:bg-fd-border/50"),children:[(0,o.jsx)("span",{children:e.icon}),(0,o.jsx)("span",{children:e.label})]},e.id))})]}),"overview"===d&&e&&(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,o.jsx)("div",{className:"bg-fd-darker rounded-lg p-6 border border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text-muted",children:"System Health"}),(0,o.jsxs)("p",{className:"text-2xl font-bold mt-1 "+(p=e.overallMetrics.systemHealthScore,p>=80?"text-green-400":p>=60?"text-yellow-400":"text-red-400"),children:[e.overallMetrics.systemHealthScore,"%"]})]}),(0,o.jsx)("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]})}),(0,o.jsx)("div",{className:"bg-fd-darker rounded-lg p-6 border border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text-muted",children:"Total Collateral"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-fd-text mt-1",children:pe(e.overallMetrics.totalCollateralExposure)})]}),(0,o.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})}),(0,o.jsx)("div",{className:"bg-fd-darker rounded-lg p-6 border border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text-muted",children:"Credit Exposure"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-fd-text mt-1",children:pe(e.overallMetrics.totalCreditExposure)})]}),(0,o.jsx)("div",{className:"w-12 h-12 bg-purple-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})}),(0,o.jsx)("div",{className:"bg-fd-darker rounded-lg p-6 border border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text-muted",children:"Exceptions"}),(0,o.jsx)("p",{className:"text-2xl font-bold mt-1 "+(e.reconciliationStatus.totalExceptions>0?"text-red-400":"text-green-400"),children:e.reconciliationStatus.totalExceptions})]}),(0,o.jsx)("div",{className:"w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg p-6 border border-fd-border",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-fd-text mb-4",children:"Data Freshness Status"}),(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(e.reconciliationStatus.dataFreshness).map(e=>{let[t,r]=e;const s=(e=>{const t=new Date,r=new Date(e),s=(t.getTime()-r.getTime())/6e4;return s<30?{status:"Fresh",color:"text-green-400"}:s<60?{status:"Recent",color:"text-yellow-400"}:{status:"Stale",color:"text-red-400"}})(r);return(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-fd-dark rounded-md",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium text-fd-text capitalize",children:t}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted",children:ge(r)})]}),(0,o.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.color} bg-current bg-opacity-20`,children:s.status})]},t)})})]}),(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg p-6 border border-fd-border",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-fd-text mb-4",children:"Margin Statement Summary"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-md font-medium text-fd-text mb-3",children:"By CCP"}),(0,o.jsx)("div",{className:"space-y-2",children:Object.values(e.marginSummary.marginByCcp).map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-fd-dark rounded-md",children:[(0,o.jsx)("span",{className:"font-medium text-fd-text",children:e.ccpName}),(0,o.jsx)("span",{className:"text-fd-text",children:pe(e.netMargin)})]},e.ccpName))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-md font-medium text-fd-text mb-3",children:"Processing Status"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-fd-dark rounded-md",children:[(0,o.jsx)("span",{className:"text-fd-text",children:"Processed"}),(0,o.jsx)("span",{className:"text-green-400 font-medium",children:e.marginSummary.statementsProcessed})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-fd-dark rounded-md",children:[(0,o.jsx)("span",{className:"text-fd-text",children:"Pending"}),(0,o.jsx)("span",{className:"text-yellow-400 font-medium",children:e.marginSummary.statementsPending})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-fd-dark rounded-md",children:[(0,o.jsx)("span",{className:"text-fd-text",children:"Failed"}),(0,o.jsx)("span",{className:"text-red-400 font-medium",children:e.marginSummary.statementsFailed})]})]})]})]})]})]}),"margin"===d&&e&&(0,o.jsx)(je,{asOfDate:e.asOfDate,onRefresh:h}),"saccr"===d&&e&&(0,o.jsx)(ve,{saCcrSummary:e.saCcrSummary,asOfDate:e.asOfDate,onRefresh:h}),"simm"===d&&(0,o.jsx)(Ne,{simmCalculations:(null===e||void 0===e?void 0:e.simmCalculations)||[],asOfDate:(null===e||void 0===e?void 0:e.asOfDate)||c,onRefresh:h}),(0,o.jsxs)("div",{className:"mt-8 text-center text-sm text-fd-text-muted",children:["Last updated: ",e?ge(e.generatedAt):"Never",x&&(0,o.jsx)("span",{className:"ml-2",children:"\u2022 Auto-refreshing every 30 seconds"})]})]})});var p},we=[{value:"SR_UNSEC",label:"Senior Unsecured"},{value:"SR_SEC",label:"Senior Secured"},{value:"SUBORD",label:"Subordinated"}],ke=[{value:"ANNUAL",label:"Annual"},{value:"SEMI_ANNUAL",label:"Semi-Annual"},{value:"QUARTERLY",label:"Quarterly"}],Se=[{value:"ACT_ACT",label:"ACT/ACT"},{value:"THIRTY_360",label:"30/360"}],Ce=["USD","EUR","GBP","JPY"],Ee=e=>{let{isOpen:t,onClose:r,onSuccess:s}=e;const[a,l]=(0,n.useState)({currency:"USD",couponFrequency:"SEMI_ANNUAL",dayCount:"ACT_ACT",seniority:"SR_UNSEC",settlementDays:2,faceValue:100,priceConvention:"CLEAN"}),[d,i]=(0,n.useState)({}),[c,u]=(0,n.useState)(!1),[f,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!f&&a.issuer){const e=m.find(e=>e.code===a.issuer);null!==e&&void 0!==e&&e.sector&&l(t=>({...t,sector:e.sector}))}},[a.issuer,f]);const p=(e,t)=>{"sector"===e&&h(!0),l(r=>({...r,[e]:t})),d[e]&&i(t=>({...t,[e]:""}))},b=()=>{l({currency:"USD",couponFrequency:"SEMI_ANNUAL",dayCount:"ACT_ACT",seniority:"SR_UNSEC",settlementDays:2,faceValue:100,priceConvention:"CLEAN"}),i({}),h(!1)};return t?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:r,children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-xl border border-fd-border max-w-4xl w-full max-h-[90vh] overflow-y-auto m-4",onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{className:"sticky top-0 bg-fd-darker border-b border-fd-border px-6 py-4 flex justify-between items-center z-10",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text",children:"Create New Bond"}),(0,o.jsx)("button",{onClick:r,className:"text-fd-text-muted hover:text-fd-text transition-colors","aria-label":"Close modal",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{var e;const t={};return null!==(e=a.issuer)&&void 0!==e&&e.trim()||(t.issuer="Issuer is required"),(!a.notional||a.notional<=0)&&(t.notional="Notional must be positive"),(!a.couponRate||a.couponRate<0)&&(t.couponRate="Coupon rate must be >= 0"),a.couponRate&&a.couponRate>1&&(t.couponRate="Coupon rate exceeds 100% - please verify"),a.issueDate||(t.issueDate="Issue date is required"),a.maturityDate||(t.maturityDate="Maturity date is required"),a.issueDate&&a.maturityDate&&new Date(a.issueDate)>=new Date(a.maturityDate)&&(t.maturityDate="Maturity date must be after issue date"),i(t),0===Object.keys(t).length})()){u(!0);try{const e=await y.createBond(a);s(e),b(),r()}catch(t){i({submit:t.message||"Failed to create bond"})}finally{u(!1)}}},className:"p-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsx)("div",{className:"md:col-span-2",children:(0,o.jsx)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4",children:"Issuer & Credit Information"})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Issuer ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsxs)("select",{value:a.issuer||"",onChange:e=>p("issuer",e.target.value),className:`w-full px-3 py-2 bg-fd-dark border ${d.issuer?"border-red-500":"border-fd-border"} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`,children:[(0,o.jsx)("option",{value:"",children:"Select Issuer"}),m.map(e=>(0,o.jsxs)("option",{value:e.code,children:[e.code," - ",e.name]},e.code))]}),d.issuer&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:d.issuer})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Seniority ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("select",{value:a.seniority,onChange:e=>p("seniority",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent",children:we.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:"Sector"}),(0,o.jsxs)("select",{value:a.sector||"",onChange:e=>p("sector",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent",children:[(0,o.jsx)("option",{value:"",children:"Auto-suggested from issuer"}),x.map(e=>(0,o.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:"ISIN"}),(0,o.jsx)("input",{type:"text",value:a.isin||"",onChange:e=>p("isin",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted",placeholder:"Optional",maxLength:12})]}),(0,o.jsx)("div",{className:"md:col-span-2 mt-4",children:(0,o.jsx)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4",children:"Bond Economics"})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Currency ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("select",{value:a.currency,onChange:e=>p("currency",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent",children:Ce.map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Notional ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:a.notional||"",onChange:e=>p("notional",parseFloat(e.target.value)),className:`w-full px-3 py-2 bg-fd-dark border ${d.notional?"border-red-500":"border-fd-border"} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted`}),d.notional&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:d.notional})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Coupon Rate (decimal) ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"number",step:"0.000001",value:a.couponRate||"",onChange:e=>p("couponRate",parseFloat(e.target.value)),className:`w-full px-3 py-2 bg-fd-dark border ${d.couponRate?"border-red-500":"border-fd-border"} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted`,placeholder:"e.g., 0.045 for 4.5%"}),d.couponRate&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:d.couponRate})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:"Coupon Frequency"}),(0,o.jsx)("select",{value:a.couponFrequency,onChange:e=>p("couponFrequency",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent",children:ke.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:"Day Count Convention"}),(0,o.jsx)("select",{value:a.dayCount,onChange:e=>p("dayCount",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent",children:Se.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsx)("div",{className:"md:col-span-2 mt-4",children:(0,o.jsx)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4",children:"Dates"})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Issue Date ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"date",value:a.issueDate||"",onChange:e=>p("issueDate",e.target.value),className:`w-full px-3 py-2 bg-fd-dark border ${d.issueDate?"border-red-500":"border-fd-border"} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}),d.issueDate&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:d.issueDate})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Maturity Date ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"date",value:a.maturityDate||"",onChange:e=>p("maturityDate",e.target.value),className:`w-full px-3 py-2 bg-fd-dark border ${d.maturityDate?"border-red-500":"border-fd-border"} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}),d.maturityDate&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:d.maturityDate})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:"Settlement Days"}),(0,o.jsx)("input",{type:"number",value:a.settlementDays||"",onChange:e=>p("settlementDays",parseInt(e.target.value)),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:"Face Value"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:a.faceValue||"",onChange:e=>p("faceValue",parseFloat(e.target.value)),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent placeholder-fd-text-muted"})]})]}),d.submit&&(0,o.jsx)("div",{className:"mt-4 p-3 bg-red-900/20 border border-red-500/30 rounded-md",children:(0,o.jsx)("p",{className:"text-sm text-red-400",children:d.submit})}),(0,o.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,o.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-darker focus:outline-none focus:ring-2 focus:ring-fd-green",children:"Cancel"}),(0,o.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 text-sm font-medium text-fd-dark bg-fd-green border border-transparent rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green disabled:bg-fd-green/50 disabled:cursor-not-allowed",children:c?"Creating...":"Create Bond"})]})]})]})}):null},De=e=>{var t,r,s,a;let{bondId:l,onClose:d}=e;const[i,c]=(0,n.useState)(null),[u,x]=(0,n.useState)(null),[m,f]=(0,n.useState)(!0),[h,p]=(0,n.useState)(null),[b,g]=(0,n.useState)("overview"),[v,j]=(0,n.useState)((new Date).toISOString().split("T")[0]),[N,w]=(0,n.useState)("0.03"),[k,S]=(0,n.useState)("0.01");(0,n.useEffect)(()=>{C()},[l]);const C=async()=>{try{f(!0);const e=await y.getBondById(l);c(e),p(null)}catch(e){p(e.message||"Failed to load bond details")}finally{f(!1)}},E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},D=e=>`${(100*e).toFixed(4)}%`;return m?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,o.jsx)("div",{className:"bg-fd-darker rounded-lg p-8 border border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-fd-green"}),(0,o.jsx)("p",{className:"text-fd-text",children:"Loading bond details..."})]})})}):h&&!i?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg p-8 border border-fd-border",children:[(0,o.jsx)("p",{className:"text-red-400 mb-4",children:h}),(0,o.jsx)("button",{onClick:d,className:"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-darker",children:"Close"})]})}):i?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:d,children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-xl border border-fd-border max-w-6xl w-full max-h-[90vh] overflow-y-auto m-4",onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{className:"sticky top-0 bg-fd-darker border-b border-fd-border px-6 py-4 flex justify-between items-center z-10",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text",children:"Bond Details"}),(0,o.jsxs)("p",{className:"text-sm text-fd-green",children:[i.issuer," - ",i.isin||"No ISIN"]})]}),(0,o.jsx)("button",{onClick:d,className:"text-fd-text-muted hover:text-fd-text transition-colors",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsx)("div",{className:"border-b border-fd-border px-6",children:(0,o.jsxs)("nav",{className:"flex space-x-8",children:[(0,o.jsx)("button",{onClick:()=>g("overview"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+("overview"===b?"border-fd-green text-fd-green":"border-transparent text-fd-text-muted hover:text-fd-text hover:border-fd-border"),children:"Overview"}),(0,o.jsx)("button",{onClick:()=>g("pricing"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+("pricing"===b?"border-fd-green text-fd-green":"border-transparent text-fd-text-muted hover:text-fd-text hover:border-fd-border"),children:"Pricing & Analytics"})]})}),(0,o.jsxs)("div",{className:"p-6",children:["overview"===b&&(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-3",children:"Issuer Information"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Issuer"}),(0,o.jsx)("p",{className:"font-medium text-fd-text",children:i.issuer})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Seniority"}),(0,o.jsx)("p",{className:"font-medium text-fd-text",children:"SR_UNSEC"===i.seniority?"Senior Unsecured":"SR_SEC"===i.seniority?"Senior Secured":"Subordinated"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Sector"}),(0,o.jsx)("p",{className:"font-medium text-fd-text",children:i.sector||"N/A"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"ISIN"}),(0,o.jsx)("p",{className:"font-medium text-fd-text",children:i.isin||"N/A"})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-3",children:"Bond Terms"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Notional"}),(0,o.jsx)("p",{className:"font-medium text-fd-text",children:E(i.notional,i.currency)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Coupon Rate"}),(0,o.jsx)("p",{className:"font-medium text-fd-text",children:D(i.couponRate)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Frequency"}),(0,o.jsx)("p",{className:"font-medium text-fd-text",children:"SEMI_ANNUAL"===i.couponFrequency?"Semi-Annual":"QUARTERLY"===i.couponFrequency?"Quarterly":"Annual"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Day Count"}),(0,o.jsx)("p",{className:"font-medium text-fd-text",children:"ACT_ACT"===i.dayCount?"ACT/ACT":"30/360"})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-3",children:"Key Dates"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Issue Date"}),(0,o.jsx)("p",{className:"font-medium text-fd-text",children:i.issueDate})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Maturity Date"}),(0,o.jsx)("p",{className:"font-medium text-fd-text",children:i.maturityDate})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Settlement Days"}),(0,o.jsx)("p",{className:"font-medium text-fd-text",children:i.settlementDays||2})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Face Value"}),(0,o.jsx)("p",{className:"font-medium text-fd-text",children:i.faceValue||100})]})]})]})]}),"pricing"===b&&(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-fd-dark p-4 rounded-lg border border-fd-border",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4",children:"Pricing Inputs"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:"Valuation Date"}),(0,o.jsx)("input",{type:"date",value:v,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:"Discount Rate (decimal)"}),(0,o.jsx)("input",{type:"number",step:"0.0001",value:N,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:"Hazard Rate (decimal)"}),(0,o.jsx)("input",{type:"number",step:"0.0001",value:k,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green"})]})]}),(0,o.jsx)("button",{onClick:async()=>{if(i)try{const e=await y.priceBond(i.id,v,parseFloat(N),parseFloat(k));x(e)}catch(e){p(e.message||"Failed to price bond")}},className:"mt-4 px-6 py-2 text-fd-dark bg-fd-green rounded-md hover:bg-fd-green-hover transition-colors",children:"Calculate Pricing"})]}),u&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"bg-fd-dark/50 p-4 rounded-lg border border-fd-border",children:[(0,o.jsx)("h4",{className:"text-sm font-semibold text-fd-text-muted mb-3",children:"Prices"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Clean Price"}),(0,o.jsx)("p",{className:"text-lg font-bold text-fd-green",children:void 0!==u.cleanPrice?u.cleanPrice.toFixed(4):"N/A"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Dirty Price"}),(0,o.jsx)("p",{className:"text-lg font-bold text-fd-green",children:void 0!==u.dirtyPrice?u.dirtyPrice.toFixed(4):"N/A"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Accrued Interest"}),(0,o.jsx)("p",{className:"text-lg font-bold text-fd-green",children:void 0!==u.accruedInterest?u.accruedInterest.toFixed(4):"N/A"})]})]})]}),(0,o.jsxs)("div",{className:"bg-fd-dark/50 p-4 rounded-lg border border-fd-border",children:[(0,o.jsx)("h4",{className:"text-sm font-semibold text-fd-text-muted mb-3",children:"Yields & Spreads"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Yield to Maturity"}),(0,o.jsx)("p",{className:"text-lg font-bold text-fd-text",children:void 0!==u.yieldToMaturity?D(u.yieldToMaturity):"N/A"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Z-Spread"}),(0,o.jsx)("p",{className:"text-lg font-bold text-fd-text",children:void 0!==u.zSpread?(L=u.zSpread,`${(1e4*L).toFixed(2)} bps`):"N/A"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Modified Duration"}),(0,o.jsx)("p",{className:"text-lg font-bold text-fd-text",children:void 0!==(null===(t=u.sensitivities)||void 0===t?void 0:t.modifiedDuration)?u.sensitivities.modifiedDuration.toFixed(4):"N/A"})]})]})]}),(0,o.jsxs)("div",{className:"bg-fd-dark/50 p-4 rounded-lg border border-fd-border",children:[(0,o.jsx)("h4",{className:"text-sm font-semibold text-fd-text-muted mb-3",children:"Present Values"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Risk-Free PV"}),(0,o.jsx)("p",{className:"text-lg font-bold text-fd-text",children:void 0!==u.pv?E(u.pv,i.currency):"N/A"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Risky PV (with defaults)"}),(0,o.jsx)("p",{className:"text-lg font-bold text-fd-text",children:void 0!==u.pvRisky?E(u.pvRisky,i.currency):"N/A"})]})]})]}),(0,o.jsxs)("div",{className:"bg-fd-dark/50 p-4 rounded-lg border border-fd-border",children:[(0,o.jsx)("h4",{className:"text-sm font-semibold text-fd-text-muted mb-3",children:"Risk Sensitivities"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"IR DV01"}),(0,o.jsx)("p",{className:"text-lg font-bold text-fd-text",children:void 0!==(null===(r=u.sensitivities)||void 0===r?void 0:r.irDv01)?E(u.sensitivities.irDv01,i.currency):"N/A"}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted mt-1",children:"1bp rate move"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Spread DV01"}),(0,o.jsx)("p",{className:"text-lg font-bold text-fd-text",children:void 0!==(null===(s=u.sensitivities)||void 0===s?void 0:s.spreadDv01)?E(u.sensitivities.spreadDv01,i.currency):"N/A"}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted mt-1",children:"1bp hazard move"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Jump to Default (JTD)"}),(0,o.jsx)("p",{className:"text-lg font-bold text-fd-text",children:void 0!==(null===(a=u.sensitivities)||void 0===a?void 0:a.jtd)?E(u.sensitivities.jtd,i.currency):"N/A"}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted mt-1",children:"Immediate default loss"})]})]})]})]}),!u&&(0,o.jsx)("div",{className:"text-center py-8",children:(0,o.jsx)("p",{className:"text-fd-text-muted",children:'Set pricing inputs above and click "Calculate Pricing" to view analytics'})})]})]}),(0,o.jsx)("div",{className:"sticky bottom-0 bg-fd-darker px-6 py-4 flex justify-end border-t border-fd-border",children:(0,o.jsx)("button",{onClick:d,className:"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-darker focus:outline-none focus:ring-2 focus:ring-fd-green",children:"Close"})})]})}):null;var L},Le=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!0),[a,l]=(0,n.useState)(null),[d,i]=(0,n.useState)(!1),[c,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{x()},[]);const x=async()=>{try{s(!0);const e=await y.getAllBonds();t(e),l(null)}catch(e){l(e.message||"Failed to load bonds")}finally{s(!1)}};return r?(0,o.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-fd-green"})}):a?(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Bonds"}),(0,o.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,o.jsx)("p",{children:a})}),(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)("button",{onClick:x,className:"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200",children:"Retry"})})]})]})}):(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-fd border border-fd-border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-fd-border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text",children:"Bonds"}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("span",{className:"text-sm text-fd-text-muted",children:[e.length," bond",1!==e.length?"s":""]}),(0,o.jsx)("button",{onClick:()=>i(!0),className:"px-3 py-1 bg-fd-green text-fd-dark rounded hover:bg-fd-green-hover text-sm font-medium",children:"+ New Bond"})]})]})}),0===e.length?(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("svg",{className:"mx-auto h-12 w-12 text-fd-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("h3",{className:"mt-2 text-sm font-medium text-fd-text",children:"No bonds found"}),(0,o.jsx)("p",{className:"mt-1 text-sm text-fd-text-muted",children:"Create your first bond to get started."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{className:"bg-fd-dark",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"ISIN"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Issuer"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Seniority"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Notional"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Coupon"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Maturity"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-fd-darker divide-y divide-fd-border",children:e.map(e=>{return(0,o.jsxs)("tr",{className:"cursor-pointer hover:bg-fd-dark transition-colors",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm font-medium text-fd-text",children:e.isin||"N/A"})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:e.issuer})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:"SR_UNSEC"===e.seniority?"Sr. Unsec.":"SR_SEC"===e.seniority?"Sr. Sec.":"Subord."})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:(r=e.notional,s=e.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:0}).format(r))})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:(t=e.couponRate,`${(100*t).toFixed(2)}%`)})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-fd-text",children:e.maturityDate})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,o.jsx)("button",{onClick:()=>u(e.id),className:"text-fd-green hover:text-fd-green-hover transition-colors",children:"View Details"})})]},e.id);var t,r,s})})]})}),(0,o.jsx)(Ee,{isOpen:d,onClose:()=>i(!1),onSuccess:e=>{t(t=>[...t,e])}}),c&&(0,o.jsx)(De,{bondId:c,onClose:()=>u(null)})]})},Te=()=>(0,o.jsx)("div",{className:"px-4 py-6",children:(0,o.jsx)(Le,{})}),Me=e=>{let{onSelectBasket:t,onCreateClick:r,refreshTrigger:s}=e;const[a,l]=(0,n.useState)([]),[d,i]=(0,n.useState)(!0),[c,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{x()},[s]);const x=async()=>{try{i(!0);const e=await Q.getAllBaskets();l(e),u(null)}catch(e){u(e.message||"Failed to load baskets")}finally{i(!1)}};return d?(0,o.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,o.jsx)("div",{className:"text-fd-text-muted",children:"Loading baskets..."})}):c?(0,o.jsxs)("div",{className:"bg-red-900/20 border border-red-500/30 text-red-400 px-4 py-3 rounded-md",children:["Error: ",c]}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-fd-text",children:"Basket Credit Derivatives"}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted mt-1",children:"First-to-Default, N-th-to-Default, and Tranchette instruments"})]}),r&&(0,o.jsx)("button",{onClick:r,className:"px-4 py-2 bg-fd-green text-fd-dark rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green font-medium",children:"+ Create Basket"})]}),0===a.length?(0,o.jsx)("div",{className:"text-center py-12",children:(0,o.jsx)("p",{className:"text-fd-text-muted",children:"No baskets found. Create your first basket to get started."})}):(0,o.jsx)("div",{className:"bg-fd-darker border border-fd-border rounded-lg overflow-hidden",children:(0,o.jsxs)("table",{className:"min-w-full",children:[(0,o.jsx)("thead",{className:"bg-fd-dark",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Name"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Type"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Constituents"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Currency"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Notional"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Maturity"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"divide-y divide-fd-border",children:a.map(e=>{var r;return(0,o.jsxs)("tr",{className:"hover:bg-fd-dark transition-colors",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-fd-text",children:e.name}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:(0,o.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-fd-green/20 text-fd-green",children:e.type.replace(/_/g," ")})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.constituentCount||(null===(r=e.constituents)||void 0===r?void 0:r.length)||0}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.currency}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text",children:e.notional.toLocaleString()}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-fd-text-muted",children:e.maturityDate}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,o.jsx)("button",{onClick:()=>t&&t(e),className:"text-fd-green hover:text-fd-green-hover font-medium",children:"View Details"})})]},e.id)})})]})})]})},Pe=[{value:"FIRST_TO_DEFAULT",label:"First-to-Default (FTD)"},{value:"NTH_TO_DEFAULT",label:"N-th-to-Default"},{value:"TRANCHETTE",label:"Tranchette (Loss Slice)"}],Re=[{value:"QUARTERLY",label:"Quarterly"},{value:"SEMI_ANNUAL",label:"Semi-Annual"},{value:"ANNUAL",label:"Annual"}],Ie=[{value:"ACT_360",label:"ACT/360"},{value:"ACT_365",label:"ACT/365"},{value:"THIRTY_360",label:"30/360"}],Ae=["USD","EUR","GBP","JPY"],Fe=[{value:"SR_UNSEC",label:"Senior Unsecured"},{value:"SR_SEC",label:"Senior Secured"},{value:"SUBORD",label:"Subordinated"}],Ue=e=>{let{isOpen:t,onClose:r,onSuccess:s}=e;const[a,l]=(0,n.useState)({type:"FIRST_TO_DEFAULT",currency:"USD",premiumFrequency:"QUARTERLY",dayCount:"ACT_360",constituents:[]}),[d,i]=(0,n.useState)([]),[c,u]=(0,n.useState)({}),[x,f]=(0,n.useState)(!1),h=()=>{const e=d.reduce((e,t)=>e+(t.weight||0),0);return 0===e?d.map(()=>1/d.length):d.map(t=>(t.weight||0)/e)},p=(e,t)=>{l(r=>({...r,[e]:t})),c[e]&&u(t=>({...t,[e]:""}))},b=(e,t,r)=>{const s=[...d];s[e]={...s[e],[t]:r},i(s);const n=`constituent_${e}_${t}`;c[n]&&u(e=>({...e,[n]:""}))},g=()=>{l({type:"FIRST_TO_DEFAULT",currency:"USD",premiumFrequency:"QUARTERLY",dayCount:"ACT_360",constituents:[]}),i([]),u({})};if(!t)return null;const v=h();return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:r,children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-xl border border-fd-border max-w-6xl w-full max-h-[90vh] overflow-y-auto m-4",onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{className:"sticky top-0 bg-fd-darker border-b border-fd-border px-6 py-4 flex justify-between items-center z-10",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text",children:"Create New Basket Derivative"}),(0,o.jsx)("button",{onClick:r,className:"text-fd-text-muted hover:text-fd-text transition-colors","aria-label":"Close modal",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{var e;const t={};null!==(e=a.name)&&void 0!==e&&e.trim()||(t.name="Basket name is required"),a.type||(t.type="Basket type is required"),"NTH_TO_DEFAULT"===a.type&&(!a.nth||a.nth<1)&&(t.nth="N-th value must be >= 1"),"NTH_TO_DEFAULT"===a.type&&a.nth&&a.nth>d.length&&(t.nth=`N-th value cannot exceed number of constituents (${d.length})`),"TRANCHETTE"===a.type&&((void 0===a.attachmentPoint||a.attachmentPoint<0||a.attachmentPoint>1)&&(t.attachmentPoint="Attachment point must be between 0 and 1"),(void 0===a.detachmentPoint||a.detachmentPoint<0||a.detachmentPoint>1)&&(t.detachmentPoint="Detachment point must be between 0 and 1"),void 0!==a.attachmentPoint&&void 0!==a.detachmentPoint&&a.attachmentPoint>=a.detachmentPoint&&(t.detachmentPoint="Detachment point must be greater than attachment point")),(!a.notional||a.notional<=0)&&(t.notional="Notional must be positive"),a.maturityDate||(t.maturityDate="Maturity date is required"),0===d.length&&(t.constituents="At least one constituent is required");const r=new Set;return d.forEach((e,s)=>{e.issuer?(r.has(e.issuer)&&(t[`constituent_${s}_issuer`]="Duplicate issuer"),r.add(e.issuer)):t[`constituent_${s}_issuer`]="Issuer is required"}),u(t),0===Object.keys(t).length})()){f(!0);try{const e=h(),t={...a,constituents:d.map((t,r)=>({issuer:t.issuer,weight:e[r],recoveryOverride:t.recoveryOverride,seniority:t.seniority||"SR_UNSEC",sector:t.sector}))},n=await Q.createBasket(t);s(n),g(),r()}catch(t){u({submit:t.message||"Failed to create basket"})}finally{f(!1)}}},className:"p-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsx)("div",{className:"md:col-span-2",children:(0,o.jsx)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4",children:"Basic Information"})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Basket Name ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"text",value:a.name||"",onChange:e=>p("name",e.target.value),className:`w-full px-3 py-2 bg-fd-dark border ${c.name?"border-red-500":"border-fd-border"} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`,placeholder:"e.g., US_IG_TECH_FTD_5Y"}),c.name&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:c.name})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Basket Type ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("select",{value:a.type,onChange:e=>p("type",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent",children:Pe.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),c.type&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:c.type})]}),"NTH_TO_DEFAULT"===a.type&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["N-th Value ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"number",min:"1",value:a.nth||"",onChange:e=>p("nth",parseInt(e.target.value)),className:`w-full px-3 py-2 bg-fd-dark border ${c.nth?"border-red-500":"border-fd-border"} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`,placeholder:"e.g., 2 for 2nd-to-default"}),c.nth&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:c.nth})]}),"TRANCHETTE"===a.type&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Attachment Point (0-1) ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"number",step:"0.01",min:"0",max:"1",value:a.attachmentPoint||"",onChange:e=>p("attachmentPoint",parseFloat(e.target.value)),className:`w-full px-3 py-2 bg-fd-dark border ${c.attachmentPoint?"border-red-500":"border-fd-border"} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`,placeholder:"e.g., 0.03 for 3%"}),c.attachmentPoint&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:c.attachmentPoint})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Detachment Point (0-1) ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"number",step:"0.01",min:"0",max:"1",value:a.detachmentPoint||"",onChange:e=>p("detachmentPoint",parseFloat(e.target.value)),className:`w-full px-3 py-2 bg-fd-dark border ${c.detachmentPoint?"border-red-500":"border-fd-border"} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`,placeholder:"e.g., 0.07 for 7%"}),c.detachmentPoint&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:c.detachmentPoint})]})]}),(0,o.jsx)("div",{className:"md:col-span-2 mt-4",children:(0,o.jsx)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4",children:"Economics"})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Currency ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("select",{value:a.currency,onChange:e=>p("currency",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent",children:Ae.map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Notional ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:a.notional||"",onChange:e=>p("notional",parseFloat(e.target.value)),className:`w-full px-3 py-2 bg-fd-dark border ${c.notional?"border-red-500":"border-fd-border"} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`,placeholder:"e.g., 10000000"}),c.notional&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:c.notional})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:"Premium Frequency"}),(0,o.jsx)("select",{value:a.premiumFrequency,onChange:e=>p("premiumFrequency",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent",children:Re.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:"Day Count Convention"}),(0,o.jsx)("select",{value:a.dayCount,onChange:e=>p("dayCount",e.target.value),className:"w-full px-3 py-2 bg-fd-dark border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent",children:Ie.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-fd-text mb-1",children:["Maturity Date ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"date",value:a.maturityDate||"",onChange:e=>p("maturityDate",e.target.value),className:`w-full px-3 py-2 bg-fd-dark border ${c.maturityDate?"border-red-500":"border-fd-border"} text-fd-text rounded-md focus:outline-none focus:ring-2 focus:ring-fd-green focus:border-transparent`}),c.maturityDate&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-400",children:c.maturityDate})]}),(0,o.jsxs)("div",{className:"md:col-span-2 mt-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsxs)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide",children:["Basket Constituents ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("button",{type:"button",onClick:()=>{i([...d,{seniority:"SR_UNSEC"}])},className:"px-3 py-1 text-sm bg-fd-green text-fd-dark rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green",children:"+ Add Constituent"})]}),c.constituents&&(0,o.jsx)("p",{className:"mb-2 text-sm text-red-400",children:c.constituents}),d.map((e,t)=>{const r=v[t];return(0,o.jsxs)("div",{className:"mb-4 p-4 bg-fd-dark border border-fd-border rounded-md",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,o.jsxs)("h4",{className:"text-sm font-medium text-fd-text",children:["Constituent #",t+1]}),(0,o.jsx)("button",{type:"button",onClick:()=>(e=>{i(d.filter((t,r)=>r!==e))})(t),className:"text-red-400 hover:text-red-300 text-sm",children:"Remove"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-fd-text-muted mb-1",children:["Issuer ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsxs)("select",{value:e.issuer||"",onChange:e=>b(t,"issuer",e.target.value),className:`w-full px-2 py-1 text-sm bg-fd-darker border ${c[`constituent_${t}_issuer`]?"border-red-500":"border-fd-border"} text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green`,children:[(0,o.jsx)("option",{value:"",children:"Select Issuer"}),m.map(e=>(0,o.jsxs)("option",{value:e.code,children:[e.code," - ",e.name]},e.code))]}),c[`constituent_${t}_issuer`]&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-400",children:c[`constituent_${t}_issuer`]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-fd-text-muted mb-1",children:"Weight (optional, normalized)"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:e.weight||"",onChange:e=>b(t,"weight",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-sm bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green",placeholder:`Auto: ${r.toFixed(4)}`}),void 0!==r&&(0,o.jsxs)("p",{className:"mt-1 text-xs text-fd-text-muted",children:["Normalized: ",(100*r).toFixed(2),"%"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-fd-text-muted mb-1",children:"Seniority"}),(0,o.jsx)("select",{value:e.seniority||"SR_UNSEC",onChange:e=>b(t,"seniority",e.target.value),className:"w-full px-2 py-1 text-sm bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green",children:Fe.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-fd-text-muted mb-1",children:"Recovery Override (0-1)"}),(0,o.jsx)("input",{type:"number",step:"0.01",min:"0",max:"1",value:e.recoveryOverride||"",onChange:e=>b(t,"recoveryOverride",parseFloat(e.target.value)),className:"w-full px-2 py-1 text-sm bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green",placeholder:"Optional"})]}),(0,o.jsxs)("div",{className:"md:col-span-2",children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-fd-text-muted mb-1",children:"Sector (optional)"}),(0,o.jsx)("input",{type:"text",value:e.sector||"",onChange:e=>b(t,"sector",e.target.value),className:"w-full px-2 py-1 text-sm bg-fd-darker border border-fd-border text-fd-text rounded-md focus:outline-none focus:ring-1 focus:ring-fd-green",placeholder:"e.g., TECH, ENERGY"})]})]})]},t)})]})]}),c.submit&&(0,o.jsx)("div",{className:"mt-4 p-3 bg-red-900/20 border border-red-500/30 rounded-md",children:(0,o.jsx)("p",{className:"text-sm text-red-400",children:c.submit})}),(0,o.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,o.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-fd-text bg-fd-dark border border-fd-border rounded-md hover:bg-fd-darker focus:outline-none focus:ring-2 focus:ring-fd-green",children:"Cancel"}),(0,o.jsx)("button",{type:"submit",disabled:x,className:"px-4 py-2 text-sm font-medium text-fd-dark bg-fd-green border border-transparent rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green disabled:bg-fd-green/50 disabled:cursor-not-allowed",children:x?"Creating...":"Create Basket"})]})]})]})})},_e=e=>{var t;let{basket:r,onClose:s}=e;const[a,l]=(0,n.useState)(null),[d,i]=(0,n.useState)(!1),[c,u]=(0,n.useState)(null),[x,m]=(0,n.useState)(!1),f=(e,t)=>void 0===e?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e),h=e=>void 0===e?"N/A":`${e.toFixed(2)} bps`;return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:s,children:(0,o.jsxs)("div",{className:"bg-fd-darker rounded-lg shadow-xl border border-fd-border max-w-6xl w-full max-h-[90vh] overflow-y-auto m-4",onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{className:"sticky top-0 bg-fd-darker border-b border-fd-border px-6 py-4 flex justify-between items-center z-10",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-fd-text",children:r.name}),(0,o.jsx)("p",{className:"text-sm text-fd-text-muted mt-1",children:(e=>{switch(e){case"FIRST_TO_DEFAULT":return"First-to-Default";case"NTH_TO_DEFAULT":return`${r.nth}-th-to-Default`;case"TRANCHETTE":return`Tranchette [${(100*r.attachmentPoint).toFixed(1)}% - ${(100*r.detachmentPoint).toFixed(1)}%]`;default:return e}})(r.type)})]}),(0,o.jsx)("button",{onClick:s,className:"text-fd-text-muted hover:text-fd-text transition-colors","aria-label":"Close modal",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Currency"}),(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text mt-1",children:r.currency})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Notional"}),(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text mt-1",children:f(r.notional,r.currency)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Maturity"}),(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text mt-1",children:r.maturityDate})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Frequency"}),(0,o.jsx)("p",{className:"text-sm font-medium text-fd-text mt-1",children:r.premiumFrequency})]})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("button",{onClick:async()=>{i(!0),u(null);try{const e=await Q.priceBasket(r.id,{paths:5e4,includeSensitivities:!0});l(e),m(!0)}catch(e){u(e.message||"Failed to price basket")}finally{i(!1)}},disabled:d,className:"px-4 py-2 text-sm font-medium text-fd-dark bg-fd-green border border-transparent rounded-md hover:bg-fd-green-hover focus:outline-none focus:ring-2 focus:ring-fd-green disabled:bg-fd-green/50 disabled:cursor-not-allowed",children:d?"Pricing...":a?"Reprice":"Price Basket"}),c&&(0,o.jsx)("p",{className:"mt-2 text-sm text-red-400",children:c})]}),a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4",children:"Pricing Metrics"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{className:"bg-fd-dark border border-fd-border rounded-lg p-4",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Fair Spread"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-fd-green mt-2",children:h(a.fairSpreadBps)})]}),(0,o.jsxs)("div",{className:"bg-fd-dark border border-fd-border rounded-lg p-4",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Premium PV"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-fd-text mt-2",children:f(a.premiumLegPv,r.currency)})]}),(0,o.jsxs)("div",{className:"bg-fd-dark border border-fd-border rounded-lg p-4",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Protection PV"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-fd-text mt-2",children:f(a.protectionLegPv,r.currency)})]})]})]}),a.convergence&&(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4",children:"Convergence Diagnostics"}),(0,o.jsx)("div",{className:"bg-fd-dark border border-fd-border rounded-lg p-4",children:(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Paths Used"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-1",children:a.convergence.pathsUsed.toLocaleString()})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Iterations"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-1",children:a.convergence.iterations})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted",children:"Standard Error"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-1",children:h(a.convergence.standardErrorFairSpreadBps)})]})]})})]}),x&&a.sensitivities&&(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4",children:"Risk Sensitivities"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{className:"bg-fd-dark border border-fd-border rounded-lg p-4",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Spread DV01"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-2",children:f(a.sensitivities.spreadDv01,r.currency)}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted mt-1",children:"Per 1bp parallel shift"})]}),(0,o.jsxs)("div",{className:"bg-fd-dark border border-fd-border rounded-lg p-4",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Correlation Beta"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-2",children:(null===(t=a.sensitivities.correlationBeta)||void 0===t?void 0:t.toFixed(4))||"N/A"}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted mt-1",children:"Per 1% correlation shift"})]}),(0,o.jsxs)("div",{className:"bg-fd-dark border border-fd-border rounded-lg p-4",children:[(0,o.jsx)("p",{className:"text-xs text-fd-text-muted uppercase tracking-wide",children:"Recovery01"}),(0,o.jsx)("p",{className:"text-lg font-semibold text-fd-text mt-2",children:f(a.sensitivities.recovery01,r.currency)}),(0,o.jsx)("p",{className:"text-xs text-fd-text-muted mt-1",children:"Per 1% recovery shift"})]})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{className:"text-sm font-semibold text-fd-text-muted uppercase tracking-wide mb-4",children:["Basket Constituents (",r.constituents.length,")"]}),(0,o.jsx)("div",{className:"bg-fd-dark border border-fd-border rounded-lg overflow-hidden",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-fd-border",children:[(0,o.jsx)("thead",{className:"bg-fd-darker",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Issuer"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Weight"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Seniority"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Recovery"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-fd-text-muted uppercase tracking-wider",children:"Sector"})]})}),(0,o.jsx)("tbody",{className:"divide-y divide-fd-border",children:r.constituents.map((e,t)=>(0,o.jsxs)("tr",{className:"hover:bg-fd-darker transition-colors",children:[(0,o.jsx)("td",{className:"px-4 py-3 text-sm text-fd-text",children:e.issuer}),(0,o.jsxs)("td",{className:"px-4 py-3 text-sm text-fd-text",children:[(100*(e.weight||0)).toFixed(2),"%"]}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm text-fd-text",children:e.seniority}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm text-fd-text",children:e.recoveryOverride?`${(100*e.recoveryOverride).toFixed(1)}%`:"Default"}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm text-fd-text-muted",children:e.sector||"-"})]},t))})]})})]})]})]})})},Oe=()=>{const[e,t]=(0,n.useState)(null),[r,s]=(0,n.useState)(!1),[a,l]=(0,n.useState)(0);return(0,o.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,o.jsx)(Me,{onSelectBasket:e=>{t(e)},onCreateClick:()=>{s(!0)},refreshTrigger:a}),(0,o.jsx)(Ue,{isOpen:r,onClose:()=>s(!1),onSuccess:e=>{l(e=>e+1)}}),e&&(0,o.jsx)(_e,{basket:e,onClose:()=>t(null)})]})};const Be=function(){const[e,t]=(0,n.useState)("form"),[r,s]=(0,n.useState)(!1),[a,l]=(0,n.useState)(null),[d,i]=(0,n.useState)(null),[c,x]=(0,n.useState)(!1),m=(0,n.useRef)(null);return(0,o.jsxs)("div",{className:"min-h-screen bg-fd-dark",children:[(0,o.jsx)(u,{}),(0,o.jsx)("div",{className:"bg-fd-darker border-b border-fd-border",children:(0,o.jsx)("div",{className:"px-8 py-4",children:(0,o.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,o.jsx)("button",{onClick:()=>t("form"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("form"===e?"bg-fd-green text-fd-dark":"text-fd-text hover:text-fd-green hover:bg-fd-dark"),children:"New Single-Name CDS"}),(0,o.jsx)("button",{onClick:()=>t("blotter"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("blotter"===e?"bg-fd-green text-fd-dark":"text-fd-text hover:text-fd-green hover:bg-fd-dark"),children:"Single-Name CDS Blotter"}),(0,o.jsx)("button",{onClick:()=>t("bonds"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("bonds"===e?"bg-fd-green text-fd-dark":"text-fd-text hover:text-fd-green hover:bg-fd-dark"),children:"Corporate Bonds"}),(0,o.jsx)("button",{onClick:()=>t("baskets"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("baskets"===e?"bg-fd-green text-fd-dark":"text-fd-text hover:text-fd-green hover:bg-fd-dark"),children:"Basket Derivatives"}),(0,o.jsx)("button",{onClick:()=>t("portfolios"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("portfolios"===e?"bg-fd-green text-fd-dark":"text-fd-text hover:text-fd-green hover:bg-fd-dark"),children:"CDS Portfolios"}),(0,o.jsx)("button",{onClick:()=>t("simm"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("simm"===e?"bg-fd-green text-fd-dark":"text-fd-text hover:text-fd-green hover:bg-fd-dark"),children:"SIMM Calculator"}),(0,o.jsx)("button",{onClick:()=>t("sa-ccr"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("sa-ccr"===e?"bg-fd-green text-fd-dark":"text-fd-text hover:text-fd-green hover:bg-fd-dark"),children:"SA-CCR Exposure"}),(0,o.jsx)("button",{onClick:()=>t("margin-statements"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("margin-statements"===e?"bg-fd-green text-fd-dark":"text-fd-text hover:text-fd-green hover:bg-fd-dark"),children:"Margin Statements"}),(0,o.jsx)("button",{onClick:()=>t("reconciliation"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("reconciliation"===e?"bg-fd-green text-fd-dark":"text-fd-text hover:text-fd-green hover:bg-fd-dark"),children:"Reconciliation Dashboard"})]})})}),(0,o.jsxs)("div",{className:"p-8",children:["form"===e?(0,o.jsx)(w,{onSubmit:async e=>{try{const t={referenceEntity:e.referenceEntity,notionalAmount:e.notionalAmount,spread:e.spread,maturityDate:e.maturityDate,effectiveDate:e.effectiveDate,counterparty:e.counterparty,tradeDate:e.tradeDate,currency:e.currency,premiumFrequency:e.premiumFrequency,dayCountConvention:e.dayCountConvention,buySellProtection:e.buySellProtection,restructuringClause:e.restructuringClause,paymentCalendar:e.paymentCalendar,accrualStartDate:e.accrualStartDate,tradeStatus:e.tradeStatus,recoveryRate:e.recoveryRate,settlementType:e.settlementType,obligation:e.obligation},r=await S.createTrade(t);l(r),s(!0)}catch(t){const e=t instanceof Error?t.message:"Unknown error occurred";alert(`Error booking trade: ${e}`)}}}):"blotter"===e?(0,o.jsx)(M,{ref:m,onTradeSelect:e=>{i(e),x(!0)}}):"portfolios"===e?(0,o.jsx)(ie,{}):"margin-statements"===e?(0,o.jsx)(me,{}):"simm"===e?(0,o.jsx)(fe,{}):"sa-ccr"===e?(0,o.jsx)(he,{}):"reconciliation"===e?(0,o.jsx)(ye,{}):"bonds"===e?(0,o.jsx)(Te,{}):"baskets"===e?(0,o.jsx)(Oe,{}):null,(0,o.jsx)(k,{isOpen:r,trade:a,onClose:()=>{s(!1),l(null)}}),(0,o.jsx)(H,{isOpen:c,trade:d,onClose:()=>{x(!1),i(null)},onTradesUpdated:e=>{m.current&&m.current.refreshTrades()}})]})]})};a.createRoot(document.getElementById("root")).render((0,o.jsx)(n.StrictMode,{children:(0,o.jsx)(Be,{})}))})();
//# sourceMappingURL=main.7f1f3b1e.js.map